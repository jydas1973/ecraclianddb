/ $Header: ecs/ecra/ecracli/src/User_manual.txt /main/664 2025/12/03 01:14:10 hcheon Exp $
/
/ User_manual.txt
/
/ Copyright (c) 2017, 2025, Oracle and/or its affiliates. 
/
/   NAME
/     User_manual.txt - User manual for the ecracli utility
/
/   DESCRIPTION
/     Provides a list of available clis, its usage, examples and parameters
/
/   NOTES
/     None
/
/   MODIFIED   (MM/DD/YY)
/   hcheon      12/02/25 - 37891253 Changed exadata_log_to_lumberjack config
/   zpallare    11/05/25 - Enh 38475153 - EXACS - Update ecracli backfill
/                          mvmsubnetinfo command to support multiple subnet
/                          ingestion
/   illamas     11/03/25 - Enh 38470291 - Guest release
/   jzandate    11/03/25 - Enh 38475130 - Adding admin smarting backfill
/   illamas     10/30/25 - Enh 38470264 Guest reserve
/    hbpatel    10/25/25 - Enh 37912972 - Exacc gen2: api call to force deletion of infra from 
/                           ecra during decommissioning process in case of disconnected
/   zpallare    10/18/25 - Enh 38443483 - EXADBXS - Create new rack reserve api
/                          for exadbxs/basedb flows
/   gvalderr    09/26/25 - Enh 38469560 - Adding vmclusterocid details command
/                          for exacompute
/   caborbon    09/22/25 - ENH 38410599 - Adding new command to ingest cabinets
/                          in ecracli
/   gvalderr    09/01/25 - Bug 38359812 - Adding command for geting DomUs of 
/                          exacompute Dom0
/   caborbon    08/25/25 - Bug 38320140 - refactor in some Bonding APIs
/   jzandate    08/14/25 - Enh 37866326 - Volume validations
/   jvaldovi    08/13/25 - Enh 38266898 - Vmboss_Scheduler | Need A Api Command
/                          For Configured_Features Update
/   caborbon    08/06/25 - ENH 38135205 - Adding logic to restore ilom password
/                          from vault
/   zpallare    07/28/25 - Enh 38155092 - Add support to update the initial
/                          payload from workflows
/   jzandate    07/09/25 - Bug 38161492 - restorelocal param seq is mandatory
/   caborbon    07/08/25 - ENH 38140076 - Adding option to execute exacompute
/                          ports with caviumid or hwid
/   hbpatel     07/07/25 - Enh 38036654: Exacc gen 2| infra patching | 
/                           need ecra api to provide report on submitted wf's
/   caborbon    06/24/25 - Enh 37972633 - Adding ilom command execution api
/   luperalt    06/19/25 - Bug 37768099 - Added acfs commands
/   jvaldovi    06/17/25 - Enh 37985641 - Exacs Ecra - Ecra To Configure Dbaas
/                          Tools Name Rpm Basd On Cloud Vendor
/   sdevasek    06/06/25 - Enh 37987808 - PROVIDE ECRACLI COMMAND TO DELETE
/                          LAUNCHNODE METADATA 
/   gvalderr    05/28/25 - Enh 37968006 - Adding extra parameters for domu
/                          search command
/   zpallare    05/26/25 - Enh 37864848 - EXACS: ADBS: Key exchange api support
/                          : ecra support
/   jzandate    05/14/25 - Enh 37903772 - Adding dbvolumes operations
/   antamil     04/24/25 - bug 37333331 : MULTIPLE LAUNCH NODE SUPPORT
/   rgmurali    04/21/25 - Enh 37858050 - Add sitegroup support for exadb-xs
/   zpallare    04/03/25 - Enh 36912966 - Shared exadata racks: store metatada
/                          in ecra to denote capacity given to exascale service
/   ybansod     03/18/25 - Enh 34558104 - PROVIDE API FOR ECRA RESOURCE
/                          BLACKOUT
/   jzandate    03/18/25 - Enh 37525577 - Adding configured features
/   antamil     03/26/24 - Enh 37511230 - LaunchNodeType support on cli
/   bshenoy     03/13/25 - EXACS-143285 - QFAB support for X11M & ABS Threshold
/   sdevasek    03/10/25 - Enh 37473003 - ECRA REGISTER BASED ON RACK MODEL
/   zpallare    03/10/25 - Enh 37657856 - EXACS ECRA - Convert tempsskey
/                          endpoint to workflow
/   ririgoye    03/05/25 - Bug 35270020 - Create an api in ecra for mars team
/                          to push the vmcore to mos
/   illamas     03/04/25 - Enh 37630003 - Custom fs exacompute CS
/   jzandate    02/27/25 - Enh 37614605 - Compute cleanup
/   jzandate    02/11/25 - Enh 37464161 - adding cloud info options
/   hcheon      02/10/25 - 37379447 whitelist infra for fault injection test
/   jyotdas     02/07/25 - Enh 37267618 - Expose Ecra api to return registered
/                          versions for image series in exacs
/   sdevasek    01/30/25 - Enh 37511298 - ECRACLI CHANGES FOR LAUNCH NODE 
/                          REGISTRATION ENDPOINT SHOULD TAKE LAUNCHNODE TYPE
/                          AS INPUT
/   ririgoye    01/27/25 - Enh 35023107 - EXACS ECRA - CREATE API THAT RETURNS
/                          COMPUTED SIZE OF THE EXISTING GUESTS
/   abysebas    01/27/25 - Enh 37497061 - SKIP RESIZEDGSIZES STEPS
/                          CONDITIONALLY FROM ADD CELL FLOW
/   gvalderr    01/22/25 - Enh 37464170 - Create endpoint for retreiving and
/                          updating json input of a given task
/   jvaldovi    01/15/25 - Enh 37477523 - Exacs Sitegroup - Include Mtu Config
/                          Per Site Group
/   zpallare    01/13/25 - Enh 37327315 - EXACS ECRA - Create rotatekeys
/                          command at exaunit level
/   jvaldovi    01/09/25 - Bug 37331575 - Ecra:Ecracli: Sitegroup Apis To Have
/                          Unified Field Names In Add Vs Update Endpoints
/   zpallare    01/06/25 - Enh 35170531 - EXACS:ECRACLI,sshkey, add support to
/                          get sshkeys of a cei
/   abysebas    12/20/24 - Enh 37407965 - EXACS ECRA - NEW ECRA ENDPOINT TO
/                          UPDATE THE NTP AND DNS DETAILS IN THE XML, FOR THE
/                          EXISTING PROVISIONED CLUSTERS
/   abyayada    12/12/24 - 37371775 : Support to get nat and hostname map
/   zpallare    12/09/24 - Enh 36754344 - EXACS Compatibility - create new apis
/                          for compatibility matrix and algorithm for locking
/   jzandate    11/26/24 - Enh 36979496 - Adding history backup in analytics
/                          table
/   gvalderr    11/26/24 - Enh 37316013 - Adding command for updating and
/                          listing files
/   zpallare    11/25/24 - Enh 34972266 - EXACS Compatibility - create new
/                          tables to support compatibility on operations
/   gvalderr    11/25/24 - Enh 37123564 - Addng extra commands for managing
/                          shared racks
/   gvalderr    11/07/24 - Enh 37197084 - Adding request addregistry command
/   araghave    11/05/24 - Enh 37115530 - ADD NEW SWITCH TARGET REFERENCE IN
/                          INFRA PATCHING CODE
/   illamas     10/30/24 - Enh 37224619 - Add/Delete fabric
/   jzandate    10/22/24 - Enh 37169671 - Adding par url generation for
/                          objects, only read
/   jzandate    10/21/24 - Enh 37159566 - Adding vmbackup history
/   jvaldovi    10/17/24 - Enh 37181642 - Add Cloud_Provider_Az And
/                          Cloud_Provider_Building To Site Groups Table In Ecra
/   gvalderr    10/04/24 - Enh 37108164 - Adding new params to exaunit detail
/                          update
/   jzandate    07/10/24 - Enh 36906964 - Automating secure erase certificate 
/                          upload to oss
/   gvalderr    09/25/24 - Enh 37025370 -Adding extradetail parameter to
/                          ecracli exacompute listclusters
/   jzandate    09/13/24 - Enh 37025361 - Adding service detail cmd
/   araghave    09/12/24 - Enh 36923844 - INFRA PATCHING CHANGES TO SUPPORT
/                          PATCHING ADMIN SWITCH
/   gvalderr    09/11/24 - Enh 36990685 - Adding command for exaunit securevms
/   rgmurali    09/10/24 - Enh 36995884 - Configuring vmbackup cronjob on dom0
/   jyotdas     09/08/24 - ENH 36108574 - API to update ecra with dom0 and
/                          cells version
/   illamas     09/03/24 - Enh 36918015 - Mark nathostname in ecs_domus and
/                          generate a new one for vm move
/   jzandate    08/30/24 - Enh 36990358 - updating parameters
/   piyushsi    08/27/24 - Enh 36991930 ECRA Database Heartbeat Monitoring
/   zpallare    08/26/24 - Bug 36959599 - EXACS: Indigo feature needs an
/                          ecracli command to update sitegrp information
/   jzandate    08/20/24 - Enh 36904108 - Adding secure erase commends
/   luperalt    08/14/24 - Bug 36907987 Added undo exascale operation
/   illamas     08/09/24 - Enh 36893856 - Adding support to get exacompute
/                          template filtering with vmclusterocid
/   nitishgu    08/07/24 - BUG 36273903 - ECRACLI/API FOR SETTING CABINET STATE
/                          TO READY SHOULD CHECK IF AVAILABILITY >= THRESHOLD
/   illamas     08/07/24 - Enh 36797845 - Deconfigure roce IPs
/   gvalderr    08/05/24 - Enh 36903587 - Adding Delete cell to run sanity
/                          check
/   rgmurali    08/05/24 - Enh 36918660 - cli support for RoCE IP configure
/   cgarud      07/29/24 - exacs-125367 - QFAB reservation for high utilization
/                          QFABsbased on threshold values.
/   jvaldovi    07/26/24 - Enh 36858584 - Ecra: Multicloud: Add Site Group Data
/                          To Ecra
/   jzandate    07/25/24 - Enh 36870390 - Adding restore location after wf
/                          finishes
/   illamas     07/22/24 - Enh 36793533 - Remove node from XML
/   ybansod     07/19/24 - Enh 35070702 - PROVIDE ECRACLI AND API TO VALIDATE
/                          PASSWORDS STORED IN SIV
/   jyotdas     07/16/24 - Enh 36799146 - CLI to sync ecra metadata for vm
/                          state with actual state of the vm in infra
/   araghave    07/15/24 - Enh 36830077 - CLEANUP KSPLICE CODE FROM
/                          INFRAPATCHING FILES
/   luperalt    07/10/24 - Bug 36754210 - Added backfill vnic_cabinets
/                          operation
/   antamil    07/09/24 - Bug 35827899 - Changes to make infraName optional
/                          for register launchnode
/   jzandate    07/08/24 - Enh 36816574 - updating vmbackup help
/   jzandate    07/02/24 - Enh 36197323 - Adding exadata models
/   illamas     07/02/24 - Enh 36793084 - Mount and unmount support for
/                          exacompute
/   caborbon    06/25/24 - ENH 36754615 - Adding Global FS Encryption property
/   gvalderr    06/24/24 - Enh 36334590 - Adding command for purging archived
/                          nodes
/   gvalderr    06/19/24 - Enh 36746365 - Adding help for filesystem reshape
/   jvaldovi    06/18/24 - Enh 36697212 - Ecra: Remote Execution Cli Cannot
/                          Reach Out To Specified Cps In Exacc
/   jzandate    06/13/24 - Enh 36721694 - Adding status check
/   caborbon    06/12/24 - Bug 36695576 - changes in capacity getavailability
/                          output
/   zpallare    06/07/24 - Enh 36628793 - ECRA EXACS - Add property description
/                          column for new properties
/   jzandate    05/28/24 - Enh 36587400 - Adding vmbackup local restore
/   gvalderr    05/24/24 - Enh 36334590 - Add command for archiving, retriving
/                          and reporting nodes
/   llmartin    05/23/24 - Bug 36646014 - Add option to skip IPs validations
/   jzandate    05/14/24 - Enh 36193252 - Adding Artifact workflow
/   rgmurali    05/13/24 - ER 36009525 - Endpoint to check if exascale pool is created
/   abyayada    05/12/24 - ER 36428455 - Ecracli to enhance VMbackup listing
/                          using exaocid
/   zpallare    05/03/24 - Enh 36315071 - EXACS ECRA - create/modify new
/                          endpoint to set asm power limit
/   jvaldovi    04/30/24 - Enh 36478797 - Node Recovery : Ecra Api For Free
/   abyayada    04/29/24 - 36428455 - ECRACLI TO ENHANCE VMBACKUP LISTING USING
/                          EXAOCID
/   nitishgu    04/23/24 - ENH: 36406876 - PROVIDE ECRA SUPPORT FOR IORM
                           SET/GET DBPLAN (ENHANCED VERSION) AND SET/GET CLUSTERPLAN
/   antamil     04/24/24 - 36547575 Handle launch node for single_vm clusters
/   jzandate    04/23/24 - Enh 36479065 - Adding new status endpoint
/   zpallare    04/22/24 - Enh 36520348 - ECRA EXACS - Review idempotency on
/                          mvm apis
/   jyotdas     04/13/24 - Enh 36406646 - handle rack model for fetching image
/                          version during infrapatching
/   jzandate    04/10/24 - Bug 36419742 - Adding filter for single dom0
/                          hostname
/   zpallare    04/01/24 - Enh 36452336 - ECRA api to handle disable and enable
/                          bonding on compute nodes coming from an x8m standard
/                          rack
/   jiacpeng    04/01/24 - EXACS-129321: reformat SLA report api for OneView
/                          integration
/   cgarud      04/01/24 - 35339379 - ecracli API for updating multiple cavium
/                          properties (id, ip, mac) for a particular cavium
/   zpallare    03/22/24 - Enh 36390188 - EXACS: Add new endpoint to retrieve
/                          request data
/   zpallare    03/20/24 - Bug 36268401 - EXACS-EXACLOUD: ECRACLI hung at
/                          connecting to endpoint and getting version info...
/   jyotdas     03/19/24 - Bug 36228424 - ECRA infra patch registration to
/   pverma      03/15/24 - Bug 36077336: Add support for WF janitor restart
/   jiacpeng    03/15/24 - exacs-127613: Add cli support for topology proximity
/                          api
/   jzandate    03/15/24 - Enh 36394639 - Adding new endpoint for xml details
/   seha        02/29/24 - 36014885 Added netchk parameter to rackhealth api
/   zpallare    02/02/24 - Enh 36228435 - EXADB-XS: ECRA: Implement new api to
/                          secure vms : /exacompute/clusters/securevms
/   jvaldovi    02/01/24 - Bug 36250371 - Ecs_Sitegroups_Table And
/                          Ecs_Hw_Cabinets Does Not Have Relation With Regards
/                          To Site Group Information
/   jiacpeng    01/26/24 - exacs-124163 add topology network switch api
/   zpallare    01/17/24 - Enh 35865892 - ECRA, ECRACLI - Provide mechanism to
/                          connect to a different ecraserver
/   zpallare    01/10/24 - Bug 36110921 - Node recovery : ecra apis support
/                          required for sop automation
/   anudatta    09/12/24 - 36088456 - IORM async Api
/   zpallare    01/09/24 - Enh 36166029 - ECRACLI - Create ecracli commands to
/                          update xml
/   zpallare    01/08/24 - Enh 36068362 - Create ecra api to invoke an endpoint
/                          for time zone changes
/   caborbon    12/13/23 - Bug 36095897 - Adding custom linux ids in hardware tenancy property put command
/   zpallare    12/12/23 - Enh 35325671 - Api to get version information for
/                          all the components in ecra
/   jvaldovi    12/11/23 - Bug 36095989 - Ecra Template File Has Password In
/                          Clear Text
/   jzandate    12/06/23 - Bug 36077623 - Removing VMBackuposs cmd
/   zpallare    12/06/23 - Enh 35960747 - Add a property get types to know all
/                          the property types that we have in the env
/   zpallare    12/05/23 - Bug 35866829 - Allow retry after setting
/                          exacloud_cs_skip_swversion_check
/   hcheon      11/29/23 - 36052156 Added diagnosis rackhealth_* cmds
/   jzandate    11/28/23 - Bug 35998623 - Adding dom0version to ecracli
/   zpallare    11/21/23 - Enh 36023077 - ECRA - Create exadatainfrastructure
/                          command to get the initial payload
/   ddelgadi    11/17/23 - Enh 35756274 Add information about site group 
/   zpallare    11/14/23 - Enh 35797702 - EXADB-XS: ECRA to enhance the
/                          listclusters api to include more information
/   jzandate    11/10/23 - Enh 359782975 - Adding serverscount to sanitycheck
/                          cmd
/   zpallare    11/08/23 - Bug 35961238 - ECRA: ECRACLI - Fix filters in
/                          cabinet list command
/   gvalderr    10/31/23 - Enh 35832683 - adding delete storage endpoint
/   illamas     10/27/23 - Catalog support more than one exaversion
/   zpallare    10/27/23 - Enh 35823610 - EXACS:Preprovisioning:need ecra
/                          endpoint for get compute vnics
/   ybansod     10/23/23 - Enh 35678058 - Add ecracli command for Fleet
/                          HardwareNodes update async api
/   caborbon    10/19/23 - Bug 35792183 - adding cabinet modelsubtype command
/   zpallare    10/12/23 - Enh 35823587 - EXACS: Preprovisioning need ecra
/                          endpoint for get subnets
/   jvaldovi    10/10/23 - Enh 35892155 - Ecra Indigo - Create Backfilling Apis
/                          To Populate Indigo Data
/   zpallare    10/06/23 - Bug 35862588 - ECRA, ECRACLI - Fix vm stop and
/                          exaunit suspend
/   zpallare    10/03/23 - Enh 35819391 - EXACS - Cabinets port api to support
/                          cabinetname parameter
/   jiacpeng    09/27/23 - add cabinet serieal number in inventory api
/   jiacpeng    09/22/23 - redesign of SLA feature
/   pkbose      09/21/23 - EXACS-106515 topology API
/   gvalderr    09/21/23 - Enh 35631676 - Adding get vault access details
/                          endpoint
/   zpallare    09/19/23 - Bug 35810502 - EXACS Ecracli - Review parameters in
/                          Ecracli VMBackup Tool
/   illamas     09/18/23 - Enh 35797697 - Filter hw by cabinet name and service
/                          type
/   illamas     09/08/23 - Enh 35677356 - GI support
/   gvalderr    09/01/23 - Enh 35751657 - Adding delete sshkeys endpoint
/   byyang      08/26/23 - bug 33754780 enhance schedule cmd usability
/   zpallare    08/22/23 - Enh 35665349 - EXACS: normalize the parameter to
/                          indicate a dom0 in reserve, addcompute,
/                          deletecompute in ecracli
/   hcheon      08/21/23 - 35619159 Search url for adbcs patch logs
/   zpallare    08/17/23 - Enh 35617595 - Command to get payload for some
/                          operation
/   zpallare    08/09/23 - Enh 35587158 - List all nat ips from dom0
/   jzandate    08/04/23 - Enh 35651071 - Adding delete ECRA_FILE from date
/   illamas     07/27/23 - Enh 35640773 - Pre vm move
/   ybansod     07/25/23 - Enh 35475687 - Add ecracli commands for system vault
/                          CRUDL operations
/   gvalderr    07/24/23 - Enh 35621839 - Adding filesystem option to
/                          detail_update endpoint
/   jzandate    11/07/23 - Enh 35538698 - Adding display option to info cmd to display details for exainfra
/   anudatta    07/14/23 - ENH 35548767 - Precheck Reshape Exacompute
/   hcheon      07/10/23 - 34764008 Log search url for given request
/   illamas     07/04/23 - Enh 35300907 - vm restore exacompute
/   jzandate    06/30/23 - Bug 35156973 - Adding capacitymove documentation
/   caborbon    06/23/23 - ENH 35402932 - Adding capacity compatibility command
/   gvalderr    06/22/23 - Modifying Cabinet get elastic help for autoupdate
/                          option
/   ririgoye    06/22/23 - Enh 35319264 - EXACS MVM: CREATE DROP
/                          EXADATAINFRASTRUCTURE API
/   aadavalo    06/21/23 - Enh 35435491 - update reshape cluster to support
/                          filesystem resize
/   ybansod     06/17/23 - ENH 35454583 - ADD ECRA API FOR EDV VOLUMEMOUNTNAMES
/   illamas     06/15/23 - Enh 35447004 - Short response for cluster details
/   gvalderr    06/14/23 - Adding capacity filesytem definitions command
/   gvalderr    05/22/23 - Adding capacity getavailability help information
/   illamas     05/19/23 - Bug 35410985 - Fixes for template
/   illamas     05/15/23 - Enh 35268841 - Exacompute templates
/   illamas     05/13/23 - Enh 35268795 - Store nodeOcid and initiator
/   gvalderr    05/12/23 - Enh 35328793 - EXADB-XS: ECRA API TO PROVIDE KVM
/                          HOST SSHKEY
/   rmavilla    05/12/23 - exacs-96388 ECRA: Bonding Precheck API should
/                          support async URI functionality for all scenarios.
/   aadavalo    05/10/23 - EXACS-104356 - Add gold VM backup support for ecra
/   gvalderr    05/10/23 - Adding help for commands of status_comment
/   jiacpeng    05/09/23 - add enable SLA by tenancy
/   jzandate    05/05/23 - Enh 35108484 - Adding get,delete,create DNS methods
/                          to OciResource
/   antamil     04/28/23 - ENH 35091346 - ECRA CLI TO REGISTER,DERGISTER
/                          and GET LAUNCH NODES
/   ddelgadi    04/27/23 - bug 35219691 - update info for capacity reserve, dom0_bonding 
/   diguma      04/24/23 - Bug 34392890 - checking connectivity if domu plugin is enabled
/   gvalderr    04/24/23 - Adding help info for commands cabinet getxml and
/                          updatexml
/   jzandate    04/20/23 - Enh 35161257 - Adding oci conectivity check
/   ririgoye    04/20/23 - Enh 35279455 - Added info for pre-prov jobs get, update and scheduler commands.
/   aadavalo    04/19/23 - Enh 35132786 - vm backup support for dom0 sending
/   gvalderr    04/18/23 - Adding cabinets get elastic large command help
/   anudatta    04/18/22 - Bug 35281539 : Precheck API for  exadatainfrastructure reshapecluster operation
/   kukrakes    04/12/23 - ENH 35276852 - ADD SANITY CHECK API FOR THE
/                          PROVISIONING OF A CLUSTER CONFIG IN ECRA
/   gvalderr    03/28/23 - Modifying bonding restart and bonding status
/                          endpoints
/   anudatta    04/18/22 - Bug 35281539 : Precheck API for  exadatainfrastructure reshapecluster operation
/   ririgoye    03/24/23 - Enh 34402212 - Added ECRA health check endpoint spec
/   antamil     03/14/23 - Enh 35108948 cli support for qfab patch
/   gvalderr    03/14/23 - Modifying linkfailover command help.
/   illamas     03/11/23 - Enh 35080777 - Exacompute scale
/   rgmurali    03/06/23 - ER 35080784 - Idempotency support for placement
/   luperalt    03/02/23 - Bug 35112601 Added enableVMConsole command
/   aadavalo    02/24/23 - Enh 35048310 - Add exacspreprov user manual
/   luperalt    02/17/23 - Bug 34926012 Added vmconsole user help
/   illamas     02/08/23 - Enh 35029804 - Support accept rack name in rack
/   rmavilla    02/07/23 - exacs-91468 ALLOW ECRA TO IMPORT A PARTIALLY
/                          INGESTED CABINET
/   jzandate    02/03/23 - Bug 34863490 - Adding new operation for bonding
/                          status
/   rgmurali    02/01/23 - Enh 34925514 - Add node to MD mapping support
/   aadavalo    01/31/23 - Add action param in help for resetcavium command
/   jvaldovi    01/24/23 - Enh 34825983 - Ecra: Create Endpoint To Enable Sop
/                          Calls From Ecra
/   illamas     01/16/23 - Enh 34983763 - Endpoint restart monitor
/   aadavalo    01/10/23 - Jira EXACS-104355 - Add ecracli commands to support
/                          vm golden image new options
/   illamas     01/10/23 - Enh 34901089 - List racks with oracle hostname
/   ririgoye    01/02/23 - Added getoperationdetails info
/   pverma      12/18/22 - ocicapacity release/reserve API imple
/   gvalderr    12/14/22 - Adding usage instructions for ecra getfile command
/   abherrer    12/13/22 - Enh 33040415 - added parameters for patchesreport
/   ddelgadi    12/09/22 - Enh 34833717 - Add command to show detail profiling
/   rgmurali    12/05/22 - ER 34696811 - Provide unlock API
/   illamas     11/29/22 - Enh 34581266 - Added reserved cores/memory
/   pverma      11/22/22 - Add details of fixXmlActionTag usage
/   ddelgadi    11/16/22 - Enh 34579733 - Add rackname for updateNetMetadata
/   jzandate    11/15/22 - Bug 34700954 - Adding rack drop to ecracli
/   diguma      11/13/22 - ER 34444560 - adding parameter
/                          --skip_gi_db_validation for patchmgr
/   illamas     11/10/22 - Enh 34784491 - Target device support
/   rgmurali    11/09/22 - Bug 34784596 - Placement plan details fix
/   ddelgadi    11/09/22 - Enh 34705200 - Add suport for resources in addcluster
/   rmavilla    11/06/22 - EXACS-73257 PROVIDE ECRA APIs FOR CAVIUM OPERATIONS
/                          TO SUPPORT CAVIUM REPLACEMENT IN BONDED NODE AND
/                          CLUSTER
/   jiacpeng    11/04/22 - adding endpoint for getting SLA based on infraOcid
/                          (CEI)
/   ybansod     10/21/22 - Bug-34613544 Adding command to get wf_server status
/   rgmurali    10/17/22 - ER 34325936 - MD support in ECRA
/   jzandate    10/05/22 - Bug 34649384 - Add support for single dom0 rpmupdate
/   pverma      10/03/22 - Restore allocation cmd imple
/   jzandate    10/03/22 - Bug 34640803 - Changing inventory
/                          update_node_details filters to lowercase
/   illamas     09/22/22 - Enh 34567610 - Support error code for exadb-v
/   jzandate    09/20/22 - Bug 34616926 - Adding DomU command to ecracli
/   jvaldovi    09/15/22 - Enh 33994048 - Ecra To Send Region Info On Exacloud
/                          Start Call, Remove Region Endpoint Call
/   rmavilla    09/13/22 - EXACS-96336 ECRA - VM Move in
/                          Exacompute/ExascaleEXACS-96339 ECRA - VM Move Sanity
/                          Check in Exacompute/Exascale
/   rgmurali    09/08/22 - ER 34544811 - Support linkfailover for bonding
/   illamas     09/01/22 - Enh 34530558 - List VMs based on oracle hostname
/   caborbon    09/01/22 - Bug 34409879 - Adding new values in
/                          exadatainfrastructure get and info outputs.
/   illamas     08/30/22 - Enh 34411011 - Active cavium
/   jzandate    08/29/22 - Enh 34511129 - Adding command to ping exaunit vm
/   aadavalo    08/25/22 - Enh 34534047 - Reset cavium API needs to support
/                          start and stop actions
/   rgmurali    08/24/22 - ER 34530504 - type is a keyword, fix it for rack nodes 
/   aadavalo    08/22/22 - Enh 34453046 - Adding get all fault domains command
/   ririgoye    08/15/22 - Enh 34409795 - ecra should have a summary of the
/                          available nodes across all fabric, fault domains...
/   ddelgadi    07/28/22 - Bug 34413294 - Add rackname option in ocicapacity
/                          command in option enableNs
/   illamas     07/28/22 - Enh 34425302 - Rack reserve/release with vmClusterId
/   ririgoye    07/21/22 - Enh 34349156 - Add getxmlinfo command optional params
/   caborbon    07/20/22 - Bug 34343793 - Adding new option info to
/                          infrastructure command
/   bshenoy     07/16/22 - Bug 34184276: Endpoint to save FS location & ecs
/                          series for dyn task tar
/   illamas     07/12/22 - Enh 34295307 - Improve analytics for capacity,create
/                          infra and rack reserve mvm
/   hcheon      07/11/22 - 34340409 Changed rsyslog config param
/   ddelgadi    07/08/22 - Bug 34330466 - Add parameter alloperations
/   rgmurali    06/24/22 - ER-34318923 - Add spare cavium ip updation
/   rgmurali    06/21/22 - Bug 34290175 - Add clustertag for elastic nodes
/   rgmurali    06/17/22 - Bug 34294182 - Send mac address to exacloud
/   llmartin    06/14/22 - Enh 34235229 - Patch XML with missing nodes
/   rmavilla    06/13/22 - ENH 33963739 - BONDING MIGRATION: ADD A PRECHECK IN
/                          ECRA THAT CAN BE CALLED BEFORE MIGRATION
/   aadavalo    06/09/22 - Enh 34248435 - EXACS - CREATE VALIDATE XML ENDPOINT
/                          FOR A RACK
/   hcheon      06/02/22 - 34166256 Added SLA of tenancies
/   aadavalo    05/31/22 - Bug 34228681 - Parsing issues in getxmlinfo
/   illamas     05/30/22 - Enh 34165620 - Adding support to show post checks
/                          templates
/   illamas     05/23/22 - Enh 34165620 - Adding support to purge singleton
/   rmavilla    05/13/22 - BUG 33963739
/   illamas     05/12/22 - Bug 34154895 - Adding pk for metadata update
/   ddelgadi    05/06/22 - BUG 33195567 Added to profiling the infrastructure
/                          option
/   jyotdas     05/05/22 - Enh 34042024 - Ecra api to display all prior patch
/                          versions
/   marislop    04/29/22 - ENH 34009216 - Dataplane diagnostics api
/   aadavalo    04/22/22 - Enh 34092046 - EXACS MVM - REMOVE JSONPAYLOD
/                          PARAMETER IN DELETE COMPUTE API
/   ddelgadi    04/13/22 - Bug 34050387 - Add option for obtains subnets of 
/                          the cabinets
/   rgmurali    04/12/22 - Enh 34062991 - Support exascale ip range
/   ashisban    04/07/22 - Enh 34036211 - IMPLEMENT ECRACLI COMMANDS FOR
/                          EXISTING RESHAPE PRECHECK APIS IN ECRA
/   jvaldovi    04/07/22 - Bug 34013904 - Ecra:Update Regions In Prod
/                          Environment Is Failing Due Exassh Connection
/   abherrer    04/05/22 - Enh 33372007 - Changed the message for the 
/                          serviceType argument in exaversion register
/   aadavalo    03/29/22 - ER 33817649 - Adding exaunit getcspayload command
/   aadavalo    03/25/22 - Bug 33983891 - Added materializedlocalcopy and
/                          activeblockcommit params
/   marislop    03/16/22 - ENH 30833652 - ECRA/ExaAgent communication
/   llmartin    03/15/22 - Enh 33846537 - SanityCheck support for ExaCS MVM
/   ddelgadi    03/09/22 - add parameter VALIDATE_MAX_SIZE due to missing
/                          according to documentation
/   caborbon    03/07/22 - Enh 33882107 - Adding filter option for
/                          integrityDataChecker
/   llmartin    03/04/22 - Enh 33408159 - Delete cell API
/   illamas     03/01/22 - Enh 33910631 - Add nat vlan configuration for mvm
/                          domu host
/   marislop    02/25/22 - ENH 33867580 - Add SiV parameters to fsencryption
/   illamas     02/24/22 - Bug 33891504 - Fixing missing information for
/                          exadatainfrastructure command
/   aadavalo    02/23/22 - Enh 33846431 - EXACS - ADD ECRACLI COMMAND TO GET
/                          INFO FROM XML
/   seha        02/16/22 - Bug-32260715 Run AV/FIM on a specific host 
/   llmartin    02/16/22 - Enh 33055667 - OciBM Migration, SVM to MVM
/   caborbon    02/04/22 - Enh 33630707 adding command for integrityDataChecker
/   caborbon    02/04/22 - Enh 33630707 adding command for integrityDataChecker
/   essharm     02/02/22 - Bug-33676011 Added activate elastic computes commands
/   illamas     01/28/22 - Enh 33509359 - Store and retrieve exacompute payload
/   aadavalo    01/27/22 - Bug 32008642 - PROVIDE CONSISTENT SYNTAX FOR ECRACLI
/                          COMMANDS
/   aadavalo    01/27/22 - 32789578 - ECRA. PROVIDE FUNCIONALITY TO FILTER
/                          ECRACLI INFO OUTPUT
/   aadavalo    01/24/22 - SUPPRESS ADDITIONAL OUTPUT FROM ECRACLI INFO
/   pverma      01/20/22 - Elastic compute support
/   araghave    01/18/22 - Enh 30646084 - Require ability to specify compute
/                          nodes to include as part of Patching process
/   rgmurali    01/18/22 - ER 33539014 - T93 blackout support
/   jvaldovi    01/11/22 - Enh 33605620 - Ecra Deployer To Create
/                          Regions-Config.Json And Communicate Changes To
/                          Exacloud
/   illamas     01/04/22 - Enh 33676584 - Changing reshape input from JSON to
/   sdevasek    12/23/21 - Bug 33689708 - INFRA PATCHING CODE IMPROVEMENT
/                          WITH PLUGIN MESSAGE AND ECRACLI HELP
/   jyotdas     12/20/21 - Enh 33095986 - Cleanup exadata bundle patches and
/                          images regularly in EXACS
/   rgmurali    12/15/21 - ER 33671567 - Minor updates to fleet state
/   aadavalo    12/14/21 - Enh 33612595 - VM-BACKUP: OS VM BACKUP TOOL NEEDS TO
/                          PROVIDE SUPPORT FOR FAILED BACKUPS
/   illamas     12/14/21 - Enh 33508854 - Delete cluster exacompute
/   illamas     12/10/21 - Enh 33508821 - Create Service exacompute
/   rgmurali    12/09/21 - ER 33509397 - Chaine state store support
/   hcheon      12/07/21 - 33496439 Added inventory resetvlan
/   araghave    11/23/21 - Enh 33338757 - REMOVE MODIFY_AT_PREREQ AND MODIFY
/                          INFRA PATCHING CONF CHANGES IN CPS OS UPGRADER
/                          SCRIPT
/   marislop    11/10/21 - ENH 33392447 - Update parameter bucket namespace to
/                          mandatory in filesystem encryption
/   llmartin    11/08/21 - Enh 33318820 - ExaCS MVM, Add storage
/   aadavalo    11/04/21 - Enh 33527704 - ENHANCE ECRA CAVIUM T93 RESET API TO
/                          CHECK DBNODE STATE
/   aadavalo    10/20/21 - Enh 33431064 - ECRA CREATE NEW ENDPOINT FOR
/                          COLLECTING T93 DIAG INFO FROM ILOM
/   rgmurali    10/09/21 - ER 33159369 - Gcs data requirements
/   sdevasek    09/30/21 - ENH 33400429 - CLEAN UP OF MODIFY AT PREREQ FROM
/                          ADDITIONAL OPTIONS
/   illamas     09/23/21 - Enh 33381947 - Moving specs from
/   sdevasek    09/22/21 - Bug 32799615 - EXADATA VM CLUSTER OS IMAGE UPDATE
/   aadavalo    09/20/21 - Enh 33304243 - ECRA CREATE NEW ENDPOINT FOR TURN OFF
/                          T93 SLOT
/   marislop    09/14/21 - ENH- 33324101 fsencryption update attribute
/   rgmurali    08/24/21 - ER 32256415 - Bonding custom vip support
/   rgmurali    08/23/21 - Er 33250690 - Add delete endpoint for vmbackuposs
/   illamas     08/20/21 - Enh 33125794 - Enh rackports for mvm
/   rgmurali    08/12/21 - Enh 33186942 - Update cabinet details
/   illamas     08/04/21 - Enh 33055641 - New apis for rack reserve/release
/   rgmurali    08/03/21 - ER 33027372 - Bond monitor rpm update support
/   illamas     08/02/21 - Enh 33170748 - Get checks that failed, filter by
/                          mandatory
/   rgmurali    08/02/21 - ER 33182127 - Rack ports for compute-only cabinet
/   byyang      07/30/21 - bug 32932746 change scheduler target_server scheme
/   marislop    07/28/21 - ENH 32941844 Filesystem encryption
/   illamas     07/26/21 - Bug 33141790 - Automatic policy store should include
/                          network communication
/   jvaldovi    07/22/21 - Enh 33120371 - Ecradpy, Add Start Time To History
/                          Upgrade
/   illamas     07/12/21 - Enh 33105554 - Identify policies for KVM or IB in
/                          SELinux
/   sringran    07/06/21 - ER 33011365 - DELETING EXASERVICE WITH NO VM CLUSTERS
/                          SHOULD NOT CALL EXACLOUD
/   marislop    06/30/21 - ENH 32925891 Details on computes and cell
/   rgmurali    06/28/21 - ER 33056005 - APIs for cabinets/nodes
/   rgmurali    06/07/21 - ER 32926443 - Support canonical QFAB names
/   illamas     06/03/21 - Enh 32894712 - Operations for a given rack
/   hcheon      06/03/21 - 32811546 DB connection pool usage monitoring
/   rgmurali    05/17/21 - ER 32810345 - Support bonding migration
/   piyushsi    05/19/21 - ENH 32888345 - LOCK MGMT SUBNET CIDR FOR AVM
/                           CREATION
/   rgmurali    05/16/21 - ER 32893441 - precheck for bonding
/   marislop    05/15/21 - ENH 32702798 Added upgrade history command
/   byyang      05/12/21 - bug 32322406. add pre_logcol cmds
/   illamas     05/06/21 - Enh 32677648 - Update se linux policy on provisioned
/                          clusters
/   aadavalo    05/05/21 - ENH 32810507 - Enable ecracli abort command to
/                          handle optional status
/   jyotdas     04/27/21 - Enh 32798696 - filter by serviceType and exasplice in exaversion
/   rgmurali    04/21/21 - Bug 32799428 - Add clustertag in capacity move
/   bshenoy     04/12/21 - Enh 31634316 - fix mismatch with usermanual & ecracli cmd
/   illamas     03/23/21 - Enh 32669782 - Functional completion of ceiCreate
/                          API in ECRA
/   illamas     03/12/21 - Enh 32479332 - Cloud Exadata Infrastrucure creation
/   rgmurali    03/12/21 - Bug 32347793 - Support resizefs for other locations
/   aadavalo    03/08/21 - Enh 32561004 - Adding endpoint to get config check
/   luperalt    03/05/21 - Bug 32587402 Added elastic commands
/   piyushsi    03/03/21 - ER 32548442 - Workflows Pause
/   rgmurali    02/25/21 - ER 32481148 - Sanity check API for RoCE
/   llmartin    02/17/21 - Enh 32471858 - Update TZ in rack XML
/   jyotdas     02/09/21 - ER 32392270 - handle patch registration for exacc
/   rgmurali    02/02/21 - ER 32133333 - Support Elastic shapes
/   rgmurali    01/26/21 - ER 32416102 - VMbackup support with OSS
/   rgmurali    01/25/21 - ER 32421802 - Store the monitor bonding payload in ECRA
/   araghave    01/12/21 - Enh 31446326 - SUPPORT OF SWITCH OPTION AS TARGET
/                          TYPE THAT TAKES CARE OF BOTH IB AND ROCESWITCH
/   jvaldovi    01/08/21 - bug 31981072 - Profiling for specific operations
/   rgmurali    12/28/20 - ER 32300454 - APIs for fabrics, cabinets & nodes
/   jyotdas     12/14/20 - Bug32241338 - Switch/Domu registration and implement error handling 
/   rgmurali    12/08/20 - ER 31416683 - Add the backfill API
/   llmartin    12/04/20 - Enh 32133351 - Inventory release for elastic shapes
/   marcoslo    11/30/20 - ER 31712130 - create XML for compose elastic rack
/   rgmurali    11/24/20 - ER 32172686 - Bonding capacity changes
/   marcoslo    11/12/20 - ER 31881281 - Ability to delete elastic compute and
/                          storage
/   illamas     11/12/20 - Enh 32061490 - Adding coredump feature support
/   seha        11/11/20 - Bug-31635349 Upload report to CSS bucket 
/   hcheon      11/11/20 - ER 32100233 - Add diagnosis ignore command
/   rgmurali    11/03/20 - ER 31990731 - Clusterless support for vmbackup
/   rgmurali    11/03/20 - ER 31951376 - add tenancy info to listFabric
/   josedelg    10/28/20 - Enh 32080728 - Add imageVersion parameter to 
/                          patches report
/   nmallego    10/27/20 - Bug3168495 - Add ExaOcid, ExaUnit, ExaSplice,  
/   nmallego    10/27/20 - Bug3168495 - Add ExaOcid, ExaUnit, ExaSplice,  
/   rgmurali    10/26/20 - Bug 32034821 - OSS backup params to be made optional
/   aabharti    10/21/20 - Bug 31217106 - Instance principal support for rolling upgrade
/   illamas     10/21/20 - Enh 32048648 - Enhacement to analytics
/   llmartin    10/19/20 - Enh 31944421 - MultipleOperations cancel task
/                          feature
/   josedelg    10/16/20 - Enh 31646088 - Add new exaversion patches report
/   bshenoy     10/16/20 - Enh 31646088 - Add new exaversion patches report
/   marcoslo    10/14/20 - ER 31995866 - create customer tenancy ecracli cmd
/   jyotdas     10/13/20 - Enh 31684095 - Provide option to Register Exadata Patch Versions
/   bshenoy     09/28/20 - Bug 31913586: Ecracli support for cps sw patching
/   piyushsi    09/28/20 - BUG-31787586 WorkflowId support for workflows list command 
/   marcoslo    09/24/20 - ER 31816960 Enable jumbo frames
/   jyotdas     09/18/20 - Bug 31869208 - ECRA Interface for CPS OS Patching
/   piyushsi    09/16/20 - BUG-31862843 Add fail_task for workflows
/   marcoslo    09/11/20 - ER 31856863 add hardwareinfo/cloudvnuma operations
/   illamas     09/10/20 - Enh 31783059 - Analytics for all endpoints
/   nisrikan    08/25/20 - Bug 31791748 - BACKPORT OPCTL FIXES TO MAIN
/   rgmurali    08/23/20 - ER 31789990 - Cabinet level clis
/   marcoslo    08/21/20 - Add parameter to decide if we hide list of clusters
/                          for info operation
/   llmartin    08/13/20 - Enh 31120036 - Top level monitoring API
/   marcoslo    08/12/20 - Add example about using exacloud exssh command
/   rgmurali    08/01/20 - ER 31695260 - ECRA-infra patch integration for X8M
/   rgmurali    07/22/20 - ER 31543012 - Bonding setup APIs
/   marcoslo    07/21/20 - Add help of the new parameters racksize and model
/   hcheon      06/30/20 - ER 31152543 Add inventory check
/   marcoslo    06/30/20 - ER 31034656 Add ecralogs operation to get zip file
/                          with log files
/   byyang      06/17/20 - Enh 31294751. Remove logcol mandatory params
/   sdeekshi    01/07/20 - Bug 31564449: CLEANUP NON USEFUL XIMAGES CODE
/   rgmurali    06/06/20 - ER 31446572 Use OCI realms
/   rgmurali    06/04/20 - ER 31334566 - Bonding info API
/   rgmurali    06/02/20 - ER 31334530 - Prioritize bonding racks for reservation
/   rgmurali    05/31/20 - ER 31170843 - Bonding payload changes.
/   rgmurali    05/28/20 - ER 31395494 - Support query parameters for delete service
/   rgmurali    05/28/20 - ER 31417054 Add Exa OCID to this endpoint
/   rgmurali    05/26/20 - ER 31405071 - Add netmask and gateway info.
/   rgmurali    05/14/20 - ER 30952096 - Support dbsystemId in delete service
/   rgmurali    05/14/20 - ER 31353964 List fabric to show cabinet IDs
/   rgmurali    05/12/20 - ER 31340720 List fabric to show utilization percent
/   jvaldovi    05/11/20 - Adding json_path parameter to update_cores and
/                          update_memory endpoint
/   rgmurali    05/08/20 - ER 31195634 - Group the IP allocation under hosts.
/   rgmurali    05/06/20 - ER 31313920 - Inventory reserve API on specific nodes
/   rgmurali    04/30/20 - Bug 31257809 - Inventory reserve API to use exadataInfrastructureId
/   nisrikan    04/29/20 - ER 31169019 - Add CCA operations
/   piyushsi    04/27/20 - Add Support for Workflow Cancel the current task
/   rgmurali    04/21/20 - ER 30971270 Inventory reserve/release APIs
/   luperalt    04/20/20 - Modify rotate secret service command example
/   rgmurali    04/20/20 - ER 31201148 Add list fabric support
/   jreyesm     04/18/20 - E.R 31127541. Refactor inventory for OCI
/   luperalt    04/02/20 - Bug 31040089 Adding new commands for the secret
/                          service
/   bshenoy     03/26/20 - Bug 31055331: Support MVM reshape operations
/   aabharti    03/18/20 - ER 31000123 - API to seed admin tenancy details
/   llmartin    03/17/20 - Enh 30971142 - Get DomU key to get access for
/                          elastic
/   rgmurali    03/11/20 - ER 31014534 Rename fabric_id to fabric_name
/   jreyesm     03/10/20 - E.R 30858091, add compute/cell apis
/   rgmurali    03/06/20 - XbranchMerge rgmurali_bug-30870817 from
/                          st_ecs_pt-x8m
/   rgmurali    03/02/20 - XbranchMerge rgmurali_bug-30945597 from
/                          st_ecs_pt-x8m
/   araghave    02/19/20 - Enh 30908782 - ksplice configuration on dom0 and
/                          cells
/   jreyesm     02/19/20 - XbranchMerge rgmurali_bug-30802702 from
/                          st_ecs_pt-x8m
/   ananyban    02/03/20 - Bug 30840695: adding em enable/disable endpoint
/   luperalt    01/29/20 - Added certificateRotation command to the user manual
/   jaseol      12/30/19 - Bug 30666174 - replace logstash with rsyslog
/   rgmurali    12/02/19 - ER 30582157 Maintain OCI URL mappings
/   rgmurali    12/02/19 - ER 30550141 - List domu bonding racks
/   illamas     12/02/19 - Bug 30585406 - ATP Preprov fixed to get correct rack
/                          and added support for dbSystemId in capacity reserve
/   jvaldovi    11/26/19 - Adding ecra dumpconfig commanf info
/   jreyesm     11/11/19 - Enh 30589095. Recreate db flow.
/   llmartin    11/15/19 - Enh 30538475 - Rack cells/domU unblock endpoint.
/   jvaldovi    11/05/19 - Adding resize_vm operation to call
/                          'add_vm_extra_size' exacloud endpoint
/   rgmurali    10/30/19 - ER 30390456 Adding ExaCS profiling
/   illamas     10/24/19 - ER 30432244 - Added db info_all in order to get a
/                          list of cdbs for a given ATP ExaUnitId
/   illamas     10/21/19 - Bug 29785842 - Adding metadata command
/   jloubet     10/15/19 - Adding argument for ingestTerraform
/   bshenoy     10/09/19 - Bug: 30288886 list exadata target applied version
/   rgmurali    10/07/19 - ER 30383122 - Add ATP bootstrap API
/   jvaldovi    09/30/19 - Adding profiling for specific rack name examples 
/   byyang      09/25/19 - ER 30308961. Add diagnosis exacd_plgmon
/   jaseol      09/24/19 - bug-30329945 update diagnosis logstash_set command
/   rgmurali    02/24/19 - ER 30945597 - allocate/free a specific list of vlans
/   rgmurali    03/03/20 - ER 30870817 - Fabric addition APIs
/   rgmurali    02/13/20 - ER 30802702 - Add IP Pool support for KVM RoCE
/   rgmurali    02/04/19 - Bug 30847525 - Remove fault domain id
/   rgmurali    01/24/19 - ER 30663489 - KVM RoCE Vlan pool management
/   rgmurali    09/20/19 - ER 30255519 - Add capacity move on a specific rack
/   jvaldovi    09/08/19 - Adding healthCheck op help
/   ananyban    09/04/19 - ER 30250741: Adding EM update cmd
/   illamas     08/29/19 - Bug 30212341 - Add additional checks before atp
/                          deleteNetwork,atp deletePreprovOracleDbSystem and
/                          atp deletePreprovOracleClientVCN
/   ananyban    08/28/19 - ER 29285599: adding EM setup endpoint
/   hcheon      08/28/19 - bug-30208357 add compliance status command
/   rgmurali    08/20/19 - ER 30202025 - Add additional checks before delete service
/   rgmurali    08/15/19 - ER 30035718 - Add Exawatcher support
/   llmartin    08/15/19 - Enh 30175171 Rack cli to dump XML to the file system
/   pnkrishn    08/08/19 - Bug30125683 - force to disable interactive 
/                          prompt for additional options in patch cmd
/   rgmurali    08/02/19 - Bug 30135591 - Get the observer SSH keys
/   pverma      08/02/19 - Add help for ocicpinfra commands for cipher and VPN
/                          HE management
/   hcheon      07/31/19 - bug-30025165 add compliance command
/   bshenoy     07/29/19 - XbranchMerge bshenoy_bug-29875966 from
/                          st_ebm_19.1.1.0.0
/   jvaldovi    07/19/19 - Adding profiling operation
/   jvaldovi    07/18/19 - Adding help for configDomURules
/   bshenoy     07/16/19 - Bug 29875966: add endpoint to get applied version
/                          for rack
/   araghave    07/02/19 - ENH 29911293 POSTCHECK OPTION FOR ALL PATCH
/                          OPERATIONS.
/   joseort     07/02/19 - Creating methods for enable and disable heartbeat
/                          scheduler, to avoid ecra restart.
/   anupanda    06/25/19 - Bug 29899573 : Adding ECSDiag log collection command
/   jloubet     06/25/19 - Adding atp vm rollback
/   llmartin    06/19/19 - Remove idemtoken from exacc delete network
/   csmarque    06/19/19 - Adding exaunit hasOperation cmd
/   aabharti    06/12/19 - ER 29859890 ExaccOCI workflow abort API
/   ananyban    05/30/19 - Bug 29809690 : Adding EM cmds
/   jvaldovi    05/27/19 - Adding functionality for reqOperations endpoint
/   sringran    05/22/19 - Workflows (Exacc OCI) API
/   rgmurali    05/22/19 - ER 29816057 - Add dbUniqieName in database mapping
/   pverma      05/17/19 - Pre-activation APIS
/   jvaldovi    05/08/19 - Adding use and examples of isRackReserved flag on
/                          service create operation bug 29750738
/   rgmurali    05/07/19 - ER 29749873 - Add support for resetting mgmt vcn
/   rgmurali    04/25/19 - ER 29689220 - database mapping in cluster details
/   jvaldovi    04/25/19 - Adding entries for Ecracli with 3 sub operations
/   llmartin    04/15/19 - ENH 29538644 - OCI/EXACC Network Object API
/   jloubet     04/09/19 - Adding syncrackslots command
/   diegchav    04/02/19 - ER 29553245 : Integrate subnetpool creation with
/                          terraform ingestion
/   rgmurali    04/01/19 - ER 29530642 Support for move capacity
/   nmallego    03/28/19 - Update User manual
/   diegchav    03/27/19 - ER 29546333 : Rename capacity reserve atp parameter
/   nmallego    03/19/19 - Bug29305666: Adding option to ugprade single node at
/                          a time
/   jloubet     03/15/19 - Adding comments for deleting inventory
/   araghave    03/14/19 - ENH 29486325 - Additional options added for 
/                          IgnoreAlerts, ForceRemoveCustomRpms and 
/                          ModifyAtPrereq cases. 
/   llmartin    03/08/19 - Enh 27648668 - Add VMBackup lifecycle
/   jloubet     03/04/19 - Adding requests commands
/   rgmurali    03/04/19 - Enh 29438194 - Add atp flag to capacity list API
/   llmartin    02/18/19 - ENH 29266406 - Elastic, command to change ASM
/                          rebalance power
/   sachikuk    01/24/19 - Bug - 29196199 : REST APIs for ATP pre provisioning
/                          scheduler
/   csmarque    01/10/19 - Adding vmbackup operations
/   csmarque    01/10/19 - Adding exaservice resourceinfo command
/   piyushsi    12/20/18 - ENH 28943345 - ECRA API SKELETON - GIServiceStop
/   diegchav    12/18/18 - ER 29062402 - ATP: Reconfig service
/   rgmurali    12/12/18 - Bug 29050191 - Get observer instance details endpoint
/   llmartin    12/07/18 - Enh 28702021 - OCI Base System Support
/   aanverma    12/03/18 - Bug #28843249: Example for status comment for rack update
/   srtata      03/12/18 - bug 27550083: add cns receive
/   aanverma    10/11/18 - Bug #28662168: Add user manual for location details command
/   piyushsi    09/17/18 - Broker Endpoint for exadata Network info
/   sdeekshi    09/30/18 - Bug 28717132 - ecra ximages auto selection of latest bundle patch
/   sachikuk    09/14/18 - Bug 28643725 - ecracli changes for brokerproxy
/   diegchav    09/12/18 - ER 28633340 : Data model to support ATP whitelist
/   sgundra     08/13/18 - XbranchMerge sgundra_bug-28223653 from
/   disengu     08/08/18 - XbranchMerge disengu_bug-28426116 from
/   mnateshc    07/24/18 - Bug28175142: Updating User manual to reflect changes 
/                          in default parameters of capacity get
/   jreyesm     07/19/18 - E.R 27926559. Inventor and Formation commands
/   piyushsi    07/19/18 - ER  28370708 - EXACM: Ecra API to fetch client and backup network info
/   diegchav    07/10/18 - Bug 28258133 - Implement operation to abort pending
/                          request
/   pverma      07/09/18 - Support for cluster nodes' local disk partition
/                          shrinking
/   nmallego    07/03/18 - Bug28155938: Update with new infra patching options
/   sdeekshi    06/11/18 - Bug 28189332 : Add ecra ximages image management api's
/   jreyesm     06/04/18 - Bug 28129011. Update higgs delete_resources.
/   dekuckre    05/25/18 - 28060479: Add userconfig commands
/   llmartin    05/08/18 - ENH 27759881 - Ecracli commands for higgs secrules.
/   rgmurali    05/08/18 - Bug 27995482 - cores REST endpoint for Iaas-Paas
/   jreyesm     04/18/18 - Bug 27417886. IbSubnets validation on higgs.
/   brsudars    04/08/18 - Add param inst_name to exaservice create
/   dekuckre    04/04/18 - 27703864: Add vmbackup commands
/   llmartin    04/03/18 - Bug 27663955 - Migrate admin_username, appidUser and
/                          appidPwd to ecracli.cfg
/   brsudars    03/21/18 - Multi-vm migration changes
/   vgerard     02/21/18 - Higgs audit agent
/   llmartin    03/08/18 - Bug 27186959. Add flags for higgs client/backup
/                          network and subscriptionId.
/   jreyesm     02/21/18 - Bug 27520916. Add scan/node vips flows.
/   dekuckre    13/02/18 - Bug 27521418: Remove DEBUG_EXACLOUD (LOG_LEVEL can 
                           serve the purpose)
/   jreyesm     02/02/18 - Add VM log extraction help.
/   jreyesm     01/25/18 - Add DB register,deregister and registered_info
/   jreyesm     12/18/17 - Accomodate higgs appidUser new format
/   brsudars    11/22/17 - Add reshape exaservice multi-vm command
/   jreyesm     11/17/17 - Bug 27137450. Higgs register/deregister
/   jreyesm     11/13/17 - Bug 27090986. Add Higgs prepare new command.
/   srtata      10/30/17 - enable/disable cns at rack level
/   brsudars    11/11/17 - Multi-vm commands
/   sachikuk    11/08/17 - Bug - 27086265 : Enhance rack slot registration
/   rgmurali    10/12/17 - Bug 26949675 - Added higgs clis usage
/   sachikuk    10/03/17 - Bug - 26885989: ecra endpoints for customer network
/                          info management
/   sachikuk    09/27/17 - get capacity details endpoint [Bug - 26860773]
/   aanverma    09/19/17 - Bug #26819554: Add Jumbo Framework clis
/   srtata      09/12/17 - bug 26716205: add cns endpoints
/   sachikuk    09/10/17 - Reserve/release capacity for multi-vm [Bug -
/                          26748905]
/   bhuvnkum    09/09/17 - bug 26637738: update healtch_check manual
/   dekuckre    09/06/17 - Bug 26735879: Add get_clientkeys
/   srtata      08/21/17 - bug 26657194: add cns setup
/   hgaldame    08/24/17 - Bug 26668359 : REGISTER RACK WITH XML FILE PATH
/   byyang      08/19/17 - Bug 26624287: Add scheduler commands
/   dekuckre    08/09/17 - Bug 26003275: Add LOG_LEVEL
/   srtata      07/14/17 - cns commands
/   dekuckre    05/29/17 - Bug 26003269: Add DEBUG_EXACLOUD
/   rgmurali    04/28/17 - Creation
/

Properties:
Get:
Usage: ./ecracli properties get [<property name>] [<type=value>]

Purpose:
	Get the value of the property if name is specified, else get all properties.

Arguments:
	<property name> : Property name to get the value of.
  <type>          : Filter properties based on type.

Examples:
ecra> properties get
		or
ecracli]$ ./ecracli properties get
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/properties
* {"status": 200, "IDEMTOKEN_EXPIRATION_TIME": "86400000", "MBE_CORE_BURST_MULT": "2", "FIREWALL_TOOL_HOST": "http://localhost:8500", "SBE_CORE_BURST_MULT": "2", "FIREWALL_GROUPS_PER_CUSTOMER": "15", "FIREWALL_ROTATION_MAX": "9998", "FIREWALL": "DISABLED", "EM_FILE_PATH": "/tmp", "FIREWALL_RULES_PER_GROUP": "7", "CLOUD_SERVICE_EMAGENT_HOST_NAME": "xyz.us.oracle.com", "BDCS_USERNAME": "bdcs", "CLOUD_SERVICE_TARGET_TYPE": "oracle_cloud_exadata_service", "FIREWALL_GROUPS_PER_EXAUNIT": "5", "ENABLE_EM_INTEGRATION": "false", "CLOUD_SERVICE_EMAGENT_PORT": "21868", "op": "property_get", "LOG_LEVEL" : "INFO"}

ecra> properties get MBE_CORE_BURST_MULT
		or
ecracli]$ ./ecracli properties get MBE_CORE_BURST_MULT
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/properties/MBE_CORE_BURST_MULT
* {"status": 200, "op": "property_get", "property_value": "2"}

ecracli]$ ./ecracli properties get new
Error: GET request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/properties/new failed
HTTP Error 400: Bad Request
{"status":400,"message":"Operation not allowed","op":"property_get"}
Error: Failed to get http://den01gpy.us.oracle.com:9001/ecra/endpoint/properties/new

ecracli>  properties get type=HIGGS
* GET http://slc09uxt.us.oracle.com:9028/ecra/endpoint/properties?type=HIGGS
* {"status": 200, "HIGGS_NTP_IP": "10.150.240.129", "status-detail": "success", "HIGGS_PSM_SERVICEIP": "10.150.240.129/32", "HIGGS_NIMBULA_SITENAME": "usdev2345", "BOND0_IPS": "10.31.124.21,10.31.124.22", "HIGGS_NIMBULA_API_DNS_IPS": "10.128.95.199", "HIGGS_NIMBULA_DNS_IPS": "10.128.95.200,10.128.95.201", "HIGGS_CLOUD_IPPOOL": "/oracle/public/cloud-ippool", "HIGGS_URL": "https://10.128.95.197/", "op": "property_get"}

Put:
Usage: ./ecracli properties put <property_name> [value=<new value>] [description=<new description>]

Purpose:
	Update the property value and description.

Arguments:
	<property_name> : Name of the property you want to modify or add
	value : Value you want to assign to the property
    description: Description you want to assign to the property

Examples:
./ecracli properties put FIREWALL_RULES_PER_GROUP value=9
				or
ecra> properties put FIREWALL_RULES_PER_GROUP value=9

{"status": 200, "message": "Update Successful", "op": "property_put"}

ecra> properties put ECRA_ENV description="Testing description"
* {"message": "1 columns were successfully updated.", "status": 200, "op": "property_put", "status-detail": "success"}

Notes:
	You should be the ops user to use this cli
 FIREWALL_RULES_PER_GROUP value=9

Gettypes:
Usage: ./ecracli properties gettypes

Purpose:
	Get all the property types that are in the env.

Arguments:

Examples:
ecra> properties gettypes
* {
    "op": "properties_gettypes",
    "status": 200,
    "status-detail": "success",
    "types": [
        "ATP",
        "ATP_FP",
        "AUTORETRY",
        "BDCS",
        "BONDING",
        "CERTROTATION",
        "CLUSTERPOOL",
        "CLUSTER_LIFE_CYCLE",
        "CNS",
        "COMPLIANCE",
        "CORE_BURST",
        "CPS",
        "DEBUG",
        "DIAG",
        "DIAGNOSTIC",
        "DIAG_PRE_LOGCOL",
        "ECRA",
        "ECRA_ASYNC",
        "ECRA_RESILIENCE",
        "ECRA_WF",
        "ELASTIC",
        "ELASTICSHAPE",
        "EM",
        "EXACC",
        "EXACC_INVENTORY",
        "EXACC_NETWORK",
        "EXACLOUD",
        "EXACOMPUTE",
        "EXACS",
        "EXADATA",
        "EXASERVICE",
        "EXAUNIT",
        "FA",
        "FEATURE",
        "FEDRAMP",
        "FIREWALL",
        "HEARTBEAT",
        "HIGGS",
        "IAAS",
        "IDEMTOKEN",
        "INGESTION",
        "INT",
        "KMS",
        "KVMROCE",
        "LOCATION_DETAILS",
        "MDBCS",
        "MVM",
        "NODE_SUBSET",
        "NOSDI",
        "OCI",
        "OCI_REHOME",
        "OCI_UPGRADE",
        "OPENSSL",
        "OPERATION_TIMEOUT",
        "ORDS",
        "PAAS",
        "PATCHING",
        "PREPROV",
        "PREPROVISION",
        "REG_JOB_MANAGER",
        "REMOTEEXACLOUD",
        "SLA",
        "STATUS_TRACKER",
        "STIG",
        "TEST",
        "UIIMPACTING_FEATURES",
        "VMCONSOLE",
        "WSS",
        "ZDLRA"
    ]
}

Service:
delete:
Usage: ecracli> service delete <exaunit_id> [force=true/false] [dbsystem_id=ocid] [keepRackReserved=true/false] [optimizedVMDelete=true/false] [forceVMDelete=true/false] 

Purpose:
        Deletes a service

Arguments:
        exaunit_id : exaunit that you want to delete
        force      : Passing in true won't prompt for a confirmation before delete
        dbsystem_id: OCID of the dbsystem
        keepRackReserved : If set to true, the tack will be left in the RESERVED state.
        optimizedVMDelete : If set to true ,  will lead to optimized delete of the VMs
        forceVMDelete : If set to true ,  will lead to force delete of the VMs including VM Shredding

Examples:
Mode Prod:

i) Invalid exaunit id
ecra> service delete 2
* Error: GET request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/summary failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Couldn not find POD record, exaunit id: 2","status-detail":"Couldn not find POD record, exaunit id: 2","op":"exaunit_summary"}
* Error: Failed to get http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/summary
* Cannot perform delete operation

ii) Invalid User
ecra> service delete 1
* Not a valid user for this operation
* Cannot perform delete operation

iii) Invalid rack status
ecra> service delete 1
* Invalid rack status for delete operation: PROVISIONING
* Cannot perform delete operation

iv) If L1/L2 approval not obtained
ecra>  service delete 1 
* Rackname        : slcqab02adm0506clu5
* Rackstatus      : PROVISIONED
* ATP             : N       
* Customer name   : Oracle Test Internal Group
* CSI             : 12345   
* Entitlement_id  : 100000000
Do you have L1/L2 approvals to delete [1] exaunit?(yes|no):no
* Deletion operation not confirmed, aborting
* Cannot perform delete operation


v) If you dont provide the correct exaunit id the 2nd time
ecra>  service delete 1 
* Rackname        : slcqab02adm0506clu5
* Rackstatus      : PROVISIONED
* ATP             : N       
* Customer name   : Oracle Test Internal Group
* CSI             : 12345   
* Entitlement_id  : 100000000
Do you have L1/L2 approvals to delete [1] exaunit?(yes|no):yes
* Are you sure you want to delete the exaunit with id: 1? VM and data will be lost. This action cannot be undone
Type rackname associated with the exaunitid in order to proceed with the delete command, if not just hit enter to quit:slc
* Invalid rackname provided, aborting the request
* Cannot perform delete operation

vi) Successful deletion 
ecra> service delete 1
* Rackname        : slcqab02adm0506clu5
* Rackstatus      : PROVISIONED
* ATP             : N       
* Customer name   : Oracle Test Internal Group
* CSI             : 12345   
* Entitlement_id  : 100000000
Do you have L1/L2 approvals to delete [1] exaunit?(yes|no):yes
* Are you sure you want to delete the exaunit with id: 1? VM and data will be lost. This action cannot be undone
Type rackname associated with the exaunitid in order to proceed with the delete command, if not just hit enter to quit:slcqab02adm0506clu5
Type customer-name associated with the exaunitid in order to proceed with the delete command, if not just hit enter to quit:Oracle Test Internal Group
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/b231cee8-c513-11e9-9030-fa163ed5ac29

vii) Successful deletion with the force option
ecra> service delete 2 force=true
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/f6df81e2-c514-11e9-9030-fa163ed5ac29

vii) Unsuccessful deletion with wrong customer name value:
ecra> service delete 41
* Rackname        : slcqab02adm0506clu5
* Rackstatus      : PROVISIONED
* ATP             : N       
* Customer name   : Oracle Test Internal Group
* CSI             : 12345   
* Entitlement_id  : 100000000
Rack is in PROVISIONED state, do you really want to delete? (yes|no)yes
Do you have L1/L2 approvals to delete exaunit id : '41'?(yes|no):yes
* Are you sure you want to delete the exaunit with id: 41? VM and data will be lost. This action cannot be undone
Type rackname associated with the exaunitid in order to proceed with the delete command, if not just hit enter to quit:slcqab02adm0506clu5
Type customer-name associated with the exaunitid in order to proceed with the delete command, if not just hit enter to quit:abc
* Invalid customer name provided, aborting the request
* Cannot perform delete operation

Mode: dev
i) Successful deletion
ecra> service delete 3
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/93d46b98-c515-11e9-9030-fa163ed5ac29

ecra> service delete 181 dbsystem_id=ocid1.dbsystem.oc1.sea.abzwkljse7tqendzd3476mwmtvapbwtn7hklibbjokpokanxq5mx5l6ze
* {
    "op": "delete-pod", 
    "status": 200, 
    "status-detail": "success", 
    "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/88daea6d-a337-41a1-9735-420b15d928b8"
}

ecra> service delete 244 keepRackReserved=true
http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/244?dbsystem_id=&sse=False&keepRackReserved=true
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/cc8bf07d-89b4-4c80-9733-d320d6aa3412

ecra> rack get name=sea201109exd-d0-01-02-cl-01-03-clu01
* {"status": 200, "status-detail": "success", "racks": [{"status": "RESERVED", "ops_delete_service": "N", 
"clustertag": "FA", "name": "sea201109exd-d0-01-02-cl-01-03-clu01", "racksize": "quarter", "auto_maintenance": "Y", 
"opstate": "ONLINE", "disabled": 0, "cabinet_id": 9, "exa_ocid": "EXISTING.PUBLIC.CLOUD.EXADATA", 
"cluster_status": "ACTIVE", "atp": "N", "domu_bonding": "N", "dom0": "sea201109exdd001sea201109exdd002", 
"model": "X8M-2", "previous_status": "READY", "domu": "sea201109_cluster_name_8_pk", "cnsenabled": 1}], "op": "racks_get"}


Service update_memory:
Usage: ecracli> service update_memory <exaunitId> [vm=all gb_memory=<NUM>] [json_path=<JSON>]

Purpose:
        Add memory to given vms

Arguments:
        vm : For now vm options only support 'all' value to indicate gb_memory for all vms
        gb_memory : receives number of Gb to be added to vms, only can be passed when vm option is present,
                        not when json_path option is passed
        json_path: parameter value should be valid JSON path containing below structure
            {
        "vms": [{
                "gb_memory": "<NUM>",
                "hostname": "<VM>"
        }, {
                "gb_memory": "<NUM>",
                "hostname": "<VM>"
        }]
}

Examples:

bash-4.2$ ecracli service update_memory 24 vms=all gb_memory=1

Using {'vms': [{'gb_memory': '1', 'hostname': u'slcqab02adm05vm06.us.oracle.com'}, {'gb_memory': '1', 'hostname': u'slcqab02adm06vm06.us.oracle.com'}]} data json
PUT http://den00ucw.us.oracle.com:9001/ecra/endpoint/service/24/updatememory
{"status": 200, "status-detail": "success", "op": "exaunit-update-memory"}


bash-4.2$ ecracli service update_memory 24  json_path=test.json
Succesfully loaded file test.json
PUT http://den00ucw.us.oracle.com:9001/ecra/endpoint/service/24/updatememory
{"status": 200, "status-detail": "success", "op": "exaunit-update-memory"}

Capacity:
Register:
Usage: ecracli> capacity register exadata_id=<exadata id> tmpl_xml=<template xml path>

Purpose:
        Register exadata with given exadata id.

Arguments:
        exadata_id : Exadata id
        tmpl_xml : Template xml path

Examples:
ecra> capacity register exadata_id=testexadata1 tmpl_xml=/tmp/testexadata1.xml 
                or
./ecracli capacity register exadata_id=testexadata1 tmpl_xml=/tmp/testexadata1.xml
* Registering capacity with exadata id: testexadata1
* {u'status': 200, u'status-detail': u'success', u'op': u'capacity_register'}

List:
Usage: ecracli> capacity list [racksize=<racksize> | exadata_size=<exadata size> | model=<model> | location=<location> | status=<status> | atp=<Y|N>]

Purpose:
	List all the exadata(multi-vm)/racks(non multi-vm) based on the given parameters.

Arguments:
	racksize    : 'eighth', 'quarter', 'half', 'full', etc.
        exadat_size : 'eighth', 'quarter', 'half', 'full', etc.
	model       : 'X4-2', 'X5-2', 'X6-2', 'X7-2' etc.
	location    : location like 'us' etc
	status      : READY, etc.

Examples:
ecra> capacity list racksize=quarter
		or
./ecracli capacity list racksize=quarter
* GET http://den00tuj.us.oracle.com:9001/ecra/endpoint/capacity?racksize=quarter
* Response data
* status : 200
* status-detail : success
* message : Operation to get capacity list is successful
* op : capacity_list
* capacity :
* status : READY
* count : 1
* model : X5-2
* racksize : quarter
*

ecra> capacity list exadata_size=quarter
               or
./ecracli capacity list exadata_size=quarter
* GET http://den00tuj.us.oracle.com:9001/ecra/endpoint/capacity?exadata_size=quarter
* Response data
* status : 200
* status-detail : success
* message : Operation to get capacity list is successful
* op : capacity_list
* capacity :
* status : READY
* count : 1
* model : X5-2
* exadata_size : quarter
*

* status : READY
* count : 2
* model : X6-2
* exadata_size : quarter
*

* status : ALLOCATED
* count : 1
* model : X6-2
* exadata_size : quarter
*

* status : ALLOCATED
* count : 1
* model : X5-2
* exadata_size : quarter
*

* status : READY
* count : 1
* model : X4-2
* exadata_size : quarter
*

ecra> capacity list exadata_size=quarter exadata_id=2
* GET http://slc14rlu.us.oracle.com:9073/ecra/endpoint/capacity?exadata_size=quarter&exadata_id=2
* Response data
* status : 200
* status-detail : success
* message : Operation to get capacity list is successful
* op : capacity_list
* capacity : 
* status : ALLOCATED
* count : 1
* model : X5-2
* exadata_size : quarter
* exadata_id : 2

ecra>  capacity list racksize=quarter atp=y
* GET
* http://den01gpy.us.oracle.com:9001/ecra/endpoint/capacity?atp=y&racksize=quarter
* Response data
* status : 200
* status-detail : success
* message : Operation to get capacity list is successful
* op : capacity_list
* capacity : 
* status : PROVISIONED
* count : 1
* racksize : quarter
* opstate : ONLINE
* atp : Y
* model : X6-2
* 

ecra>  capacity list racksize=quarter 
* GET
* http://den01gpy.us.oracle.com:9001/ecra/endpoint/capacity?racksize=quarter
* Response data
* status : 200
* status-detail : success
* message : Operation to get capacity list is successful
* op : capacity_list
* capacity : 
* status : PROVISIONED
* count : 1
* racksize : quarter
* opstate : ONLINE
* atp : Y
* model : X6-2
* 

* status : PROVISIONED
* count : 1
* racksize : quarter
* opstate : ONLINE
* atp : N
* model : X6-2
* 

Get:
Usage: ecra> capacity get [exadata_size=<exadata size> | model=<model> | exadata_id=<exadata id> | status=<status>]

Purpose:
        Get details of exadata and associated racks satisfying given parameters.

Arguments:
        exadata_size : 'eighth', 'quarter', 'half', 'full', etc.
        model        : 'X4-2', 'X5-2', 'X6-2', etc.
        exadat_id    : Exadata id
        status       : READY, ALLOCATED

Examples:
ecra> capacity get model=X5-2 exadata_size=QUARTER
          or
./ecracli capacity get model=X5-2 exadata_size=QUARTER
* Get capacity with parameters:
* model : X5-2
* exadata_size : QUARTER
* GET http://den00tuj.us.oracle.com:9001/ecra/endpoint/capacity/details?model=X5-2&exadata_size=QUARTER
* Response data
* status : 200
* status-detail : success
* message : Operation to get capacity details is successful
* exadata : [{u'status': u'ALLOCATED', u'model': u'X5-2', u'exadata_size': u'quarter', u'racks': [{u'status': u'PROVISIONED', u'exaunitID': u'1', u'name': u'slcs16adm0304clu1'}, {u'status': u'READY', u'name': u'slcs16adm0304clu2'}], u'exadata_id': u'testexadata1'}, {u'status': u'READY', u'model': u'X5-2', u'exadata_size': u'quarter', u'racks': [], u'exadata_id': u'testexadata3'}]
* op : capacity_details

Reserve:
Usage: ecra> capacity reserve <idemtoken=value>
					[racksize=<racksize> | exadata_size=<exadata_size> | model=<model> | location=<location> | atp=<Y/N> | clustertag=<tag> | dbSystemId=<dbSystemId> | fabricname=<name>]

Purpose:
	Reserve an available exadata(multi-vm)/rack(non multi-vm) satisfying given parameters. Idemtoken is required for each request.

Arguments:
	idemtoken   : An idemtoken is a must
	racksize    : 'eighth', 'quarter', 'half', 'full', etc.
        exadat_size : 'eighth', 'quarter', 'half', 'full', etc.
	model       : 'X4-2', 'X5-2', 'X6-2', 'X7-2'etc. (Default is 'X5-2')
	location    : Location like 'us' etc.
        provisionType: provisionType in ('preprovision', 'reconfig')
	clustertag   : clustertag in ('FASAAS'), more parameters will be supported in future.
        dbSystemId   : OCID
        fabricname   : Optional fabricname for RoCE platforms.
Examples:
ecra> capacity reserve racksize=quarter idemtoken=3c41fd68-4c8b-4457-8707-00d444f13eaa
                or
./ecracli capacity reserve racksize=quarter idemtoken=3c41fd68-4c8b-4457-8707-00d444f13eaa
* Reserve capacity with parameters:
* model : X5-2
* idemtoken : 3c41fd68-4c8b-4457-8707-00d444f13eaa
* racksize : quarter
* Response data
* dom0_bonding : False
* rackname : slcs16adm0304clu1
* status : 200
* message : X5-2 quarter rack slcs16adm0304clu1 is reserved successfully
* status-detail : success
* op : capacity_reserve

ecra> capacity reserve exadata_size=quarter idemtoken=5e0b4933-882f-4d76-bb8e-d18373aa9138
                or
./ecracli capacity reserve exadata_size=quarter idemtoken=5e0b4933-882f-4d76-bb8e-d18373aa9138
* Reserve capacity with parameters:
* model : X5-2
* exadata_size : quarter
* idemtoken : 5e0b4933-882f-4d76-bb8e-d18373aa9138
* Response data
* status : 200
* status-detail : success
* dom0_bonding : False
* message : Exadata: testexadata3 (Model: X5-2, Size: quarter) is reserved successfully.
* exadata_id : testexadata3
* op : capacity_reserve

ecra> capacity reserve idemtoken=2ea4330e-a8bf-4877-9686-7c48a04fa1c9 racksize=quarter provisionType=preprovision atp=Y
* Reserve capacity with parameters:
* provisionType : preprovision
* AutonomousDb : Y
* model : X5-2
* dom0_bonding : False
* idemtoken : 2ea4330e-a8bf-4877-9686-7c48a04fa1c9
* racksize : quarter
* Response data
* rackname : slcs16adm0304clu1
* status : 200
* message : X5-2 quarter rack slcs16adm0304clu1 is reserved successfully
* status-detail : success
* op : capacity_reserve

ecra> capacity reserve idemtoken=2ea4330e-a8bf-4877-9686-7c48a04fa1c9 racksize=quarter provisionType=reconfig atp=Y
* Reserve capacity with parameters:
* provisionType : reconfig
* AutonomousDb : Y
* model : X5-2
* idemtoken : 2ea4330e-a8bf-4877-9686-7c48a04fa1c9
* racksize : quarter
* Response data
* rackname : slcs16adm0304clu1
* status : 200
* dom0_bonding : False
* message : X5-2 quarter rack slcs16adm0304clu1 is reserved successfully
* status-detail : success
* op : capacity_reserve

ecra> capacity reserve idemtoken=9391c914-c134-429f-b36b-a85c69b554c0 racksize=quarter model=X5-2 clustertag=FASAAS
* Reserve capacity with parameters:
* model : X5-2
* clustertag : FASAAS
* idemtoken : 9391c914-c134-429f-b36b-a85c69b554c0
* racksize : quarter
* Response data
* dom0_bonding : False
* rackname : slcs08adm0102
* status : 200
* message : X5-2 quarter rack slcs08adm0102 is reserved successfully
* status-detail : success
* op : capacity_reserve
ecra> 

ecra> capacity reserve idemtoken=a6bc1bac-6f5a-46c3-9486-c06cd41d5255 racksize=quarter model=X5-2 provisionType=preprovision AutonomousDb=Y dbSystemId=irvingtest
* Reserve capacity with parameters:
* provisionType : preprovision
* dbSystemId : irvingtest
* idemtoken : a6bc1bac-6f5a-46c3-9486-c06cd41d5255
* racksize : quarter
* AutonomousDb : Y
* dom0_bonding : False
* model : X5-2
* Response data
* rackname : scas07adm0304clu4
* status : 200
* message : X5-2 quarter rack scas07adm0304clu4 is reserved successfully
* status-detail : success
* op : capacity_reserve

ecra> capacity reserve idemtoken=4d96874d-fad8-4ca9-919f-90661a918ec5 racksize=quarter model=X8M-2
* Reserve capacity with parameters:
* model : X8M-2
* idemtoken : 4d96874d-fad8-4ca9-919f-90661a918ec5
* racksize : quarter
* Response data
* status : 200
* dom0_bonding : True
* status-detail : success
* rackname : sea201109exd-d0-01-02-cl-01-03-clu01
* message : X8M-2 quarter rack sea201109exd-d0-01-02-cl-01-03-clu01 is reserved successfully
* op : capacity_reserve

ecra> capacity reserve model=X8M-2 racksize=quarter idemtoken=a76ef4bf-c2f4-4cdd-ba64-3649f2cf9a73 dom0_bonding=true
* Reserve capacity with parameters:
* model : X8M-2
* racksize : quarter
* idemtoken : a76ef4bf-c2f4-4cdd-ba64-3649f2cf9a73
* dom0_bonding : Y
* Response data
* rackname : sea201109exd-d0-01-02-cl-01-03-clu01
* dom0_bonding : True
* message : X8M-2 quarter rack sea201109exd-d0-01-02-cl-01-03-clu01 is reserved successfully
* status : 200
* op : capacity_reserve
* status-detail : success

ecra> capacity reserve model=X8M-2 racksize=quarter idemtoken=5d41d866-6a75-4858-bdd6-923b4133eb1a fabricname=SEA200041QFAB
* Reserve capacity with parameters:
* model : X8M-2
* racksize : quarter
* idemtoken : 5d41d866-6a75-4858-bdd6-923b4133eb1a
* Response data
* rackname : sea101111exd-d0-01-02-cl-01-03-clu01
* dom0_bonding : False
* message : X8M-2 quarter rack sea101111exd-d0-01-02-cl-01-03-clu01 is reserved successfully
* status : 200
* op : capacity_reserve
* status-detail : success

Notes:
	You can get the idemtoken first by using: ./ecracli new_idemtoken

Release:
Usage: ecra>capacity release exadata_id=<exadata id>
Purpose:
        Release exadata associated with given exadata id.

Argument:
        exadata_id : Exadata id

Examples:
ecra> capacity release exadata_id=testexadata1
               or
./ecracli capacity release exadata_id=testexadata1
* Releasing capacity with exadata id: testexadata1
* {u'status': 200, u'status-detail': u'success', u'message': u'Exadata: testexadata1 released successfully.', u'op': u'capacity_release'}

Deregister:
Usage: ecra>capacity deregister exadata_id=<exadata id>
Purpose:
       Deregister exadata associated with given exadata id, it can delete also all the inventory info while deregistering.

Argument:
        exadata_id : Exadata id
        delete_inventory : Y/N

Examples:
ecra> capacity deregister exadata_id=testexadata1
               or 
./ecracli capacity deregister exadata_id=testexadata1
* Deregistering capacity with exadata id: testexadata1
* {u'status': 200, u'status-detail': u'success', u'op': u'capacity_deregister'}
ecra>

getavailabilty:
Usage: ecra>capacity getavailability [type=<rack|elastic|all>] [detailed=<true|false>] [raw=<true|false>]
Purpose:
       Get a report for all the availability of racks or nodes according of its type, size and model.

Argument:
        type : Value between elastic,rack for determining which report to generate (default=all)
        detailed : Value for rack type for obtaining values per model (default=false)
        raw: Returns a the json responss if enabled (default=false)

Examples:
ecra> capacity getavailability type=elastic
*
TYPE        USED        FREE        TOTAL
CELL        30          45          75
COMPUTE     23          43          66

ecra> capacity getavailability type=rack
*
TYPE        USED        FREE        TOTAL
elastic     0           1           1
half        0           1           1
full        0           1           1
quarter     2           6           8

ecra> capacity getavailability type=rack detailed=true
*
TYPE        MODEL       USED        FREE        TOTAL       TOTAL COMPUTES
elastic     X9M-2       0           1           1           Elastic size
full        X8M-2       0           1           1           8
half        X8M-2       0           1           1           4
quarter     X7-2        1           2           3           6
quarter     X8M-2       1           4           5           10

ecra> capacity getavailability
* 

TYPE        USED        FREE        OTHER_STATES     TOTAL       
quarter     3           3           0                6           

TYPE        USED        FREE        OTHER_STATES     TOTAL       
CELL        16          61          1                78          
COMPUTE     13          84          12               109 

Compatibility: 
Usage:
	Create/Update/Get Matrix records
Argument:
	id : Matrix id
	osversion : Version of Oracle Linux compatible 
	exaversion : Versions of the exadata
	hwmodel : Cabinet Model compatible
	giversion : Versions of the Grid
	status : ENABLED or DISABLED or EXCLUDED
	servicetype : The define the service type of this entry
	dom0version: Filter exadata image versions same or older of this value

Examples:
	ecra> capacity compatibility list
	ecra> capacity compatibility addmatrix osversion=ol9 exaversion=24.1.x hwmodel=X11M-2,X10M-2 giversion=19c,23c status=ENABLED servicetype=EXACS
	ecra> capacity compatibility addexclusion osversion=ol9 exaversion=24.1.x hwmodel=X11M-2 giversion=19c,23c servicetype=EXACS
	ecra> capacity compatibility enablematrix id=2
	ecra> capacity compatibility disablematrix id=2
	ecra> capacity compatibility updatematrix id=2 osversion=ol9 exaversion=24.1.x hwmodel=X11M-2,X10M-2 giversion=19c,23c status=ENABLED servicetype=EXACS
    ecra> capacity compatibility catalog model=X9M-2 servicetype=exacs giversion=19 dom0version=23.1.1.1.311223

getfilesystemdefinitions:
Usage: ecra>capacity getfilesystemdefinitions model=<RACK MODEL> [exaOcid=<EXAOCID> rackname=<rackname> adbd=<yes|no> svm=<yes|no>]
Purpose:
       Returns the minimum and maximum size for each mount of the filesystem for the indicated model and the extra parameters.

Argument:
        model : Value that indicates the model of the rack from which extract the information.
        exaocid : Name of Infra that will help obtain all extra parameters for the request
        rackname: Optional, name of the rack
        adbd: Optional, helps determine if the mounts required are adbd or not
        svm: Optional, helps determine if the mounts required are svm or mvm

Examples:
ecra> capacity getfilesystemdefinitions model=X8M-2
* {
    "filesystem": [
        {
            "mountpoint": "/tmp",
            "minsizegb": 10,
            "maxsizegb": 900
        },
        {
            "mountpoint": "/u01",
            "minsizegb": 250,
            "maxsizegb": 900
        },
        {
            "mountpoint": "/var",
            "minsizegb": 10,
            "maxsizegb": 900
        },
        {
            "mountpoint": "/var/log",
            "minsizegb": 30,
            "maxsizegb": 900
        },
        {
            "mountpoint": "/var/log/audit",
            "minsizegb": 3,
            "maxsizegb": 900
        }
    ],
    "status": 200,
    "op": "capacity_filesystem_definitions",
    "status-detail": "success"
}

# gioperation
  Usage:
    capacity gioperation jsonpath=<JSONPATH>
      Values:
        <JSONPATH>  : JSON that contains the operation and the information for the GI
      Purpose:
        Send a request to EC to add/update/delete a GI, the operation comes inside the payload in the type attribute.
      Examples:
        ecra> capacity gioperation jsonpath=/scratch/illamas/payloads/gi/deleteGi.json
	* {"status":202,"status_uri":"http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/6cb6722c-4121-41f1-bd46-a2eb1a04338d","op":"gi_operation_post","op_start_time":"2023-09-08T23:09:58+0000","est_op_end_time":"","message":"processing","status-detail":"processing"}
________________________________________________________________________________

RackSlot:
Register:
Usage: ecra>rackslot register exadata_id=<exadata id> [networkinfo=<network info file path> | xml=<rack xml path>]
Purpose:
       Register rack slot with given exadata id.

Argument:
        exadata_id : Exadata id
        networkinfo : Network info file path
        xml = Rack XML path

Examples:
ecra> rackslot register xml=/scratch/slcs16adm03slcs16adm03vm01-v303slcs16adm04slcs16adm04vm01-v303/config/slcs16adm0304clu1.xml exadata_id=slcs16adm0304clu1
               or
./ecracli rackslot register xml=/scratch/slcs16adm03slcs16adm03vm01-v303slcs16adm04slcs16adm04vm01-v303/config/slcs16adm0304clu1.xml exadata_id=slcs16adm0304clu1
* Registering rack slot with exadata id: slcs16adm0304clu1
* Response data
* status : 200
* status-detail : success
* message : New rack slot has been successfully registered with exadata: slcs16adm0304clu1 and rack: slcs16adm0304clu1-clu-1
* op : rack_slot_register

Deregister:
Usage: ecra>rackslot deregister rackname=<rack name>
Purpose:
       Deregister rack slot associated with given rack name.

Argument:
        rackname : Rack name

Examples:
ecra> rackslot deregister rackname=slcs16adm0304clu1-clu-3
               or
./ecracli rackslot deregister rackname=slcs16adm0304clu1-clu-3
* Deregistering rack slot associated with rack name: slcs16adm0304clu1-clu-3
* Response data
* status : 200
* status-detail : success
* message : Successfully deregistered rack slot associated with rack name: slcs16adm0304clu1-clu-3
* op : rack_slot_deregister

List:
Usage: ecra>rackslot list exadata_id=<exadata id>
Purpose:
       Get rack slots list for given exadata id.

Argument:
        exadata_id : Exadata id

Examples:
ecra> rackslot list exadata_id=slcs16adm0304clu1
               or
./ecracli rackslot list exadata_id=slcs16adm0304clu1
* Getting rack slots list for exadata: slcs16adm0304clu1
* GET http://den00tuj.us.oracle.com:9001/ecra/endpoint/capacity/rackslot?exadataid=slcs16adm0304clu1
* Response data
* status : 200
* rack_slots : [{u'source': u'OPS', u'rack_name': u'slcs16adm0304clu1-clu-1'}, {u'source': u'OPS', u'rack_name': u'slcs16adm0304clu1-clu-2'}, {u'source': u'OPS', u'rack_name': u'slcs16adm0304clu1-clu-3'}]
* message : Operation to get rack slots is successful
* status-detail : success
* op : rack_slot_get

Get:
Usage: ecra>rackslot get rackname=<rack name>
Purpose:
       Get details of rack slot associated with given rack name.

Argument:
        rackname : Rack name

Examples:
ecra> rackslot get rackname=slcs16adm0304clu1-clu-1
               or
./ecracli rackslot get rackname=slcs16adm0304clu1-clu-1
* Getting rack slot details for rack: slcs16adm0304clu1-clu-1
* GET http://den00tuj.us.oracle.com:9001/ecra/endpoint/capacity/rackslot?rackname=slcs16adm0304clu1-clu-1
* Response data
* status : 200
* status-detail : success
* message : Successfully obtained details for rack slot associated with rack name: slcs16adm0304clu1-clu-1
* rack_slot_details : {u'source': u'OPS', u'rack_name': u'slcs16adm0304clu1-clu-1', u'details': u'{"xml":"PD94bWwgdm.....F2ZXJzaW9uPSIxN"}', u'exadata_id': u'slcs16adm0304clu1'}
* op : rack_slot_get

Zone:
add:
Usage: ecra>zone add <zone_name> uri=<zonal ecra uri> username=<username> passwd=<passwd>
			[region=<region> | dc=<data center> | location=<LOCAL|REMOTE> | bkupuri=<zonal ecra backup uri>]

Purpose:
	Add a new zone either remote or local with the URI of the ECRA service. Location will default to REMOTE if not specified.

Arguments:
	<zone_name>  : Name of the zone, a mandatory argument
	uri			 : Zonal ECRA URI
	username     : username
	passwd       : Password
	region       : region
	dc           : data center
	location     : Either one of LOCAL or REMOTE, default is REMOTE
	bkupuri      : The backup URI

Examples:

Notes:
	* Location is REMOTE if nothing is specified. If the location is REMOTE, both region and datacenter needs to be provided.
	* If the region is LOCAL and either region or datacenter is not specified, then the default from the template will be used.

list:
Usage: ecra> zone list
		or
./ecracli zone list

Purpose:
	It lists all the zonal ECRAs

Arguments:
	None. No argument is required for this cli.

Examples:

delete:
Usage: ecra> zone delete <zone_name>
		or
	./ecracli zone delete <zone_name>

Purpose:
	Delete the given zone from the local ECRA.

Examples:
ecra> zone delete xyz
Delete zone: xyz
Error: Delete request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/zones/xyz failed
HTTP Error 400: Bad Request
{"status":400,"message":"No record found for zone: xyz","op":"zones_delete"}
Error: Error: Unable to delete zone

Location:
add:
Usage: location add <Location Name> type=<Location Type> [region=<region> dc=<dc_name> ad=<ad name> subscription_id=<subscription_id>] uri=<Location Uri> username=<username> passwd=<passwd>

Purpose:
	Add a new Location either site, zone or ad type with the URI of the ECRA service.

Arguments:
	<locatoin_name>  : Name of the location, a mandatory argument
	<type>           : type of location (ad/zone/site), a mandatory argument
	uri              : Location ECRA URI
	username         : username
	passwd           : Password
	region           : region
	dc               : data center
	ad               : Avaliablity Domain
        subscription_id               : Subscription ID of the Site

Examples:
ecra> location add loc1 type=zone dc=zone uri=http://slc14rlu.us.oracle.com:9001 username=sdi passwd=<PWD>
* {"status": 200, "status-detail": "success", "op": "location_create"}

ecra> location add loc2 type=site subscription_id=subscriptionid123 uri=http://slc14rlu.us.oracle.com:9001 username=sdi passwd=<PWD>
* {"status": 200, "status-detail": "success", "op": "location_create"}

ecra> location add loc3 type=ad compute_zone=czone uri=http://slc14rlu.us.oracle.com:9001 username=sdi passwd=<PWD>
* {"status": 200, "status-detail": "success", "op": "location_create"}

list:
Usage: ecra> location list type=<site/ad/zone> [subscription_id=<subscription_id>]

Purpose:
	It lists all the location ECRAs for given type

Arguments:
	<type>           : type of location (ad/zone/site), a mandatory argument
	subscription_id  : Subscription ID of the Site

Examples:
ecra> location list type=ad
http://slc14rlu.us.oracle.com:9073/ecra/endpoint/location?type=ad
* [
    {
        "ad": "piyushzone11", 
        "compute_zone": "us1", 
        "region": "rg001", 
        "uri": "http://slc114rlu.us.oracle.com:3/ecra/endpoint"
    }, 
    {
        "ad": "piyushzone111", 
        "compute_zone": "us111", 
        "region": "rg0011", 
        "uri": "http://slc114rlu.us.oracle.com:13/ecra/endpoint"
    }
]
ecra> location list type=zone
http://slc14rlu.us.oracle.com:9073/ecra/endpoint/location?type=zone
* [
    {
        "dc": "us1", 
        "region": "rg001", 
        "uri": "http://slc114rlu.us.oracle.com:1/ecra/endpoint", 
        "zone": "piyushzone2"
    }, 
    {
        "dc": "us11", 
        "region": "rg001", 
        "uri": "http://slc114rlu.us.oracle.com:11/ecra/endpoint", 
        "zone": "piyushzone21"
    }
]
ecra> location list type=site subscription_id=subscriptionid123
http://slc14rlu.us.oracle.com:9073/ecra/endpoint/location?subscription_id=subscriptionid123&type=site
* [
    {
        "region": "rg001", 
        "site": "piyushzone", 
        "subscription_id": "subscriptionid123", 
        "uri": "http://slc114rlu.us.oracle.com:9011/ecra/endpoint"
    }, 
    {
        "region": "rg001", 
        "site": "piyushzone", 
        "subscription_id": "subscriptionid123", 
        "uri": "http://slc114rlu.us.oracle.com:9013/ecra/endpoint"
    }
]

delete:
Usage: ecra> location delete type=<location type> <location_name> [dc=<dc_name> ad=<ad_name> subscription_id=<subscription_id>]

Purpose:
	Delete the given location with given type.

Examples:
ecra> location delete piyushzone2 type=zone dc=us1
* Delete Location: piyushzone2?sublocation=us1&type=zone
* {"status": 200, "status-detail": "success", "op": "location_delete"}

details:
Usage:
    location details subscription_id=sub1 region=rg001 model=x7-2 racksize=quarter
    or
    ./ecracli location details subscription_id=sub1 region=rg001 model=x7-2 racksize=quarter

Purpose:
    Get the details like features, capacity for the locations that are fetched
    from the Broker based on the given command-line arguments.

Arguments:
    subscription_id: The subscription id.
    racksize: rack size or exadata size value for the capacity query. Internal
              implementations will figure out if it is multi-vm or single-vm.
    region: The region where the query should be done in case the subscription
            id doesn't match.
    model: The model for the capacity query.

Examples:
ecra> location details subscription_id=sub1 region=rg001 model=x7-2 racksize=quarter
* http://slc13qra.us.oracle.com:9001/ecra/endpoint/broker/locations?subscriptionid=sub1&region=rg001&racksize=quarter x7-2
* {
    "locationType": "sites", 
    "op": "location_features_list", 
    "sites": [
        {
            "capacity": [], 
            "features": [
                {
                    "enabled": false, 
                    "name": "HIGGS"
                }, 
                {
                    "enabled": false, 
                    "name": "MVM"
                }, 
                {
                    "enabled": false, 
                    "name": "NODE_SUBSETS"
                }
            ], 
            "name": "site1"
        }
    ], 
    "status": 200, 
    "status-detail": "success"
}

ecra> location details subscription_id=sub1 region=rg001 model=x5-2 racksize=quarter
* http://slc13qra.us.oracle.com:9001/ecra/endpoint/broker/locations?subscriptionid=sub1&region=rg001&racksize=quarter x5-2
* {
    "locationType": "sites", 
    "op": "location_features_list", 
    "sites": [
        {
            "capacity": [
                {
                    "count": "1", 
                    "exadata_id": "1", 
                    "exadata_size": "quarter", 
                    "model": "X5-2", 
                    "status": "READY"
                }, 
                {
                    "count": "1", 
                    "exadata_id": "2", 
                    "exadata_size": "quarter", 
                    "model": "X5-2", 
                    "status": "READY"
                }, 
                {
                    "count": "1", 
                    "exadata_id": "3", 
                    "exadata_size": "quarter", 
                    "model": "X5-2", 
                    "status": "READY"
                }, 
                {
                    "count": "1", 
                    "exadata_id": "4", 
                    "exadata_size": "quarter", 
                    "model": "X5-2", 
                    "status": "READY"
                }, 
                {
                    "count": "1", 
                    "exadata_id": "5", 
                    "exadata_size": "quarter", 
                    "model": "X5-2", 
                    "status": "READY"
                }, 
                {
                    "count": "1", 
                    "exadata_id": "6", 
                    "exadata_size": "quarter", 
                    "model": "X5-2", 
                    "status": "READY"
                }
            ], 
            "features": [
                {
                    "enabled": false, 
                    "name": "HIGGS"
                }, 
                {
                    "enabled": false, 
                    "name": "MVM"
                }, 
                {
                    "enabled": false, 
                    "name": "NODE_SUBSETS"
                }
            ], 
            "name": "site1"
        }
    ], 
    "status": 200, 
    "status-detail": "success"
}

Exadata:
network_info:

Usage: ecra> exadata network_info <racksize> <zonename>
               or
       ./ecracli exadata network_info <racksize> <zonename>

Purpose:
     In Exacm It will fetch the client network and backup network information from DB for given racksize and zonename.

Argument:
     racksize: racksize (Half, Quarter, Quarter X5-2 etc...)
     zone:     zone name

Example:
     {"networkInfo: [{exadataId: <exadataId>, networks: <JSONResponse>}]}

     ecra> exadata network_info racksize=quarter
* GET http://slc14rlu.us.oracle.com:9023/ecra/endpoint/exadata/networks?racksize=quarter
{
    "networkInfo": [
        {
            "exadataId": "1",
            "networks": [
                {
                    "backupNetworkInfo": "10.249.92.0/22",
                    "clientNetworkInfo": "10.249.80.0/21",
                    "rackName": "1-clu-3"
                },
                {
                    "backupNetworkInfo": "10.249.92.0/22",
                    "clientNetworkInfo": "10.249.80.0/21",
                    "rackName": "1-clu-6"
                }
            ]
        },
        {
            "exadataId": "2",
            "networks": [
                {
                    "backupNetworkInfo": "10.249.92.0/22",
                    "clientNetworkInfo": "10.249.80.0/21",
                    "rackName": "2-clu-1"
                }
            ]
        },
    ],
    "op": "exadata-network-info",
    "status": 200,
    "status-detail": "success"
}
     ecra> exadata network_info racksize=quarter zone=us-east-1
* GET http://slc14rlu.us.oracle.com:9023/ecra/endpoint/broker/exadata/networks?racksize=quarter&zone=us-east-1
* {
    "networkInfo": [
        {
            "exadataId": "1",
            "networks": [
                {
                    "backupNetworkInfo": "10.249.92.0/22",
                    "clientNetworkInfo": "10.249.80.0/21",
                    "rackName": "1-clu-3"
                },
                {
                    "backupNetworkInfo": "10.249.92.0/22",
                    "clientNetworkInfo": "10.249.80.0/21",
                    "rackName": "1-clu-6"
                }
            ]
        },
        {
            "exadataId": "2",
            "networks": [
                {
                    "backupNetworkInfo": "10.249.92.0/22",
                    "clientNetworkInfo": "10.249.80.0/21",
                    "rackName": "2-clu-1"
                }
            ]
        },
    ],
    "op": "exadata-network-info",
    "status": 200,
    "status-detail": "success"
}


models:

Usage: ecra> exadata models [model=<model name>] 
               or
       ./ecracli exadata models [model=<model name>] 

Purpose:
     Describe the models available, and details

Argument:
     model: filter the result by one single model name

Example:
ecra> exadata models
* {
    "models": [
        {
            "ilomtype": "OVERLAY",
            "model": "X10M-2",
            "support_status": "ACTIVE"
        },
        {
            "ilomtype": "SUBSTRATE",
            "model": "X11M-2",
            "support_status": "PENDING-RELEASE"
        },
        {
            "ilomtype": "OVERLAY",
            "model": "X8M-2",
            "support_status": "ACTIVE"
        },
        {
            "ilomtype": "OVERLAY",
            "model": "X9M-2",
            "support_status": "ACTIVE"
        }
    ],
    "op": "exadata-models-get",
    "status": 200,
    "status-detail": "success"
}
ecra> exadata models model=X9M-2
* {
    "models": [
        {
            "ilomtype": "OVERLAY",
            "model": "X9M-2",
            "support_status": "ACTIVE"
        }
    ],
    "op": "exadata-models-get",
    "status": 200,
    "status-detail": "success"
}

Jumbo:
enable:
Usage : ecra> jumbo enable 2
        or
        ./ecracli jumbo enable 2

Purpose:
  Enable Jumbo on the chosen cluster

Example:
  ecra> jumbo enable 2
  ...
  ...
  ...
  * {u'jumbo': {u'status': u'Done', u'body': u"* TIMING: Tue Sep 19 03:48:49
  * 2017 - Tue Sep 19 03:48:52 2017\n* REQ INFO:
  * enablejmb\n--------------------------------------------------------------------------------\n***
  * Request Object found updating clustername (slcs16adm0304clu8)\n***
  * KEY_CHECK:
  * (False/slcs16adm03slcs16adm03vm08-v303slcs16adm04slcs16adm04vm08-v303)\n***
    * u'start_time': u'Tue Sep 19 03:48:48 2017', u'cmd': u'cluctrl.enablejmb',
    * u'error_str': u'No Errors'}, u'status': 200, u'status-detail': u'success',
  * u'op': u'jmb_enable'}
  
Notes:
	It takes some time for the HTTP request to return

disable:
Usage : ecra> jumbo disable 2
        or
        ./ecracli jumbo disable 2

Purpose:
  Disable Jumbo on the chosen cluster

Example:
  ecra> jumbo disable 2
  ...
  ...
  ...
  * {u'jumbo': {u'status': u'Done', u'body': u"* TIMING: Tue Sep 19 03:59:07
  * 2017 - Tue Sep 19 03:59:10 2017\n* REQ INFO:
  * disablejmb\n--------------------------------------------------------------
  * .
  * .
  * u'error_str': u'No Errors'}, u'status': 200, u'status-detail': u'success',
  * u'op': u'jmb_disable'}

query:
Usage : ecra> jumbo query 2
        or
        ./ecracli jumbo query 2

Purpose:
  Query Jumbo on the chosen cluster

Example:
  ecra> jumbo query 2
  ...
  ...
  ...
  * {u'jumbo': {u'status': u'Done', u'body': u"* TIMING: Tue Sep 19 05:48:57 2017 - Tue Sep 19 05:49:01 2017\n* REQ INFO: queryjmb\n--------------------------------------------------------------------------------\n*** Request Object found updating clustername (slcs16adm0304clu8)\n*** KEY_CHECK: (False/slcs16adm03slcs16adm03vm08-v303slcs16adm04slcs16adm04vm08-v303)\n*** 
  ...
  ...
  u'end_time': u'Tue Sep 19 05:49:01 2017', u'error': u'0', u'statusinfo': u'000:: No status info available', u'ec_details': u'Undef', u'error_str': u'No Errors'}, u'status': 200, u'status-detail': u'success', u'op': u'jmb_query'}
  

Ebtables
enable:
Usage : ./ecracli ebtables enable <exaunit_id>
           or
        ecra> ebtables enable <exaunit_id>

Purpose:
	Activate ebtables on the chosen cluster

Examples:
	ecra> ebtables enable 2
{u'status': 200, u'status-detail': u'success', u'ebtables': {u'status': u'Done', u'body': u"* TIMING: Wed May  3 14:54:32 2017 - Wed May  3 14:54:40 2017\n* REQ INFO: enableebt\n--------------------------------------------------------------------------------\n*** Request Object found updating clustername (slcqab02adm0506clu5)\n*** KEY_CHECK: (False/slcqab02adm05slcqab02adm05vm05slcqab02adm06slcqab02adm06vm05)\n*** Found DB Home c4_DbHome_0 for current cluster\n*** DB 12.2 is disabled skipping 12.2 DB_HOME install\n*** DB 12.1.0.2 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24448103', u'21923026', u'24315824']\n*** DB 11.2.0.4 IMG BPL 2016.291 (CONFIG) PATCHES SET TO :
........
........
........

Notes:
	It takes some time for the HTTP request to return

disable:
Usage : ./ecracli ebtables disable <exaunit_id>
           or
        ecra> ebtables disable <exaunit_id>

Purpose:
	Deactivate ebtables on the chosen cluster

Examples:
	ecra> ebtables disable 2
{u'status': 200, u'status-detail': u'success', u'ebtables': {u'status': u'Done', u'body': u"* TIMING: Wed May  3 14:58:22 2017 - Wed May  3 14:58:30 2017\n* REQ INFO: disableebt\n--------------------------------------------------------------------------------\n*** Request Object found updating clustername (slcqab02adm0506clu5)\n*** KEY_CHECK: (False/slcqab02adm05slcqab02adm05vm05slcqab02adm06slcqab02adm06vm05)\n*** Found DB Home c4_DbHome_0 for current cluster\n*** DB 12.2 is disabled skipping 12.2 DB_HOME install\n*** DB 12.1.0.2 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24448103', u'21923026', u'24315824']\n*** DB 11.2.0.4 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24479801', u'24315821', u'23200778']\n***
.......
.......

add:
Usage: ecra> ebtables add <exaunit_id> ip=<ip1,ip2,...>
			or
		./ecracli ebtables add <exaunit_id> ip=<ip1,ip2,...>

Purpose:
	Add ebtables rules on the chosen cluster

Examples:
ecra> ebtables add 2 ip=10.196.56.151
{u'status': 200, u'status-detail': u'success', u'ebtables': {u'status': u'Done', u'body': u"* TIMING: Wed May  3 15:05:54 2017 - Wed May  3 15:05:59 2017\n* REQ INFO: addebtrule\n--------------------------------------------------------------------------------\n*** Request Object found updating clustername (slcqab02adm0506clu5)\n*** KEY_CHECK: (False/slcqab02adm05slcqab02adm05vm05slcqab02adm06slcqab02adm06vm05)\n*** Found DB Home c4_DbHome_0 for current cluster\n*** DB 12.2 is disabled skipping 12.2 DB_HOME install\n*** DB 12.1.0.2 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24448103', u'21923026', u'24315824']\n*** DB 11.2.0.4 IMG BPL 201
.....
.....

delete:
Usage: ecra> ebtables delete <exaunit_id> ip=<ip1,ip2,...>
			or
		./ecracli ebtables delete <exaunit_id> ip=<ip1,ip2,...>

Purpose:
	Delete ebtables rules on the chosen cluster

Examples:
ecra> ebtables delete 2 ip=10.196.56.151
{u'status': 200, u'status-detail': u'success', u'ebtables': {u'status': u'Done', u'body': u"* TIMING: Wed May  3 15:08:47 2017 - Wed May  3 15:08:53 2017\n* REQ INFO: delebtrule\n--------------------------------------------------------------------------------\n*** Request Object found updating clustername (slcqab02adm0506clu5)\n*** KEY_CHECK: (False/slcqab02adm05slcqab02adm05vm05slcqab02adm06slcqab02adm06vm05)\n*** Found DB Home c4_DbHome_0 for current cluster\n*** DB 12.2 is disabled skipping 12.2 DB_HOME install\n*** DB 12.1.0.2 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24448103', u'21923026', u'24315824']\n*** DB 11.2.0.4 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24479801', u'24315821', u'23200778']\n*** GI 12.1.0.2 IMG BPL 2016.291 (CONFIG) PATCHES SET TO : [u'24448103']\n*** Purging ScanIps: 10.249.81.229\n*** Purging ScanIps: 10.249.81.230\n*** Purging ScanIps: 10.249.81.250\n*** Purging ScanIps: 10.249.81.251\n*** Purging ScanIps: 10.249.81.215\n*** Purging ScanIps: 10.249.81.216\n*** Purging ScanIps: 10.249.81.236\n*** Purging ScanIps: 10.249.81.237\n*** Purging ScanIps: 10.249.81.201\n*** Purging ScanIps: 10.249.81.202\n*** Purging ScanIps: 10.249.81.222\n*** Purging ScanIps: 10.249.81.223\n
....
....

Idemtoken:
new:
Usage: ecra> idemtoken new
			or
		./ecracli idemtoken new

Purpose:
	Generate a new idemtoken.

Examples:
$ ./ecracli idemtoken new
Request new idemtoken
Response data
status : 200
status-detail : success
idemtoken : c2994199-a63d-4124-9b92-c3a5cd650ce1
op : idem_token_new

ecra> idemtoken new
* Request new idemtoken
* Response data
* status : 200
* status-detail : success
* idemtoken : 0db9a50f-467e-478e-ba7d-68c2c3d18beb
* op : idem_token_new

renew:
Usage: ecra> idemtoken renew idemtoken=<idemtoken>
			or
		./ecracli idemtoken renew idemtoken=<idemtoken>

Purpose:
	Renew the idemtoken to be usable again

Examples:
ecra> idemtoken renew idemtoken=56ab78f4-bd51-4d83-ae9c-9f4adfad8f5c
* {
    "op": "idem_token_renew",
    "status": 200,
    "status-detail": "success"
}

Info:
Usage: ecra> info
                        or
             info display=cei
             or
             info showongoingops=True
             or
             info showongoingops=True
             or
             info rackname=iad
             or
             info rackstate="PROVISIONERR"
             or
             info verbose=yes
             or
             info ecraonly=yes
			 or
	   ./ecracli info

Purpose:
	Displays a list of current settings and connect to endpoint to pull the ecra version information. If parameter  hide_clusters=True is used then the list of cluster is hidden. If parameter showongoingops is used, ongoing operations in cluster/cabinets non provisioned is shown. Parameters rackname and rackstate can be used
	to filter output from command.

Examples:
ecra> info
* Ecracli -17.134
* username : sdi
* password : <PWD>
* host     : http://den01gpy.us.oracle.com:9001/ecra/endpoint
* created exaunits
*  <id> : <rackname>          : <rackstate> : <ongoing op> : <dbSIDs>
*  1    : slcqab02adm0506clu5 : PROVISIONED :              : dbd773a9(CREATED)
* Connecting to endpoint and getting version info...
* status : 200
* exacloud_version : main(17.133)
* status-detail : success
* label : ECS_MAIN_LINUX.X64_170513.0900
* dbaas_version : dbaastools_exa-1.0-1+16.2.0.0.0_170511.2001
* oeda_version : 17.089.19:00
* op : version_get
* dborch_version : 4.0.132.17.37
ecra>

ecra> info hide_clusters=True
* Ecracli -20.234
* host              : http://slc17ubh.us.oracle.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* Connecting to endpoint and getting version info...
* dbaas_version : dbaastools_exa-1.0-1+MAIN_200812.0101
* dbcs_agent_ol6 : dbcs-2.8OL6-MAIN_200812.0101
* dbcs_agent_ol7 : dbcs-2.8OL7-MAIN_200812.0101
* exacloud_version : main(20.225)
* oeda_version : 200624
* label : ECS_MAIN_LINUX.X64_200819.0900
* workflow_api_version : 0.1_mainline_2020-06-16T10:58:32Z
* dborch_version : ECS_MAIN_LINUX.X64_200819.0900
* status : 200
* op : version_get
* status-detail : success

ecra> info rackstate=PROVISIONED
* Ecracli -22.018
* host              : http://slc16ccl.us.oracle.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
*  <id> : <rackname>                           : <exaname> : <rackstate> : <ongoing op> : <workflowId> : <dbSIDs>
*  176  : iad103714_cluster_name_16            : exaclu    : PROVISIONED :              :              : 
*  177  : sea201109exd-d0-01-02-cl-01-03-clu01 : myclu1    : PROVISIONED :              :              : 
*  178  : iad103714exd-d0-05-06-cl-07-09-clu01 : myclu1    : PROVISIONED :              :              : 
* Connecting to endpoint and getting version info...
* dbaas_version : dbaastools_exa-1.0-1+MAIN_220114.0101
* dbcs_agent_ol6 : dbcs-2.8OL6-MAIN_220114.0101
* dbcs_agent_ol7 : dbcs-2.8OL7-MAIN_220114.0101
* oci_sdk_version : 2.10.0
* exacloud_version : main(22.018)
* oeda_version : 211217
* label : ECS_MAIN_LINUX.X64_220118.2038
* workflow_api_version : 0.1_log4j_2.17.1_2021-12-20T06:27:20Z
* dborch_version : ECS_MAIN_LINUX.X64_220118.2038
* status : 200
* op : version_get
* status-detail : success

ecra> info rackname=sea
* Ecracli -22.018
* host              : http://slc16ccl.us.oracle.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
*  <id> : <rackname>                           : <exaname> : <rackstate> : <ongoing op> : <workflowId> : <dbSIDs>
*  177  : sea201109exd-d0-01-02-cl-01-03-clu01 : myclu1    : PROVISIONED :              :              : 
* Connecting to endpoint and getting version info...
* dbaas_version : dbaastools_exa-1.0-1+MAIN_220114.0101
* dbcs_agent_ol6 : dbcs-2.8OL6-MAIN_220114.0101
* dbcs_agent_ol7 : dbcs-2.8OL7-MAIN_220114.0101
* oci_sdk_version : 2.10.0
* exacloud_version : main(22.018)
* oeda_version : 211217
* label : ECS_MAIN_LINUX.X64_220118.2038
* workflow_api_version : 0.1_log4j_2.17.1_2021-12-20T06:27:20Z
* dborch_version : ECS_MAIN_LINUX.X64_220118.2038
* status : 200
* op : version_get
* status-detail : success

ecra> info verbose=yes
* Ecracli -22.018
* host              : http://slc16ccl.us.oracle.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
*  <id> : <rackname>                           : <exaname> : <rackstate> : <ongoing op> : <workflowId> : <dbSIDs>
*  177  : sea201109exd-d0-01-02-cl-01-03-clu01 : myclu1    : PROVISIONED :              :              : 
* Connecting to endpoint and getting version info...
* dbaas_version : dbaastools_exa-1.0-MAIN_231024.0100
* bin/diagnosticcli.py : 20230920
* oeda_build : OSS_23.1.5.0.0OEDA_LINUX.X64_230919
* helidon_version : 2.6.3
* exacd_netchk.tar.gz : 20230920
* exacloud_version : main(23.297)
* oeda_version : 230919
* exacd_plgmon : 20230920
* label : ECS_MAIN_LINUX.X64_231210.0901
* rsyslog : 20230920
* workflow_api_version : 0.1_mainline_2023-11-24T05:15:31Z
* exa_infra_events : 20230920
* dbcs_agent_ol6 : dbcs-2.8OL6-MAIN_231024.0100
* dbcs_agent_ol7 : dbcs-2.8OL7-MAIN_231024.0100
* oci_sdk_version : 3.23.0
* exacd_cpcheck : 20230920
* dborch_version : ECS_MAIN_LINUX.X64_231210.0901
* exacd_logcol : 20230920
* sanitycheck : 20230920
* status : 200
* op : version_get
* status-detail : success

ecra> info ecraonly=yes
* Ecracli -24.073
* host           : http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint
* username       : ops
* password       : ****
* created exaunits
*  <id> : <rackname>                                             : <exaname>           : <rackstate> : <ongoing op> : <workflowId> : <serverName> : <dbSIDs>
*  405  : iad1-d4-cl3-7e5c8453-ac02-43cf-8269-536cb8f41372-clu01 : MVM-flowtester-TST1 : PROVISIONED :              :              :              : 
* Connecting to endpoint and getting version info...
* dbaas_version : dbaastools_exa-1.0-MAIN_240130.0101
* dbcs_agent_ol6 : dbcs-2.8OL6-MAIN_240130.0101
* dbcs_agent_ol7 : dbcs-2.8OL7-MAIN_240130.0101
* oeda_build : version not fetched
* helidon_version : 2.6.5
* oci_sdk_version : 3.23.0
* exacloud_version : version not fetched
* oeda_version : version not fetched
* label : ECS_MAIN_LINUX.X64_240320.0901
* workflow_api_version : 0.1_mainline_2024-01-24T10:16:48Z
* dborch_version : ECS_MAIN_LINUX.X64_240320.0901
* status : 200
* op : version_get
* status-detail : success

VM:
start:
Usage: ecra> vm start <exaunit-id> <vm-name|_all_> [env=<env-value>]
                    or
       ./ecracli vm start <exaunit-id> <vm-name|_all_> [env=<env-value>]

Purpose:
    Start the given vm on the given exaunit.

Arguments:
    exaunit-id   : The exaunit-id is a mandatory numeric value
    vm-name      : The FQDN of the VM
    env          : The env values - gen1, gen2 are the allowed values

Examples:
ecra> vm start 8 slcqab02adm05vm05.us.oracle.com
* Starting vm slcqab02adm05vm05.us.oracle.com on exaunit 8
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/ff9ab45c-6362-11e7-9030-fa163ed5ac29
* TARGET URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/vms/slcqab02adm05vm05.us.oracle.com
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... ...... ...... ...... ...... ......
* Request start_vm successfully completed

./ecracli vm start 8 slcqab02adm05vm05.us.oracle.com
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/fe9f5462-6363-11e7-9030-fa163ed5ac29

ecra> vm start 41 _all_ env=gen2
* Starting vm _all_ on exaunit 41
http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/cc503f11-654c-4123-92cb-7bae1711578a



stop:
Usage: ecra> vm stop <exaunit-id> <vm-name|_all_> [env=<env-value>]
                    or
       ./ecracli vm stop <exaunit-id> <vm-name|_all_> [env=<env-value>]

Purpose:
    Stop the given vm on the given exaunit.

Arguments:
    exaunit-id   : The exaunit-id is a mandatory numeric value
    vm-name      : The FQDN of the VM
    env          : The env values - gen1, gen2 are the allowed values

Examples:
ecra> vm stop 8 slcqab02adm05vm05.us.oracle.com
* Stoping vm slcqab02adm05vm05.us.oracle.com on exaunit 8
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/086434b0-6362-11e7-9030-fa163ed5ac29
* TARGET URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/vms/slcqab02adm05vm05.us.oracle.com
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... ...... ......
* Request stop_vm successfully completed

./ecracli vm stop  8 slcqab02adm05vm05.us.oracle.com
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/9bb6ac10-6363-11e7-9030-fa163ed5ac29

ecra> vm stop 41 _all_ env=gen2
* Stoping vm _all_ on exaunit 41
http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/628a96b1-f906-4db5-8c74-4bf0fdc3c598


restart:
Usage: ecra> vm restart <exaunit-id> <vm-name|_all_> [env=<env-value>]
                    or
       ./ecracli vm restart <exaunit-id> <vm-name|_all_> [env=<env-value>]

Purpose:
    Restart the given vm on the given exaunit.

Arguments:
    exaunit-id   : The exaunit-id is a mandatory numeric value
    vm-name      : The FQDN of the VM
    env          : The env values - gen1, gen2 are the allowed values

Examples:
ecra> vm restart 8 slcqab02adm05vm05.us.oracle.com
* Restarting vm slcqab02adm05vm05.us.oracle.com on exaunit 8
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/d3330638-6364-11e7-9030-fa163ed5ac29
* TARGET URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/vms/slcqab02adm05vm05.us.oracle.com
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... ......
* Request restart_vm successfully completed

./ecracli vm restart 8 slcqab02adm05vm05.us.oracle.com
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/2619d278-6365-11e7-9030-fa163ed5ac29

ecra> vm restart 41 _all_
* Warning: The <vm_name> given may be wrong.
* Restarting vm _all_ on exaunit 41
http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/a37aea96-6416-11ee-ad4c-000017006322


status:
Usage: ecra> vm status <exaunit-id> <vm-name>
                    or
       ./ecracli vm status <exaunit-id> <vm-name>

Purpose:
    Get the status of a given vm on the given exaunit.

Arguments:
    exaunit-id   : The exaunit-id is a mandatory numeric value
    vm-name      : The FQDN of the VM

Examples:
ecra> vm status 395 sea201323exddu0901.us.oracle.com
* {
    "message": "VM sea201323exddu0901.us.oracle.com is up",
    "op": "exaunit_vmcmd_get",
    "status": 200,
    "status-detail": "success",
    "vmstatus": "up"
}

relation:
Usage: ecra> vm relation <domu=admin hostname>
                    or
       ./ecracli vm relation <domu=admin hostname>

Purpose:
    Shows the information about all the vms that are in the same cluster than the provided one.

Arguments:
    domu   : Admin hostname of the vm without domainname

Examples:
ecra> vm relation domu=sea201733exddu0201
* {
    "vms": [
        {
            "adminhostname": "sea201733exddu0101.sea2xx2xx0071qf.adminsea2.oraclevcn.com",
            "clienthostname": "sea201733exddu0101-client1.client.customer2.oraclevcn.com",
            "adminip": "10.0.160.175",
            "rackname": "iad1-d4-cl3-c2fea12a-7b24-407d-8917-f28395a76aad-clu01"
        },
        {
            "adminhostname": "sea201733exddu0201.sea2xx2xx0071qf.adminsea2.oraclevcn.com",
            "clienthostname": "sea201733exddu0201-client2.client.customer2.oraclevcn.com",
            "adminip": "10.0.160.176",
            "rackname": "iad1-d4-cl3-c2fea12a-7b24-407d-8917-f28395a76aad-clu01"
        },
        {
            "adminhostname": "sea201733exddu0301.sea2xx2xx0071qf.adminsea2.oraclevcn.com",
            "clienthostname": "sea201733exddu0301-client3.client.customer2.oraclevcn.com",
            "adminip": "10.0.160.177",
            "adminvlanid": "10",
            "rackname": "iad1-d4-cl3-c2fea12a-7b24-407d-8917-f28395a76aad-clu01",
            "vmocid": "Testing vm"
        },
        {
            "adminhostname": "sea201733exddu0401.sea2xx2xx0071qf.adminsea2.oraclevcn.com",
            "clienthostname": "sea201733exddu0401-client4.client.customer2.oraclevcn.com",
            "adminip": "10.0.160.178",
            "rackname": "iad1-d4-cl3-c2fea12a-7b24-407d-8917-f28395a76aad-clu01"
        }
    ],
    "status": 200,
    "op": "vm_relation_get",
    "status-detail": "success"
}

exaunit acfs:
Usage:
    exaunit acfs operation=<create|resize|mount|delete> acfsOcid=<acfsOcid> exaunitId=<exaunitId>

Purpose:
    This command perfom the operations related to Advanced Cluster File System (ACFS) using Exascale block volume, create, resize, mount/unmount, and delete 

Arguments:
    operation  : Indicates the type of opertion create, resize, mount or delete
    exaunitId  : Exaunit id of the cluster
    acfsOcid  : Unique Id of the acfs
    acfsName : Name to identify the acfs. It is required only in the create operation.
    sizeGb : Size in GB. It's required in the create and resize operations.
    mount: It's a boolean parameter true indicates mount and false unmount. It's required for mount operation.
    

Examples:

ecra> exaunit acfs operation=delete acfsOcid=ocid.acfs.sfsdfw2 exaunitId=1
* {
  "status": 202,
  "status_uri": "http://phoenix94033.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/94b06981-f7f7-4be0-9bb7-1c240d06e600",
  "op": "resize_acfs_delete",
  "op_start_time": "2025-06-19T17:41:57+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing",
  "exaunit_id": 1
}

ecra> exaunit acfs operation=mount acfsOcid=ocid.acfs.sfsdfw2 exaunitId=1 mount=false
* {
  "status": 202,
  "status_uri": "http://phoenix94033.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/701d1a47-4591-4ea6-9fa1-4450e78e702a",
  "op": "mount_acfs_put",
  "op_start_time": "2025-06-19T17:38:41+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing",
  "exaunit_id": 1
}

ecra> exaunit acfs operation=resize acfsOcid=ocid.acfs.sfsdfw2 sizeGb=80 exaunitId=1
* {
  "status": 202,
  "status_uri": "http://phoenix94033.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/8cdd86b9-ae39-4d3e-baf6-c3f9039160f6",
  "op": "resize_acfs_put",
  "op_start_time": "2025-06-19T17:28:52+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing",
  "exaunit_id": 1
}

ecra> exaunit acfs operation=create acfsOcid=ocid.acfs.sfsdfw2 exaunitId=1 sizeGb=60 acfsName=acfsName02
* {
  "status": 202,
  "status_uri": "http://phoenix94033.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/09024d32-f99b-479c-a5b9-f8b799f727c5",
  "op": "create_acfs_post",
  "op_start_time": "2025-06-19T17:21:41+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing",
  "exaunit_id": 1
}


exaunit resizefs:
Usage:
    exaunit resizefs <targetExaunit> <filesystem='rootfs|u01|var|grid|tmp'> <extra_size='#GB'> [listofnodes=<FDQNs>] [validate_max_size=<true|false>]
 This command call Endpoint in Exacloud to allow resize of a VM. 
 
Purpose:
  Command will call endpoint in Exacloud to allow resize of a exaunit using ecracli.
 
Arguments:
    exaunit_id  : Exaunit of the target vm  to resize 
    filesystem  : Target file system to resize rootfs, u01, tmp, var or grid
    extra_size  : Indicates how many Gb should be added to selected file system
    listofnodes : List of FQDNs on which resizefs should act on.
    validate_max_size : Will make the process file if you specify more than the optimal recommended size for the fileSystem  
    
Examples:

ecra> exaunit resizefs 1 filesystem=rootfs  extra_size=10Gb  validate_max_size = false
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den00ucw.us.oracle.com:9001/ecra/endpoint/statuses/7e73fedd-ec73-4ec1-8652-df16a5ef4b78", "op_start_time": "2019-11-20T22:33:22+0000", "message": "processing", "op": "resize_file_system"}
ecra> info
* Ecracli -19.319
* host              : http://den00ucw.us.oracle.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
*  <id> : <rackname>          : <exaname> : <rackstate> : <ongoing op> : <dbSIDs>
*  1    : slcqab02adm0304clu6 : exaclu    : PROVISIONED : reshape-fs   : 
* Connecting to endpoint and getting version info...
* status : 200
* exacloud_version : main(19.317)
* workflow_api_version : 0.1_mainline_2019-09-20T04:32:57Z
* status-detail : success
* label : ECS_MAIN_LINUX.X64_191120.0701
* dbaas_version : dbaastools_exa-1.0-1+MAIN_191113.0143
* dbcs_agent_ol6 : dbcs-2.7OL6-MAIN_191113.0701
* dbcs_agent_ol7 : dbcs-2.7OL7-MAIN_191113.0701
* op : version_get
* dborch_version : 19.324
ecra> status 7e73fedd-ec73-4ec1-8652-df16a5ef4b78
* {"status": 200, "remote_user": "ops", "exaunit_id": 1, "status-detail": "success", "start_time": "2019-11-20T22:33:21+0000", "status_uri": "http://den00ucw.us.oracle.com:9001/ecra/endpoint/statuses/7e73fedd-ec73-4ec1-8652-df16a5ef4b78", "statusinfo": "", "end_time": "2019-11-20T22:34:10+0000", "error": "", "ec_details": "", "message": "Done", "op": "reshape-fs", "ecra_server": "EcraServer1", "last_heartbeat_update": "2019-11-20T22:34:09+0000", "error_str": "No Errors"}
ecra> 

exaunit list:
Usage:
    exaunit list <dom0_bonding=Y/N> 
 
Purpose:
   This cli is used to list the racks that are dom0_bonded.
 
Arguments:
    dom0_bonding  : Y/N to represent dom0_bonding clusters.
    
Examples:
ecra>  exaunit list dom0_bonding=N
* {
    "status": 200, 
    "status-detail": "success", 
    "dom0_bonding": [
        {
            "exaunit_name": "myclu1", 
            "exaunit_id": 184, 
            "rackname": "slcqab02adm0506clu5",
            "dom0_bonding": "N", 
            "racksize": "QUARTER"
        }
    ], 
    "op": "exaunit_dom0_bonding"
}
ecra>  exaunit list dom0_bonding=Y
* {
    "status": 200, 
    "status-detail": "success", 
    "dom0_bonding": [
        {
            "exaunit_name": "exaclu", 
            "exaunit_id": 61, 
            "rackname": "slcqab02adm0506clu6",
            "dom0_bonding": "Y", 
            "racksize": "QUARTER"
        }
    ], 
    "op": "exaunit_dom0_bonding"
}


exaunit addcompute:
Usage:
    exaunit addcompute <exaunitId> jsonPayload=<payloadPath> hostname=<hostname>

Purpose:
   Add an elastic compute to existing exaunit, hardware associated is x8m

Arguments:
    jsonPayload: Payload with the compute information, client, backup and vips for the new computes
    hostname: hostname of the compute node

Examples:
ecra>  exaunit addcompute 1 jsonPayload=myecra/ecracli/tmpl/elastic_oci_addcompute.json


exaunit addcell:
Usage:
    exaunit addcell <exaunitId> jsonPayload=<payloadPath>

Purpose:
   This cli is used to add a cell to an existing exaunit

Arguments:
    jsonPayload: payload with the cell host infromation, this comes from OCI control plane

Examples:
ecra>  exaunit addcell 123 jsonPayload=myecra/ecracli/tmpl/elastic_oci_addcell.json

exaunit deletecompute:
Usage:
    exaunit deletecompute <exaunitId> [jsonPayload=<payloadPath>] [hostnames=hostnames separated by comma]

Purpose:
   Deletes an elastic compute from existing exaunit, hardware associated is x8m

Arguments:
    jsonPayload: Payload with the compute information to delete
    hostnames: hostnames of the compute nodes separated by comma
    force: whether to force the operation execution despite the minimum compute limit

Examples:
ecra>  exaunit deletecompute 1 jsonPayload=myecra/ecracli/tmpl/elastic_oci_deletecompute.json force=true
ecra>  exaunit deletecompute 1 jsonPayload=myecra/ecracli/tmpl/elastic_oci_deletecompute.json

ecra>  exaunit deletecompute 1 hostnames=iad103716exdd017,iad103716exdd016

exaunit deletecell:
Usage:
    exaunit deletecell <exaunitId> cellnodes=<cells separated by comma>

Purpose:
   Deletes an elastic cell from existing exaunit

Arguments:
    cellnodes: Cells nodes list separated by comma

Examples:
ecra>  exaunit exaunit deletecell 1897 cellnodes=iad103712exdcl15
* {
    "status": 202,
    "status_uri": "http://slc11yoj.us.oracle.com:9001/ecra/endpoint/statuses/451c6ca4-2e5e-4ea9-8ac4-4d43a2018e05",
    "op": "exaunit-remove-cell",
    "op_start_time": "2022-03-04T09:02:42+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing",
    "exaunit_id": 1897
}

exaunit reshapeprecheck:
Usage: ecracli> exaunit reshapeprecheck jsonPayload=<json payload path>

Purpose:
        Mvm reshape precheck operation
        Below precheck operations are supported:
        opType = 'ASM'
        opType = 'OHOME'
        opType = 'MEMORY'

Arguments in jsonPayload:
        opType    : exaunitid that you want to reshape
        exaOcid   : exaOcid value
        exaunitId : exaunit id corresponding to cluster

Examples:
ecra> exaunit reshapeprecheck jsonPayload=/scratch2/oracle/ecra_installs/exacc21310/reshape_precheck.json
* Idemtoken used is: 5a5ed4f8-2c91-4ea8-8fce-d82727cc676c
* {"status": 202, "status_uri": "http://ecra-13.ecra.ociexacc.oraclevcn.com:9054/ecra/endpoint/statuses/8d66f582-7eae-4e91-bbaa-f682e91ab023", "op": "reshape_precheck", "op_start_time": "2022-04-08T03:29:21+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 22, "target_uri": "http://ecra-13.ecra.ociexacc.oraclevcn.com:9054/ecra/endpoint/exadata/exaunit//reshapeprecheck"}

exaunit elasticnodeprecheck:
Usage: ecracli> exaunit elasticnodeprecheck jsonPayload=<json payload path>

Purpose:
        Add elastic node precheck operation
        Below precheck operations are supported:
        opType = 'ADD_COMPUTE'
        opType = 'ADD_CELL'

Arguments in jsonPayload:
        opType    : exaunitid that you want to reshape
        exaOcid   : exaOcid value
        exaunitId : exaunit id corresponding to cluster   <---- Optional

Examples:
ecra> exaunit elasticnodeprecheck jsonPayload=/scratch2/oracle/ecra_installs/exacc21310/elastic_precheck.json
* Idemtoken used is: 17282eb0-84d4-41e6-a7f1-f6e4081cd274
* {"status": 202, "status_uri": "http://ecra-13.ecra.ociexacc.oraclevcn.com:9054/ecra/endpoint/statuses/2609938d-a8c8-4549-94c3-365d29c9464d", "op": "reshape_precheck", "op_start_time": "2022-04-08T02:41:59+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "target_uri": "http://ecra-13.ecra.ociexacc.oraclevcn.com:9054/ecra/endpoint/exadata/exaunit//reshapeprecheck"}


exaunit getelasticnodeprecheck:
Usage: ecracli> exaunit getelasticnodeprecheck idemtoken=<idemtoken>

Purpose:
        Get exacloud json output using idemtoken from elastic node precheck run

Arguments needed:
        idemtoken : idemtoken used in elastic node precheck run

Examples:
ecra> exaunit getelasticnodeprecheck idemtoken=17282eb0-84d4-41e6-a7f1-f6e4081cd274
* {
    "elastic-faulty-servers": [
        {
            "domainname": "oraclecloud.internal",
            "error_list": [
                {
                    "error-message": "dom0:iad104564exdd003.oraclecloud.internal not pingable",
                    "error-type": "ping_test"
                }
            ],
            "hostname": "iad104564exdd003",
            "hw_type": "COMPUTE",
            "node-model": "X8-2",
            "preprov": false
        },
        {
            "domainname": "oraclecloud.internal",
            "error_list": [
                {
                    "error-message": "dom0:iad104564exdd004.oraclecloud.internal not pingable",
                    "error-type": "ping_test"
                }
            ],
            "hostname": "iad104564exdd004",
            "hw_type": "COMPUTE",
            "node-model": "X8-2",
            "preprov": false
        }
    ],
    "elastic-healthy-servers": [],
    "op": "sanity_check_get",
    "quarter-rack-faulty-servers": [],
    "quarter-rack-healthy-servers": [
        {
            "domainname": "oraclecloud.internal",
            "hostname": "iad104564exdd002",
            "hw_type": "COMPUTE",
            "node-model": "X8-2",
            "preprov": false
        },
        {
            "domainname": "oraclecloud.internal",
            "hostname": "iad104564exdd001",
            "hw_type": "COMPUTE",
            "node-model": "X8-2",
            "preprov": false
        }
    ],
    "status": 200,
    "status-detail": "success"
}

exaunit reshape:
Usage: ecracli> exaunit reshape <exaunitId> <exaOcid>  [env=gen2] [infra=ocimvm] [cores|memory|storageTb|ohomeGb]

Purpose:
        reshape operation for exaunit
        Below reshape operations are supported:
        updateType = 'coresPerNode'
        updateType = 'memoryGbPerNode'
        updateType = 'storageTb'
        updateType = 'ohomeSizeGbPerNode'

Arguments:
        exaunitId : exaunitid that you want to reshape
        exaOcid    : exaOcid value

Examples:

i) Invalid exaunit id
ecra> exaunit reshape exaunitId=1  exaOcid=1 env=gen2 infra=ocimvm cores=8 
* Error: Please specify a valid exaunit ID or a unique rack name. Available racknames & exaunit ids are: {}
ecra> 

ii) Successful reshape 
ecra> exaunit reshape exaunitId=1  exaOcid=1 env=gen2 infra=ocimvm memoryGb
* Idemtoken is: 491c327b-e75a-4839-8c68-09d45e37b27a
* {"exaunitUpdateAllocation": {"memoryGbPerNode": 30}, "operation": "updateAllocation", "idemtoken": "491c327b-e75a-4839-8c68-09d45e37b27a"}
* ENV is gen2
* infra is ocimvm
* Operation: PUT request to http://den02teo.us.oracle.com:9001/ecra/endpoint/exadata/1/exaunit/1 
http://den02teo.us.oracle.com:9001/ecra/endpoint/statuses/b231cee8-c513-11e9-9030-fa163ed5ac29


exaunit monitoring:
Usage:  ecracli> exaunit monitoring [[exaunit=]<exaunit>]

Purpose: return a set of ECRA API responses: exaunit_detail, exaunit_dbs and cluster_details.

Arguments:
        exaunit: The exaunit ID, if this id is not provided the endpoint will return the information for all the exaunits.

Examples:

i) All exaunits
ecra> exaunit monitoring
* {"exaunits": {"362": {"exaunit_detail": {"exaunit_id": 362, "pod_guid": "57eda966-0ef4-4787-94b8-94d82aa511a1", "exaunit_name": "exaclu", "entitlement_id": "100000000", "subscription_id": "57eda966-0ef4-4787-94b8-94d82aa511a1", "customer_name": "Oracle Test Internal Group", "csi": "12345", "backup_disk": "N", "create_sparse": "false", "racksize": "QUARTER", "initial_cores": 22, "gb_memory": 496, "tb_storage": 42, "grid_version": "12.1", "atp": "N", "image_version": "18.1.4.0.0.180125.3", "dom0_bonding": "N"}, "exaunit_info": {"admin_network": "", "backup_network": "", "client_network": "", "computes": [{"admin_ip": "", "admin_network": "", "admin_vlan": "", "backup_ip": "", "backup_netw    ork": "", "backup_vlan": "", "client_ip": "", "client_network": "", "client_vlan": "", "hostname": "", "virtual_ip": ""}, {"admin_ip": "", "admin_network": "", "admin_vlan    ": "", "backup_ip": "", "backup_network": "", "backup_vlan": "", "client_ip": "", "": "", "client_vlan": "", "hostname": "", "virtual_ip": ""}], "name": "", "scan_ips": ["", "", ""], "total_storage": "200G", "available_storage": "100G", "rackInfo": {"rackname": "Sujeet", "status": "PROVISIONED", "racksize": "quarter", "opstate": "ONLINE"}}, "exaunit_dbs": {"databases": []}, "cluster_details": {"CustomerDetails": {"entitlement_id": "100000000", "subscription_id": "57eda966-0ef4-4787-94b8-94d82aa511a1", "customer_name": "Oracle Test Internal Group", "csi": "12345"}, "ATPOcids": {}, "exadataInfrastructureOCID": "", "DatabaseMapping": {"cdbs": []}}}, "365": {"exaunit_detail": {"exaunit_id": 365, "pod_guid": "86352452-c51c-403d-83a2-df758906762d", "exaunit_name": "myclu1", "entitlement_id": "100000000", "subscription_id": "86352452-c51c-403d-83a2-df758906762d", "customer_name": "dummy_not_used", "csi": "12345", "backup_disk": "N", "create_sparse": "false", "racksize": "QUARTER", "initial_cores": 28, "gb_memory": 496, "tb_storage": 42, "grid_version": "19", "atp": "N", "image_version": "18.1.4.0.0.180125.3", "dom0_bonding": "N"}, "exaunit_info": {"message": "JSONObject[\"computes\"] not found."}, "exaunit_dbs": {"databases": [{"dbSID": "dborcl19", "dbVersion": "19.0.0.0", "status": "CREATED", "initial_dbversion": "19.0.0.0"}, {"dbSID": "dborcl18", "dbVersion": "18.0.0.0", "status": "CREATED", "initial_dbversion": "18.0.0.0"}]}, "cluster_details": {"CustomerDetails": {"entitlement_id": "100000000", "subscription_id": "86352452-c51c-403d-83a2-df758906762d", "customer_name": "dummy_not_used", "csi": "12345"}, "ATPOcids": {}, "exadataInfrastructureOCID": "", "DatabaseMapping": {"cdbs": [{"cdbname": "dborcl19", "dbUniqueName": "dborcl19", "pdbs": []}, {"cdbname": "dborcl18", "dbUniqueName": "dborcl18_unique", "pdbs": []}]}}}}}

ii) Incorrect exaunit
ecra> exaunit monitoring 8
* Error: GET request to http://slc11yoj.us.oracle.com:9001/ecra/endpoint/monitoring?exaunit=8 failed
* HTTP Error 400: Bad Request
* b'{"status":400,"message":"Couldn not find POD record, exaunit id: 8","status-detail":"Couldn not find POD record, exaunit id: 8","op":"monitoring_get"}'
* Error: Failed to get http://slc11yoj.us.oracle.com:9001/ecra/endpoint/monitoring?exaunit=8

iii) Specific Exaunit
ecra> exaunit monitoring 365
* {"exaunits": {"365": {"exaunit_detail": {"exaunit_id": 365, "pod_guid": "86352452-c51c-403d-83a2-df758906762d", "exaunit_name": "myclu1", "entitlement_id": "100000000", "subscription_id": "86352452-c51c-403d-83a2-df758906762d", "customer_name": "dummy_not_used", "csi": "12345", "backup_disk": "N", "create_sparse": "false", "racksize": "QUARTER", "initial_cores": 28, "gb_memory": 496, "tb_storage": 42, "grid_version": "19", "atp": "N", "image_version": "18.1.4.0.0.180125.3", "dom0_bonding": "N"}, "exaunit_info": {"admin_network": "", "backup_network": "", "client_network": "", "computes": [{"admin_ip": "", "admin_network": "", "admin_vlan": "", "backup_ip": "", "backup_netw    ork": "", "backup_vlan": "", "client_ip": "", "client_network": "", "client_vlan": "", "hostname": "", "virtual_ip": ""}, {"admin_ip": "", "admin_network": "", "admin_vlan    ": "", "backup_ip": "", "backup_network": "", "backup_vlan": "", "client_ip": "", "": "", "client_vlan": "", "hostname": "", "virtual_ip": ""}], "name": "", "scan_ips": ["", "", ""], "total_storage": "200G", "available_storage": "100G", "rackInfo": {"rackname": "sea201109exd-d0-01-02-cl-01-03-clu01", "status": "PROVISIONED", "racksize": "quarter", "opstate": "ONLINE"}}, "exaunit_dbs": {"databases": [{"dbSID": "dborcl19", "dbVersion": "19.0.0.0", "status": "CREATED", "initial_dbversion": "19.0.0.0"}, {"dbSID": "dborcl18", "dbVersion": "18.0.0.0", "status": "CREATED", "initial_dbversion": "18.0.0.0"}]}, "cluster_details": {"CustomerDetails": {"entitlement_id": "100000000", "subscription_id": "86352452-c51c-403d-83a2-df758906762d", "customer_name": "dummy_not_used", "csi": "12345"}, "ATPOcids": {}, "exadataInfrastructureOCID": "", "DatabaseMapping": {"cdbs": [{"cdbname": "dborcl19", "dbUniqueName": "dborcl19", "pdbs": []}, {"cdbname": "dborcl18", "dbUniqueName": "dborcl18_unique", "pdbs": []}]}}}}}

exaunit getcspayload:
Usage:
    exaunit getcspayload <exaunitId> payloadtype=ecra
    or
    exaunit getcspayload <exaunitId> payloadtype=exacloud

Purpose:
   Returns create service from Pod table depending on
   payloadtype, if no payloadtype argument is given
   ecra payload is retrieved by default.

Arguments:
    payloadtype: ecra or exacloud, default is ecra

Examples:
ecra> exaunit getcspayload 48 payloadtype=ecra
* {
  "atp": {
    "AutonomousDb": "N"
  },
  "backup_disk": false,
  "clustername": "myclu1",
  "cores": 28,
  "createsparse": false,
  "customer_network": {
    "network_services": {
      "dns": [
        "169.254.169.254"
      ],
      "ntp": [
        "169.254.169.254"
      ]
    },
    "nodes": [
      {
        "backup": {
          "dom0_oracle_name": "sea201209exdd007",
          "domainname": "data.customer2.oraclevcn.com",
          "domu_oracle_name": "sea201209exddu0701",
          "gateway": "10.0.1.1",
          "hostname": "ed2db01-vip",
          "hw_node_id": 7,
          "ip": "10.0.1.2",
          "mac": "02:00:17:01:2F:C0",
          "netmask": "255.255.255.0",
          "vlantag": "1"
        },
        "client": {
          "dom0_oracle_name": "sea201209exdd007",
          "domainname": "backup.customer2.oraclevcn.com",
          "domu_oracle_name": "sea201209exddu0701",
          "gateway": "10.0.0.1",
          "hostname": "ed2db01",
          "hw_node_id": 7,
          "ip": "10.0.0.2",
          "mac": "00:10:66:e4:94:9c",
          "netmask": "255.255.255.0",
          "vlantag": null
        },
        "vip": {
          "domainname": "data.customer2.oraclevcn.com",
          "hostname": "ed2db01",
          "ip": "10.0.0.4"
        }
      },
      {
        "backup": {
          "dom0_oracle_name": "sea201209exdd008",
          "domainname": "backup.customer2.oraclevcn.com",
          "domu_oracle_name": "sea201209exddu0801",
          "gateway": "10.0.1.1",
          "hostname": "node-2-backup",
          "hw_node_id": 8,
          "ip": "10.0.1.3",
          "mac": "02:00:17:01:6B:E9",
          "netmask": "255.255.255.0",
          "vlantag": "1"
        },
        "client": {
          "dom0_oracle_name": "sea201209exdd008",
          "domainname": "data.customer2.oraclevcn.com",
          "domu_oracle_name": "sea201209exddu0801",
          "gateway": "10.0.0.1",
          "hostname": "ed2db02",
          "hw_node_id": 8,
          "ip": "10.0.0.3",
          "mac": "00:10:38:73:c5:4c",
          "netmask": "255.255.255.0",
          "vlantag": null
        },
        "vip": {
          "domainname": "data.customer2.oraclevcn.com",
          "hostname": "ed2db01-vip",
          "ip": "10.0.0.5"
        }
      }
    ],
    "scan": {
      "hostname": "ed2db-scan",
      "ips": [
        "10.0.0.6",
        "10.0.0.7",
        "10.0.0.8"
      ],
      "port": 1521
    },
    "timezone": "UTC"
  },
  "grid_version": "18",
  "idemtoken": "f2a4b833-fa0b-44a6-a140-daab9b76a8fb",
  "purchasetype": "metered",
  "rackname": "iad103714exd-d0-05-06-cl-07-09-clu01",
  "status": 200,
  "op": "exaunit_cs_payload_get",
  "status-detail": "success"
}

exaunit getdginfo:
Usage:
    exaunit getdginfo exaunitid=<EXAUNIT_ID>
Purpose:
    Displays the disk group information in a json format. It will display disk group size and % usage.
Arguments:
    exaunitid: id for the cluster exaunit id.

Examples:


exaunit generatecspayload:
Usage:
    exaunit generatecspayload [workflowid=<workflow uuid>] [payload=<base cspayload> filename=<filename for new cspayload>]

Purpose:
   Generates the create service paylaod.
   If workflowid is provided the payload will be generated
   with values from workflow and the new payload will replace
   the one that has been generated during workflow run.
   If payload and filename are provided the payload
   will be generated with values from the provided payload
   and the new payload will be saved in the POD repo with 
   the specified filename.

Arguments:
    workflowid: wf_uuid from create-service workflow
    payload: path to the json file with create-service payload
        from CP
    filename: name for the cspayload that will be
        generated

Examples:

ecra> exaunit generatecspayload workflowid=704a1b26-70c1-4166-84d3-e5d50cb77328
* {
  "status": 202,
  "status_uri": "http://localhost:9001/ecra/endpoint/statuses/84ccdce5-5494-4b64-adbe-921ce54443ee",
  "op": "exaunit_generate_cspayload",
  "op_start_time": "2023-12-05T20:32:31+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing"
}

ecra> exaunit generatecspayload payload=/scratch/zpallare/payloads/csbasepayload.json filename=ZeusTest.json
* {
  "status": 202,
  "status_uri": "http://localhost:9001/ecra/endpoint/statuses/6a13791e-74c1-499d-8c75-381dac64976f",
  "op": "exaunit_generate_cspayload",
  "op_start_time": "2023-12-05T20:29:29+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing"
}

exaunit updatetimezone:
Usage:
    exaunit updatetimezone exaunitid=<exaunitId> timezone=<new timezone>

Purpose:
   Updates the time zone in the xml for the exaunit

Arguments:
    exaunitid: the id of the exaunit to update
    timezone: the new timezone to put into the xml

Examples:
ecra> exaunit updatetimezone exaunitid=434 timezone=America/belem
* {
  "status": 202,
  "status_uri":
"http://localhost:9001/ecra/endpoint/statuses/e8840c00-4c1f-4386-8cc8-7d816d85f434",
  "op": "exaunit_time_zone_put",
  "op_start_time": "2024-01-05T18:15:29+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing"
}

ecra> status e8840c00-4c1f-4386-8cc8-7d816d85f434
* {"start_time": "2024-01-05T18:15:29+0000", "progress_percent": 0, "end_time":
"2024-01-05T18:15:36+0000", "ecra_server": "EcraServer1",
"last_heartbeat_update": "2024-01-05T18:15:29+0000", "wf_uuid":
"0cf4e76d-aec5-4493-9112-57d6eb9d9925", "status": 200, "message": "Done", "op":
"UpdateTimeZone", "completion_percentage": 0, "status_uri":
"http://localhost:9001/ecra/endpoint/statuses/e8840c00-4c1f-4386-8cc8-7d816d85f434",
"status-detail": "success"}


Health_check:
Usage: ecra> health_check
             or
       ecra> health_check <rack_name>
             or
       ecra> health_check <rack_name>/exachk etc
             or 
       ecra> health_check <rack_name> [target_hosts=dom0s,domUs,cells,switches]
             or
       ecra> health_check <rack_name>/envcheck [domucheck=<True|False>]
             or
       ecra> health_check <rack_name> [profilepath=</file_path/custom_profile.json>]

Purpose:
    Do a cluster health check for the given rack. If rack name is not given, this command will check every cluster registered in this ecra instance.

    If envcheck is appended after <rack_name> then it will run basic HC of the given rack, e.g. connectivity.

    If exachk is appended after <rack_name> then it will run exachk utility with input json provided at /tmpl/exachk.json. Please modify /tmpl/exachk.json to customize.

    If target_hosts is appended then health check is run on the target hosts.

    If profilepath is appended then health check is run based on the profile passed.

    arg supports all command line options in same format used with exachk cli.

Arguments:
    <rack_name>   : Complete name of the rack, ex: slcqab02adm0506clu5
    /envcheck     : Pass it to run ltwt connectivity HC of the rack, excluding domu nodes.
    [domucheck=<True>] : Run ltwt check including domu nodes.
    /exachk       : Runs exachk utility
    [arg=<arg>]   : args for exachk utility

Examples:
i) ecra> health_check
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/clusterstatus/zone
* {"status": 200, "status-detail": "success", "controlplane": {"status": 200, "health": {"ControlPlane": {"oedaVersion": "17.145.14:00", "totalWarnings": 0, "totalRecommendations": 0, "dateTime": "2017-07-10-11-53-23", "exacloudVersion": "main (17.181)", "totalErrors": 0, "overallStatus": "Pass"}, "Conf": {"exaBox": {"cellShredPass": "0pass", "vmCp.........
.......................................................................

ii) ecra> health_check slcqab02adm0506clu5
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5
* {"status": 200, "provisioned": "Yes", "status-detail": "success", "uri": "/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5", "health": {"Cluster": {"hostCheck": {"slcqab02adm05.us.oracle.com": {"logs": {"generic": ["WARNING: Passwordless SSH not setup for slcqa..................................
......................................................................

iii) ecra> health_check slcqab02adm0506clu5/envcheck
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5/envcheck
* {"status": 200, "provisioned": "na", "status-detail": "success", "uri": "/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5/envcheck", "health": {"Cluster": {"hostCheck": {"slcqab02adm05.us.oracle.com": {"NodeType": "dom0", "TestResult": "Pass", "pwdlessSSH": false, "weakPassword": true, ..
...........................................................................

iv) ecra> health_check slcqab02adm0506clu5/envcheck domucheck=True
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5/envcheck?domucheck=True
* {"status": 200, "provisioned": "na", "status-detail": "success", "uri": "/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5/envcheck", "health": {"Cluster": {"hostCheck": {"slcqab02adm05.us.oracle.com": {"NodeType": "dom0", "TestResult": "Pass", "pwdlessSSH": false, "weakPassword": true, ..
...........................................................................

v) ecra> health_check slcqab02adm0506clu5/exachk


vi) ecra> health_check slcqab02adm0506clu5/exachk arg=-clusternodes slcqab02adm05.us.oracle.com -ibswitches slcqab02sw-ibs0.us.oracle.com -cells slcqab02celadm07.us.oracle.com
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/dfb61fea-65ca-11e7-9030-fa163ed5ac29
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ......


vii) If there is an ongoing operation it fails:
ecra>  health_check slcqab02adm0506clu5/exachk arg=-clusternodes slcqab02adm05.us.oracle.com -ibswitches slcqab02sw-ibs0.us.oracle.com -cells slcqab02celadm07.us.oracle.com
* Error: POST request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/clusterstatus/zone/slcqab02adm0506clu5/exachk failed
* HTTP Error 500: Internal Server Error
* {"status":500,"message":"rack slcqab02adm0506clu5 has ongoing operation delete-pod with request_id 471006c5-52f5-44f3-8f83-5965611f5077","status-detail":"rack slcqab02adm0506clu5 has ongoing operation delete-pod with request_id 471006c5-52f5-44f3-8f83-5965611f5077","op":"healthcheck_rackexachk"}
* Error: health_check failed

viii) health_check slcs08adm0506clu6 profilepath=</file_path/custom_profile.json>
* GET http://slc06cqa.us.oracle.com:9001/ecra/endpoint/clusterstatus/zone/slcs08adm0506clu6?profilepath=/scratch/dekuckre/ecra_installs/ecraInstall/custom_profile.json
* {"status": 200, "provisioned": "NA", "status-detail": "success", "uri":
* "/ecra/endpoint/clusterstatus/zone/slcs08adm0506clu6", "health": {"Cluster":
* {"hostCheck": {"slcs08adm06vm06-v263.usdv1.oraclecloud.com": {"pwdlessSSH":
* null, "NodeType": "domu", "TestResult": "Pass", "domuIsolation": null,
* "weakPassword": null, "pingable": false, "smnodes": [], "ibswitches": [],
* "sshStatus": null}}}}}


Notes:
    Just running health_check/exachk takes around 20mins sometimes
    Running health_check or health_check <rack_name> dumps a lot of information on the console.

ECS Patching Details:

 Usage: ecra>ecspatchversion list rackname=<> profilepath=<>
 Example:
     ecra> ecspatchversion list rackname=iad126792exd-sujat-scaqak01XXX-clu01 profilepath=/scratch2/test-patch/toCopy22/profile.json

* Getting list of available and applied Patches for Exadata and CPS services:
* rackname : iad126792exd-sujat-scaqak01XXX-clu01
* GET
http://primecra.ecra.ociexacc.oraclevcn.com:9031/ecra/endpoint/clusterstatus/versions/iad126792exd-sujat-scaqak01XXX-clu01
* {
    "Patching Version": {
        "exadata_rack_applied_ver": "19.2.4.0.0.190706", 
        "rack_name": "iad126792exd-sujat-scaqak01XXX-clu01"
    }
}

profile json sample at below location:
<ecsInstall>/ecracli/tmpl/versionsProfile.json


ecra> ecspatchversion list rackname=iad126792exd-sujat-scaqak01XXX-clu01 profilepath=/scratch2/test-patch/toCopy22/profile.json
* POST http://primecra.ecra.ociexacc.oraclevcn.com:9031/ecra/endpoint/clusterstatus/versions/iad126792exd-sujat-scaqak01XXX-clu01
* Getting list of available and applied Patches for Exadata and CPS services: 
* {
    "Patching Version": {
        "cps_image_applied_ver": "NONE", 
        "cps_sw_applied_ver": "NONE", 
        "exacloud_applied_ver": "19.2.1 (19.201)", 
        "exadata_rack_applied_ver": " 19.2.4.0.0.190706", 
        "exadata_rack_avail_ver": "190510", 
        "last_updated_time": "2019-07-24T19:02:41+0000", 
        "rack_name": "iad126792exd-sujat-scaqak01XXX-clu01"
    }, 
    "op": "notset", 
    "status": 200, 
    "status-detail": "success"
}

profile json sample at below location:
<ecsInstall>/ecracli/tmpl/versionsProfile.json
...........................................................................

Usage: ecra>exadata_applied_version list rackname=<rackname>

Purpose:
    Get the list of applied patched for exadata.
Arguments:
    rackame : rackame/ cluster name

Example:
exadata_applied_version ----> top-level command
list                    ----> clis under it

ecra> exadata_applied_version list rackname=slcs20adm0708clu2
* Getting list of applied Patches for Exadata:
* rackname : slcs20adm0708clu2
* GET http://den02teo.us.oracle.com:9001/ecra/endpoint/clusterstatus/exadata/slcs20adm0708clu2
* {
    "Exadata Version": {
        "ENV": "edcs", 
        "Image Version": [
            {
                "HOSTNAME": "scaqai04adm08.us.oracle.com", 
                "IMAGE_VERSION": "19.2.4.0.0.190709", 
                "NODE_TYPE": "dom0"
            }, 

        ], 
        "LAST_UPDATED_TIME": "2019-10-09T08:14:50+0000", 
        "RACKNAME": "slcs20adm0708clu2"
    }, 
    "op": "ecs_exadata_version", 
    "status": 200, 
    "status-detail": "success"
}
...........................................................................

IORM:
get_dbplan:
Usage : ecra> iorm get_dbplan <exaunit_id>

Purpose:
    Get the IORM DB Plan from the cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc
    idemtoken : unique for every new request

Examples:
ecra> iorm get_dbplan 1
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1/iorm/dbplan
* {"cell": ["slcqab02celadm09.us.oracle.com", "slcqab02celadm07.us.oracle.com", "slcqab02celadm08.us.oracle.com"],
   "status": 200, "status-detail": "success", "dbPlan": ["None"], "op": "iorm_dbplan_get"}

./ecracli iorm get_dbplan 1
{"cell": ["slcqab02celadm09.us.oracle.com", "slcqab02celadm07.us.oracle.com", "slcqab02celadm08.us.oracle.com"], "status": 200, "status-detail": "success", "dbPlan": ["None"], "op": "iorm_dbplan_get"}

 curl -u ops:welcome1
 iorm get_dbplan 1 idemtoken-4717-9b7d-a1d628bc38ad
{"cell":["sea201732exdcl08.sea2xx2xx0071qf.adminsea2.oraclevcn.com","sea201732exdcl07.sea2xx2xx0071qf.adminsea2.oraclevcn.com","sea201732exdcl06.sea2xx2xx0071qf.adminsea2.oraclevcn.com"],"status":200,"message":"success","dbPlan":[{"share":"4","flashcachelimit":"15G","asmcluster":"cl-dwww3xha","dbname":"db1"},{"share":"2","flashcachelimit":"20G","asmcluster":"cl-dwww3xha","dbname":"db2"},{"share":"2","flashcachelimit":"12668.12500000000G","dbname":"default"}],"op":"iorm_dbplan_get","status-detail":"success"}

get_flashsize:
Usage : ecra> iorm get_flashsize <exaunit_id>

Purpose:
    Get the flash cache size from the cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm get_flashsize 1
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1/iorm/fcsize
* {"cell": {"slcqab02celadm09.us.oracle.com": {"errorCode": "0", "fcSize": "11.64361572265625T", "log": ["Command successful"]},
"slcqab02celadm07.us.oracle.com": {"errorCode": "0", "fcSize": "11.64361572265625T", "log": ["Command successful"]},
"slcqab02celadm08.us.oracle.com": {"errorCode": "0", "fcSize": "11.64361572265625T", "log": ["Command successful"]}},
"status": 200, "fcSize": "11.64361572265625T", "status-detail": "success", "op": "iorm_fc_size"}

./ecracli iorm get_flashsize 1
{"cell": {"slcqab02celadm09.us.oracle.com": {"errorCode": "0", "fcSize": "11.64361572265625T", "log": ["Command successful"]}, "slcqab02celadm07.us.oracle.com": {"errorCode": "0", "fcSize": "11.64361572265625T", "log": ["Command successful"]}, "slcqab02celadm08.us.oracle.com": {"errorCode": "0", "fcSize": "11.64361572265625T", "log": ["Command successful"]}}, "status": 200, "fcSize": "11.64361572265625T", "status-detail": "success", "op": "iorm_fc_size"}

get_dblist:
Usage : ecra> iorm get_dblist <exaunit_id>

Purpose:
    Get the list of DB instances on the cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm get_dblist 1
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1/iorm/dblist
* {"status": 200, "error_detail": "[IORM][DB error on the cell]", "status-detail": "success", "cell": {},
"dbSet": "null", "op": "iorm_db_list"}

./ecracli iorm get_dblist 1
{"status": 200, "error_detail": "[IORM][DB error on the cell]", "status-detail": "success", "cell": {}, "dbSet": "null", "op": "iorm_db_list"}

get_obj:
Usage : ecra> iorm get_obj <exaunit_id>

Purpose:
    Get the IORM objective from the cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1/iorm/objective
* {"cell": {"slcqab02celadm09.us.oracle.com": {"errorCode": "0", "objective": "auto", "log": ["Command successful"]},
"slcqab02celadm07.us.oracle.com": {"errorCode": "0", "objective": "auto", "log": ["Command successful"]},
"slcqab02celadm08.us.oracle.com": {"errorCode": "0", "objective": "auto", "log": ["Command successful"]}},
"status": 200, "objective": "auto", "status-detail": "success", "op": "iorm_objective_get"}

./ecracli iorm get_obj 1
{"cell": {"slcqab02celadm09.us.oracle.com": {"errorCode": "0", "objective": "auto", "log": ["Command successful"]}, "slcqab02celadm07.us.oracle.com": {"errorCode": "0", "objective": "auto", "log": ["Command successful"]}, "slcqab02celadm08.us.oracle.com": {"errorCode": "0", "objective": "auto", "log": ["Command successful"]}}, "status": 200, "objective": "auto", "status-detail": "success", "op": "iorm_objective_get"}

ecra> iorm get_obj 22 idemtoken="bc892968-d21f-4022-ba84-14bdf67344ff "
* {"cell": {"scaqab10celadm01.us.oracle.com": {"errorCode": "0", "log": ["Command successful"], "objective": "Auto"}, "scaqab10celadm02.us.oracle.com": {"errorCode": "0", "log": ["Command successful"], "objective": "Auto"}, "scaqab10celadm03.us.oracle.com": {"errorCode": "0", "log": ["Command successful"], "objective": "Auto"}}, "status": 200, "message": "success", "objective": "Auto", "op": "iorm_objective_get", "status-detail": "success"}

set_obj:
Usage : ecra> iorm set_obj <exaunit_id>

Purpose:
    Set the IORM objective on the cluster cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm set_obj 1
* {u'cell': {u'slcqab02celadm09.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']},
u'slcqab02celadm07.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcqab02celadm08.us.oracle.com':
{u'errorCode': u'0', u'log': [u'Command successful']}}, u'status': 200, u'status-detail': u'success', u'op': u'iorm-setobj'}

./ecracli iorm set_obj 1
{u'cell': {u'slcqab02celadm09.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcqab02celadm07.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcqab02celadm08.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}}, u'status': 200, u'status-detail': u'success', u'op': u'iorm-setobj'}

set_obj_v2:
Usage : ecra> iorm set_obj_v2 <exaunit_id>

Purpose:
    Set the IORM objective on the cluster cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:

ecra> iorm set_obj_v2 1
* {"status": 202, "status_uri": "http://phoenix246959.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/ad5d9a46-c2aa-423f-83ab-34e9737b078c", "op": "iorm-setobjV2", "op_start_time": "2024-01-05T08:49:39+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}


reset_dbplan:
Usage : ecra> iorm reset_dbplan <exaunit_id>

Purpose:
    Remove the current IORM DB Plan from the cells, and reset it to None.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm reset_dbplan 1
* {u'cell': {u'slcqab02celadm09.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']},
u'slcqab02celadm07.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']},
u'slcqab02celadm08.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}},
u'status': 200, u'status-detail': u'success', u'op': u'iorm-resetdbplan'}

./ecracli iorm reset_dbplan 1
{u'cell': {u'slcqab02celadm09.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcqab02celadm07.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcqab02celadm08.us.oracle.com': {u'errorCode': u'0', u'log': [u'Command successful']}}, u'status': 200, u'status-detail': u'success', u'op': u'iorm-resetdbplan'}


reset_dbplan_v2:
Usage : ecra> iorm reset_dbplan_v2 <exaunit_id>

Purpose:
    Remove the current IORM DB Plan from the cells, and reset it to None.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm reset_dbplan_v2 2
* {"status": 202, "status_uri": "http://phoenix246959.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/b6a8e2c9-9bd3-41e6-bca1-39eec072cf9e", "op": "iorm-resetdbplanV2", "op_start_time": "2024-01-05T08:34:23+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

set_dbplan:
Usage : ecra> iorm set_dbplan <exaunit_id>

Purpose:
    Set an IORM DB Plan on the cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:

set_dbplan_v2:
Usage : ecra> iorm set_dbplan_v2 <exaunit_id>

Purpose:
    Set an IORM DB Plan on the cells. Workflow Based.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples: ecra> iorm set_dbplan_v2 1
* {"status": 202, "status_uri":
"http://phoenix246959.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/966f1564-ed31-45d8-8acc-e2dc5f3626d3",
"op": "iorm-setdbplanV2", "op_start_time": "2023-11-08T10:27:33+0000",
"est_op_end_time": "", "message": "processing", "status-detail": "processing"}

get_clientkeys:
Usage : ecra> iorm get_clientkeys <exaunit_id>

Purpose:
    Get the list of client keys from the cells, by executing the command -
    'cellcli -e list keys'

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:   
ecra> iorm get_clientkeys 1
{"cell": {"slcs19celadm02.us.oracle.com": {"List Key ErrorCode": "0", "List Key Status": "Pass"}, "slcs19celadm03.us.oracle.com": {"List Key ErrorCode":
"0", "List Key Status": "Pass"}, "slcs19celadm01.us.oracle.com": {"List Key ErrorCode": "0", "List Key Status": "Pass"}}, "status": 200, "op":
"iorm_clientkeys_get", "status-detail": "success", "clientKeys": [{"client name": "", "client type": "CELL", "client key":
"3cc40f7359732b681252569be6162880"}, {"client name": "clu5", "client type": "ASMCLUSTER", "client key": "8e8cdfa29b9255cbc6e9e72919287d4"}, {"client
name": "clu6", "client type": "ASMCLUSTER", "client key": "8867456f2d330bf18dff213bc4a0666f"}, {"client name": "exaclu-912", "client
type": "ASMCLUSTER", "client key": "f6339fac37c523188a4b49e15a42b775"}, {"client name": "exaclu-913", "client type": "ASMCLUSTER", "client key":
"45754503df746a461071f1f18abf30d9"}, {"client name": "exaclu-914", "client type": "ASMCLUSTER", "client key": "41f579f788b78486886f9bbc0dc5cc8f"}]}

get_pmemsize:
Usage : iorm get_pmemsize <exaunit_id>

Purpose:
    Get the pmem cache size from the cells.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm get_pmemsize 222
* {"cell": {"iad103712exdcl01.iad103712exd.adminiad1.oraclevcn.com": {"errorCode": "0", "log":
["Command successful"], "pmemcSize": "1.46539306640625T"}, "iad103712exdcl02.iad103712exd.adminiad1.oraclevcn.com":
{"errorCode": "0", "log": ["Command successful"], "pmemcSize": "1.46539306640625T"}, "iad103712exdcl03.iad103712exd.adminiad1.oraclevcn.com":
{"errorCode": "0", "log": ["Command successful"], "pmemcSize": "1.46539306640625T"}}, "status": 200, "message": "success", "pmemcSize":
"1.46539306640625T", "op": "iorm_pmemc_size", "status-detail": "success"}

get_resources:
Usage : iorm get_resources <exaunit_id>

Purpose:
    Get the iorm resources cache sizes from the cells in G.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> iorm get_resources 222
* {"flashCache": {"flashCacheMinSum": "0", "flashCacheSizeSum": "0", "flashCacheLimitSum": "0", "flashCacheSize": "23846"}, "pmemCache":
{"pmemCacheMinSum": "0", "pmemCacheSizeSum": "0",
"pmemCacheLimitSum": "0", "pmemCacheSize": "1501"}, "status": 200, "op": "iorm_resources_get", "status-detail": "success"}

get_clusterplan:
Usage : iorm get_clusterplan <exadatainfrastructureId>

Purpose:
    Get the iorm clusterplan from the cells.

Arguments:
    exadatainfrastructureId : The id such as ocid.test etc

Examples:
ecra> iorm get_clusterplan etf_infra_230603_112
* {"cell": ["iad103712exdcl03.iad103712exd.adminiad1.oraclevcn.com", "iad103712exdcl02.iad103712exd.adminiad1.oraclevcn.com",
"iad103712exdcl01.iad103712exd.adminiad1.oraclevcn.com"], "status": 200, "message": "success",
"clusterPlan": [{"name": "myclu1", "share": "4"}], "op": "iorm-get-clusterplan", "status-detail": "success"}

set_clusterplan:
Usage : iorm set_clusterplan <exadatainfrastructureId>

Purpose:
    set the iorm clusterplan from the cells. input is in ecracli/tmpl/clusterplan.json

Arguments:
    exadatainfrastructureId : The id such as ocid.test etc

Examples:
ecra> iorm set_clusterplan etf_infra_230603_112
* {"status": 202, "status_uri": "http://iad1zdlraecra3.ecramgmt.adminiad1.oraclevcn.com:9064/ecra/endpoint/statuses/e01b270a-a667-48ba-a5b3-b378c90bb044",
"op": "iorm-set-clusterplan", "op_start_time":
"2024-05-02T05:17:55+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

Cores:
update_cores:
Usage : ecra> update_cores <exaunit_id> [subscriptionOcpu/meteredOcpu/burstOcpu=<num>] [env=gen1/gen2/nosdi] [json_path=<JSON>]

Purpose:
    Update cores allocation info for the given exaunit

Arguments:
    exaunit_id : The id such as 1, 2 etc
    subscriptionOcpu/meteredOcpu/burstOcpu : The cores number
    env : Environment such as gen1, gen2 or nosdi
    json_path : Given path should contains valid JSON file with below structure
         {
        "vms": [{
                "[subscriptionOcpu/meteredOcpu/burstOcpu]": "<num>",
                "hostname": "<VALID_VM>"
        }, {
                "[subscriptionOcpu/meteredOcpu/burstOcpu]": "<num>",
                "hostname": "<VALID_VM>"
        }]
}

Examples:
ecra> update_cores 1 subscriptionOcpu=4
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/c8193c4a-669d-11e7-9030-fa163ed5ac29
* TARGET URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/services//fe9838c7-2dd3-47e6-bc8c-25ca2b8faab6
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request resize_exaunit successfully completed

./ecracli update_cores 1 subscriptionOcpu=8
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/6cb539d6-66a1-11e7-9030-fa163ed5ac29

bash-4.2$ ecracli update_cores 3 json_path=test.json
Succesfully loaded file test.json
Error: Please specify a valid core number for hostname slcs08adm06vm01-v253.usdv1.oraclecloud.com

bash-4.2$ ecracli update_cores 3 json_path=test.json  burstOcpu=123
Error: Params ['subscriptionOcpu', 'meteredOcpu', 'burstOcpu'] are not allowed when passing json_path param

bash-4.2$ ecracli update_cores 3 json_path=test.json
Succesfully loaded file test.json
http://den00ucw.us.oracle.com:9001/ecra/endpoint/statuses/3a8d94dc-f267-4102-a1f5-9469e5ca7746

Test:
createdelete:
Usage: ecracli> test createdelete <rackname>

Purpose:
    Issue a create service request and wait for completion. Upon completion, delete it

Arguments:
    rackname : Name of the rack such as slcqab02adm0506clu5

Examples:
ecra> test createdelete slcqab02adm0506clu5
* Creating exaunit with service uuid: bc605e96-ab94-4a3c-aa66-044dfe648d87
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/bc605e96-ab94-4a3c-aa66-044dfe648d87
* TARGET URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/3
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... ...... ...... ...... ......
* Request create_service successfully completed
* Exaunit 3 created
* Deleting service with exaunit ID: 3
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/7eb41806-66c3-11e7-9030-fa163ed5ac29
* TARGET URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/3
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... ...... ...... ...... ...... ......
* Request delete_service successfully completed

CNS:
run:
Usage: ecra>cns run
                      or
             ./ecracli cns run
Purpose: 
  Runs the collection of infra structure events for all racks
  managed by this ECRA and and posts the events to CNS

Example:
ecra> cns run
* POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/runcns
* {"status": 200, "status-detail": "success", "op": "runcns", "CNSStatus":
* [{"rackName": "slcs08adm0506clu10", "status": "success", "eventCount": 9}],
* "rackCount": 1}

post:
Usage:ecra>cns post <event json file>
                      or
             ./ecracli cns post  <event json file>
Purpose:
  Posts the passed in event JSON payload in the file to CNS.

Example:
ecra> cns post ev.json
* POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/postcns
* {"status": 200, "status-detail": "success", "name": "cnspost", "op":
* "postcns"}

setup:
Usage:ecra>cns setup
               or
           ./ecracli cns setup
Purpose:
  Uploads the component zip files and topics for a tenant to CNS.
  Also sets up a job for infrastructure event collection  and post to CNS

Example:
ecra> cns setup
* POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/setupcns
* {"status": 200, "status-detail": "success", "name": "cnssetup", "op":
* "setupcns"}

setupinterval:
Usage:ecra>cns setupinterval <interval in seconds>
               or
           ./ecracli cns setupinterval <interval in seconds>
Purpose:
  Sets up the CNS job interval for infrastructure event collection and post to CNS
Example:
ecra> cns setupinterval 120
* POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/setupcnsinterval
* {"status": 200, "status-detail": "success", "name": "cnssetupinterval",
* "op": "setupcnsinterval"}

enablerack:
Usage:ecra>cns enablerack <exaunit Id>
               or
           ./ecracli cns enablerack <exaunit Id>
Purpose:
  Enable CNS for a given exaunit/rack. When a rack is provisioned, by default
  CNS is enabled on it.
Example:
ecra> cns enablerack 21
* POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/enablecns/exaunit/21
* {"status": 200, "status-detail": "success", "name": "enablerackcns", "op":
* "enablerackcns"}

disablerack:
Usage:ecra>cns disablerack <exaunit Id>
               or
           ./ecracli cns disablerack <exaunit Id>
Purpose:
  Disable CNS for a given exaunit/rack. When a rack is provisioned, by default
  CNS is enabled on it.
Example:
ecra> cns disablerack 21
* POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/disablecns/exaunit/21
* {"status": 200, "status-detail": "success", "name": "disablerackcns", "op":
* "disablerackcns"}

getrackstatus:
Usage:ecra>cns getrackstatus <exaunit Id>
               or
           ./ecracli cns getrackstatus <exaunit Id>
Purpose:
  Gets the status (cns enabled or disabled) for a given rack/exaunit
Example:
ecra> cns getrackstatus 21
* GET http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/statuscns/exaunit/21
* {"status": 200, "status-detail": "success", "getrackstatuscns": "0", "op":
* "getrackstatuscns"}

enable:
Usage:
      ./ecracli -u ops:<PWD> cns enable
Purpose:
      Enable CNS job and CNS feature. Should be a ops user to run this.

Example:
./ecracli -u ops:<PWD> cns enable
POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/enablecns
{"status": 200, "status-detail": "success", "name": "cnsenable", "op":
"enablecns"}

disable:
Usage:
      ./ecracli -u ops:<PWD> cns disable
Purpose:
      Disable CNS job and CNS feature. Should be a ops user to run this.
       
Example:
./ecracli -u ops:<PWD> cns disable
POST http://adc00qzv.us.oracle.com:9001/ecra/endpoint/cns/disablecns
{"status": 200, "status-detail": "success", "name": "disable", "op":
"disablecns"}

receive:
Usage: ecra> cns receive <events json file> 
         or
        ./ecracli cns receive <events json file>
Purpose:
       Endpoint to receive RAW events in ECRA. 
       ECRA will process and post them to  appropriate destination(CNS)
      
Example:
ecra> cns receive evr.json 
* POST
* http://adc00qzv.us.oracle.com:9001/ecra/endpoint/events/receive
* {"status": 200, "status-detail": "success", "op": "receive_eventforcns"}

schedule:
add:
Usage: ecra> schedule add <jsonfile>
         or
       ./ecracli schedule add <jsonfile>
Purpose:
  Add a scheduled job
Example:
  ecra> schedule add test.json
  * POST http://slc07gqb.us.oracle.com:9001/ecra/endpoint/schedule
  * {
      "op": "schedule_add_post",
      "status": 200,
      "status-detail": "success"
  }
  Hot to use custom class
  1. Modify your class to implement JobInterface
  e.g.
    import oracle.exadata.ecra.scheduler.JobInterface;
    ..
    public class MyClass implements JobInterface {
      ..
  2. Implement run() method
    - ScheduledJob argument is used to pass job_cmd and job_params
      You don't have to use it if your class does not require them.
  e.g.
    import oracle.exadata.ecra.entities.ScheduledJob;
    ..
    public class MyClass implements JobInterface {
      ..
      @Override
      public void run(ScheduledJob job) {
        try {
          // code here
      ..
  
delete:
Usage: ecra> schedule delete <job_id>
         or
       ./ecracli schedule delete <job_id>
Purpose:
  Delete a scheduled job
Example:
  ecra> schedule delete 3
  * DELETE http://slc07gqb.us.oracle.com:9001/ecra/endpoint/schedule/3
  * {
      "op": "schedule_delete",
      "status": 200,
      "status-detail": "success"
  }

list:
Usage: ecra> schedule list [<job_id> | <substring of job_class>]
         or
       ./ecracli schedule list [<job_id> | <substring of job_class>]
Purpose:
  Shows job status of all scheduledjobs or specified scheduledjobs
Example:
  ecra> schedule list
  * GET http://slc07gqb.us.oracle.com:9001/ecra/endpoint/schedule
  * {
      "jobs": [
          {
              "enabled": "N",
              "id": 1,
              "interval": 3600,
              "job_class": "oracle.exadata.ecra.resources.DiagnosisResource",
              "job_cmd": "collect_log",
              "job_params": "type=all",
              "last_update": "2017-06-11 20:16:18.053781",
              "last_update_by": "Init",
              "status": "READY"
          },
          {
              "enabled": "N",
              "id": 3,
              "interval": 720,
              "job_class": "oracle.exadata.ecra.resources.DiagnosisResource",
              "last_update": "2017-06-19 20:09:28.328351",
              "status": "READY"
          }
      ]
  }

update:
Usage: ecra> schedule update <job_id> [<key>=<value>]*
         or
       ./ecracli schedule update <job_id> [<key>=<value>]*
Purpose:
  Update a job which already added. Either job_id and job_class can be used to identify the rows to be updated.
Example:
  ecra> schedule update 14 enabled=Y interval=600
  * PUT http://slc07gqb.us.oracle.com:9001/ecra/endpoint/schedule/4
  * {
      "op": "schedule_update_put",
      "status": 200,
      "status-detail": "success",
      "updated_job": {
          "current_target_server": "PRIMARY",
          "enabled": "N",
          "id": 10,
          "interval": 600,
          "job_class": "oracle.exadata.ecra.diagnosis.scanner.PlgMonScanner",
          "last_update": "2023-08-15 22:56:03.0",
          "last_update_by": "https://ecraha2.emmgmt.adminsea2.oraclevcn.com:7402/EcraServer1",
          "status": "READY",
          "target_server": "STANDBY",
          "type": "RECURRENT"
      }
  }

Diagnosis:
rsyslog_get:
Usage: ./ecracli diagnosis rsyslog_get
Purpose:
    Get rsyslog output config
Example:
    ./ecracli diagnosis rsyslog_get
    {
        "op": "diag_rsyslog_output_get",
        "output_config": {
            "lumberjack": "rack_bondmonitor,rack_vmbackup",
            "otto": "disabled"
        },
        "status": 200,
        "status-detail": "success"
    }

rsyslog_set:
Usage:
  ecra> diagnosis rsyslog_set target=exadata_log_to_lumberjack|otto value=<value> [otto_config_path=<otto_config_path>]
Arguments:
  value : When target is 'otto', value should be either 'enabled' or 'disabled'.
  otto_config_path  : absolute path of otto config file. See example config at
                      https://confluence.oraclecorp.com/confluence/display/EDCS/ExaCD-A+log+transferring+to+Otto+and+Lumberjack"
Purpose:
    Set rsyslog output config
Example:
  ecra> diagnosis rsyslog_set target=otto value=enabled otto_config_path=/scratch/jaseol/otto_config 
  * PUT http://den00pcv.us.oracle.com:9001/ecra/endpoint/diagnosis/rsyslog/output/otto
  * { 
      "rsyslog_config": "Successfully done. It will take effect after 2 minutes once scheduled one-off job finishes rsyslog config",    "op": "diag_rsyslog_output_put",
      "status": 200,
      "status-detail": "success"
  }

logcol:
Usage: ./ecracli diagnosis logcol id_name=<name> id_value=<value>
                       [timestamp=yyyy-mm-dd_HH24:MM:SS] [hours=<hours>]
                       [sosreport=true] [sundiag=true] [bugsr=<bug or sr num>]
                        | regen_par=<tarfile_name>
Purpose:
    Collect diagnosis info from hosts of corresponding Exadata and from ECRA CP
    Log files and config files are defined in diagnosis/exacd_logcol/exacd_logcol.json
    Diagcollect will copy exacd_logcol/hostrun/exacd_logcol_hostrun.py and config/exacd_logcol.json to Exadata hosts,
    run and download results to diagnostic/exacd_logcol directory.
    Diagcollect adjusts timezone and timediff of each host so that we could get logs of same time window.
Arguments:
    id_name: rack_name, dbsystem_ocid, domu_hostname, cdb_ocid, pdb_ocid or db_unique_name
    id_value: Corresponding value
    timestamp: yyyy-mm-dd_HH24:MM:SS in UTC. Default is current time
    hours: exacd_logcol will collect files modified after timestamp minus hours
           Default is 24 hours
    sosreport: Run sosreport. Default is false
    sundiag: Run sundiag. Default is false
    bugsr: Bug or SR number. Should be in \d{8} or \d-\d{11}
Example:
    ./ecracli diagnosis exacd_logcol id_name=rack_name id_value sea201203exd-d0-03-04-cl-04-06-clu01 timestamp 2019-09-21_03:45:00 hours=48 sundiag=true bugsr=30831945
    {
        "op": "diag_exacd_logcol_put",
        "result": {
            "instance-20180704-1126.ecramgmt.adminsea2.oraclevcn.com": "Success",
            "sea201203exddu0501.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exddu0601.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdd005.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdd006.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdcl07.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdcl08.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdcl09.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdib01.sea201203exd.adminsea2.oraclevcn.com": "Success",
            "sea201203exdib02.sea201203exd.adminsea2.oraclevcn.com": "Success"
        },
        "status": 200,
        "status-detail": "success"
    }

add_pre_logcol_rack:
Usage:
  ./ecracli diagnosis add_pre_logcol_rack name=<rackname>
Purpose:
  Add a rack for pre-logcol
Arguments:
  name: rack name
Example:
  ecra> diagnosis add_pre_logcol_rack name=sea201112exd-d0-05-06-cl-07-09-clu01
  * POST http://ecraha2.emmgmt.adminsea2.oraclevcn.com:9401/ecra/endpoint/diagnosis/pre_logcol_rack/sea201112exd-d0-05-06-cl-07-09-clu01
  * {
      "name": "sea201112exd-d0-05-06-cl-07-09-clu01",
      "op": "diag_pre_logcol_rack_post",
      "status": 200,
      "status-detail": "success"
  }

list_pre_logcol_rack:
Usage:
  ./ecracli diagnosis list_pre_logcol_rack
Purpose:
  List racks for pre-logcol
Arguments:
Example:
  ecra> diagnosis list_pre_logcol_rack name=sea201112exd-d0-05-06-cl-07-09-clu01
  * GET http://ecraha2.emmgmt.adminsea2.oraclevcn.com:9401/ecra/endpoint/diagnosis/pre_logcol_rack
  * {
      "op": "diag_pre_logcol_rack_get",
      "pre_logcol_racks": [
          "sea201112exd-d0-05-06-cl-07-09-clu01"
      ],
      "status": 200,
      "status-detail": "success"
  }

delete_pre_logcol_rack:
Usage:
  ./ecracli diagnosis delete_pre_logcol_rack name=<rackname>
Purpose:
  Delete a rack for pre-logcol
Arguments:
  name: rack name
Example:
  ecra> diagnosis delete_pre_logcol_rack name=sea201112exd-d0-05-06-cl-07-09-clu01
  * DELETE http://ecraha2.emmgmt.adminsea2.oraclevcn.com:9401/ecra/endpoint/diagnosis/pre_logcol_rack/sea201112exd-d0-05-06-cl-07-09-clu01
  * {
      "name": "sea201112exd-d0-05-06-cl-07-09-clu01",
      "op": "diag_pre_logcol_rack_delete",
      "status": 200,
      "status-detail": "success"
  }

plgmon:
Usage: ./ecracli diagnosis plgmon
Purpose:
    Run scripts in diagnostic/exacd_plgmon/scripts directory
    exacd_plgmon.py will copy hostrun/exacd_plgmon_hostrun.py and config/exacd_plgmon.json to Exadata hosts,
    run and download results to diagnostic/exacd_plgmon/result directory.
Arguments:
Example:
    ./ecracli diagnosis plgmon
    {
        "op": "diag_exacd_plgmon_put",
        "result": {
            "file_system": "/u01/app/ecra_home/diagnostic/exacd_plgmon/result/a8098c1a-f86e-11da-bd1a-00112444be1e.json",
            "object_storage": "https://objectstorage.us-ashburn-1.oraclecloud.com/n/intexadatateam/b/exacd/o/a8098c1a-f86e-11da-bd1a-00112444"
        },
        "status": 200,
        "status-detail": "success"
    }

add_ignore:
Usage:
  ./ecracli diagnosis add_ignore <type> pattern=<pattern>
Purpose:
  Add a rule to ignore diagnosis targets. Exacd will ignore the targets whose names match the pattern.
Arguments:
  type: type of the exacd target to ignore
    - elastic_check: Clusterless node status will not be changed by inventory check command or ElasticPoolScanner job.
  pattern: exacd target name pattern
    When type=elastic_check, pattern should be a regex for short hostname.
Example:
  ecra> diagnosis add_ignore elastic_check pattern=iad103712exdcl0[4-6]
  * POST http://den00rfr.us.oracle.com:9001/ecra/endpoint/diagnosis/ignore/elastic_check
  * {
      "id": 3,
      "op": "diag_ignore_target_post",
      "status": 200,
      "status-detail": "success"
  }

list_ignore:
Usage:
  ./ecracli diagnosis list_ignore <type>
Purpose:
  List the ignored exacd targets.
Arguments:
  type: type of the exacd target to ignore
    - elastic_check: Clusterless node status will not be changed by inventory check command or ElasticPoolScanner job.
Example:
  ecra> diagnosis list_ignore elastic_check
  * GET http://den00rfr.us.oracle.com:9001/ecra/endpoint/diagnosis/ignore/elastic_check
  * {
      "ignored_targets": [
          {
              "id": 3,
              "pattern": "iad103712exdcl0[4-6]"
          }
      ],
      "op": "diag_ignore_target_get",
      "status": 200,
      "status-detail": "success"
  }

delete_ignore:
Usage:
  ./ecracli diagnosis delete_ignore <type> [pattern=<pattern>] [id=<id>]
Purpose:
  Delete a rule to ignore diagnosis targets.
Arguments:
  type: type of the exacd target to ignore
    - elastic_check: Clusterless node status will not be changed by inventory check command or ElasticPoolScanner job.
  pattern: target name pattern
  id: rule id which was returned by add_ignore or list_ignore command
Example
  ecra> diagnosis delete_ignore elastic_check id=3
  * DELETE http://den00rfr.us.oracle.com:9001/ecra/endpoint/diagnosis/ignore/elastic_check
  * {
      "op": "diag_ignore_target_delete",
      "status": 200,
      "status-detail": "success"
  }

show_active_db_conn:
Usage:
  ./ecracli diagnosis show_active_db_conn
Purpose:
  Show information of all active DB connections, which can be used for debugging DB connection leak issues.
  ECRA does not collect the stacktrace information by default. Use 'ecracli diagnosis db_conn_stacktrace enable' command to enable stacktrace collection.
Arguments:
Example:
  ecra> diagnosis show_active_db_conn
  * GET http://den00rfr.us.oracle.com:9001/ecra/endpoint/diagnosis/db_connection
  * {
      "connection_count": 1,
      "connections": [
          {
              "creation_endpoint": "notset",
              "creation_thread": "Thread-93302",
              "creation_time": "2021-06-03T14:25:19.565Z",
              "stacktrace": [
                  "oracle.exadata.ecra.util.DBConnection.getConnection(DBConnection.java:86)",
                  "oracle.exadata.ecra.scheduler.EcraDiagMonitoringJob.runDbQuery(EcraDiagMonitoringJob.java:272)",
                  "oracle.exadata.ecra.scheduler.EcraDiagMonitoringJob.collectDatabaseStats(EcraDiagMonitoringJob.java:232)",
                  "oracle.exadata.ecra.scheduler.EcraDiagMonitoringJob.collectDiagStats(EcraDiagMonitoringJob.java:189)",
                  "oracle.exadata.ecra.scheduler.EcraDiagMonitoringJob.run(EcraDiagMonitoringJob.java:165)",
                  "oracle.exadata.ecra.scheduler.JobRunnable.run(JobRunnable.java:75)",
                  "java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)",
                  "java.util.concurrent.FutureTask.run(FutureTask.java:266)",
                  "java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)",
                  "java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)",
                  "oracle.exadata.ecra.scheduler.JobScheduler$1$1.run(JobScheduler.java:143)"
              ]
          }
      ],
      "op": "diag_db_conn_info_get",
      "status": 200,
      "status-detail": "success"
  }

db_conn_stacktrace:
Usage:
  ./ecracli diagnosis db_conn_stacktrace (enable|disable|show)
Purpose:
  Decide whether or not to collect the stacktrace for every DB connection request.
  The change is not permanent, and stacktrace will be disabled after restarting ECRA.
Arguments:
Example:
  ecra> diagnosis db_conn_stacktrace show
  * GET http://den00rfr.us.oracle.com:9001/ecra/endpoint/diagnosis/db_connection/stack_trace_config
  * {
      "enable": false,
      "op": "diag_db_conn_stacktrace_get",
      "status": 200,
      "status-detail": "success"
  }

logsearch:
Usage:
  ./ecracli diagnosis logsearch ( request=<id> | workflow=<id> | workflow_task=<id> | exacloud_request=<id> | patch_crid=<id> ) [scope=(all|subrequests|single_request)]
Purpose:
  Generate Lumberjack log search urls for a given request and related requests.
Arguments:
  request: ecs_requests (or async_calls) id
  workflow: wf_uuid
  workflow_task: individual WF task operation_id
  exacloud_request: exacloud/OEDA job id
  patch_crid: Patch CR ID in FPE layer
  scope: scope of the related requests
    - all: all related requests under the top-level request
    - subrequests: the request with given id and its child requests (e.g. WF task can include exacloud request, and WF request can include WF tasks and exacloud requests)
    - single_request: no related requests will be returned
Example:
  ecra> diagnosis logsearch workflow_task="e44bc4f5-07de-43f4-8356-cbf34f0d748f" scope=single_request
  * GET http://phoenix145651.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/diagnosis/logsearchurls/ecra-workflow-tasks/e44bc4f5-07de-43f4-8356-cbf34f0d748f?scope=single-request
  * {
    "log_information": {
      "operation_name": "CreateStorage",
      "operation_status": "EXECUTE:SUCCESS",
      "operation_type": "ECRA workflow task",
      "uuid": "e44bc4f5-07de-43f4-8356-cbf34f0d748f",
      "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
      "start_time": "2023-06-22T07:53:30.118Z",
      "end_time": "2023-06-22T07:54:29.951Z"
    },
    "status": 200,
    "op": "diag_log_search_url_get",
    "status-detail": "success"
  }
  ecra> diagnosis logsearch workflow_task="e44bc4f5-07de-43f4-8356-cbf34f0d748f" scope=subrequests
  * GET http://phoenix145651.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/diagnosis/logsearchurls/ecra-workflow-tasks/e44bc4f5-07de-43f4-8356-cbf34f0d748f?scope=subrequests
  * {
    "log_information": {
      "operation_name": "CreateStorage",
      "operation_status": "EXECUTE:SUCCESS",
      "operation_type": "ECRA workflow task",
      "uuid": "e44bc4f5-07de-43f4-8356-cbf34f0d748f",
      "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
      "start_time": "2023-06-22T07:53:30.118Z",
      "end_time": "2023-06-22T07:54:29.951Z",
      "subrequests": [
        {
          "operation_name": "CreateStorage",
          "operation_status": "SUCCESS",
          "operation_type": "Exacloud/OEDA request",
          "uuid": "b595d978-bfdc-4cb1-8c15-b91cc0ea93b4",
          "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
          "start_time": "2023-06-22T07:53:30.118Z",
          "end_time": "2023-06-22T07:54:29.951Z"
        }
      ]
    },
    "status": 200,
    "op": "diag_log_search_url_get",
    "status-detail": "success"
  }
  ecra> diagnosis logsearch workflow_task="e44bc4f5-07de-43f4-8356-cbf34f0d748f"
  * GET http://phoenix145651.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/diagnosis/logsearchurls/ecra-workflow-tasks/e44bc4f5-07de-43f4-8356-cbf34f0d748f
  * {
    "log_information": {
      "operation_name": "create-service",
      "operation_status": "200",
      "operation_type": "ECRA request",
      "uuid": "670765b3-5f65-426c-bda3-69675c619cbf",
      "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
      "start_time": "2023-06-22T07:48:22Z",
      "end_time": "2023-06-22T07:58:16Z",
      "subrequests": [
        {
          "operation_name": "create-service-wfd",
          "operation_status": "Completed",
          "operation_type": "ECRA workflow",
          "uuid": "42aeabb2-6758-40fe-b9a7-a3a5ea003a3f",
          "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
          "start_time": "2023-06-22T07:48:22.707Z",
          "end_time": "2023-06-22T07:58:17.201Z",
          "subrequests": [
            {
              "operation_name": "ATPExacloudJSONCreation",
              "operation_status": "EXECUTE:SUCCESS",
              "operation_type": "ECRA workflow task",
              "uuid": "da259191-7d4d-4fbf-af25-748dae86a933",
              "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
              "start_time": "2023-06-22T07:48:22.756Z",
              "end_time": "2023-06-22T07:48:45.216Z"
            },
            {
              "operation_name": "FetchUpdatedXmlFromExacloud",
              "operation_status": "EXECUTE:SUCCESS",
              "operation_type": "ECRA workflow task",
              "uuid": "7ba088b3-4102-402f-bc5b-9f0d08ebf406",
              "log_search_url": "https://devops.oci.oraclecorp.com/logs/......",
              "start_time": "2023-06-22T07:48:45.227Z",
              "end_time": "2023-06-22T07:49:06.825Z"
            },
            ......
          ]
        }
      ]
    },
    "status": 200,
    "op": "diag_log_search_url_get",
    "status-detail": "success"
  }

rackhealth_run:
Usage:
    ./ecracli diagnosis rackhealth_run type=(cabinets|clusters) targets=targets [checks=<checks>]
Purpose:
    Run rackhealth tool for the given cabinets or clusters
Arguments:
    type: target type (cabinets or clusters)
    targets: comma-separated list of target cabinets or clusters
      - If type is 'cabinets', targets should be a list of cabinets, either full name or 5 digit numbers. (SEA201323 or 01323)
      - If type is 'clusters', targets should be a list of internal cluster names. (sjc100914exd-d0-01-02-cl-01-03-clu01)
    checks: comma-separated list of items to check (e.g. netchk,sanitycheck,rdsping)
Example:
    ecra> diagnosis rackhealth_run type=cabinets targets=01323,01324
    * POST http://localhost:9001/ecra/endpoint/diagnosis/rackhealth/cabinets
    * {
        "est_op_end_time": "",
        "message": "processing",
        "op": "diag_rack_health_cabinets_post",
        "op_start_time": "2023-11-29T13:28:56+0900",
        "status": 202,
        "status-detail": "processing",
        "status_uri": "http://localhost:9001/ecra/endpoint/statuses/7989985f-86b0-43d7-af44-08bede8877f5"
    }

rackhealth_result:
Usage:
    ./ecracli diagnosis rackhealth_result type=(cabinets|clusters) id=request_uuid
Purpose:
    Get the result of the previous rackhealth request, which could be run by 'diagnosis rackhealth_run' command.
Arguments:
    type: rackhealth tool execution type (cabinets or clusters)
    id: request uuid
Example:
    ecra> diagnosis rackhealth_result type=cabinets id=a73b4595-05f2-474e-8f06-3676eea4c66a
    * GET http://localhost:9001/ecra/endpoint/diagnosis/rackhealth/cabinets/7989985f-86b0-43d7-af44-08bede8877f5
    * {
        "end_time": "2023-11-29T13:29:00+0000",
        "op": "diag_rack_health_cabinets_get",
        "rackhealth_details": [
            {
                "cabinet": "SEA201323",
                "status": "healthy"
            },
            {
                "cabinet": "SEA201324",
                "status": "healthy"
            }
        ],
        "start_time": "2023-11-29T13:28:54+0000",
        "status": 200,
        "status-detail": "success",
        "uuid": "7989985f-86b0-43d7-af44-08bede8877f5",
    }

EM:
Setup:
Usage: ./ecracli em setup [property_json]
          or
        ecra> em setup [property_json]

Purpose:
    Setup EM using DIAG_EM properties from input json. In case property json is not provided in the input, EM setup is done using the current ecra properties.

Arguments:
    input_property_json (optional) : JSON containing the following property values : 
                                        DIAG_EM_HOST
                                        DIAG_EM_PASSWD
                                        DIAG_EM_USER
                                        DIAG_EM_PORT
                                        DIAG_EM_AGENT_HOST
                                        DIAG_EM_AGENT_PORT
Examples:
    ecra> em setup test.json
    * POST http://den00sxb.us.oracle.com:9001/ecra/endpoint/em
    * {
    "op": "exaunit_em_setup",
    "status": 200,
    "status-detail": "success"
    }

    ecra> em setup 
    * POST http://den00sxb.us.oracle.com:9001/ecra/endpoint/em
    * {
    "op": "exaunit_em_setup",
    "status": 200,
    "status-detail": "success"
    }


List:
Usage: ./ecracli em list [<exaunit_id>|<rack_name>] [cdb_sid=<Container Database>]
                                                  [pdb_name=<Pluggable database>]
          or
        ecra> em list [<exaunit_id>|<rack_name>] [cdb_sid=<Container Database>]
                                               [pdb_name=<Pluggable database>]

Purpose:
    Get EM metadata table information.

Arguments:
    exaunit_id : The id such as 1, 2 etc or rackname such as scas07adm0506clu2 (optional)
    cdb_sid : database (CDB) SID such as POD1 (optional)
    pdb_name : pluggable database name such as PDB1 (optional)

Examples:
    ecra> em list scas07adm0506clu2
    * GET http://slc16cya.us.oracle.com:9001/ecra/endpoint/em/2
    * {"status": 200, "status-detail": "success", "em_resource": [{"exaunit_id": 2, "db_sid": "ANANPOD", "resource_info1": "NoVal", "em_state": "created", "reg_attempt": 0, "em_type": "database"}, {"exaunit_id": 2, "db_sid": "NA", "resource_info1": "NoVal", "em_state": "created", "reg_attempt": 4, "em_type": "cluster"}], "op": "exaunit_em_info_clu"}

Re-Register :
Usage: ./ecracli em reregister <exaunit_id>|<rack_name>|all [cdb_sid=<Container Database>]
                                                  [pdb_name=<Pluggable database>]
          or
        ecra> em reregister <exaunit_id>|<rack_name> [cdb_sid=<Container Database>]
                                               [pdb_name=<Pluggable database>]

Purpose:
    Resetting registration attempts of resources in EM metadata table.

Arguments:
    exaunit_id : The id such as 1, 2 etc or rackname such as scas07adm0506clu2 or all (mandatory)
    cdb_sid : database (CDB) SID such as POD1 (optional)
    pdb_name : pluggable database name such as PDB1 (optional)

Examples:
    ecra> em reregister scas07adm0506clu2
    * PUT http://slc16cya.us.oracle.com:9001/ecra/endpoint/em/2
    * {"status": 200, "status-detail": "success", "op": "exaunit_em_rereg_clu"}

Update:
Usage: ./ecracli em update <row_info.json>
          or
        ecra> em update <row_info.json>

Purpose:
    Updating values of a row of the EM metadata table.
Arguments:
    row_info.json (mandatory): new values of the row to be updated.
      em_type,       (optional)
      exaunit_id,    (mandatory)
	  db_sid,        (mandatory if em_type = "database"/"pdb")
      em_state,      (optional)
      reg_attempt,   (optional)
      resource_info1,(mandatory if em_type = "pdb")
      resource_info2,(optional)
      em_agent       (optional)

Add:
Usage: ./ecracli em add <row_info.json>
          or
        ecra> em add <row_info.json>

Purpose:
    Adding a row in the EM metadata table
Arguments:
    row_info.json (mandatory): new value of the row to be added.
      em_type,       (mandatory)
      exaunit_id,    (mandatory)
	  db_sid,        (mandatory if em_type = "database"/"pdb")
      em_state,      (mandatory)
      reg_attempt,   (mandatory)
      resource_info1,(mandatory if em_type = "pdb")
      resource_info2,(optional)
      em_agent       (optional)

Delete:
Usage: ./ecracli em delete <row_info.json>
          or
        ecra> em delete <row_info.json>

Purpose:
    Deleting rows from the EM metadata table.
Arguments:
    row_info.json (mandatory): Info for the row to be deleted.
      exaunit_id,    (mandatory)
	  db_sid,        (mandatory if em_type = "database"/"pdb")
      resource_info1,(mandatory if em_type = "pdb")
      
Disable:
Usage: ./ecracli em disable
          or
        ecra> em em disable

Purpose:
    Disable EM recurrent job for registration/deregistration
    of resources.
Arguments:
    None

Enable:
Usage: ./ecracli em enable
          or
        ecra> em enable

Purpose:
    Enable EM recurrent job for registration/deregistration
    of resources.
Arguments:
    None


Exaunit:
Info:
Usage: ./ecracli exaunit info <exaunit_id>
          or
        ecra> exaunit info <exaunit_id>

Purpose:
    Get network information from rack xml for the given exaunit.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit info 2
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/info
* {"status": 200, "name": "slcs20adm0506clu5", "scan_ips": ["10.249.85.134", "10.249.85.135", "10.249.85.136"], "status-detail": "success", "admin_network": "10.249.88.0/22", "client_network": "10.249.80.0/21", "computes": [{"client_ip": "10.249.85.130", "hostname": "slcs20adm05vm05.us.oracle.com", "client_vlan": "UNDEFINED", "backup_ip": "10.249.93.142", "client_network": "10.249.80.0/21", "admin_vlan": "UNDEFINED", "virtual_ip": "10.249.85.132", "backup_network": "10.249.92.0/22", "admin_network": "10.249.88.0/22", "admin_ip": "10.249.89.142", "backup_vlan": "UNDEFINED"}, {"client_ip": "10.249.85.131", "hostname": "slcs20adm06vm05.us.oracle.com", "client_vlan": "UNDEFINED", "backup_ip": "10.249.93.143", "client_network": "10.249.80.0/21", "admin_vlan": "UNDEFINED", "virtual_ip": "10.249.85.133", "backup_network": "10.249.92.0/22", "admin_network": "10.249.88.0/22", "admin_ip": "10.249.89.143", "backup_vlan": "UNDEFINED"}], "backup_network": "10.249.92.0/22", "op": "exaunit_info"}

./ecracli exaunit info 2
{"status": 200, "name": "slcs20adm0506clu5", "scan_ips": ["10.249.85.134", "10.249.85.135", "10.249.85.136"], "status-detail": "success", "admin_network": "10.249.88.0/22", "client_network": "10.249.80.0/21", "computes": [{"client_ip": "10.249.85.130", "hostname": "slcs20adm05vm05.us.oracle.com", "client_vlan": "UNDEFINED", "backup_ip": "10.249.93.142", "client_network": "10.249.80.0/21", "admin_vlan": "UNDEFINED", "virtual_ip": "10.249.85.132", "backup_network": "10.249.92.0/22", "admin_network": "10.249.88.0/22", "admin_ip": "10.249.89.142", "backup_vlan": "UNDEFINED"}, {"client_ip": "10.249.85.131", "hostname": "slcs20adm06vm05.us.oracle.com", "client_vlan": "UNDEFINED", "backup_ip": "10.249.93.143", "client_network": "10.249.80.0/21", "admin_vlan": "UNDEFINED", "virtual_ip": "10.249.85.133", "backup_network": "10.249.92.0/22", "admin_network": "10.249.88.0/22", "admin_ip": "10.249.89.143", "backup_vlan": "UNDEFINED"}], "backup_network": "10.249.92.0/22", "op": "exaunit_info"}

ecra> exaunit info 14
http://slc14rlu.us.oracle.com:9073/ecra/endpoint/exaunit/14/info
* GET http://slc14rlu.us.oracle.com:9073/ecra/endpoint/exaunit/14/info
* {"status": 200, "name": "mock_adm104clu3", "available_storage": "1200G", "scan_ips": ["99.128.13.240", "99.128.13.241", "99.128.13.239"], "status-detail": "success", "client_network": "99.128.0.0/20", "total_storage": "1500G", "computes": [{"client_ip": "99.128.13.222", "client_vlan": "UNDEFINED", "hostname": "mock_vm1.us.oracle.com", "client_network": "99.128.0.0/20", "admin_vlan": "UNDEFINED", "virtual_ip": "99.128.13.230", "admin_network": "99.128.72.0/21", "admin_ip": "99.128.79.28"}, {"client_ip": "99.128.13.223", "client_vlan": "UNDEFINED", "hostname": "mock_vm2.us.oracle.com", "client_network": "99.128.0.0/20", "admin_vlan": "UNDEFINED", "virtual_ip": "99.128.13.231", "admin_network": "99.128.72.0/21", "admin_ip": "99.128.79.29"}], "rackInfo": {"status": "PROVISIONED", "racksize": "quarter", "opstate": "ONLINE", "exadata_id": "1", "rackname": "1-clu-5"}, "admin_network": "99.128.72.0/21", "op": "exaunit_info"}

logs:
Usage: ./ecracli exaunit logs <exaunit_id> [dest=destination_folder] [dbName=<dbname>] [vmName=<vmname>]
          

Purpose:
    Get the all DB logs for triage purposes.

Arguments:
    exaunit_id : The id such as 1, 2 etc
    dest: Destination folder of the logs, if missing, the logs will be located at log folder in ecracli. Name will be like slc06adm02.tgz
    dbName: Database name, if missing, all databases logs will be included.
    vmName: The VM where to extract the logs from, if missing, logs will be extrated for all the VM's.

Examples:

ecra> exaunit logs 61 
* {"status": 200, "status-detail": "success", "logFile": "/scratch/jreyesm/ecra_installs/test6/ecracli/log/slcs19adm0304clu2.tgz", "op": "exaunit_vmlogs"}

ecra> exaunit logs 61 dest=/scratch/jreyesm
* {"status": 200, "status-detail": "success", "logFile": "/scratch/jreyesm/slcs19adm0304clu2.tgz", "op": "exaunit_vmlogs"}

./ecracli  exaunit logs 61 dest=/scratch/jreyesm
* {"status": 200, "status-detail": "success", "logFile": "/scratch/jreyesm/slcs19adm0304clu2.tgz", "op": "exaunit_vmlogs"}

./ecracli   exaunit logs 61 dest=/scratch/jreyesm dbName=gabTOT01
* {"status": 200, "status-detail": "success", "logFile": "/scratch/jreyesm/slcs19adm0304clu2.tgz", "op": "exaunit_vmlogs"}

./ecracli  exaunit logs 61 dest=/scratch/jreyesm dbName=gabTOT01 vmName=slcs19adm04vm02
* {"status": 200, "status-detail": "success", "logFile": "/scratch/jreyesm/slcs19adm0304clu2.tgz", "op": "exaunit_vmlogs"}

Cores:
Usage: ./ecracli exaunit cores <exaunit_id>
          or
        ecra> exaunit cores <exaunit_id>

Purpose:
    Get cores allocation info for the given exaunit.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit cores 2
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/cores
* {"status": 200, "status-detail": "success", "ocpuOpInProgress": false, "ocpuAllocations": [{"maxBurstOcpu": 16, "maxSubOcpu": 34, "maxMetOcpu": 0, "hostName": "slcs20adm05vm05.us.oracle.com", "minOcpu": 1, "maxOcpu": 34, "burstOcpu": 0, "meteredOcpu": 0, "subscriptionOcpu": 16}, {"maxBurstOcpu": 16, "maxSubOcpu": 34, "maxMetOcpu": 0, "hostName": "slcs20adm06vm05.us.oracle.com", "minOcpu": 1, "maxOcpu": 34, "burstOcpu": 0, "meteredOcpu": 0, "subscriptionOcpu": 16}], "exaunitId": 2, "op": "exaunit_coreinfo"}

./ecracli exaunit cores 2
{"status": 200, "status-detail": "success", "ocpuOpInProgress": false, "ocpuAllocations": [{"maxBurstOcpu": 16, "maxSubOcpu": 34, "maxMetOcpu": 0, "hostName": "slcs20adm05vm05.us.oracle.com", "minOcpu": 1, "maxOcpu": 34, "burstOcpu": 0, "meteredOcpu": 0, "subscriptionOcpu": 16}, {"maxBurstOcpu": 16, "maxSubOcpu": 34, "maxMetOcpu": 0, "hostName": "slcs20adm06vm05.us.oracle.com", "minOcpu": 1, "maxOcpu": 34, "burstOcpu": 0, "meteredOcpu": 0, "subscriptionOcpu": 16}], "exaunitId": 2, "op": "exaunit_coreinfo"}

dbs:
Usage: ./ecracli exaunit dbs <exaunit_id>
          or
        ecra> exaunit dbs <exaunit_id>

Purpose:
    List dbSIDs of created databases for the given exaunit.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit dbs 2
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/databases
* {"status": 200, "status-detail": "success", "op": "exaunit_dblist", "databases": []}

./ecracli exaunit dbs 2
{"status": 200, "status-detail": "success", "op": "exaunit_dblist", "databases": []}

detail:
Usage: ./ecracli exaunit detail <exaunit_id>
          or
        ecra> exaunit detail <exaunit_id>

Purpose:
    Get the detailed parameters for the given exaunit.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit detail 2
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/detail
* {"exaunit_name": "exaclu", "status": 200, "pod_guid": "f5c9a391-23b0-4228-826a-be3cee03745a", "exaunit_id": 2, "backup_disk": "N", "racksize": "QUARTER", "entitlement_id": "100000000", "status-detail": "success", "create_sparse": "false", "initial_cores": 8, "tb_storage": 42, "grid_version": "12.1", "csi": "12345", "subscription_id": "f5c9a391-23b0-4228-826a-be3cee03745a", "op": "exaunit_details", "gb_memory": 496, "customer_name": "Oracle Test Internal Group"}

./ecracli exaunit detail 2
{"exaunit_name": "exaclu", "status": 200, "pod_guid": "f5c9a391-23b0-4228-826a-be3cee03745a", "exaunit_id": 2, "backup_disk": "N", "racksize": "QUARTER", "entitlement_id": "100000000", "status-detail": "success", "create_sparse": "false", "initial_cores": 8, "tb_storage": 42, "grid_version": "12.1", "csi": "12345", "subscription_id": "f5c9a391-23b0-4228-826a-be3cee03745a", "op": "exaunit_details", "gb_memory": 496, "customer_name": "Oracle Test Internal Group"}


detail_update:
Usage: ./ecracli exaunit detail_update <exaunit_id>i <key>=<value>
          or
        ecra> exaunit detail_update <exaunit_id> <key>=<value>

Purpose:
    Update the detailed parameters for the given exaunit.

Arguments:
    exaunit_id : The id such as 1, 2 etc
    key        : initial_cores, grid_version, customer_name, reserved_cores, reserved_memory, filesystem,
                 gb_memory, tb_storage, gb_storage, gb_ohsize, atp, jumbo_frames, monitoring_enabled,
                 total_cores, fsconfig, ecpufactor

Examples:
ecra> exaunit detail_update 82 reserved_memory=12
* {
    "status": 200,
    "op": "exaunit_update",
    "status-detail": "success"
}

vms:
Usage: ./ecracli exaunit vms <exaunit_id>
          or
        ecra> exaunit vms <exaunit_id>

Purpose:
    Get the vm names for the given exaunit.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit vms 2
* VM's: ['slcs20adm05vm05.us.oracle.com', 'slcs20adm06vm05.us.oracle.com']

/ecracli exaunit vms 2
VM's: ['slcs20adm05vm05.us.oracle.com', 'slcs20adm06vm05.us.oracle.com']

get:
Usage: ./ecracli exaunit get <exaunit_id>
          or
        ecra> exaunit get <exaunit_id>

Purpose:
    Pull the exaunit information and print out the status parameters.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit get 2
* Getting exaunit 2 information
* size : CUSTOM
* status : 200
* pod_guid : f5c9a391-23b0-4228-826a-be3cee03745a
* dbsystem_id : ocid1.dbsystem.oc1.sea.abzwkljse7tqendzd3476mwmtvapbwtn7hklibbjokpokanxq5mx5l6ze
* pod_payload : PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48ZW5naW5lZXJlZFN5c3RlbSB...
* status-detail : success
* multitenant : true
* uri : http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2
* tools_key : ssh-rs.....................................
........................................................

domukeys:
Usage: ./ecracli exaunit domukeys <exaunit_id>
          or
        ecra> exaunit domukeys <exaunit_id>

Purpose:
    Get the domukeys of all the vm's for a cluster.

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit domukeys 2
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/2/vms/keys
* {"keys": [{"hostname": "slcs20adm05vm05.us.oracle.com", "user": "opc", "key": ["-----*********-----", "MIIEogIBAAKCAQEArqedkl6b9C0aA9JPNcvOm2QUtRHj7vHxLp83t6WU+Vl7s3Xr", "vEcNgpPpj/u52N0BClb5xg5jVetGpvZ9nrs8nQljO+gLMH2XGDtEkasBSmvCVSQ7", "BxICgrj2W5PWAqA2vcuFcMdHHrBUOx1USE9H67aWLtthuYNc39MgQAWaVZaK7vRx", "TVOUyMy6uJ3tEZy0wH4Wt34mfWt2hp0Bst3r1TJYCLkpx7yy7bU6CflCr2UM3uW+", "VAL0ZXoaYh54C8rIUh4s5kEIkjT5gm7IlnM3OAIF+xsEfxaIkqCCG65fAzg+CHgh", "+vKeTVJ1eRB4oKh0bIX7HeaRxgg5DN1xoYzkjwIBIwKCAQEAhrvRU6gR6EAMwR6U", "4Ftk3kXkFqdmsQPIru/ahlspx6tuDhkj.................................
..................................................................

./ecracli exaunit domukeys 2
{"keys": [{"hostname": "slcs20adm05vm05.us.oracle.com", "user": "opc", "key": ["-----*********-----", "MIIEowIBAAKCAQEAuCWNU2OhMKDaVqQgKEuMpAR671ywbDjObs4C1QJ2tkBj3FIx", "wzNR7fTZ23VwwH8S4SLphHhyBtiXUdZ1UYeDZJ6r/5F+o......................
...................................................................

drop:
Usage: ./ecracli exaunit drop <exaunit_id>
          or
        ecra> exaunit drop <exaunit_id> 

Purpose:
    Drop the exaunit record as if executing the post action of delete_service. This will delete all the related info about this exaunit in ecra and release resources occupied by this exaunit.

Examples:
ecra> exaunit drop 2
* Dropping exaunit: 2
* {"status": 200, "status-detail": "success", "op": "exaunit_dropdelete"}

Note:
    Using this command may not delete your VM. You may then have to run :
    ./exacloud -id slcqab02adm0506clu5 -clu vmgi_delete -al localhost -as
    from exacloud/bin to delete your VM
    
asmrebalance:
Usage: ./ecracli exaunit asmrebalance <exaunitid> rebalancepower=<rebalance power>
          or
        ecra> exaunit asmrebalance <exaunitid>  rebalancepower=<rebalance power>

Purpose:
    Update the ASM rebalance power value, this value is used during the rebalance process when a elastic cell is added to the disk group. 

Examples:
ecra> exaunit asmrebalance 695 rebalancepower=15
* {
    "status": 202,
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d354aff3-94d6-449d-86c8-441e3bb9593e",
    "op": "asm_rebalance",
    "op_start_time": "2024-05-03T05:50:39+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing",
    "exaunit_id": 695
}
ecra> status d354aff3-94d6-449d-86c8-441e3bb9593e
* {"progress_percent": 0, "exaunit_id": 695, "start_time_ts": "2024-05-03 05:50:39.0",
 "end_time": "2024-05-03T05:51:02+0000", "ecra_server": "EcraServer1", "wf_uuid": "dedec35f-21ce-4967-b06b-3c74ab12a355",
 "start_time": "2024-05-03T05:50:39+0000", "last_heartbeat_update": "2024-05-03T05:50:39+0000", "status": 200, 
 "message": "Done", "op": "asm_rebalance", "completion_percentage": 0, 
 "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d354aff3-94d6-449d-86c8-441e3bb9593e",
 "status-detail": "success"}

Note:
    ASM rebalance power value must be between 1 and 64.

hasopr:
Usage: ./ecracli exaunit hasopr <exaunit_id>
          or
        ecra> exaunit hasopr <exaunit_id>
Purpose:
    Retrieve current ongoing operation name from a given exaunit, if any exists.

Examples:
ecra> exaunit hasopr 64
* {"status": 200, "status-detail": "success", "hasOperation": true, "operation": "reshape-service", "exaunitId": 64, "op": "exaunit_has_operation"}

Suspend:
Usage: ./ecracli exaunit suspend <exaunit_id>
          or
        ecra> exaunit suspend <exaunit_id>

Purpose:
    Suspend all the vms in the exaunit

Arguments:
    exaunit_id : The id of the exaunit

Examples:
ecra> exaunit suspend 41
* Performing exaunit suspend operation
http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/388da5f7-0b12-4104-a1ef-3e8f22191bb4

Securevms:
Usage: ./ecracli exaunit secuervms exaunitid=<exaunit_id> [opcrequestid=<opcrequestid>] [idemtoken=<idemtoken>] [payload=<json_path>]

Purpose:
    Erase l the keys in all the vms of the exaunit

Arguments:
    exaunit_id : The id of the exaunit

Examples:
ecra> exaunit securevms exaunitid=2194
* {
  "status": 202,
  "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/8e08bce7-0ff9-4e3b-9bea-10172f90d732",
  "op": "exaunit_securevms_post",
  "op_start_time": "2024-09-11T21:40:31+0000",
  "est_op_end_time": "",
  "message": "processing",
  "status-detail": "processing",
  "exaunit_id": 2194
}
ecra> status 8e08bce7-0ff9-4e3b-9bea-10172f90d732
* {"progress_percent": 0, "start_time": "2024-09-11T21:40:31+0000", "exaunit_id": 2194, "start_time_ts": "2024-09-11 21:40:31.0", "ecra_server": "EcraServer1", "last_heartbeat_update": "2024-09-11T21:40:31+0000", "wf_uuid": "0cea5964-eaaa-4717-a82c-d99acc01eddb", "status": 202, "message": "Pending", "op": "SecureVMs", "completion_percentage": 0, "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/8e08bce7-0ff9-4e3b-9bea-10172f90d732", "op_start_time": "2024-09-11T21:40:41+0000", "est_op_end_time": ""}

Get operations:
Usage: ./ecracli exaunit getoperations <exaunit_id>
          or
        ecra> exaunit getoperations <exaunit_id>

Purpose:
    Get the operations that are currently running in the cluster

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit getoperations 15367
* {
    "operations": [
        {
            "operation": "create-service",
            "requestid": "7540f949-01f1-4cb5-b8fe-bca66e9272da"
        }
    ],
    "status": 200,
    "op": "exaunit_operations_get",
    "status-detail": "success"
}

Update NTP DNS details:
Usage: ./ecracli exaunit updatentpdns <exaunit_id>
          or
        ecra> exaunit updatentpdns <exaunit_id>

Purpose:
    Update the ntp and dns details for the exaunit in xml

Arguments:
    exaunit_id : The id such as 1, 2 etc

Examples:
ecra> exaunit updatentpdns 2194
* {
  "status": 200,
  "op": "exaunit_updatentpdns_post",
  "message": "success"
}

Rotate keys:
Usage: ./ecracli exaunit rotatekeys [exaunitid=<exaunitId>] [rackname=<rackname>] [idemtoken=<idemtoken>] [force=true/false]
          or
        ecra> exaunit rotatekeys [exaunitid=<exaunitId>] [rackname=<rackname>] [idemtoken=<idemtoken>] [force=true/false]

Purpose:
    Rotate ssh keys from exacloud

Arguments:
    exaunit_id : The id such as 1, 2 etc
    rackname : the name of the rack
    idemtoken : the idemtoken for this request
    force : true/false to run the operation even if there are ongoing operations in the cluster

Examples:
ecra> exaunit rotatekeys rackname=sea201108exd-d0-03-04-cl-04-06-clu01 force=false
* {
    "status": 202,
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/92d60fb9-fc77-4c4c-abe2-279da8e3611c",
    "op": "exaunit_rotatekeys_post",
    "op_start_time": "2025-01-13T04:56:53+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}
ecra> status 92d60fb9-fc77-4c4c-abe2-279da8e3611c
* {"progress_percent": 0, "start_time": "2025-01-13T04:56:53+0000", "start_time_ts": "2025-01-13 04:56:53.0", "end_time": "2025-01-13T04:56:57+0000", 
"ecra_server": "EcraServer1", "last_heartbeat_update": "2025-01-13T04:56:53+0000", "wf_uuid": "2065307e-dfc3-40a9-a9fc-981863bfee2d", "status": 200, 
"message": "Done", "op": "exaunit_rotatekeys_post", "completion_percentage": 0, 
"status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/92d60fb9-fc77-4c4c-abe2-279da8e3611c", 
"status-detail": "success"}

Get compute sizes:
Usage: ./ecracli exaunit getcomputesizes <exaunit_id> [dom0s=<dom0_1>,<dom0_2>,...,<dom0_n>] [ignorexml=<true/false>]
       or
       ecra> exaunit getcomputesizes <exaunit_id> [dom0s=<dom0_1>,<dom0_2>,...,<dom0_n>] [ignorexml=<true/false>]

Purpose:
    Get the disk usage of each dom0 from a given exaunit. 

Arguments:
    exaunit_id : The id such as 1, 2 etc.
    dom0s : The additional dom0s to be listed (aside from the ones in the exaunit's XML).
    ignorexml : Whether to list the computes in the exaunit's XML (false) or not (true).

Examples:
    1) ecra> exaunit getcomputesizes
    * GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1765/exaunit/computesizes
    * {"status": 202, "status-detail": "success", "compute_sizes": {"scas07adm07.us.oracle.com": "197.0 GB"}, "op": "racks_get"}

    2) ecra> exaunit getcomputesizes dom0s=scas07adm08.us.oracle.com
    * GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1765/exaunit/computesizes
    * {"status": 202, "status-detail": "success", "compute_sizes": {"scas07adm07.us.oracle.com": "197.0 GB", "scas07adm08.us.oracle.com": "197.0 GB"}, "op": "racks_get"}

    3) ecra> exaunit getcomputesizes dom0s=scas07adm08.us.oracle.com ignorexml=true
    * GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/exaunit/1765/exaunit/computesizes
    * {"status": 202, "status-detail": "success", "compute_sizes": {"scas07adm08.us.oracle.com": "197.0 GB"}, "op": "racks_get"}

Collect VM core logs:
Usage: ./ecracli exaunit collectvmcorelogs <exaunitId> vmName=<vm_name> [idemtoken=<idemtoken>]
          or
        ecra> exaunit collectvmcorelogs <exaunitId> vmName=<vm_name> [idemtoken=<idemtoken>]

Purpose:
    Calls Exacloud to start the collection of the VM core logs for a given VM. Once in status 200, the status details will contain the OSS URL where the logs can be found.

Arguments:
    exaunit_id : the id of the exaunit (such as 1, 2...)
    vmName : the name of the VM where the logs will be collected from
    idemtoken : the idemtoken for this request

Examples:
ecra> exaunit collectvmcorelogs 1869 vmName=atpd-exa-lnsk01.client.exaclouddev.oraclevcn.com 
* {
    "status": 202,
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/92d60fb9-fc77-4c4c-abe2-279da8e3611c",
    "op": "exaunit_vmcorecollect_post",
    "op_start_time": "2025-03-03T03:41:07+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

ecra> status 12e40fh7-fg80-3e3e-dca1-173df8a1520b
* {"progress_percent": 0, "start_time": "2025-03-03T03:41:07+0000", "start_time_ts": "2025-03-03 03:41:07.0", "end_time": "2025-03-03T04:35:58+0000", 
"ecra_server": "EcraServer2", "last_heartbeat_update": "2025-03-03T04:35:58+0000", "wf_uuid": "3164389d-agn6-14a2-b8fc-122852agee2d", "status": 200, 
"message": "Done", "op": "exaunit_vmcorecollect_post", "completion_percentage": 0, 
"step_progress_details": "https://objectstorage.test.oraclecloud.com/p/testuuid/n/exadata/b/ECRA-Software/o/ririgoyetest.jar",
"status_uri": "http://atp-ecra6.emmgmt.adminsea2.oraclevcn.com:9013/ecra/endpoint/statuses/12e40fh7-fg80-3e3e-dca1-173df8a1520b", 
"status-detail": "success"}

Status:
Usage: ./ecracli status <exaunit_id | request uuid>
       or 
       ecra> status <exaunit-id | request uuid>

Purpose:
    Get the status information from a status uuid or a request id. If an exaunit id is entered, it will try to fetch the status of ongoing operation on that exaunit

Arguments:
    exaunit_id : The id such as 1, 2 etc
    request uuid : The UUID of the request

Examples:
ecra> status 2
* No ongoing operation found for exaunit 2

./ecracli status 2
No ongoing operation found for exaunit 2

ecra> status 13882be2-69a4-11e7-9030-fa163ed5ac29
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/13882be2-69a4-11e7-9030-fa163ed5ac29
* {"status": 200, "exaunit_id": 2, "target_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/vms/slcs20adm05vm05.us.oracle.com", "status-detail": "success", "start_time": "2017-07-15T14:25:08-0700", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/13882be2-69a4-11e7-9030-fa163ed5ac29", "statusinfo": "000:: No status info available", "end_time": "2017-07-15T14:28:08-0700", "error": "0", "ec_details": "Undef", "message": "Done", "op": "vm_command", "error_str": "No Errors"}

Query_requests:
Usage: ./ecracli query_requests [limit=<num of records>] [raw=<true/false>] [<key1=value1> <key2=value2> ...]
            or
        ecra> query_requests [limit=<num of records>] [raw=<true/false>] [<key1=value1> <key2=value2> ...]

Purpose:
    Query requests using input options as query params

Arguments:
    limit : You can set the limit of number of output request records by setting this option.
            By default there is no limit (limit=0)
    raw : By default raw is set to False and ecracli will print out a nicely formatted output.
          By setting raw to either True or true, ecracli will print output in raw json format.
    range query : To query range, add -lt or -gt at the end of the field.

Examples:
ecra> query_requests
* list of found requests:
* ------------------------------------------------
* request id  248b9601-76f1-4df2-a3ca-804d75628a43
* operation   vm_command
* status      200
* exaunit_id  2
* resource_id slcs20adm05vm05.us.oracle.com
* status_uuid 13882be2-69a4-11e7-9030-fa163ed5ac29
* start_time  2017-07-15T14:25:08-0700
* ------------------------------------------------
* request id  cff0843b-863e-4fb7-9f3b-0ce816eaa4a1
* operation   vm_command
* status      200
* exaunit_id  2
* resource_id slcs20adm05vm05.us.oracle.com
* status_uuid a8b48aea-69a3-11e7-9030-fa163ed5ac29
* start_time  2017-07-15T14:22:08-0700
* ------------------------------------------------

*) query_requests status=500
*) query_requests status=202 operation=creaet-service
*) query_requests status=202 start_time-gt=2016-06-24T16:50 start_time-lt=2016-06-25
*) query_requests status=202 start_time-lt=2016-06-25 limit=0
*) query_requests status=202 exaunitid=100 limit=5 raw=true

Rack:
register
Usage: ./ecracli rack register <rackname> [racksize=<full | half | quarter | eighth | elastic> ]
       or 
       ecra> rack register <rackname> [racksize=<full | half | quarter | eighth | elastic>]
       or
       ./ecracli rack register rackname=<rackname> [racksize=<full | half | quarter | eighth | elastic >]
       or
       ecra> rack register rackname=<rackname> [racksize=<full | half | quarter | eighth | elastic >]
       or
       ./ecracli rack register rackxmlpath=<existing path of rack xml file> [racksize=<full | half | quarter | eighth | elastic >
       or
       ecra> rack register rackxmlpath=<existing path of rack xml file> [racksize=<full | half | quarter | eighth | elastic >]

Purpose:
    Register a rack in ecra with the given rack name or a path of rack xml file.

Arguments:
    rackname    : The rackname such as slcqab02adm0506clu5
    rackxmlpath : Existing path of a rack xml file such as slcqab02adm0506clu5.xml
    racksize    : full | half | quarter | eighth | elastic

Examples:
ecra> rack register r417cluster1
* Registering rack with rack name: r417cluster1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_create'}

ecra> rack register slcqab02adm0506clu1 racksize=quarter
* Registering rack with rack name: slcqab02adm0506clu1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_create'}

ecra> rack register rackname=r417cluster1
* Registering rack with rack name: r417cluster1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_create'}

ecra> rack register rackname=slcqab02adm0506clu1 racksize=quarter
* Registering rack with rack name: slcqab02adm0506clu1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_create'}

ecra> rack register rackxmlpath=/clusters/cluster-r417cluster1/config/r417cluster1.xml
* Registering rack with rack name: r417cluster1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_create'}

ecra> rack register rackxmlpath=/clusters/cluster-slcqab02adm0506clu1/config/slcqab02adm0506clu1.xml racksize=quarter
* Registering rack with rack name: slcqab02adm0506clu1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_create'}

Note:
    You should have done a getkeys for your rackname using exacloud rack
    get_keys and then added this path in ecracli.cfg under exadataClusters section.
    You can only register a rack only with a existing path of rack xml file.
    When the rackxmlpath parameter is used, the name of the rack is taken from the xml file.

deregister
Usage: ./ecracli rack deregister <rackname> 
       or 
       ecra> rack deregister <rackname> 
       or
       ./ecracli rack deregister rackname=<rackname> 
       or 
       ecra> rack deregister rackname=<rackname> 
       or
       ./ecracli rack deregister rackxmlpath=<existing path of rack xml file> 
       or 
       ecra> rack deregister rackxmlpath=<existing path of rack xml file> 
Purpose:
    Deregister the rack in ecra with the given name or existing path of the rack xml file.

Arguments:
    rackname    : The rackname such as slcqab02adm0506clu5
    rackxmlpath : Existing path of a rack xml file such as slcqab02adm0506clu5.xml

Examples:
ecra> rack deregister r417cluster1
* Deregistering rack with name: r417cluster1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_delete'}

ecra> rack deregister rackname=r417cluster1
* Deregistering rack with name: r417cluster1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_delete'}

ecra> rack deregister rackxmlpath=/clusters/cluster-r417cluster1/config/r417cluster1.xml
*  Deregistering rack with name: r417cluster1
{u'status': 200, u'status-detail': u'success', u'op': u'rack_delete'}

Note:
    When the rackxmlpath parameter is used, the name of the rack is taken from the xml file.

get:
Usage: ./ecracli rack get [options]
       or 
       ecra> rack get [options] 

Purpose:
    Query all the racks that fulfill input option requirements.

Arguments: 
    options : key value pairs such as racksize=half, name=r417cluster1
              status=READY etc

Examples:
i) ecra> rack get
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/racks
* {"status": 200, "status-detail": "success", "racks": [{"status": "READY", "name": "slcs20adm0506clu3", "racksize": "quarter", "dom0": "slcs20adm05slcs20adm06", "model": "X5-2", "domu": "slcs20adm05vm03slcs20adm06vm03"}, {"status": "READY", "name": "slcs20adm0506clu5", "racksize": "quarter", "dom0": "slcs20adm05slcs20adm06", "model": "X5-2", "domu": "slcs20adm05vm05slcs20adm06vm05"}, {"status": "PROVISIONED", "name": "slcs20adm0506clu7", "racksize": "quarter", "dom0": "slcs20adm05slcs20adm06", "model": "X5-2", "exaunitID": 3, "domu": "slcs20adm05vm07slcs20adm06vm07"}, {"status": "READY", "name": "slcqab02adm0506clu5", "racksize": "quarter", "dom0": "slcqab02adm05slcqab02adm06", "model": "X6-2", "domu": "slcqab02adm05vm05slcqab02adm06vm05"}, {"status": "READY", "name": "slcqab02adm0506clu1", "racksize": "quarter", "dom0": "slcqab02adm05slcqab02adm06", "model": "X6-2", "domu": "slcqab02adm05vm01slcqab02adm06vm01"}], "op": "racks_get"}

ii) ecra> rack get status=READY
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/racks?status=READY
* {"status": 200, "status-detail": "success", "racks": [{"status": "READY", "name": "slcs20adm0506clu3", "racksize": "quarter", "dom0": "slcs20adm05slcs20adm06", "model": "X5-2", "domu": "slcs20adm05vm03slcs20adm06vm03"}, {"status": "READY", "name": "slcs20adm0506clu5", "racksize": "quarter", "dom0": "slcs20adm05slcs20adm06", "model": "X5-2", "domu": "slcs20adm05vm05slcs20adm06vm05"}, {"status": "READY", "name": "slcqab02adm0506clu5", "racksize": "quarter", "dom0": "slcqab02adm05slcqab02adm06", "model": "X6-2", "domu": "slcqab02adm05vm05slcqab02adm06vm05"}, {"status": "READY", "name": "slcqab02adm0506clu1", "racksize": "quarter", "dom0": "slcqab02adm05slcqab02adm06", "model": "X6-2", "domu": "slcqab02adm05vm01slcqab02adm06vm01"}], "op": "racks_get"}

iii) ecra> rack get racksize=half
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/racks?racksize=half
* {"status": 200, "status-detail": "success", "racks": [{"status": "READY", "name": "r417cluster2", "racksize": "half", "dom0": "fpcldx0011mfpcldx0012mfpcldx0013mfpcldx0014mfpcldx0015mfpcldx0016mfpcldx0017mfpcldx0018m", "model": "X5-2", "domu": "fpcldv0003mfpcldv0004m"}], "op": "racks_get"}

iv) ecra> rack get name=r417cluster1
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/racks?name=r417cluster1
* {"status": 200, "status-detail": "success", "racks": [{"status": "READY", "name": "r417cluster1", "racksize": "quarter", "dom0": "fpcldx0011mfpcldx0012mfpcldx0013mfpcldx0014mfpcldx0015mfpcldx0016mfpcldx0017mfpcldx0018m", "model": "X5-2", "domu": "fpcldv0001mfpcldv0002m"}], "op": "racks_get"}

exaid:
Usage: ./ecracli rack exaid <[exaunitid=id] | [dbSystem_id=ocid]>
       or 
       ecra> rack exaid <[exaunitid=id] | [dbSystem_id=ocid]>

Purpose:
    Get the mapping information between exaunitid and dbsystem_id

Arguments: 
    exaunitid : exaunitid of the rack
    dbsystem_id : dbSystem OCID associated with the rack

Examples:
ecra> rack exaid exaunitid=181
* {
    "dbsystem_id": "ocid1.dbsystem.oc1.sea.abzwkljse7tqendzd3476mwmtvapbwtn7hklibbjokpokanxq5mx5l6ze", 
    "status": 200, 
    "status-detail": "success", 
    "op": "rack_exaid_get"
}
ecra> rack exaid dbsystem_id=ocid1.dbsystem.oc1.sea.abzwkljse7tqendzd3476mwmtvapbwtn7hklibbjokpokanxq5mx5l6ze
* {
    "status": 200, 
    "status-detail": "success", 
    "exaunitid": 181, 
    "op": "rack_exaid_get"
}

compose:
Usage: ./ecracli rack compose <rackname>=<rackname>
       or
       ./ecracli rack compose <rackname>=<rackname>

Purpose:
       Ecra compose operation takes as argument a rackname and all hardware nodes linked to this rack with 'reserved' state are added as allocated.

Arguments:
   rackname : the rackname such as iad103714exd-d0-05-06-cl-07-09-clu01

Examples:
ecra> rack compose rackname=iad103714exd-d0-05-06-cl-07-09-clu01

ports:
Usage: ./ecracli rack ports rackname=<rackname> # return all the inf
        or
       ./ecracli rack ports rackname=<rackname> type=elastic # return all the elastic reserved info
       or
       ./ecracli rack ports rackname=<rackname> type=computeonly # return compute-only cabinet info
       or
       ./ecracli rack ports rackname=<rackname> type=infrastructureall # return all nodes that belong to the infra based on the rack slot
       or
       ./ecracli rack ports rackname=<rackname> type=infrastructureall nodeList=<nodeList> # return same values as the previous command, but filters the result, based on the nodeList
Purpose:
        Ecra has an enpoint in rackResources.java to get cavium information.

Arguments:
    rackname : The rackname such as slcqab02adm0506clu5
    type     : Such as elastic or computeonly
    nodeList : List of nodes comma-separated, could be oracleHostames or dbaliases(In case infrastructureall) if not, should be oracleHostnames

Examples:
ecra> rack ports rackname=scas07adm0102clu1
* {
    "op": "rack_ports_get",
    "ports": [],
    "rackname": "scas07adm0102clu1",
    "status": 200,
    "status-detail": "success"
}
ecra> rack ports rackname=scas07adm0102clu1 type=elastic
* {
    "op": "rack_ports_get",
    "ports": [],
    "rackname": "scas07adm0102clu1",
    "status": 200,
    "status-detail": "success"
}

ecra> rack ports rackname=SEA301607 type=elastic
* {
    "op": "rack_ports_get",
    "ports": [
        {
            "cavium_id": "4.0G2001-GBC000556",
            "dom0_oracle_name": "sea301607exdd014",
            "domu_oracle_name": "sea301607exddu1401",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "412",
            "mac": "00:10:6d:9e:5b:0b"
        }
    ....
    ]
}

ecra> rack ports rackname=slot_iad1-d4-cl4-581a68eb-87c2-4475-b91f-297cb4875fe3-clu03 type=infrastructureall nodeList=dbserver-01,dbserver-02
* {
    "message": "Operation to get port information is successful",
    "op": "rack_ports_get",
    "ports": [
        {
            "cavium_id": "4.0G1950-GBC001008",
            "dom0_oracle_name": "iad103709exdd015",
            "domu_oracle_name": "iad103709exddu1503",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": 295,
            "mac": "00:10:8a:58:7a:34"
        },
        {
            "cavium_id": "4.0G1950-GBC001008",
            "dom0_oracle_name": "iad103709exdd015",
            "domu_oracle_name": "iad103709exddu1503",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": 295,
            "mac": "02:00:17:01:09:e9"
        },
      ....
      ]
}


nodes:
Usage: ./ecracli rack nodes rackname=<rackname> # return all the inf
Purpose:
        Return all nodes associated with this rack or rackslot

Arguments:
    rackname : The rackname such as slcqab02adm0506clu5

Examples:
ecra> rack nodes rackname=iad1-d3-cl4-3e8ed0f5-d81b-4049-8b8e-05f5602e194b
* {
    "nodes": [
        {
            "alias": "dbServer-1",
            "fqdn": "iad103709exdd001.iad103709exd.adminiad1.oraclevcn.com",
            "hostname": "iad103709exdd001",
            "model": "X8M-2",
            "nodetype": "COMPUTE"
        },
        {
            "alias": "dbServer-3",
            "fqdn": "iad103709exdd003.iad103709exd.adminiad1.oraclevcn.com",
            "hostname": "iad103709exdd003",
            "model": "X8M-2",
            "nodetype": "COMPUTE"
        },
        {
            "fqdn": "iad103712exdcl02.iad103712exd.adminiad1.oraclevcn.com",
            "hostname": "iad103712exdcl02",
            "model": "X8M-2",
            "nodetype": "CELL"
        },
        {
            "fqdn": "iad103712exdcl04.iad103712exd.adminiad1.oraclevcn.com",
            "hostname": "iad103712exdcl04",
            "model": "X8M-2",
            "nodetype": "CELL"
        },
        {
            "fqdn": "iad103712exdcl03.iad103712exd.adminiad1.oraclevcn.com",
            "hostname": "iad103712exdcl03",
            "model": "X8M-2",
            "nodetype": "CELL"
        }
    ],
    "op": "rack_nodes_get",
    "status": 200,
    "status-detail": "success"
}
ecra> 


update:
Usage: ./ecracli rack update <rack-name> [options]
       or 
       ecra> rack update <rack-name> [options] 

Purpose:
    Update the given rack with specified options.

Arguments:
    rackname : The rackname such as slcqab02adm0506clu5 
    options : key value pairs such as racksize=half, model=X6-2 etc

Examples:
ecra> rack update r417cluster2 racksize=quarter
* Updating rack with rack name: r417cluster2
{u'status': 200, u'status-detail': u'success', u'op': u'rack_update'}

ecra> rack get name=r417cluster2
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/racks?name=r417cluster2
* {"status": 200, "status-detail": "success", "racks": [{"status": "READY", "name": "r417cluster2", "racksize": "quarter", "dom0": "fpcldx0011mfpcldx0012mfpcldx0013mfpcldx0014mfpcldx0015mfpcldx0016mfpcldx0017mfpcldx0018m", "model": "X5-2", "domu": "fpcldv0003mfpcldv0004m"}], "op": "racks_get"}

ecra> rack update slcs16adm0304clu2 status=NEW status_comment="Unit testing my ER"
* Updating rack with rack name: slcs16adm0304clu2
{u'status': 200, u'status-detail': u'success', u'op': u'rack_update'}

ecra> rack get
* {"status": 200, "status-detail": "success", "racks": [{"status": "NEW", "name": "slcs16adm0304clu2", "racksize": "quarter", "status_comment": "Unit testing my ER", "opstate": "ONLINE", "disabled": 0, "cluster_status": "ACTIVE", "atp": "N", "dom0": "slcs16adm03slcs16adm04", "model": "X5-2", "domu": "slcs16adm03vm02-v303slcs16adm04vm02-v303", "cnsenabled": 1}], "op": "racks_get"}


reserve:
Usage: ./ecracli rack reserve <rack-name> 
       or 
       ecra> rack reserve <rack-name> 

Purpose:
    Reserve the rack in ecra with the given name.

Arguments:
    rackname : The rackname such as slcqab02adm0506clu5 

Examples:
ecra> rack reserve r417cluster2
* Reserve rack : r417cluster2
* Response data
* status : 200
* status-detail : success
* message : Rack r417cluster2 is reserved successfully
* op : rack_reserverack

release:
Usage: ./ecracli rack release <rack-name>
       or
       ecra> rack release <rack-name>

Purpose:
    Release the rack in ecra with the given name.

Arguments:
    rackname : The rackname such as slcqab02adm0506clu5

Examples:
ecra> rack release r417cluster2
* Reserve rack : r417cluster2
* Response data
* status : 200
* status-detail : success
* message : Rack r417cluster2 is released successfully
* op : rack_releaserack

drop:
Usage: ./ecracli rack drop rackname<rackname>
       or
       ecra> rack drop rackname=<rackname>

Purpose:
    Delete all related records for the rack in ecra with the given name, to be able to use the resources normally.

Arguments:
    rackname : The rackname such as slcqab02adm0506clu5

Examples:
ecra> TBD

getxml
Usage:
        ./ecracli rack getxml slcqab02adm0506clu6

Purpose:
        Retrieve the rack's original and updated xml

Arguments:
        rackname: rackName

Examples:
ecra> rack getxml slcqab02adm0506clu6
* {
    "op": "rack_xml_get", 
    "status": 200, 
    "status-detail": "success", 
    "updated_xml": "../PodRepo/rack_slcqab02adm0506clu6_updated_xml_downloaded.xml", 
    "xml": "../PodRepo/rack_slcqab02adm0506clu6_xml_downloaded.xml"
}


xml patchnodes
Usage:
	ecracli> rack xml patchnodes rackname=<rack name> inventories=<comma-separated inventories> [updaterack=true] 

Purpose:
	Patch the rack XML with the provided missing inventories

Arguments:
	rackname: The rack name
	inventories: the missing inventories to be added to the XML, provided in a comma-separated way
	updaterack: If True, the rack UPDATED_XML will be updated with the new patched XML, else, the patched XML will be saved in the PodRepo directory only. Default value False

Example:
ecra> rack xml patchnodes rackname=iad103714exd-d0-01-02-cl-01-03-clu01 inventories=iad103712exdcl05 updaterack=true
* {
    "status": 202,
    "status_uri": "http://phoenix93588.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/891dcabf-5941-4f6c-b009-2f3829d2c3b0",
    "op": "rack_xml_patch_put",
    "op_start_time": "2022-06-14T18:53:02+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}




update_selinux_policy
    Ussage:
         rack update_selinux_policy rackname=<RACKNAME> cabinetname=<CABINETNAME> component=<COMPONENT> [targetComponentName=<LISTOFCOMPONENTS> policyVersion=<POLICYVERSION>]
         Values:
            COMPONENT   : Could be dom0 or cell
            RACKNAME    : Name of the rack*
            CABINETNAME : Name of the cabinet*
            LISTOFCOMPONENTS : List of components, with a comma separeated ex: dom0_0,dom0_1,etc... (dom0_0 should be replaced by the actual hostname of the dom0_0 and so on)
            POLICYVERSION    : Name of the policy that will be applied to the components
         * You have to provide at least rackname or cabinet but not both of them
    Purpose:      
        Updates the policy in ECRA table and send request to EC in order to update the information in the components
    Examples:
        ecra> rack update_selinux_policy rackname=sea201207exd-d0-05-06-cl-07-09-clu01 component=domu
        * {
            "status": 202,
            "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/a73b4595-05f2-474e-8f06-3676eea4c66a",
            "op": "selinux_set_policies_post",
            "op_start_time": "2021-05-07T16:31:06+0000",
            "est_op_end_time": "",
            "message": "processing",
            "status-detail": "processing"
        }

update_custom_selinux_policy
    Ussage:
         rack update_custom_selinux_policy rackname=<RACKNAME> cabinetname=<CABINETNAME> component=<COMPONENT> [targetComponentName=<LISTOFCOMPONENTS> sendall=<SENDALL>]
         Values:
            COMPONENT   : Could be dom0
            RACKNAME    : Name of the rack*
            CABINETNAME : Name of the cabinet*
            LISTOFCOMPONENTS : List of components, with a comma separeated ex: dom0_0,dom0_1,etc... (dom0_0 should be replaced by the actual hostname of the dom0_0 and so on)
            SENDALL: True or false. When is set to true Exacloud will send all policies registered in their internal db.
         * You have to provide at least rackname or cabinet but not both of them
    Purpose:     
        Send a request to EC to get a new policy based on the existing violations of the component, in case there is a new policy created by Exacloud, ECRA will automatically send it back to EC in order to apply it 
    Examples:
        ecra> rack update_selinux_policy rackname=sea201207exd-d0-05-06-cl-07-09-clu01 component=dom0
        * {   
            "status": 202,
            "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/a73b4595-05f2-474e-8f06-3676eea4c66a",
            "op": "selinux_set_policies_post",
            "op_start_time": "2021-05-07T16:31:06+0000",
            "est_op_end_time": "",
            "message": "processing",
            "status-detail": "processing"
        }

list_selinux_policy
 Ussage:
         rack list_selinux_policy rackname=<RACKNAME>
         Values:
             RACKNAME    : Name of the rack
    Purpose:      
        Get all the policies for the given rackname
    Examples:
        ecra> rack list_selinux_policy rackname=sea201207exd-d0-05-06-cl-07-09-clu01
        * {
            "op": "selinux_list_policies_get",
            "result": {
                "cell": [],
                "dom0": [],
                "domu": [
                    {
                        "hostname": "c31207-xwnyu1.subnet1.newdevvcn.oraclevcn.com",
                        "policy_name": "2021.05.07_00.02.49_test",
                        "rackname": "sea201207exd-d0-05-06-cl-07-09-clu01",
                        "status": "done"
                    },
                    {
                        "hostname": "c31207-xwnyu2.subnet1.newdevvcn.oraclevcn.com",
                        "policy_name": "2021.05.07_00.02.49_test",
                        "rackname": "sea201207exd-d0-05-06-cl-07-09-clu01",
                        "status": "done"
                    }
                ]
            },
            "status": 200,
            "status-detail": "success"
        }

unlock
Usage:
        ./ecracli rack unlock rackname=slcqab02adm0506clu6
        ./ecracli rack unlock slcqab02adm0506clu6

Purpose: Unlock rack's cells and dom0 using ilom

Arguments:
        rackname: rackName

Examples:
ecra> rack unlock rackname=slcs27
* {
    "est_op_end_time": "",
    "message": "processing",
    "op": "rack_unlock",
    "op_start_time": "2019-11-15T21:01:06+0000",
    "status": 202,
    "status-detail": "processing",
    "status_uri": "http://slc11cac.us.oracle.com:9001/ecra/endpoint/statuses/baa87a41-009b-4723-a104-66eacfbea99f"
}


xml patch
Usage:
        ./ecracli rack xml patch <rackname> timezone=<timezone>


Purpose: Call exacloud to ptch the XML with the provided values.

Arguments:
        rackname: rackName
        timezone: the timezone

Examples:
ecra> rack xml patch sea201109exd-d0-01-02-cl-01-03-clu01 timezone=TZ
* {
    "est_op_end_time": "",
    "exaunit_id": 633,
    "message": "processing",
    "op": "rack_patch_xml",
    "op_start_time": "2021-02-17T16:22:24+0000",
    "status": 202,
    "status-detail": "processing",
    "status_uri": "http://slc11yoj.us.oracle.com:9001/ecra/endpoint/statuses/2de80fd3-5609-4ec9-a0fc-8fb00f4c59a0"
}

getxmlinfo
	Usage: rack getxmlinfo <rackname>

	Purpose:
            outputs information about nodes in a given rack

	Examples:
	ecra> rack getxmlinfo iad103708exd-d0-03-04-cl-04-06-clu01
* {
    "original": {
        "computes": {
            "count": 2,
            "nodes": [
                {
                    "clientHostname": "scaqan01dv0101.us.oracle.com",
                    "hostname": "iad103708exdd003.iad103708exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103708exddu0301.iad103708exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "scaqan01dv0201.us.oracle.com",
                    "hostname": "iad103708exdd004.iad103708exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103708exddu0401.iad103708exd.adminiad1.oraclevcn.com"
                }
            ]
        },
        "cells": {
            "count": 3,
            "nodes": [
                {
                    "hostname": "iad103708exdcl06.iad103708exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103708exdcl05.iad103708exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103708exdcl04.iad103708exd.adminiad1.oraclevcn.com"
                }
            ]
        }
    },
    "updated": {
        "computes": {
            "count": 2,
            "nodes": [
                {
                    "clientHostname": "scaqan01dv0101.us.oracle.com",
                    "hostname": "iad103708exdd003.iad103708exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103708exddu0301.iad103708exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "scaqan01dv0201.us.oracle.com",
                    "hostname": "iad103708exdd004.iad103708exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103708exddu0401.iad103708exd.adminiad1.oraclevcn.com"
                }
            ]
        },
        "cells": {
            "count": 3,
            "nodes": [
                {
                    "hostname": "iad103708exdcl06.iad103708exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103708exdcl05.iad103708exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103708exdcl04.iad103708exd.adminiad1.oraclevcn.com"
                }
            ]
        }
    },
    "rackname": "iad103708exd-d0-03-04-cl-04-06-clu01"
}


        ecra> rack getxmlinfo xmlpath=/guid/sample/directory/file.xml
* {
    "external": {
        "computes": {
            "count": 7,
            "nodes": [
                {
                    "clientHostname": "iad103709exddu0701.us.oracle.com",
                    "hostname": "iad103709exdd007.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0701.iad103709exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "iad103709exddu0201.us.oracle.com",
                    "hostname": "iad103709exdd002.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0201.iad103709exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "iad103709exddu0301.us.oracle.com",
                    "hostname": "iad103709exdd003.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0301.iad103709exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "iad103709exddu0101.us.oracle.com",
                    "hostname": "iad103709exdd001.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0101.iad103709exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "iad103709exddu0401.us.oracle.com",
                    "hostname": "iad103709exdd004.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0401.iad103709exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "iad103709exddu0601.us.oracle.com",
                    "hostname": "iad103709exdd006.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0601.iad103709exd.adminiad1.oraclevcn.com"
                },
                {
                    "clientHostname": "iad103709exddu0501.us.oracle.com",
                    "hostname": "iad103709exdd005.iad103709exd.adminiad1.oraclevcn.com",
                    "natHostname": "iad103709exddu0501.iad103709exd.adminiad1.oraclevcn.com"
                }
            ]
        },
        "cells": {
            "count": 7,
            "nodes": [
                {
                    "hostname": "iad103712exdcl07.iad103712exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103712exdcl02.iad103712exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103712exdcl06.iad103712exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103712exdcl01.iad103712exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103712exdcl05.iad103712exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103712exdcl04.iad103712exd.adminiad1.oraclevcn.com"
                },
                {
                    "hostname": "iad103712exdcl03.iad103712exd.adminiad1.oraclevcn.com"
                }
            ]
        }
    },
    "rackname": null
}


validatexml
	Usage: rack validatexml [rackname]

	Purpose:
            outputs validation of rack when rackname is given, is no rackname is given
            validation is done in all ECRA racks in db, outputs racks that didn't pass
            validation

	Examples:

	With rack matching XML values
	ecra> rack validatexml iad103708exd-d0-01-02-cl-01-03-clu01
    * {
        "validation": {
            "numberOfComputesMatch": true,
            "numberOfCellsMatch": true,
            "computesHostNamesMatch": true,
            "cellsHostNamesMatch": true
        },
        "status": 200,
        "op": "rack_validate_xml_get",
        "status-detail": "success"
    }

    With no bad racks
	ecra> rack validatexml
    * {
        "badRacks": [],
        "status": 200,
        "op": "racks_validate_xml_get",
        "status-detail": "success"
    }

    With no match in hostnames
	ecra> rack validatexml iad103708exd-d0-01-02-cl-01-03-clu01
	* {
	    "validation": {
	        "numberOfComputesMatch": true,
	        "numberOfCellsMatch": true,
	        "computesHostNamesMatch": false,
	        "cellsHostNamesMatch": true,
	        "missingNodesFromXML": [
	            {
	                "hostname": "iad103708exdd001",
	                "capacityStatus": null
	            }
	        ],
	        "missingNodesFromDB": [
	            {
	                "hostname": "iad103709exdd001",
	                "capacityStatus": "RESERVED"
	            }
	        ]
	    },
	    "status": 200,
	    "op": "rack_validate_xml_get",
	    "status-detail": "success"
	}

    With no match in hostnames for all racks
    ecra> rack validatexml
    * {
        "badRacks": [
            "iad103708exd-d0-01-02-cl-01-03-clu01"
        ],
        "status": 200,
        "op": "racks_validate_xml_get",
        "status-detail": "success"
    }

updatexml:
	Usage: rack updatexml rackname=<rack name> xml=<original|updated> path=<xml_path>

	Purpose:
        Updates the xml for the specified rack with the xml in the provided path.

    Arguments:
        rackname: the rackname
        xml: the xml column to update
        path: the location of the xml to be used

	Examples:

    ecra> rack updatexml xml=original path=/scratch/zpallare/xmls/zeus.xml rackname=iad1-d4-cl3-651a1d66-1326-43ad-b350-6e3f310e4272-clu01
    * {
    "status": 200,
    "op": "rack_xml_update",
    "status-detail": "success"
    }
    ecra> rack updatexml xml=updated path=/scratch/zpallare/xmls/zeus.xml rackname=iad1-d4-cl3-651a1d66-1326-43ad-b350-6e3f310e4272-clu01
    * {
    "status": 200,
    "op": "rack_xml_update",
    "status-detail": "success"
    }


Higgs

install
Usage:
	./ecracli rack register slcqab02adm0102clu5
	./ecracli higgs install slcqab02adm0102clu5 bond0_ips=<comma_separated_ips> bond0_mask=<mask> bond0_gw=<gateway>

Purpose:
	Install and configure higgs environment in dom0's.

Arguments:
	bond0_ips: A list of virtual IPS to be attached to the dom0's
	bond0_mask: A mask associated with this ips and network.
	bond0_gw: The gateway.

Examples:
./ecracli higgs install slcqab02adm0102clu5 bond0_ips=192.168.0.1,192.168.0.2 bond0_mask=255.255.255.0 bond0_gw=192.168.0.90 
{"status": 200, "status-detail": "success", "op": "higgsbond0_install_put"}

NOTE: This operation should be executed only once per hardware, and a rack
MUST be registered first.

register
Usage:
	./ecracli rack register slcqab02adm0102clu5
        ./ecracli higgs register slcqab02adm0102clu5 bond0_ips=<comma_separated_ips> bond0_mask=<mask> bond0_gw=<gateway>

Purpose:
        Register Bond0 Ip configuration in ECRA, without Installing.

Arguments:
        bond0_ips: A list of virtual IPS to be attached to the dom0's
        bond0_mask: A mask associated with this ips and network.
        bond0_gw: The gateway.

Examples:
./ecracli higgs register slcqab02adm0102clu5 bond0_ips=192.168.0.1,192.168.0.2
bond0_mask=255.255.255.0 bond0_gw=192.168.0.90
{"status": 200, "status-detail": "success", "op": "higgsbond0_register_put"}


deregister
Usage:
        ./ecracli higgs deregister slcqab02adm0102clu5

Purpose:
        Deregister Bond0 Ip configuration in ECRA tables.

Arguments:
        rackname: RackName

Examples:
./ecracli higgs deregister slcqab02adm0102clu5
{"status": 200, "status-detail": "success", "op":"higgsbond0_deregister_delete"}



createNetwork
Usage: ./ecracli higgs createNetwork [<subscriptionid>] name=<networkname> ipAddressPrefix=<CIDR block> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>] [network_username=newuser]
            or
      ecra> higgs createNetwork [<subscriptionid>] name=<networkname> ipAddressPrefix=<CIDR block> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>] [network_username=newuser]

Purpose:
    Create a customer network with the given network name and CIDR block as Ip Address prefix.

Arguments:
    subscriptionid : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    name           : Network name
    ipAddressPrefix : CIDR block, Ex: 192.168.0.0/24
    admin_username  : A string representing the admin username, if the admin_username is not provided it will be loaded from ecracli.cfg.
    appidUser       : A string for AppID, if the appidUser is not provided it will be loaded from ecracli.cfg.
    appidPwd        : Secret information for AppID, if the appidPwd is not provided it will be loaded from ecracli.cfg.
    network_username : An optional username where you want to create the network

Examples:
./ecracli higgs createNetwork 123456787 name=testnw ipAddressPrefix=10.9.8.7/12 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234 
{"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/testnw", "ipAddressPrefix": "10.9.8.7/12", "op": "higgs_network_put"} 

ecra> higgs createNetwork 123456787 name=testnw ipAddressPrefix=10.9.8.7/12 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
* {"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/testnw", "ipAddressPrefix": "10.9.8.7/12", "op": "higgs_network_put"}

ecra> higgs createNetwork name=testnw ipAddressPrefix=10.9.8.7/12 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
* {"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/llmartinTest", "ipAddressPrefix": "10.9.8.7/12", "op": "higgs_network_put"}

ecra> higgs createNetwork name=test1 ipAddressPrefix=13.0.0.0/28 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! network_username=newuser
* {"status": 200, "status-detail": "success", "name": "/Compute-123456786/newuser/test1", "ipAddressPrefix": "13.0.0.0/28", "op": "higgs_network_put"}

ecra> higgs createNetwork name=Test ipAddressPrefix=30.50.0.0/24
* {"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/Test", "ipAddressPrefix": "30.50.0.0/24", "op": "higgs_network_put"}


getAllNetwork
Usage: ./ecracli higgs getAllNetwork [<subscriptionid>] [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>] 
[network_username=newuser]
           or
        ecra> higgs getAllNetwork [<subscriptionid>] [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>] [network_username=newuser]

Purpose:
    Get all the networks created for a given subscriptionID

Arguments:
    subscriptionid : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username, if the admin_username is not provided it will be loaded from ecracli.cfg.
    appidUser       : A string for AppID, if the appidUser is not provided it will be loaded from ecracli.cfg.
    appidPwd        : Secret information for AppID, if the appidPwd is not provided it will be loaded from ecracli.cfg.
    network_username : An optional username for whom you want to get the networks for.

Examples:
./ecracli higgs getAllNetwork 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
{"status": 200, "status-detail": "success", "op": "higgs_all_networks_get", "higgs": {"networks": "[{\"name\":\"\\/Compute-123456787\\/administrator\\/testnw\",\"cidr\":\"10.9.8.7\\/12\"}]"}}

ecra> higgs getAllNetwork 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/subscriptions/109ac12c-7fe5-47e4-a86a-2c640bcb187d/higgs/networks
* {"status": 200, "status-detail": "success", "op": "higgs_all_networks_get", "higgs": {"networks": "[{\"name\":\"\\/Compute-123456787\\/administrator\\/testnw\",\"cidr\":\"10.9.8.7\\/12\"}]"}}

ecra> higgs getAllNetwork admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/subscriptions/109ac12c-7fe5-47e4-a86a-2c640bcb187d/higgs/networks
* {"status": 200, "status-detail": "success", "op": "higgs_all_networks_get", "higgs": {"networks": "[{\"name\":\"\\/Compute-123456787\\/administrator\\/testnw\",\"cidr\":\"10.9.8.7\\/12\"}]"}}

ecra> higgs getAllNetwork admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! network_username=newuser
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/subscriptions/123456786/higgs/networks?appidPwd=ecrapwd1!&admin_username=administrator&higgs_url=https://10.128.95.197/&network_username=/Compute-123456786/newuser/&appidUser=APPID
* {"status": 200, "status-detail": "success", "op": "higgs_all_networks_get", "higgs": {"networks": "[{\"name\":\"\\/Compute-123456786\\/newuser\\/test1\",\"cidr\":\"13.0.0.0\\/28\"}]"}}

ecra> higgs getAllNetwork
* GET http://slc11cac.us.oracle.com:9001/ecra/endpoint/subscriptions/123456786/higgs/networks?appidPwd=ecrapwd1!&admin_username=administrator&network_username=/Compute-123456786/administrator/&appidUser=APPID&higgs_url=https://10.128.95.197/
* {"status": 200, "status-detail": "success", "op": "higgs_all_networks_get", "higgs": {"networks": "[{\"name\":\"\\/Compute-123456786\\/administrator\\/opstest\",\"cidr\":\"14.0.0.0\\/12\"}]"}}


getNetwork
Usage: ecra> higgs getNetwork [<subscriptionID>] networkname=<networkname> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>]
             [network_username=newuser]
            or
      ./ecracli higgs getNetwork [<subscriptionID>] networkname=<networkname> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>]
      [network_username=newuser]

Purpose:
    Get the details of a particular network.

Arguments:
    subscriptionid : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    networkname    : network name for which network details are needed.
    admin_username  : A string representing the admin username, if the admin_username is not provided it will be loaded from ecracli.cfg.
    appidUser       : A string for AppID, if the appidUser is not provided it will be loaded from ecracli.cfg.
    appidPwd        : Secret information for AppID, if the appidPwd is not provided it will be loaded from ecracli.cfg.
    network_username : An optional username for whom you want to get the network information for.

Examples:
./ecracli higgs getNetwork 123456787 networkname=testnw admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
{"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/testnw", "ipAddressPrefix": "10.9.8.7/12", "op": "higgs_network_get"}

.ecra> higgs getNetwork 123456787 networkname=testnw admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
{"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/testnw", "ipAddressPrefix": "10.9.8.7/12", "op": "higgs_network_get"}

.ecra> higgs getNetwork networkname=testnw admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
{"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/testnw", "ipAddressPrefix": "10.9.8.7/12", "op": "higgs_network_get"}

ecra> higgs getNetwork networkname=test1 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! network_username=newuser
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/subscriptions/123456786/higgs/networkbyname?appidPwd=ecrapwd1!&admin_username=administrator&higgs_url=https://10.128.95.197/&network_username=/Compute-123456786/newuser/&appidUser=APPID&networkname=test1
* {"status": 200, "status-detail": "success", "name": "/Compute-123456786/newuser/test1", "ipAddressPrefix": "13.0.0.0/28", "op": "higgs_network_get"}

ecra> higgs getNetwork networkname=testnw
* GET http://slc11cac.us.oracle.com:9001/ecra/endpoint/subscriptions/123456787/higgs/networkbyname?appidPwd=ecrapwd1!&admin_username=administrator&higgs_url=https://10.128.95.197/&appidUser=APPID&networkname=testnw
* {"status": 200, "status-detail": "success", "name": "/Compute-123456787/administrator/testnw", "ipAddressPrefix": "10.0.20.0/24", "op": "higgs_network_get"}


deleteNetwork
Usage: ./ecracli higgs deleteNetwork [<subscriptionID>] networkname=<networkname> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>]
[network_username=newuser]
          or
        ecra> higgs deleteNetwork [<subscriptionID>] networkname=<networkname> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>]
        [network_username=newuser]
        
Purpose:
    Delete the specified network

Arguments:
    subscriptionid : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    networkname    : network name which you need to delete.
    admin_username  : A string representing the admin username, if the admin_username is not provided it will be loaded from ecracli.cfg.
    appidUser       : A string for AppID, if the appidUser is not provided it will be loaded from ecracli.cfg.
    appidPwd        : Secret information for AppID, if the appidPwd is not provided it will be loaded from ecracli.cfg.
    network_username : An optional username for whom you want to delete the network for.

Examples:
./ecracli  higgs deleteNetwork 123456787 networkname=testnw admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
{"status": 200, "status-detail": "success", "op": "higgs_network_delete", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/"}

ecra> higgs deleteNetwork 123456787 networkname=testnw admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
* {"status": 200, "status-detail": "success", "op": "higgs_network_delete", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/"}

ecra> higgs deleteNetwork networkname=testnw admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234
* {"status": 200, "status-detail": "success", "op": "higgs_network_delete", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/"}

ecra> higgs deleteNetwork networkname=test1 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! network_username=newuser
* {"status": 200, "status-detail": "success", "op": "higgs_network_delete", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/"}

ecra> higgs deleteNetwork networkname=Test
* {"status": 200, "status-detail": "success", "op": "higgs_network_delete", "status_uri": "http://slc11cac.us.oracle.com:9001/ecra/endpoint/statuses/"}


deleteResources:
Usage: ./ecracli higgs deleteResources [<subscriptionid>] rackname=<name> [clusterId=<clusterId>] [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>] instName=<name>  
              or
        ecra> higgs deleteResources [<subscriptionid>] rackname=<name> [admin_username=<uname>] [appidUser=<appid>] [appidPwd=<secret>] instName=<name>

Purpose:
    delete all the higgs resources created against a rack cluster.

Arguments:
    subscriptionid : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    rackname       : Rack name such as slcs16adm0708clu11
    clusterId      : For mvm scenario clusterId is needed.
    admin_username  : A string representing the admin username, if the admin_username is not provided it will be loaded from ecracli.cfg.
    appidUser       : A string for AppID, if the appidUser is not provided it will be loaded from ecracli.cfg.
    appidPwd        : Secret information for AppID, if the appidPwd is not provided it will be loaded from ecracli.cfg.
    instName        : The exadata instance name, similar to what 
                      a customer provides on the UI

Examples:

1)Single VM
./ecracli higgs deleteResources 123456787 rackname=slcs20adm0304clu4 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234 instName=higgscustomer
{"status": 200, "status-detail": "success", "op": "higgs_resources_delete"}

2) MUlti scenario
./ecracli higgs deleteResources 123456787 rackname=slcs20adm0304 clusterId=c2_clusterHome admin_username=administrator appidUser=APPID appidPwd=ecrapwd1234 instName=higgscustomer
{"status": 200, "status-detail": "success", "op": "higgs_resources_delete"}


audit:
Usage: ./ecracli higgs audit bond0_ip=<registeredIP> [debug=true] "<command>" 

Purpose:
        Execute whitelisted audit commands on Higgs compute nodes.

Arguments:
        bond0_ip : a registered Higgs bond0 IP
        debug    : Debug script if set to true
        "<command>" : command to execute

Examples:
 higgs audit bond0_ip=10.252.160.4  "/usr/libexec/higgs-compute-agent status"
* {"status": 200, "stdout": "Higgs Compute Agent is running with PID:\n15902\n", "status-detail": "success", "exit_code": 0, "stderr": "", "op": "higgs_audit_post"}



createNatvips:
Usage: ./ecracli higgs createNatvips <exaunitId> <target=<target>> 
        

Purpose:
    Create nat ips for client/backup for specified rack

Arguments:
    exaunitId : The exaunitId associated with this vm 
    target    : The target type of the nat to be created(node_vips|scan_vips|client_nat_ip|all|client|backup_nat_ip) 

Examples:

higgs createNatvips 202 target=all
* {"status": 200, "client_nat_ip": [{"ip": "10.128.108.220", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.221", "hostname": "slcs09client07vm01"}], "backup_nat_ip": [{"ip": "1 .128.108.222", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.223", "hostname": "slcs09client07vm01"}], "status-detail": "success", "node_vips": [{"ip": "10.128.108.215", "hostn me": "slcs09client06vm01"}, {"ip": "10.128.108.216", "hostname": "slcs09client07vm01"}], "scan_vips": [{"ip": "10.128.108.217"}, {"ip": "10.128.108.218"}, {"ip": "10.128.108.219"}], "o ": "higgs_natvip_creation_post"}

higgs createNatvips 202 target=node_vips
* {"status": 200, "status-detail": "success", "node_vips": [{"ip": "10.150.244.113", "hostname": "slcs09client05vm01"}, {"ip": "10.150.244.114", "hostname": "slcs09client08vm01"}], "op": "higgs_natvip_creation_post"}

higgs createNatvips 202 target=scanvips
* {"status": 200, "status-detail": "success", "scan_vips": "scanvips": [{"ip": "10.150.244.116"}, {"ip": "10.150.244.117"}, {"ip": "10.150.244.123"}], "op": "higgs_natvip_creation_post"}

higgs createNatvips 202 target=client
* {"status": 200, "client_nat_ip": [{"ip": "10.128.108.220", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.221", "hostname": "slcs09client07vm01"}], "status-detail": "success", "node_vips": [{"ip": "10.128.108.215", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.216", "hostname": "slcs09client07vm01"}], "scan_vips": [{"ip": "10.128.108.217"}, {"ip": "10.128.108.218"}, {"ip": "10.128.108.219"}], "op": "higgs_natvip_creation_post"}  

higgs createNatvips 202 target=backup_nat_ip
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_post", "backup_nat_ip": [{"ip": "10.128.108.222", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.223", "hostname": "slcs09client07vm01"}]}



listNatvips:
Usage: ./ecracli higgs listNatvips <exaunitId> <target=<target>>  
        

Purpose:
    List nat ips for client/backup available for the specified rack.

Arguments:
    exaunitId  : exaunitId associated with the vm
    target    : The target type of the nat to be created(node_vips|scan_vips|client_nat_ip|all|client|backup_nat_ip)

Examples:

higgs listNatvips 202 target=all
* {"status": 200, "client_nat_ip": [{"ip": "10.128.108.220", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.221", "hostname": "slcs09client07vm01"}], "backup_nat_ip": [{"ip": "1 .128.108.222", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.223", "hostname": "slcs09client07vm01"}], "status-detail": "success", "node_vips": [{"ip": "10.128.108.215", "hostn me": "slcs09client06vm01"}, {"ip": "10.128.108.216", "hostname": "slcs09client07vm01"}], "scan_vips": [{"ip": "10.128.108.217"}, {"ip": "10.128.108.218"}, {"ip": "10.128.108.219"}], "o ": "higgs_natvip_creation_get"}

higgs listNatvips 202 target=node_vips
* {"status": 200, "status-detail": "success", "node_vips": [{"ip": "10.150.244.113", "hostname": "slcs09client05vm01"}, {"ip": "10.150.244.114", "hostname": "slcs09client08vm01"}], "op": "higgs_natvip_creation_get"}

higgs listNatvips 202 target=scan_vips
* {"status": 200, "status-detail": "success", "scanvips": [{"ip": "10.150.244.116"}, {"ip": "10.150.244.117"}, {"ip": "10.150.244.123"}], "op": "higgs_natvip_creation_get"}

higgs listNatvips 202 target=client
* {"status": 200, "client_nat_ip": [{"ip": "10.128.108.220", "hostname":"slcs09client06vm01"}, {"ip": "10.128.108.221", "hostname":
"slcs09client07vm01"}], "status-detail": "success", "node_vips": [{"ip":"10.128.108.215", "hostname": "slcs09client06vm01"}, {"ip": "10.128.108.216",
"hostname": "slcs09client07vm01"}], "scan_vips": [{"ip": "10.128.108.217"},{"ip": "10.128.108.218"}, {"ip": "10.128.108.219"}], "op":
"higgs_natvip_creation_get"}

higgs listNatvips 202 target=backup_nat_ip
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_get","backup_nat_ip": [{"ip": "10.128.108.220", "hostname": "slcs09client06vm01"},
{"ip": "10.128.108.221", "hostname": "slcs09client07vm01"}]}

deleteNatvips:
Usage: ./ecracli higgs deleteNatvips <exaunitId> <target=<target>>  
        

Purpose:
    Delete nat ips for client/backup available for the specified rack.

Arguments:
    exaunitId  : exaunitId associated with the vm
    target    : The target type of the nat to be created(node_vips|scan_vips|client_nat_ip|all|client|backup_nat_ip)

Examples:

higgs deleteNatvips 202 target=all
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_delete"}

higgs deleteNatvips 202 target=node_vips
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_delete"}

higgs deleteNatvips 202 target=scan_vips
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_delete"}

higgs deleteNatvips 202 target=backup_nat_ip
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_delete"}

higgs deleteNatvips 202 target=client
* {"status": 200, "status-detail": "success", "op": "higgs_natvip_creation_delete"}


addIbsubnet:
Usage: ./ecracli higgs addIbsubnet <CIDR_Block> 
        

Purpose:
    Add an ibsubnet to validate with higgs, so the client and backup networks do not interfere with this ibsubnet

Arguments:
    CIDR_Block  : A valid CIDR block with the format X.X.X.X/prefix ie. 192.168.1.0/24
    

Examples:

higgs addIbsubnet 10.0.20.1/24
* {"status": 200, "status-detail": "success", "message": "Update Successful", "op": "property_put"}
* GET http://den03cke.us.oracle.com:9001/ecra/endpoint/properties/HIGGS_IB_SUBNET
* {"status": 200, "status-detail": "success", "op": "property_get", "property_value": "192.168.1.0/22,10.0.20.1/24"}


deleteIbsubnet:
Usage: ./ecracli higgs deleteIbsubnet <CIDR_Block> 
        

Purpose:
    Delete the specified ibsubnet from higgs ecra configuration

Arguments:
    CIDR_Block  : A valid CIDR block with the format X.X.X.X/prefix ie. 192.168.1.0/24
    

Examples:

higgs deleteIbsubnet 10.0.20.1/24
* {"status": 200, "status-detail": "success", "message": "Update Successful", "op": "property_put"}
* GET http://den03cke.us.oracle.com:9001/ecra/endpoint/properties/HIGGS_IB_SUBNET
* {"status": 200, "status-detail": "success", "op": "property_get", "property_value": "192.168.1.0/22"}


createSecRule:
Usage: ./ecracli higgs createSecRule <subscriptionID> admin_username=<administrator> appidUser=<appid> appidPwd=<secret> [name=<secure rule name> acl=<acl name> secProtocols=<list of protocols> [srcVnicSet=<source vnic set>] [dstVnicSet=<destination vnic set>] [srcIpAddressPrefixSets=<list of srcIpAddressPrefixSets>] [dstIpAddressPrefixSets=<list of dstIpAddressPrefixSets>] [flowDirection=<ingress|egress>] | json_path=<json file>]

Purpose:
        Create a security rule.

Arguments:
    subscriptionid  : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username
    appidUser       : A string for AppID
    appidPwd        : Secret information for AppID
    name            : Secure rule name
    acl             : The client ACL name
    secProtocols    : List of security protocols
    srcVnicSet      : Source vnic set name
    dstVnicSet      : Destination vnic set name
    srcIpAddressPrefixSets : List of source IP address prefixes
    dstIpAddressPrefixSets : List of destination IP address prefixes
    flowDirection   : Flow direction. Valid values: ingress|egress Default: ingress
    json_path       : Json file which contains the security rules information to create. The file can contain more than one security rule. 
                      If this parameter is provided, the security rules information provided as parameter in the command line will be ignored.

    JSON file example:
                      {"rules": [
                          {
                            "name" : "Inst1_slcs09client06vm01_secruletest1",
                            "flowDirection": "ingress",
                            "acl" : "Inst1_slcs09client06vm01_client-acl",
                            "srcVnicSet" : null,
                            "dstVnicSet": "Inst1_slcs09client06vm01_client-vnicset1",
                            "secProtocols": ["Inst1_slcs09client06vm01_sqlnet","Inst1_slcs09client06vm01_tcpssh"],
                            "srcIpAddressPrefixSets" : [],
                            "dstIpAddressPrefixSets" : []
                          },
                          {
                            "name" : "Inst1_slcs09client06vm01_secruletest2",
                            "flowDirection": "ingress",
                            "acl" : "Inst1_slcs09client06vm01_client-acl",
                            "srcVnicSet" : "Inst1_slcs09client06vm01_client-vnicset1",
                            "dstVnicSet": "Inst1_slcs09client06vm01_client-vnicset1",
                            "secProtocols": ["Inst1_slcs09client06vm01_sqlnet","Inst1_slcs09client06vm01_tcpssh"],
                            "srcIpAddressPrefixSets" : ["Inst1_slcs09client06vm01_client-prefixset","Inst1_slcs09client06vm01_client-prefixset2"],
                            "dstIpAddressPrefixSets" : ["Inst1_slcs09client06vm01_client-prefixset","Inst1_slcs09client06vm01_client-prefixset2"]
                      }]}
    

Examples:
higgs createSecRule admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! secProtocols=Inst1_slcs09client06vm01_sqlnet,Inst1_slcs09client06vm01_tcpssh name=Inst1_slcs09client06vm01_secruletest1 acl=Inst1_slcs09client06vm01_client-acl dstVnicSet=Inst1_slcs09client06vm01_client-vnicset1 srcIpAddressPrefixSets=Inst1_slcs09client06vm01_client-prefixset,Inst1_slcs09client06vm01_client-prefixset2 dstIpAddressPrefixSets=Inst1_slcs09client06vm01_client-prefixset srcVnicSet=Inst1_slcs09client06vm01_client-vnicset1 flowDirection=egress
* WARNING: Opening up SSH and SQLNet traffic to the domU from the whole Internet
* Successfully run the command: curl -k -c /tmp/tmpRyjGQgecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Creating SecureRule: Inst1_slcs09client06vm01_secruletest1
* Successfully run the command: curl -k -b /tmp/tmpRyjGQgecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X POST https://10.128.95.197/network/v1/secrule/ -d '{"dstIpAddressPrefixSets": ["/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset", "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset2"], "name": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1", "srcVnicSet": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1", "dstVnicSet": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1", "flowDirection": "egress", "acl": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-acl", "enabledFlag": "true", "srcIpAddressPrefixSets": ["/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset", "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset2"], "secProtocols": ["/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet", "/Compute-123456787/administrator/Inst1_slcs09client06vm01_tcpssh"]}'
* {"name":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1","uri":"https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1","description":null,"tags":null,"acl":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-acl","flowDirection":"egress","srcVnicSet":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1","dstVnicSet":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1","srcIpAddressPrefixSets":["/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset","/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset2"],"dstIpAddressPrefixSets":["/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset","/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-prefixset2"],"secProtocols":["/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet","/Compute-123456787/administrator/Inst1_slcs09client06vm01_tcpssh"],"enabledFlag":true}

higgs createSecRule 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! json_path=file.json
* WARNING: Opening up SSH and SQLNet traffic to the domU from the whole Internet
* Note: Json file provided, the other parameters will be ignored.
Successfully run the command: curl -k -c /tmp/tmpkYD07Mecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Creating SecureRule: Inst1_slcs09client06vm01_secruletest1
Successfully run the command: curl -k -b /tmp/tmpkYD07Mecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X POST https://10.128.95.197/network/v1/secrule/ -d '{"dstIpAddressPrefixSets": [], "name": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1", "flowDirection": "ingress", "acl": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-acl", "enabledFlag": "true", "srcIpAddressPrefixSets": [], "secProtocols": ["/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet", "/Compute-123456787/administrator/Inst1_slcs09client06vm01_tcpssh"], "dstVnicSet": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1"}'
* {"name":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1","uri":"https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1","description":null,"tags":null,"acl":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-acl","flowDirection":"ingress","srcVnicSet":null,"dstVnicSet":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1","srcIpAddressPrefixSets":[],"dstIpAddressPrefixSets":[],"secProtocols":["/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet","/Compute-123456787/administrator/Inst1_slcs09client06vm01_tcpssh"],"enabledFlag":true}
* Creating SecureRule: Inst1_slcs09client06vm01_secruletest2
Successfully run the command: curl -k -b /tmp/tmpkYD07Mecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X POST https://10.128.95.197/network/v1/secrule/ -d '{"dstIpAddressPrefixSets": [], "name": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest2", "flowDirection": "ingress", "acl": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-acl", "enabledFlag": "true", "srcIpAddressPrefixSets": [], "secProtocols": ["/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet", "/Compute-123456787/administrator/Inst1_slcs09client06vm01_tcpssh"], "dstVnicSet": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1"}'
* {"name":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest2","uri":"https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest2","description":null,"tags":null,"acl":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-acl","flowDirection":"ingress","srcVnicSet":null,"dstVnicSet":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_client-vnicset1","srcIpAddressPrefixSets":[],"dstIpAddressPrefixSets":[],"secProtocols":["/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet","/Compute-123456787/administrator/Inst1_slcs09client06vm01_tcpssh"],"enabledFlag":true}


getSecRule:
Usage: higgs getSecRule <subscriptionID> admin_username=<administrator> appidUser=<appid> appidPwd=<secret> name=<secure rule name>


Purpose:
        Get the information of the given secure rule.

Arguments:
    subscriptionid  : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username
    appidUser       : A string for AppID
    appidPwd        : Secret information for AppID
    name            : Secure rule name


Examples:
ecra> higgs getSecRule 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! name=Inst1_slcs09client06vm01_secruletest1
Successfully run the command: curl -k -c /tmp/tmpOHm8NKecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
Successfully run the command: curl -k -b /tmp/tmpOHm8NKecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X GET https://10.128.95.197/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1
{"name":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1","uri":"https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1","description":null,"tags":[],"acl":null,"flowDirection":"ingress","srcVnicSet":null,"dstVnicSet":null,"srcIpAddressPrefixSets":[],"dstIpAddressPrefixSets":[],"secProtocols":[],"enabledFlag":true}
ecra> 


deleteSecRule:
Usage: higgs deleteSecRule <subscriptionID> admin_username=<administrator> appidUser=<appid> appidPwd=<secret> name=<secure rule name>


Purpose:
        Delete a secure rule.

Arguments:
    subscriptionid  : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username
    appidUser       : A string for AppID
    appidPwd        : Secret information for AppID
    name            : Secure rule name


Examples:
ecra> higgs deleteSecRule 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! name=Inst1_slcs09client06vm01_secruletest1
Successfully run the command: curl -k -c /tmp/tmpdALxROecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
Successfully run the command: curl -k -b /tmp/tmpdALxROecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X DELETE https://10.128.95.197/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1



getResources:
Usage: higgs getResources <subscriptionID> admin_username=<administrator> appidUser=<appid> appidPwd=<secret> resource_type=<resources path>


Purpose:
        Get all the resources of the given path.

Arguments:
    subscriptionid  : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username
    appidUser       : A string for AppID
    appidPwd        : Secret information for AppID
    resource_type   : Higgs resource type


Examples:
ecra> higgs getResources 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! resource_path=network/v1/secrule
* Successfully run the command: curl -k -c /tmp/tmpmBXTN4ecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Successfully run the command: curl -k -b /tmp/tmpmBXTN4ecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X GET https://10.128.95.197/network/v1/secrule/Compute-123456787/administrator/
* /Compute-123456787/administrator/Inst1_scaqag02dv0304_client-psm-ingress URI: https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_scaqag02dv0304_client-psm-ingress
* /Compute-123456787/administrator/slcs16adm07vm03-v303-client-internet-egress URI: https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/slcs16adm07vm03-v303-client-internet-egress
...

ecra> higgs getResources 123456787 resource_type=ipreservation
* Successfully run the command: curl -k --retry 3 --retry-delay 1 -c /tmp/tmp8oZiAzecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Successfully run the command: curl -k --retry 3 --retry-delay 1 -b /tmp/tmp8oZiAzecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X GET https://10.128.95.197/network/v1/ipreservation/Compute-123456787/administrator/
* 1     NAME: /Compute-123456787/administrator/Inst1_scaqab10client04vm04_ntpClient2reserve 
        URI: https://10.128.95.197:443/network/v1/ipreservation/Compute-123456787/administrator/Inst1_scaqab10client04vm04_ntpClient2reserve
...

ecra> higgs getResources 123456787 resource_type=secrule
* Successfully run the command: curl -k --retry 3 --retry-delay 1 -c /tmp/tmpwsfkwQecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Successfully run the command: curl -k --retry 3 --retry-delay 1 -b /tmp/tmpwsfkwQecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X GET https://10.128.95.197/network/v1/secrule/Compute-123456787/administrator/
* 1     NAME: /Compute-123456787/administrator/Inst1_scaqag02dv0304_client-psm-ingress 
        URI: https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_scaqag02dv0304_client-psm-ingress
* 2     NAME: /Compute-123456787/administrator/slcs16adm07vm03-v303-client-internet-egress 
        URI: https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/slcs16adm07vm03-v303-client-internet-egress
...


removeResource:
Usage: higgs removeResource <subscriptionID> admin_username=<administrator> appidUser=<appid> appidPwd=<secret> name=<resource uri>


Purpose:
        Delete a single higgs resource.

Arguments:
    subscriptionid  : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username
    appidUser       : A string for AppID
    appidPwd        : Secret information for AppID
    name            : Resource URI


Examples:
ecra> higgs removeResource 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! name=https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest2
* Successfully run the command: curl -k -c /tmp/tmpfNzDKCecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Successfully run the command: curl -k -b /tmp/tmpfNzDKCecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X DELETE https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest2

ecra> higgs removeResource name=https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1
* Successfully run the command: curl -k --retry 3 --retry-delay 1 -c /tmp/tmpS5Ns5vecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d '{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}'
* Successfully run the command: curl -k --retry 3 --retry-delay 1 -b /tmp/tmpS5Ns5vecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator/" -X DELETE https://10.128.95.197:443/network/v1/secrule/Compute-123456787/administrator/Inst1_slcs09client06vm01_secruletest1
ecra> 



createSecProtocol :
Usage: higgs createSecProtocol <subscriptionID> admin_username=<administrator> appidUser=<appid> appidPwd=<secret> rack=<rack> ipProtocol=<protocl> dstPortSet=<port>


Purpose:
        Create a secure protocol.

Arguments:
    subscriptionid  : A valid subscriptionID, if the subscriptionID is not provided it will be loaded from ecracli.cfg.
    admin_username  : A string representing the admin username
    appidUser       : A string for AppID
    appidPwd        : Secret information for AppID
    rack            : Rack name
    ipProtocol      : IP protocol
    dstPortSet      : Destination port


Examples:
ecra> higgs createSecProtocol 123456787 admin_username=administrator appidUser=APPID appidPwd=ecrapwd1! rack=slcs09client06vm01 ipProtocol=tcp dstPortSet=1521
('Successfully run the command: %s', 'curl -k -c /tmp/tmpr7aJ_Vecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -X POST https://10.128.95.197/authenticate/ -d \'{"password": "'ecrapwd1!'", "user": "/Compute-123456787/APPID"}\'')
('Successfully run the command: %s', 'curl -k -b /tmp/tmpr7aJ_Vecracli/higgs_cookie.txt -H "Content-Type: application/oracle-compute-v3+json" -H "X-Oracle-Compute-As: /Compute-123456787/administrator" -X POST https://10.128.95.197/network/v1/secprotocol/ -d \'{"ipProtocol": "tcp", "name": "/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet", "dstPortSet": ["1521"]}\'')
{"name":"/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet","uri":"https://10.128.95.197:443/network/v1/secprotocol/Compute-123456787/administrator/Inst1_slcs09client06vm01_sqlnet","description":null,"tags":null,"ipProtocol":"tcp","srcPortSet":null,"dstPortSet":["1521"]}


Exaservice
create
Usage: ./ecracli exaservice create racksize=<eighth|quarter|half|full> model=<X4-2|X5-2|X6-2> [rack_cores=rc] [clu_size=SMALL|MEDIUM|LARGE|WHOLE] [clu_cores=<c>] [clu_memory=<m>] [clu_storage=<s>] [clu_ohsize=<o>] [clu_name=<cn>] [inst_name=in][enable_sparse=Y|N][backupto_disk=Y|N][type=subscription|metered] [rack_name=<rack_name>] [exadata_id=<exadata_id>]
Creates a multivm exaservice with one cluster. Specifying <clu_size> will set defaults for <clu_cores>, <clu_memory>, <clu_storage> and <clu_ohsize>. <clu_cores> is the total cores for the cluster, <clu_memory> the total memory in GB for the cluster, <storage> the total ASM storage in TB for the cluster and <clu_ohsize> the per compute node OH size in GB with a minimum of 50GB. <rack_cores> is the total cores purchased for the rack.

Purpose:
    Creates a multi-vm exaservice. The create also add the first multi-vm cluster.
Arguments:
    racksize: The size of the rack like eighth, quarter, half etc.
    model: The hardware model like X5-2, X6-2 etc.
    rack_cores: The total number of cores to be allocation to the exaservice. These are distributed across clusters.
    clu_size: One of the cluster standard sizes - SMALL, MEDIUM, LARGE and WHOLE. This will set pre-defined values for clu_cores, clu_memory, clu_storage and clu_ohsize. If not specified will default to SMALL.
    clu_cores: The number of cores to be allocated to the first cluster. If not specified will default to the value derived from clu_size.
    clu_memory: The memory to be allocated to the first cluster in GB. If not specified will default to the value derived from clu_size.
    clu_storage: The ASM storage to be allocated to the first cluster in TB. If not specified will default to the value derived from clu_size.
    clu_ohsize: The Oracle Home partition size for the cluster in GB.
    clu_name:Name of the cluster
    inst_name: The overall service name. Set only during create call. For subsequent add cluster calls, the name used in create is re-used.
    enable_sparse:Y or N flag. Will default to N if not specified.
    backupto_disk: Y or N flag. Will default to N if not specified.
    type: Can be either subscription or metered
    rack_name: Rack name from rack_slot table this will help in terms of rackslot selection. In the cloud ui client network and backup network information will also come along with rack name.
    exadata_id: Create a service for given exadata ID

Examples:
1. Incorrect model
ecra> exaservice create racksize=quarter model=8-2
* Error: GET request to http://den02ade.us.oracle.com:9014/ecra/endpoint/hardwareinfo?racksize=quarter&model=8-2 failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Unknown model and racksize combination: quarter 8-2","status-detail":"Unknown model and racksize combination: quarter 8-2","op":"hardwareinfo_get"}
* Error: Error: Unable to fetch hardwareinfo for rack quarter and model 8-2

2. Create a exaservice with one cluster:
exaservice create racksize=quarter model=x5-2 rack_cores=28 clu_cores=10 clu_size=SMALL type=subscription backupto_disk=Y

* Creating exaservice with id: d50e1092-61e5-4010-ab41-721bc201e7cf
* STATUS URI : http://den02ade.us.oracle.com:9018/ecra/endpoint/statuses/d50e1092-61e5-4010-ab41-721bc201e7cf
* TARGET URI : http://den02ade.us.oracle.com:9018/ecra/endpoint/exaservice/d50e1092-61e5-4010-ab41-721bc201e7cf?exaunit=1&clusterop=AddCluster&exaserviceop=create
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... .
* Request create_exaservice successfully completed

3. rack_name
ecra> exaservice create racksize=quarter model=8-2 rack_name=1-clu-2 exadata_id=1
* STATUS URI : http://den02ade.us.oracle.com:9018/ecra/endpoint/statuses/d50e1092-61e5-4010-ab41-721bc201e7cf
* TARGET URI : http://den02ade.us.oracle.com:9018/ecra/endpoint/exaservice/d50e1092-61e5-4010-ab41-721bc201e7cf?exaunit=1&clusterop=AddCluster&exaserviceop=create
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... .
* Request create_exaservice successfully completed

list
Usage: ./ecracli exaservice list [exaservice_id=<id>] [exaunit_id=<eid>].
Returns the clusters under the exaservice <id> including the resources allocated. If <id> is not specified, lists the created exaservice Ids without the cluster information

Purpose:
To list created multi-vm exaservices and clusters(exaunits) under an exaservice including resource information.

Arguments:
exaservice_id: The exaservice Id to list.
exaunit_id: A cluster's exaunit id.

Examples:
1.List all exaservices
ecra>exaservice list
* {
	"status": 200,
	"status-detail": "success",
	"op": "get-exaservice",
	"exaservices": [{
		"racksize": "quarter",
		"model": "X5-2",
		"id": "9b283a99-4afb-4cbb-a24d-f6c547187d29",
		"exadata_id": "scas07adm0304clu3"
	}]
}

2. List an exaservice
ecra> exaservice list exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29
* {
	"DistributedClusterResources": [{
		"TotalNumOfBurstCoresForCluster": 0,
		"OracleHomeDiskSizeInGb": 60,
		"CreateSparse": "N",
		"StorageInTb": 5,
		"BackupToDisk": "Y",
		"TotalNumOfCoresForCluster": 10,
		"TotalMemoryInGb": 62,
		"ExaunitName": "clu26c9f4e",
		"ExaunitId": 1
	}],
	"id": "9b283a99-4afb-4cbb-a24d-f6c547187d29",
	"AllocatedExaServiceResources": {
		"AdditionalNumOfCores": 12,
		"Racksize": "quarter",
		"ExaServiceName": "clu26c9f4e",
		"StorageInTb": 42,
		"PurchaseType": "subscription",
		"BaseNumOfCores": 16,
		"TotalMemoryInGb": 480,
		"Model": "X5-2"
	}
}

3. Exaunit specified but exaservice_id is missing
ecra>  exaservice list exaunit_id=1
* Error: <exaunit_id> specified but missing param <exaservice_id>

corebustcluster
Usage: ./ecracli exaservice corebustcluster exaservice_id=<id> exaunit_id=<eid> clu_cores=<c>
 Burst cluster <eid> to <c> cores.


Purpose:
Perform core burst on a cluster.

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.
exaunit_id: The cluster exaunit Id
clu_cores: The number of cores to burst to. This is the total number for the entire cluster.

Examples:
1. Cores is not a multiple of the number of compute nodes
exaservice coreburstcluster exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 exaunit_id=1 clu_cores=5
* Error: Cores specified 5 should be a multiple of number of computes: 2
* Error: Error: Failed to create core burst OCPU_ALLOCATIONS payload for: coreburstcluster
* Error: Error: Failed to create exaunit allocation payload for: coreburstcluster
* Error: coreburst_cluster failed

2. Burst to 4 cores on a quarter rack.
exaservice coreburstcluster exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 exaunit_id=1 clu_cores=4
* Core bursting cluster 1 with exaservice with id: 9b283a99-4afb-4cbb-a24d-f6c547187d29
* STATUS URI : http://den02ade.us.oracle.com:9075/ecra/endpoint/statuses/9cb483f1-2972-41ae-a99c-3237b1efbb45
* TARGET URI : http://den02ade.us.oracle.com:9075/ecra/endpoint/exaservice/9b283a99-4afb-4cbb-a24d-f6c547187d29?exaunit=1&clusterop=CoreBurst&exaserviceop=update}
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ......
* Request coreburst_cluster successfully completed

ecra>  exaservice list exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29  (4 burst cores)
{
	"DistributedClusterResources": [{
		"TotalNumOfBurstCoresForCluster": 4,
		"OracleHomeDiskSizeInGb": 60,
		"CreateSparse": "N",
		"StorageInTb": 5,
		"BackupToDisk": "Y",
		"TotalNumOfCoresForCluster": 10,
		"TotalMemoryInGb": 62,
		"ExaunitName": "clu26c9f4e",
		"ExaunitId": 1
	}],
	"id": "9b283a99-4afb-4cbb-a24d-f6c547187d29",
	"AllocatedExaServiceResources": {
		"AdditionalNumOfCores": 12,
		"Racksize": "quarter",
		"ExaServiceName": "clu26c9f4e",
		"StorageInTb": 42,
		"PurchaseType": "subscription",
		"BaseNumOfCores": 16,
		"TotalMemoryInGb": 480,
		"Model": "X5-2"
	}
}

rehapecluster
Usage: ./ecracli exaservice rehapecluster exaservice_id=<id> exaunit_id=<eid> < clu_cores=<c> | clu_memory=<m> | clu_storage=<s> | clu_ohsize=<p> >
  One of <c>, <m>, <s> or <p> can be modified using the reshape cluster operation

Purpose:
The change the resources allocated to a cluster

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.
exaunit_id: The cluster exaunit Id
clu_cores: The total number of cores for the cluster.
clu_memory: The total memory in GB for the cluster.
clu_storage: The total ASM storage for the cluster.

Examples:
1.  Upsize subsription cores to 12 from 10
ecra> exaservice reshapecluster  exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 exaunit_id=1 clu_cores=12
 Reshaping cluster 1 with exaservice with id: 9b283a99-4afb-4cbb-a24d-f6c547187d29
* STATUS URI : http://den02ade.us.oracle.com:9075/ecra/endpoint/statuses/274a8f4c-1125-4143-9959-8e711044c475
* TARGET URI : http://den02ade.us.oracle.com:9075/ecra/endpoint/exaservice/9b283a99-4afb-4cbb-a24d-f6c547187d29?exaunit=1&clusterop=ReshapeCluster&exaserviceop=update
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ......
* Request reshape_cluster successfully completed

ecra> exaservice list exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29  (TotalNumOfCoresForCluster = 12)
*
{
	"DistributedClusterResources": [{
		"TotalNumOfBurstCoresForCluster": 4,
		"OracleHomeDiskSizeInGb": 60,
		"CreateSparse": "N",
		"StorageInTb": 5,
		"BackupToDisk": "Y",
		"TotalNumOfCoresForCluster": 12,
		"TotalMemoryInGb": 62,
		"ExaunitName": "clu26c9f4e",
		"ExaunitId": 1
	}],
	"id": "9b283a99-4afb-4cbb-a24d-f6c547187d29",
	"AllocatedExaServiceResources": {
		"AdditionalNumOfCores": 12,
		"Racksize": "quarter",
		"ExaServiceName": "clu26c9f4e",
		"StorageInTb": 42,
		"PurchaseType": "subscription",
		"BaseNumOfCores": 16,
		"TotalMemoryInGb": 480,
		"Model": "X5-2"
	}
}

2. Missing reshape param:
ecra> exaservice reshapecluster  exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 exaunit_id=1
* Error: Missing param: One of the following cluster resource params need to be specified: ['clu_cores', 'clu_memory', 'clu_storage', 'clu_ohsize']
* Error: Error: Failed to create exaunit allocation payload for: reshapecluster
* Error: reshape_cluster failed

deletecluster
Usage: ./ecracli exaservice deletecluster exaservice_id=<id> exaunit_id=<eid>
Deletes a cluster (exaunit) associated with a exaservice.

Purpose:
To delete a multi-vm exaunit. Everything on the cluster including databases will be deleted.

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.
exaunit_id: The cluster exaunit Id

Examples:
1.Delete clsuter
exaservice deletecluster exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29  exaunit_id=1
* Deleting cluster 1 with exaservice with id: 9b283a99-4afb-4cbb-a24d-f6c547187d29

Verify the cluster got deleted: there was one cluster before the delete.
ecra> exaservice list exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 (there are no clusters)
{
	"DistributedClusterResources": [],
	"id": "9b283a99-4afb-4cbb-a24d-f6c547187d29",
	"AllocatedExaServiceResources": {
		"AdditionalNumOfCores": 12,
		"Racksize": "quarter",
		"ExaServiceName": "clu26c9f4e",
		"StorageInTb": 42,
		"PurchaseType": "subscription",
		"BaseNumOfCores": 16,
		"TotalMemoryInGb": 480,
		"Model": "X5-2"
	}
}

addcluster
Usage: ./ecracli exaservice addcluster exaservice_id=<id> [clu_size=SMALL|MEDIUM|LARGE|WHOLE] [clu_cores=<c>] [clu_memory=<m>] [clu_storage=<s>] [clu_ohsize=<o>] [clu_name=<cn>] [enable_sparse=Y|N][backupto_disk=Y|N][rack_name=rack_name]
Add a cluster to a multivm exaservice. Specifying <clu_size> will set defaults for <clu_cores>, <clu_memory>, <clu_storage> and <clu_ohsize>.  <clu_cores> is the total cores for the cluster, <clu_memory> the total memory in GB for the cluster, <storage> the total ASM storage in TB for the cluster and <clu_ohsize> the per compute node OH size in GB with a minimum of 50GB.

Purpose:
To add an multi-vm cluste to an exaservice.

Arguments:
Please see exaservice create as the arguments are a subset of exaservice create command.

Examples:
1. Add a cluster (there are no clusters at this point)
ecra> exaservice addcluster exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 clu_cores=12 backupto_disk=Y
* Racksize is: quarter Model is: X5-2
* Adding cluster to exaservice with id: 9b283a99-4afb-4cbb-a24d-f6c547187d29
* STATUS URI : http://den02ade.us.oracle.com:9075/ecra/endpoint/statuses/82e8607d-7b23-479c-aa05-3889b312b9bd
* TARGET URI : http://den02ade.us.oracle.com:9075/ecra/endpoint/exaservice/9b283a99-4afb-4cbb-a24d-f6c547187d29?exaunit=2&clusterop=AddCluster&exaserviceop=update
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ...... ...... ...... ...... ...... ...... ...... ...... ....
* Request add_cluster successfully completed

Add Cluster with Specific Rack Name
ecra> exaservice addcluster exaservice_id=01cc6b89-9e11-4fa7-b456-e97eca5fe375 racksize=quarter mode=X5-2 rack_name=1-clu-4
* Racksize is: quarter Model is: X5-2
* Adding cluster to exaservice with id: 01cc6b89-9e11-4fa7-b456-e97eca5fe375
* STATUS URI : http://slc14rlu.us.oracle.com:9073/ecra/endpoint/statuses/88ea8ed2-8518-49b3-a580-52bade50fc79
* TARGET URI : http://slc14rlu.us.oracle.com:9073/ecra/endpoint/exaservice/01cc6b89-9e11-4fa7-b456-e97eca5fe375?exaunit=21&clusterop=AddCluster&exaserviceop=update
* Request issued. Wait for completion. Pulling Status.
* Status: processing...
* Request add_cluster successfully completed

ecra> exaservice list exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29 (TotalNumOfCoresForCluster = 12, other settings are from clu_size=SMALL)
 {
	"DistributedClusterResources": [{
		"TotalNumOfBurstCoresForCluster": 0,
		"OracleHomeDiskSizeInGb": 60,
		"CreateSparse": "N",
		"StorageInTb": 5,
		"BackupToDisk": "Y",
		"TotalNumOfCoresForCluster": 12,
		"TotalMemoryInGb": 62,
		"ExaunitName": "clu15c83d1",
		"ExaunitId": 2
	}],
	"id": "9b283a99-4afb-4cbb-a24d-f6c547187d29",
	"AllocatedExaServiceResources": {
		"AdditionalNumOfCores": 12,
		"Racksize": "quarter",
		"ExaServiceName": "clu26c9f4e",
		"StorageInTb": 42,
		"PurchaseType": "subscription",
		"BaseNumOfCores": 16,
		"TotalMemoryInGb": 480,
		"Model": "X5-2"
	}
}


delete
Usage: ./ecracli exaservice delete exaservice_id=<id> [sse=Y|N]
 Deletes the multi-vm exaservice.

Purpose:
Deletes a multi-vm exaservice. There should not be any clusters created under the exaservice.

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.
sse:  Setting sse(skip secure erase) to N will erase all ASM storage including any metadata and shred VM images on compute nodes.

Examples:
1. There is one exaservice setup. Delete it and verify with the list command.
ecra> exaservice delete exaservice_id=9b283a99-4afb-4cbb-a24d-f6c547187d29
* Deleting exaservice with id: 9b283a99-4afb-4cbb-a24d-f6c547187d29
{u'status': 200, u'status-detail': u'success', u'op': u'delete-exaservice'}

ecra> exaservice list (there are no exaservice ids)
* {"status": 200, "status-detail": "success", "op": "get-exaservice", "exaservices": []}


reshape
Usage: ./ecracli exaservice reshape exaservice_id=<id> < rack_cores=<rc> | burst_cores=<bc> | < add_cell=<ac> | asmPower=<ap> >| add_compute=<aco> >
 Updates exaservice resource params. Currently only cores reshape is supported.

Purpose:
To update the resource params of the service. The initial values for resource params are set during creation of the exaservice.

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.
rack_cores:  The total number of subscription cores for the exaservice
burst_cores: The total number of burst cores for the exaservice. The sum total of rack_cores and burst_cores can be distributed across the clusters.
add_cell: Additional number of storage cells that are going to be attached to the current exaservice as per the elastic functionality.
asmPower: Processing power that is going to be assigned to rebalance existing information to new added storage cells.
add_compute: Additional number of computes that are going to be attached to the current exaservice as per the elastic functionality.

Examples:
 ecra> exaservice reshape exaservice_id=028f491f-e9f4-4f6a-ac6c-a0e4a32cc234 rack_cores=23
* Reshaping exaservice with id: 028f491f-e9f4-4f6a-ac6c-a0e4a32cc234
* {"BurstCores": 0, "SubscriptionCores": 23, "status": 200, "status-detail": "success", "op": "update-exaservice"}
ecra> exaservice reshape exaservice_id=028f491f-e9f4-4f6a-ac6c-a0e4a32cc234 burst_cores=10
* Reshaping exaservice with id: 028f491f-e9f4-4f6a-ac6c-a0e4a32cc234
* {"BurstCores": 10, "SubscriptionCores": 23, "status": 200, "status-detail": "success", "op": "update-exaservice"}
ecra>  exaservice list exaservice_id=028f491f-e9f4-4f6a-ac6c-a0e4a32cc234
* {
	"status": 200,
	"AllocatedExaServiceResources": {
		"BurstCores": 10,
		"Racksize": "quarter",
		"AdditionalNumOfCores": 7,
		"ExaServiceName": "brij1",
		"StorageInTb": 42,
		"PurchaseType": "subscription",
		"BaseNumOfCores": 16,
		"TotalMemoryInGb": 480,
		"Model": "X5-2"
	},
	"status-detail": "success",
	"DistributedClusterResources": [{
		"OracleHomeDiskSizeInGb": 60,
		"CreateSparse": "N",
		"StorageInTb": 5,
		"BackupToDisk": "Y",
		"TotalNumOfCoresForCluster": 20,
		"TotalMemoryInGb": 62,
		"ExaunitName": "brij1",
		"ExaunitId": 1
	}],
	"id": "028f491f-e9f4-4f6a-ac6c-a0e4a32cc234",
	"op": "get-exaservice"
}
ecra> exaservice reshape exaservice_id=028f491f-e9f4-4f6a-ac6c-a0e4a32cc234 burst_cores=0
* Reshaping exaservice with id: 028f491f-e9f4-4f6a-ac6c-a0e4a32cc234
* {"BurstCores": 0, "SubscriptionCores": 23, "status": 200, "status-detail": "success", "op": "update-exaservice"}
ecra> exaservice reshape exaservice_id=028f491f-e9f4-4f6a-ac6c-a0e4a32cc234 rack_cores=18
* Reshaping exaservice with id: 028f491f-e9f4-4f6a-ac6c-a0e4a32cc234
* Error: PUT request to http://den02ade.us.oracle.com:9081/ecra/endpoint/exaservice/028f491f-e9f4-4f6a-ac6c-a0e4a32cc234 failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Sum of subscription and burst cores cannot be less than cores currently distributed across existing clusters. Current cores in use by clusters: 20","status-detail":"Sum of subscription and burst cores cannot be less than cores currently distributed across existing clusters. Current cores in use by clusters: 20","op":"update-exaservice"}

suspend
Usage: ./ecracli exaservice suspend exaservice_id=<id> < rack_cores=<rc> | burst_cores=<bc> >
 Suspends all the clusters associated with a particular exaservice id.

Purpose:
To support 0 cores ( IAAS/PAAS) usecase.

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.

Examples:
ecra> exaservice suspend exaservice_id=5a96f83c-4843-4b62-b299-59ee50468d66
http://slc12brn.us.oracle.com:9078/ecra/endpoint/exaservice/5a96f83c-4843-4b62-b299-59ee50468d66/suspend
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://slc12brn.us.oracle.com:9078/ecra/endpoint/statuses/7ada85cc-34eb-412f-8f27-7de729766e1e", "op_start_time": "2018-06-21T17:51:21-0700", "message": "processing", "op": "exaservice-suspend"}
* STATUS URI : http://slc12brn.us.oracle.com:9078/ecra/endpoint/statuses/7ada85cc-34eb-412f-8f27-7de729766e1e
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request suspend_exaservice successfully completed

resume
Usage: ./ecracli exaservice resume exaservice_id=<id> 
 Resumes all the clusters associated with a particular exaservice id.

Purpose:
To support resuming from 0 cores ( IAAS/PAAS) usecase.

Arguments:
exaservice_id: The exaservice ID of the exaservice. An exaservice has multiple clusters(exaunits) associated with it.

Examples:
ecra> exaservice resume exaservice_id=5a96f83c-4843-4b62-b299-59ee50468d66
http://slc12brn.us.oracle.com:9078/ecra/endpoint/exaservice/5a96f83c-4843-4b62-b299-59ee50468d66/resume
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://slc12brn.us.oracle.com:9078/ecra/endpoint/statuses/7ada85cc-34eb-412f-8f27-7de729766e1e", "op_start_time": "2018-06-21T17:51:21-0700", "message": "processing", "op": "exaservice-suspend"}
* STATUS URI : http://slc12brn.us.oracle.com:9078/ecra/endpoint/statuses/7ada85cc-34eb-412f-8f27-7de729766e1e
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request resume_exaservice successfully completed

migrateprefetch
Usage: ./ecracli migrateprefetch <[exaunit_id=<eid>] | [service_id=<sid>]> [outfile=<ofile>]
Prefetches the input json template needed for the migrate subcommand given one of <eid> or <sid>.
If <outfile> is specified, the template json is appended to it.

Purpose:
    Prefetches the migrate json for a given instance. The json can be edited and used for actual migration.
Arguments:
    exaunit_id: The exaunit pod id.
    service_id: The single vm service instance id.
    outfile: Saves the prefetch json to this file. The contents are appended.

Examples:
1. Prefetch to console.
ecra> exaservice migrateprefetch service_id=9bd0247a-3292-488a-87af-0d18dec0619f exaunit_id=21
* Prefetching details from ecra. No migration will be attempted. Please use the prefetched data to manually verify the data
* {
  "instanceId": "9bd0247a-3292-488a-87af-0d18dec0619f",
  "exaunitId": 21,
  "isHiggsCluster": false,
  "racksize": "quarter",
  "model": "X5-2",
  "AdditionalInfo": {
    "CloudType": "Gen1NoSDI",
    "PurchaseType": "subscription",
    "ServiceName": "Inst1",
    "IdentityDomainName": "idcs-dummy-svc-guid",
    "Rackname": "scas07adm0304clu3",
    "SubscriptionCores": 4,
    "MeteredCores": 0,
    "BurstCores": 4,
    "CreateSparse": "false",
    "BackupDisk": "N"
  },
  "ServiceSpecificPayload": {
    "cms_info": "Missing in single vm exanit. Please specify value under section ServiceSpecificPayload in migrate json",
    "datacenter.region.id": "rg001",
    "zdlra": "Missing in single vm exanit. Please specify value under section ServiceSpecificPayload in migrate json",
    "datacenter.name": "Missing in single vm exanit. Please specify value under section ServiceSpecificPayload in migrate json",
    "datacenter.region.name": "Missing in single vm exanit. Please specify value under section ServiceSpecificPayload in migrate json",
    "datacenter.id": "us1",
    "cns_info": "Missing in single vm exanit. Please specify value under section ServiceSpecificPayload in migrate json"
  },
  "exadata": {
    "name": "<exadata id - A unique name for the exadata within a zone>",
    "adminXmlPath": "<The absolute path for the multi-vm overall admin XML of the exadata>"
  },
  "rackSlots": [
    {
      "isFirstCluster": true,
      "rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML of the first cluster - this cluster is the single vm cluster migrated as the first multi-vm cluster>"
    },
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"},
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"},
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"},
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"},
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"},
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"},
    {"rackSlotXmlPath": "<The absolute path for the multi-vm oeda XML for a cluster>"}
  ]
}

2. Prefetch to a file. Contents are appended to the outfile.
ecra> exaservice migrateprefetch service_id=9bd0247a-3292-488a-87af-0d18dec0619f exaunit_id=21 outfile=/tmp/pod21.json
* Prefetching details from ecra. No migration will be attempted. Please use the prefetched data to manually verify the data
* {
    "message": "Prefetch data has been appended to:/tmp/pod21.json",
    "op": "mvm-migrate-prefetch",
    "status": 200,
    "status-detail": "Prefetch data has been appended to:/tmp/pod21.json"
}

migrate
Usage: ./ecracli migrate json=<jfile> [outfile=ofile]
Migrates a single vm instance to multi-vm instance with one cluster. <jfile> contains the migration request. The change log is stored in <ofile>.
For further details, please refer to https://confluence.oraclecorp.com/confluence/display/EDCS/Single-Vm+to+Multi-Vm+migration+-+ECRA+design

Purpose:
    Migrates a single-vm service to multi-vm.
Arguments:
    json: The migrate request as a json file.
    outfile: Stores the migration change log.

Examples:
1. Migrate successfully
ecra> exaservice migrate json=/tmp/pod21.json
* Migrating single vm service with id: 9bd0247a-3292-488a-87af-0d18dec0619f
* {
    "message": "Migration is successful",
    "op": "mvm-migrate",
    "status": 200,
    "status-detail": "Migration is successful"
}

A sample of the json used above:
{
	"instanceId": "9bd0247a-3292-488a-87af-0d18dec0619f",
	"exaunitId": 21,
	"isHiggsCluster": false,
	"racksize": "quarter",
	"model": "X5-2",
	"ServiceSpecificPayload": {
		"cms_info": "cms info",
		"datacenter.region.id": "rg001",
		"zdlra": "N",
		"datacenter.name": "us-central-1",
		"datacenter.region.name": "us-region-1",
		"datacenter.id": "us1",
		"cns_info": "cns info"
	},
	"exadata": {
		"name": "scas07adm0304",
		"adminXmlPath": "/scratch/brsudars/ecra_installs/ut/mw_home/user_projects/domains/exacloud/clusters/scas07adm03scas07adm03vm03scas07adm04scas07adm04vm03/config/scas07adm0304clu3.xml"
	},
	"rackSlots": [{
			"isFirstCluster": true,
			"rackSlotXmlPath": "/scratch/brsudars/ecra_installs/ut/mw_home/user_projects/domains/exacloud/clusters/scas07adm03scas07adm03vm03scas07adm04scas07adm04vm03/config/scas07adm0304clu3.xml"
		},
		{
			"rackSlotXmlPath": "/scratch/brsudars/ecra_installs/ut/mw_home/user_projects/domains/exacloud/clusters/scas07adm03scas07adm03vm03scas07adm04scas07adm04vm03/config/scas07adm0304clu3.xml"
		}
	]
}

migratestatus
Usage: ./ecracli migratestatus service_id=<sid> [outfile=<ofile>]
Reports the status of migration for a given single-vm instance <sid>. If outfile is specified, will append a detailed status to the file.
For further details, please refer to https://confluence.oraclecorp.com/confluence/display/EDCS/Single-Vm+to+Multi-Vm+migration+-+ECRA+design

Purpose:
    Report migration status for a given instance.
Arguments:
    service_id: The single vm instance id.
    outfile: Appends the migration status to this file.

Examples:

1. Fetch status to console.
ecra> exaservice migratestatus service_id=9bd0247a-3292-488a-87af-0d18dec0619f
* Fetching migration status for single-vm service with id: 9bd0247a-3292-488a-87af-0d18dec0619f
* {
    "message": "{\n  \"Instanceid:\": \"9bd0247a-3292-488a-87af-0d18dec0619f\",\n  \"Exaunitid:\": 21,
    \n  \"migrationStartTime:\": \"2018-04-25T18:51:11-0700\",\n  \"migrationStatusCode:\": \"200\",
    \n  \"migrationStatusFile:\": \"<File not specified>\"\n}",
    "op": "mvm-migrate-status",
    "status": 200,
    "status-detail": "{\n  \"Instanceid:\": \"9bd0247a-3292-488a-87af-0d18dec0619f\",\n  ...\n}"
}

2. Fetch status to file.
ecra> exaservice migratestatus service_id=9bd0247a-3292-488a-87af-0d18dec0619f outfile=/tmp/pod21-status.json
* Fetching migration status for single-vm service with id: 9bd0247a-3292-488a-87af-0d18dec0619f
* {
    "message": "{\n  \"Instanceid:\": \"9bd0247a-3292-488a-87af-0d18dec0619f\",\n  \"Exaunitid:\": 21,\n
    \"migrationStartTime:\": \"2018-04-25T18:51:11-0700\",\n  \"migrationStatusCode:\": \"200\",\n
    \"migrationStatusFile:\": \"\\/tmp\\/pod21-status.json\"\n}",
    "op": "mvm-migrate-status",
    "status": 200,
    "status-detail": "{\n  \"Instanceid:\": \"9bd0247a-3292-488a-87af-0d18dec0619f\",\n  \"Exaunitid:\": 21,...}"
}

migraterollback
Usage: ./ecracli migraterollback service_id=<sid>
Rolls back a succesfully migrated single-vm instance <sid> back to single-vm.

Purpose:
    Rollback a successful migration if user decides that a mistake was made in migrating and perhaps wants to do it later.
Arguments:
    service_id: The single vm instance id.
    outfile: Appends the migration status to this file.

Examples:

1. Rollback a successfully migrated instance.
ecra> exaservice migraterollback service_id=9bd0247a-3292-488a-87af-0d18dec0619f
* Rolling back migration for single-vm service with id: 9bd0247a-3292-488a-87af-0d18dec0619f
* {
    "message": "Rollback completed",
    "op": "mvm-migrate-rollback",
    "status": 200,
    "status-detail": "Rollback completed"
}


2. Migrate the same instance again. Is allowed as the last one was fully rolled back. 
eecra> exaservice migrate json=/tmp/pod21.json
* Migrating single vm service with id: 9bd0247a-3292-488a-87af-0d18dec0619f
* {
    "message": "Migration is successful",
    "op": "mvm-migrate",
    "status": 200,
    "status-detail": "Migration is successful"
}

rackinfo
Usage: ./ecracli exaservice rackinfo exaservice_id=<id> 
 Fetch Rackslot info and status for  exaservice id.

Purpose:
Fetch rack information for the given exaservice ID.

Arguments:
exaservice_id: The exaservice ID of the exaservice.

Examples:
1. For Given Exaservice ID, fetch free rackslot information.

ecra> exaservice rackinfo exaservice_id=01cc6b89-9e11-4fa7-b456-e97eca5fe375
* GET http://slc14rlu.us.oracle.com:9073/ecra/endpoint/exaservice/01cc6b89-9e11-4fa7-b456-e97eca5fe375/rackinfo
* {
    "exadataId": "1", 
    "op": "exaservice-rack-info", 
    "rackInfo": [
        {
            "clientNetworkInfo": "10.249.80.0/21", 
            "rackName": "1-clu-7"
        }, 
        {
            "backupNetworkInfo": "10.249.92.0/22", 
            "clientNetworkInfo": "10.249.80.0/21", 
            "rackName": "1-clu-3"
        }, 
    ], 
    "status": 200, 
    "status-detail": "success"
}

resourceinfo
Usage : ecra> exaservice resourceinfo (<exaservice_id> | exaservice_id=<id>)
        or
        ./ecracli exaservice resourceinfo (<exaservice_id> | exaservice_id=<id>)

Purpose:
  Retrieve the resource information for given exaservice id

Arguments:
  exaservice_id: The exaservice ID of the exaservice.

Example:
  ecra> exaservice resourceinfo exaservice_id=b1c29d18-6c0e-4a39-8a0a-a47f92a83dda
  {
    "AllocatedExaServiceResources": {
        "AdditionalNumOfCores": 0,
        "AvailableOracleHomeSpaceInGb": 100,
        "BaseNumOfCores": 22,
        "BurstCores": 0,
        "ExaServiceName": "clu60c2180",
        "Model": "X6-2",
        "OverSubscriptionFactor": 2,
        "PurchaseType": "subscription",
        "Racksize": "quarter",
        "StorageInTb": 84,
        "TotalMemoryInGb": 1440,
        "TotalOracleHomeSpaceInGb": 200
    },
    "DistributedClusterResources": [
        {
            "BackupToDisk": "N",
            "CreateSparse": "N",
            "ExaunitId": 101,
            "ExaunitName": "clu60c2180",
            "OracleHomeDiskSizeInGb": 60,
            "RackName": "scaqab10adm0708clu5678-clu-1",
            "StorageInTb": 3,
            "TotalMemoryInGb": 60,
            "TotalNumOfCoresForCluster": 8,
            "status": "PROVISIONED"
        }
    ],
    "id": "b1c29d18-6c0e-4a39-8a0a-a47f92a83dda",
    "op": "get-exaservice",
    "state": "ACTIVE",
    "status": 200,
    "status-detail": "success"
}


===== database ======

**recreate**
Usage:
  ecra> db <exaunit_id> recreate dbSID=<dbSID> 
  
Purpose:
  Recreate a database that previously failed, using the same request ID(in case an operation is already tracking this request)

Arguments:
  dbSID=SID of the database
  

Examples:
ecra>  db recreate 22 dbSID=test1 
    * Recreating database on exaunit 22 with dbSID: test1
    * {"status": 200, "status-detail": "success", "op": "exaunit_dbregister"}


**update_ecra_heartbeat**
Usage:
  ecra>db update_ecra_heartbeat

Purpose:
  Monitor ECRA Database Health Monitoring and update the current time stamp in ecra db

Arguments:

Examples:
ecra> db update_ecra_heartbeat
* {"status": 200, "op": "database_heartbeat_put", "status-detail": "success"}

NOTE: This operation will not INSTALL a database.

** register**
Usage:
  ecra> db <exaunit_id> register dbSID=<dbSID> [dbUniqueName|dbType|dbVersion|clusterID|tenantID|backupDest|timezone|status]=<value>
  
Purpose:
  Register a database in ECRA metadata.

Arguments:
  dbSID=SID of the database
  

Examples:
ecra>  db register 22 dbSID=test1 
    * Registering database on exaunit 22 with dbSID: test1
    * {"status": 200, "status-detail": "success", "op": "exaunit_dbregister"}
ecra>  db register 22 dbSID=test1 dbType=ADDITIONAL dbVersion=18.1.0.0
    * Registering database on exaunit 22 with dbSID: test1
    * {"status": 200, "status-detail": "success", "op": "exaunit_dbregister"}
ecra>  db register 22 dbSID=test1 dbUniqueName=test1 dbVersion=18.1.0.0
    * Registering database on exaunit 22 with dbSID: test1
    * {"status": 200, "status-detail": "success", "op": "exaunit_dbregister"}


NOTE: This operation will not INSTALL a database.

deregister
Usage:
  ecra> db deregister <exaunit_id> dbSID=<dbSID>

Purpose:
        Deregister from ECRA metadata the specified Database.

Arguments:
  dbSID=SID of the database.

Examples:
ecra> db deregister 22 dbSID=test1
  * De-Registering database on exaunit 22 with dbSID: test1
  * {"status": 200, "status-detail": "success", "op": "exaunit_dbderegister"}


registered_info
Usage:
        ecra> db registered_info <exaunit_id> dbSID=<dbSID>

Purpose:
      Show the ECRA metadata information for the specified Database.

Arguments:
        dbSID=SID of the database.

Examples:
ecra> db registered_info 22 dbSID=test1
  * Registered info database on exaunit 22 with dbSID: test1
  * {"status": 200, "dbSID": "test1", "dbType": "ADDITIONAL", "dbID": 105, "dbVersion": "18.1.0.0", "clusterID": "KZR10", "tenantID": "usercarlos123", "status-detail": "success", "backupDest": "BOTH", "timezone": "LRG", "exaunitID": 22, "op": "exaunit_dbregister_info"}

    info_all
        Ussage:
            ecra> db info_all <exaunit_id>

        Purpose:
            Get a list of cdbs for a given ExaUnitId
        
        Arguments:
            exaunit_id: The exaunit pod id.

        Examples:
            ecra> db info_all 1972
            * {"DbInfo": [{"db_version": "19000", "domain": "o1571763895508.v1571763893789.oraclevcn.com", "db_full_version": "19.5.0.0.0", "db_state": "open", "db_home": "/u02/app/oracle/product/19.0.0.0/dbhome_2", "nodelist": "atpd-exa-n6nhr1 atpd-exa-n6nhr2", "nls_language": "AMERICAN", "ncharset": "AL16UTF16", "charset": "AL32UTF8", "pdb_names": ["pdb1"], "db_id": "", "db_edition": "enterprise", "pdb_name": "pdb1", "db_name": "bjj1hu91", "db_unique_name": "bjj1hu91_sea23j", "ohome_name": "OraHome100_19500_dbru191015_0", "creg_dbtype": "rac", "createTime": "23-OCT-19", "asm": "false", "db_class": "oltp", "agentdbid": "297585c3-d4c4-48aa-a92e-0ebe57f789ee", "db_type": "regular", "is_cdb": "yes", "nls_territory": "AMERICA", "pdb_service_name": "", "console_enabled": ""}, {"db_version": "19000", "domain": "o1571763895508.v1571763893789.oraclevcn.com", "db_full_version": "19.5.0.0.0", "db_state": "open", "db_home": "/u02/app/oracle/product/19.0.0.0/dbhome_3", "nodelist": "atpd-exa-n6nhr1 atpd-exa-n6nhr2", "nls_language": "AMERICAN", "ncharset": "AL16UTF16", "charset": "AL32UTF8", "pdb_names": ["pdb1"], "db_id": "", "db_edition": "enterprise", "pdb_name": "pdb1", "db_name": "opbwpgbe", "db_unique_name": "opbwpgbe_sea24c", "ohome_name": "OraHome101_19500_dbru191015_0", "creg_dbtype": "rac", "createTime": "23-OCT-19", "asm": "false", "db_class": "oltp", "agentdbid": "3f88baff-a0c7-4b8c-ab59-ad72db6500a9", "db_type": "regular", "is_cdb": "yes", "nls_territory": "AMERICA", "pdb_service_name": "", "console_enabled": ""}], "status": 200, "status-detail": "success", "op": "exaunit_dbinfo"}


vmbackup:
enable:
Usage : ecra> vmbackup enable <exadata_id>
        or
        ./ecracli vmbackup enable <exadata_id>

Purpose:
  Enables vmbackup on the chosen exadata machine (exadata_id)

Example:
  ecracli> vmbackup enable slcs08adm0506
  {u'Exacloud Cmd Status': u'Pass', u'status': 200, u'Log': [u'Turned VM backup ON on Dom0
  slcs08adm05.usdv1.oraclecloud.com', u'Turned VM backup ON on Dom0
  slcs08adm06.usdv1.oraclecloud.com'], u'status-detail': u'success',
  u'slcs08adm06.usdv1.oraclecloud.com': {u'Exacloud Cmd Status': u'Pass', u'Log': u'Turned VM
  backup ON on Dom0 slcs08adm06.usdv1.oraclecloud.com'},
  u'slcs08adm05.usdv1.oraclecloud.com': {u'Exacloud Cmd Status': u'Pass', u'Log': u'Turned VM
  backup ON on Dom0 slcs08adm05.usdv1.oraclecloud.com'}, u'Command': u'enable',
  u'op': u'vmbackup_properties_set'}

disable:
Usage : ecra> vmbackup disable <exadata_id>
        or
        ./ecracli vmbackup disable <exadata_id>

Purpose:
  Disables vmbackup on the chosen exadata machine (exadata_id)

Example:
  ecracli> vmbackup disable slcs08adm0506
  {u'Exacloud Cmd Status': u'Pass', u'status': 200, u'Log': [u'Turned VM backup OFF on Dom0
  slcs08adm05.usdv1.oraclecloud.com', u'Turned VM backup OFF on Dom0
  slcs08adm06.usdv1.oraclecloud.com'], u'status-detail': u'success',
  u'slcs08adm06.usdv1.oraclecloud.com': {u'Exacloud Cmd Status': u'Pass', u'Log': u'Turned
  VM backup OFF on Dom0 slcs08adm06.usdv1.oraclecloud.com'},
  u'slcs08adm05.usdv1.oraclecloud.com': {u'Exacloud Cmd Status': u'Pass', u'Log': u'Turned
  VM backup OFF on Dom0 slcs08adm05.usdv1.oraclecloud.com'}, u'Command':
  u'disable', u'op': u'vmbackup_properties_set'}

set_param:
Usage : ecra> vmbackup set_param <exadata_id> <parameter>=<value>
        or
        ./ecracli vmbackup set_param <exadata_id> <parameter>=<value>  

Purpose:
  Sets the vmbackup parameter to a value in the vmbackup configuration file in the chosen exadata machine (exadata_id), available commands through ecracli are
  ["remotebackup", "ossbackup", "maxremotebackups" , "deletelocalbackup", "activeblockcommit", "materializedlocalcopy", "ossbucket", "ossgoldbucket", "ossnumbackups"]

Example:
  ecracli> vmbackup set_param slcs08adm0506 remotebackup=disabled 
  {u'Exacloud Cmd Status': u'Pass', u'status': 200, u'Log': u'Setting REMOTE_BACKUP to
  disabled in vmbackup configuration.', u'status-detail': u'success', u'Command':
  u'setparam', u'op': u'vmbackup_properties_set'}

get_param:
Usage : ecra> vmbackup get_param <exadata_id> <parameter>
        or
        ./ecracli vmbackup get_param <exadata_id> <parameter>

Purpose:
  Gets the vmbackup parameter value from the vmbackup configuration file in the chosen exadata machine (exadata_id)

Example:
  ecracli> vmbackup get_param slcs08adm0506 REMOTE_BACKUP
  {u'Exacloud Cmd Status': u'Pass', u'status': 200, u'Log': u'Value of vmbackup
  parameter(REMOTE_BACKUP) obtained from configuration file is disabled',
  u'status-detail': u'success', u'REMOTE_BACKUP': u'disabled', u'Command':
  u'getparam', u'op': u'vmbackup_properties_get'}

install:
Usage : ecra> vmbackup install rackname=<rack_name> stauth=<auth uri> stuser=<user> stkey=<password> [skipchecksum=True|False] [deletelocalbackup=True|False] [remotebackup=enabled|disabled] [ossbackup=enabled|disabled <stauth=<auth uri>> <stuser=<user>> <stkey=<password>>] [skipimg=True|False] [materializedlocalcopy=True|False] [activeblockcommit=True|False] [clusterless=yes|no]
        or
        ./ecracli vmbackup install rackname=<rack_name> stauth=<auth uri> stuser=<user> stkey=<password> [skipchecksum=True|False] [deletelocalbackup=True|False] [remotebackup=enabled|disabled] [ossbackup=enabled|disabled <stauth=<auth uri>> <stuser=<user>> <stkey=<password>>] [skipimg=True|False] [materializedlocalcopy=True|False] [activeblockcommit=True|False] [clusterless=yes|no]

Note:
    If ossbackup is enabled, users will have to pass stauth, stuser & stkey as mandatory parameters.
    Use clusterless=yes for compute-only elastic racks
 
Purpose:
  Copy the vmbackup bits to dom0's, fails if the bits are already there

Arguments:
  Defaul values:
    skipchecksum=True
    deletelocalbackup=False
    remotebackup=disabled
    ossbackup=disabled
    skipchecksum=True
    skipimg=False
    materializedlocalcopy
    activeblockcommit

Example:
ecra> vmbackup install rackname=SEA203709 clusterless=yes
* {"status": 200, "op": "vmbackup_install_post", "status-detail": "success"}

ecra> vmbackup install rackname=iad103714exd-d0-03-04-cl-04-06-clu01
* {"status": 200, "op": "vmbackup_install_post", "status-detail": "success"}


schedulerstatus:

Description:
*Displays information on the status of the internal VMBackup Scheduler job and node states*

Arguments:
- exaunitid: Numeric value to limit the search for node states
- detailed: Only for ecracli use, will display the full response from ECRA API

Usages:
`ecra> vmbackup schedulerstatus [exaunitid=<> detailed=true]`

Examples:
<details>
    <summary>Get Status for exaunitid=626</summary>

ecra> vmbackup schedulerstatus exaunitid=626
* Property concurrent backup is not valid
VMBackupJob Job is not enabled
VMBackupStatusTrackerJob Job is not enabled
* VM_BACKUP_IN_PROGRESS: ['iad103709exddu0102', 'iad103709exddu0202',
'sea201610exddu0302']
* VM_BACKUP_COMPLETED: ['sea201610exddu0102']
* VM_BACKUP_SKIPPED_FOR_INFRAPATCHING: ['sea201610exddu0202']
* VM_BACKUP_ERROR: ['sea201610exddu0402']



schedulerhistory:

Description:
*Returns the history information about the given exaunitid*

Arguments:
- exaunitid: Numeric value to limit the search for node states
- page: Select which page to display
- pagesize: Limit how many items in a page

Usages:
`ecra> vmbackup schedulerstatus exaunitid=<> [page=1 pagesize=20]`

Examples:
<details>
    <summary>Get history for exaunitid=626</summary>

ecra> vmbackup schedulerhistory exaunitid=626 page=1 pagesize=2
* {
    "records": [
        {
            "id": "f6b6dab6-341f-43d4-b597-93304cd3461e",
            "backup_trigger_time": "2024-10-18T01:33:02+0000",
            "backup_complete_time": "2024-10-18T01:37:22+0000",
            "target_id": "sea201610exdd001",
            "rackname":
"iad1-d2-cl3-56c4816e-ddc5-4ce4-871d-b3c57ee8e92c-clu02",
            "vm_gold_backup": "ENABLED",
            "vm_oss_backup": "ENABLED",
            "tracker_last_update": "2024-10-18T01:37:22+0000",
            "tracker_retry_count": 1,
            "status": "VM_BACKUP_COMPLETED"
        },
        {
            "id": "92f78332-5975-4dab-b9e0-2ffa96c83f26",
            "backup_trigger_time": "2024-10-18T01:33:02+0000",
            "backup_complete_time": "2024-10-18T01:35:41+0000",
            "target_id": "iad103709exdd001",
            "rackname":
"iad1-d2-cl3-56c4816e-ddc5-4ce4-871d-b3c57ee8e92c-clu02",
            "vm_gold_backup": "ENABLED",
            "vm_oss_backup": "ENABLED",
            "tracker_last_update": "2024-10-18T01:35:41+0000",
            "tracker_retry_count": 1,
            "status": "VM_BACKUP_COMPLETED"
        }
    ],
    "status": 200,
    "op": "vmbackup_history_get",
    "status-detail": "success"
}



backup:
Usage : ecra> vmbackup backup [exaunitid=<exaunitid> | dom0=<dom0>]
        or
        ./ecracli vmbackup backup [exaunitid=<exaunitid> | dom0=<dom0>]

Purpose:
  Create a vm backup of all VM's.


Example:


status:
Usage : ecra> vmbackup status [exaunitid=<exaunitid> | dom0=<dom0>]
        or
        ./ecracli vmbackup status [exaunitid=<exaunitid> | dom0=<dom0>]

Purpose:
  Check the status of an ongoing backup operation

Arguments:
exaunitid: Exaunit Id if user requires to check the status on all dom0/domu of the cluster.
dom0: Single host status check.

Example:
 curl -u "u:p" http://ecra.com:9070/ecra/endpoint/vmbackup/backup/1/status?dom0=sea201602exdd001
{"status":200,"op":"vmbackup_action_post","status-detail":"success"}

ecra> vmbackup status dom0=sea201610exdd006
* {"backup": "Completed", "status": 200, "op": "vmbackup_action_get", "status-detail": "success"}





restore:
Usage : ecra> vmbackup rollback exaunitid=<exaunit_id> vmname=<vm_name> [backupseq=<>] [local=<>] [dest=<>]
        or
        ./ecracli vmbackup rollback exaunitid=<exaunit_id> vmname=<vm_name> [backupseq=<>] [local=<>] [dest=<>]

Purpose:
  Restore the specified VM.

Arguments:
  Defaul values:
    backupseq = 2
    local = local
    dest  = /EXAVMIMAGES/restore_vm

Example:


list:
Usage : ecra> vmbackup list rackname=<rack_name> [clusterless=yes|no]
        or
        ./ecracli vmbackup list rackname=<rack_name> [clusterless=yes|no]
        or
        ecra> vmbackup list exaOcid=<exa_ocid>
        or
        ./ecracli vmbackup list exaOcid=<exa_ocid>

Purpose:
  Get the list of the current backedup vms.

Arguments:
    rackname : Rack where the operation is to be performed 
    clusterless : yes for expansion cabinets
    exaOcid : Exadata Infrastructure where the operation is to be performed

Example:
ecra>  vmbackup list rackname=SEA203709 clusterless=yes
* {"status": 200, "op": "vmbackup_action_get", "status-detail": "success"}
* No details info.

ecra>  vmbackup list exaOcid=1
* {"status": 200, "op": "vmbackup_action_get", "status-detail": "success"}
* No details info.

osslist:
Usage : ecra> vmbackup osslist rackname=<rackname>
        or
        ./ecracli vmbackup osslist rackname=<rackname>

Purpose:
  Get the list of oss backups associated to a cluster

Arguments:
    rackname: rackname chosen

Example:
vmbackup osslist
ecra> vmbackup osslist rackname=iad1-d4-cl4-646df35a-90da-4182-9f96-df7b940378e9-clu01
*** Available Backups on: iad103716exdd001.iad103716exd.adminiad1.oraclevcn.com
 
Version : ECS_MAIN_LINUX.X64_230408.0900

---------------------------------------------------------------------
OSS Backup (On objectstorage.r1.oracleiaas.com)
---------------------------------------------------------------------
{
    "iad103716exddu0101-client1.domclient": [
        [
            "iad103716exddu0101-client1.domclient_SEQ1.tar",
            "2023-04-11-22-10-41"
        ],
        [
            "iad103716exddu0101-client1.domclient_SEQ2.tar",
            "2023-04-11-22-20-36"
        ]
    ]
}

ossrestore | ossdownload:
Usage : ecra> vmbackup download <exaunitid> <vmname> <seq> <destdir>
        or
        ./ecracli vmbackup download <exaunitid> <vmname> <seq> <destdir>

Purpose:
  Download a backup from oss to a chosen destination in the vm

Arguments:
    exaunitid: exaunit where the vm lives
    vmname: name of the vm
    seq: seq number representing a vm backup
    destdir: destionation path for the backup

Example:
vmbackup ossrestore

ecra> vmbackup download exaunitid=316 vmname=iad103716exddu0101-client1.domclient
seq=1 destdir=u01/tmp
* {'status': 202, 'status_uri':
'http://phoenix94112.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/16540835-e0dc-427c-afa5-4e6430c995fb',
'op': 'vmbackup_action_post', 'op_start_time': '2023-04-17T16:52:01+0000',
'est_op_end_time': '', 'message': 'processing', 'status-detail': 'processing'}


restorelocal 

Description:
*Restores a specific file system for a specific vm (domu)*

Arguments:
**exaunitid**: exaunit where the vm lives<br>
**vmname**: name of the vm<br>
**seq**: seq number representing a vm backup<br>
**image**: image to be restored, currently we support: u01, u02, System, grid, pv1_vgexadb<br>
**restartvm**: After the restore vm should restart, this can cause problems to the customer. We expect True|False<br>

Usages:
`vmbackup restorelocal <exaunitid> <vmname> <seq> [<image> <restart_vm>]`

Examples:
ecra> vmbackup restorelocal exaunitid=608 vmname=iad103709exddu0102-client1.data.customer2.oraclevcn.com seq=1 image=u02
* {'status': 202, 'status_uri': 'http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/b3a15410-52dc-48e3-a47c-5102b176b297', 'op': 'vmbackup_restore_post', 'op_start_time': '2024-05-28T23:05:20+0000', 'est_op_end_time': '', 'message': 'processing', 'status-detail': 'processing'}
ecra> status b3a15410-52dc-48e3-a47c-5102b176b297
* {"progress_percent": 0, "start_time": "2024-05-28T23:05:20+0000", "start_time_ts": "2024-05-28 23:05:20.0", "end_time": "2024-05-28T23:05:23+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2024-05-28T23:05:20+0000", "wf_uuid": "2f9a2da4-7e87-4a56-bdac-0a2a9cbf0da3", "status": 200, "message": "Done", "op": "vmbackup_restore_post", "completion_percentage": 0, "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/b3a15410-52dc-48e3-a47c-5102b176b297", "status-detail": "success"}
ecra> workflows describe workflowId=2f9a2da4-7e87-4a56-bdac-0a2a9cbf0da3
* {
    "workflowName": "vmbackup-restore-wfd",
    "workflowId": "2f9a2da4-7e87-4a56-bdac-0a2a9cbf0da3",
    "workflowStatus": "Completed",
    "workflowStartTime": "28 May 2024 23:05:20 UTC",
    "workflowEndTime": "28 May 2024 23:05:23 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "RestoreBackup",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Tue May 28 23:05:20 UTC 2024",
            "taskEndTime": "Tue May 28 23:05:23 UTC 2024",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:03"
        },
        {
            "taskName": "PostBackup",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Tue May 28 23:05:23 UTC 2024",
            "taskEndTime": "Tue May 28 23:05:23 UTC 2024",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "PostBackup",
            "lastOperationDetails": {
                "lastTaskLastOperationId": "9d282c40-f6eb-4c3b-9452-99040d707674",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "28 May 2024 23:05:23 UTC",
                "lastTaskLastOperationEndTime": "28 May 2024 23:05:23 UTC"
            }
        }
    ],
    "workflowElapsed": "00:00:03",
    "workflowRuntime": "00:00:03",
    "exaOCID": "",
    "requestId": "b3a15410-52dc-48e3-a47c-5102b176b297",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}


restorepath:

Description:
*After  a complete workflow operation for restorelocal or download operation this is use to get the location of the backup objects*

Arguments:
- <Status UUID> : Status UUID or Request Id for the original restorelocal or download operation

Usages:
`vmbackup restorepath <status uuid>`

Examples:

```
ecra> vmbackup restorepath 2eacbd44-95fc-4694-9157-2b2dac166839
* {
    "status": 200,
    "type": "vmbackup_restore_post",
    "location": "/EXAVMIMAGES/Restore/222a5d70-4a0a-11ef-8652-020017013570",
    "op": "vmbackup_restorepath_get",
    "status-detail": "success"
}
```

configurecronjob:
Usage: ecra> vmbackup configurecronjob hostname=<hostname> action=<enable/disable>
        or ./ecracli vmbackup configurecronjob hostname=<hostname> action=<enable/disable>

Purpose:
    Enables/disables vmbackup cronjob on the compute node

Arguments:
    hostname: hostname of the compute host
    action: enable or disable

Example:
ecra> vmbackup configurecronjob hostname=iad103494exdd005 action=enable
* {
    "status": 202,
    "status_uri": "http://ashburn176989.dev2sub1iad.databasede2iad.oraclevcn.com:9015/ecra/endpoint/statuses/dd258b86-b899-4580-9921-e3fba51e52ca",
    "op": "vmbackup_cronjob_put",
    "op_start_time": "2024-09-18T02:02:16+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

suconfig :
Usage : ecra> vmbackup suconfig <user> <tenancy> <fingerprint> <region> [keyfile | keycontent]
        or
        ./ecracli vmbackup suconfig <user> <tenancy> <fingerprint> <region> [keyfile | keycontent]

Purpose:
  Stores superuser to be used in vmbackup to oss

Arguments:
    user: superuser ocid
    tenancy: admin tenancy ocid
    fingerprint: fingerprint
    region: region
    keyfile | keycontent: path of key file or key content

Example:
vmbackup suconfig

ecra> vmbackup suconfig user=ocid1.user.region1..aaaaaaaarztjjzuesnysc5onko3ntargsc3jfaos6lnutztene4x6ekrgzyq fingerprint=a6:94:26:97:c5:4c:fc:ff:c0:7e:ca:ea:b9:28:d9:c2 tenancy=ocid1.tenancy.oc1..aaaaaaaajl3p2iquu45w7kfydtigbkmwcoshrlyxjjv5yn3deux3fa6cyxda key_file=/opt/oracle/vmbackup/ociconf region='us-seattle-1'
* {'superuser': 'ocid1.user.region1..aaaaaaaarztjjzuesnysc5onko3ntargsc3jfaos6lnutztene4x6ekrgzyq', 'fingerprint': 'a6:94:26:97:c5:4c:fc:ff:c0:7e:ca:ea:b9:28:d9:c2', 'tenancy': 'ocid1.tenancy.oc1..aaaaaaaajl3p2iquu45w7kfydtigbkmwcoshrlyxjjv5yn3deux3fa6cyxda', 'key': '/opt/oracle/vmbackup/ociconf', 'key_field_type': 'file', 'status': 200, 'op': 'notset', 'status-detail': 'success'}

hardware:
properties:
Usage: ecra> properties_hardware [racksize] [model]
       or
       hardware properties [racksize] [model]
       or
       ./ecracli properties_hardware [racksize] [model]
	example: ecra> properties_hardware racksize=FULL model=X5-2

Purpose:
 Gets the hardware properties information.

Example:
ecra> properties_hardware
* {
    "status": 200, 
    "status-detail": "success", 
    "racks": [
        {
            "maxCoresPerNode": "22", 
            "racksize": "QUARTER", 
            "minSubCoresPerNode": "8", 
            "minPaasCores": "1", 
            "numOfComputes": 2, 
            "racktype": "QUARTER Rack X4-2", 
            "model": "X4-2"
        }, 
        {
            "maxCoresPerNode": "22", 
            "racksize": "HALF", 
            "minSubCoresPerNode": "8", 
            "minPaasCores": "1", 
            "numOfComputes": 4, 
            "racktype": "HALF Rack X4-2", 
            "model": "X4-2"
        }, 
        {
            "maxCoresPerNode": "22", 
            "racksize": "FULL", 
            "minSubCoresPerNode": "8", 
            "minPaasCores": "1", 
            "numOfComputes": 8, 
            "racktype": "FULL Rack X4-2", 
            "model": "X4-2"
        }, 

.......
    ], 
    "op": "zones_get"
}

hardware configurefeaturetenancy

Usage

hardware configurefeaturetenancy tenancyid=<comma separated values> feature=<ALL|VMBOSS> value=<ENABLED|DISABLED>
 Update configured features in the tenancy(tenancies) selected

Samples 

Error cases

ecra> hardware configurefeaturetenancy
* Error: Please provide all mandatory parameters. Missing mandatory parameters are: ['tenancyid', 'feature', 'value']
ecra> hardware configurefeaturetenancy tenancyid=tenancy.ocid1 feature=VMBOSS value=ENABLED
* Error: Available features are: ['vmboss']


Enable property
ecra> hardware configurefeaturetenancy tenancyid=tenancy.ocid1 feature=vmboss  value=ENABLED
* {
    "status": 200,
    "op": "tenancy_configure_feature_vmboss",
    "status-detail": "success"
}
ecra>


List property

ecra>  hardware tenancypropertylist
* {
    "tenancyproperties": [
        {
            "user_group": "EXACS",
            "tenancy_id": "__default_tenancy__",
            "cloud_vnuma": "enabled_with_dom0_overlap",
            "memoryconfig": "STANDARD",
            "EARLY_ADOPTER": "N",
            "skipresizedg": "no"
        },
        {
            "user_group": "ADB-S",
            "tenancy_id": "tenancy.ocid1",
            "cloud_vnuma": "disabled",
            "jumbo_frames": "both",
            "memoryconfig": "standard",
            "EARLY_ADOPTER": "N",
            "skipresizedg": "no",
            "configured_features": "ALL,VMBOSS"
        }
    ],
    "status": 200,
    "op": "tenancy_property_get",
    "status-detail": "success"
}
ecra>

Disable property


ecra> hardware configurefeaturetenancy tenancyid=tenancy.ocid1 feature=vmboss  value=DISABLED
* {
    "status": 200,
    "op": "tenancy_configure_feature_vmboss",
    "status-detail": "success"
}
ecra>
ecra>

List

ecra>  hardware tenancypropertylist
* {
    "tenancyproperties": [
        {
            "user_group": "EXACS",
            "tenancy_id": "__default_tenancy__",
            "cloud_vnuma": "enabled_with_dom0_overlap",
            "memoryconfig": "STANDARD",
            "EARLY_ADOPTER": "N",
            "skipresizedg": "no"
        },
        {
            "user_group": "ADB-S",
            "tenancy_id": "tenancy.ocid1",
            "cloud_vnuma": "disabled",
            "jumbo_frames": "both",
            "memoryconfig": "standard",
            "EARLY_ADOPTER": "N",
            "skipresizedg": "no",
            "configured_features": "ALL,-VMBOSS"
        }
    ],
    "status": 200,
    "op": "tenancy_property_get",
    "status-detail": "success"
}
ecra>

tenancypropertylist:
Usage: ecra> hardware tenancypropertylist

Purpose:
 Gets the records from the cloud vnuma tenancy information

Example:
ecra> hardware tenancypropertylist
* {
    "tenancyproperties": [
        {
            "user_group": "EXACS",
            "tenancy_id": "__default_tenancy__",
            "cloud_vnuma": "enabled_with_dom0_overlap",
            "memoryconfig": "STANDARD"
        },
        {
            "user_group": "ADB-S",
            "tenancy_id": "tenancy.ocid1",
            "cloud_vnuma": "disabled",
            "jumbo_frames": "both",
            "memoryconfig": "STANDARD"
        },
        {
            "user_group": "ADB-S",
            "tenancy_id": "tenancytest",
            "jumbo_frames": "both",
            "memoryconfig": "LARGE",
            "skipresizedg": "no"
        }
    ],
    "status": 200,
    "op": "tenancy_property_get",
    "status-detail": "success"
}


tenancypropertyput:
Usage: ecra> hardware tenancypropertyput user_group=<user_group> tenancy_id=<tenancy_id> cloud_vnuma=<cloud_vnuma> jumbo_frames=<jumbo_frames> skipresizedg=yes | no memoryconfig=large | extralarge | standard [ customids=true | false usersdata=<user 1>:<uid>|<user N>:<uid> groupsdata=<group name 1>:<gid>|<group name N>:<gid>

Purpose:
 Adds a record to the cloud vnuma tenancy database

Example:
ecra> hardware tenancypropertyput user_group=my_user_grp tenancy_id=test_tenancy23 cloud_vnuma=test_vnuma jumbo_frames=both memoryconfig=large customids=true usersdata=oracle:100|grid:200 groupsdata=oinstall:5000|asmcustom:6000
* {
    "status": 200,
    "op": "tenancy_property_post",
    "status-detail": "success"
}

tenancypropertydel:
Usage: ecra> hardware tenancypropertydel tenancy_id=<tenancy_id>

Purpose:
 Deletes a record to the cloud vnuma tenancy database

Example:
ecra> hardware tenancypropertydel tenancy_id=my_tenancy
* {
    "status": 200,
    "op": "tenancy_property_delete",
    "status-detail": "success"
}


userconfig:
create_user:
Usage : ecra> userconfig create_user user=<username> password=<password> exaunit_id=<exaunit_id>
        or
        ./ecracli userconfig create_user user=<username> password=<password> exaunit_id=<exaunit_id>

Purpose:
  Creates a user-password on the cells corresponding to the cluster (exaunit_id)

Example:
  ecracli> userconfig create_user user=bcde password=Cqwertyuiop12 exaunit_id=kjs
  {u'Status': u'Pass', u'cell': {u'slcs08celadm09.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcs08celadm07.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcs08celadm08.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}}, u'Log': u'Create user command succeeded', u'status-detail': u'success', u'ErrorCode': u'0', u'status': 200, u'Command': u'create user', u'op': u'userconfig_set'}

alter_user:
Usage : ecra> userconfig alter_user user=<username> password=<password> exaunit_id=<exaunit_id>
        or
        ./ecracli userconfig alter_user user=<username> password=<password> exaunit_id=<exaunit_id>

Purpose:
  Alters a user-password on the cells corresponding to the cluster (exaunit_id)

Example:
  ecracli> userconfig create_user user=bcde password=Cqwertyuiop12 exaunit_id=kjs
  {u'Status': u'Pass', u'cell': {u'slcs08celadm09.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcs08celadm07.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcs08celadm08.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}}, u'Log': u'Create user command succeeded', u'status-detail': u'success', u'ErrorCode': u'0', u'status': 200, u'Command': u'alter user', u'op': u'userconfig_set'}

grant_role:
Usage : ecra> userconfig grant_role role=<role> user=<username> exaunit_id=<exaunit_id>
        or
        ./ecralci userconfig grant_role role=<role> user=<username> exaunit_id=<exaunit_id>

Purpose:
  Grants a role to a user corresponding to the cluster (exaunit_id) 

Example:
  ecracli> userconfig grant_role role=abcd_role user=abcde exaunit_id=kjs
  {u'Status': u'Pass', u'cell': {u'slcs08celadm09.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcs08celadm07.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}, u'slcs08celadm08.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': [u'Command successful']}}, u'Log': u'Grant role command succeeded', u'status-detail': u'success', u'ErrorCode': u'0', u'status': 200, u'Command': u'grant role', u'op': u'userconfig_set'}


list_user:
Usage : ecra> userconfig list_user exaunit_id=<exaunit_id>
        or
        ./ecracli userconfig list_user exaunit_id=<exaunit_id>

Purpose:
  Lists the users which can access the cells.

Example:
  ecracli> userconfig list_user exaunit_id=lskdfj
  {"Status": "Pass", "cell": {"slcs08celadm09.usdv1.oraclecloud.com": {"errorCode": "0", "Users": ["cloud_user", "deep"], "log": ["Command successful"]}, "slcs08celadm07.usdv1.oraclecloud.com": {"errorCode": "0", "Users": ["cloud_user"], "log": ["Command successful"]}, "slcs08celadm08.usdv1.oraclecloud.com": {"errorCode": "0", "Users": ["cloud_user"], "log": ["Command successful"]}}, "Log": "List user command succeeded", "status-detail": "success", "ErrorCode": "0", "status": 200, "Command": "list user", "op": "userconfig_get", "Users": ["cloud_user", "deep"]}

delete_user:
Usage : ecra> userconfig delete_user exaunit_id=<exaunit_id> user=<username>
        or
        ./ecracli userconfig delete_user exaunit_id=<exaunit_id> user=<username>

Purpose:
  Delete a given username from all cells.

Example:
  ecracli> userconfig delete_user exaunit_id=lskdfj user=<username>
  {u'Status': u'Pass', u'cell': {u'slcs08celadm09.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': u"[u'User cloud_user_slcs856-clu-855 successfully dropped.\\n']"}, u'slcs08celadm07.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': u"[u'User cloud_user_slcs856-clu-855 successfully dropped.\\n']"}, u'slcs08celadm08.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': u"[u'User cloud_user_slcs856-clu-855 successfully dropped.\\n']"}}, u'Log': u'Delete user command succeeded', u'status-detail': u'success', u'ErrorCode': u'0', u'status': 200, u'Command': u'drop user', u'op': u'userconfig_update'}

delete_role:
Usage : ecra> userconfig delete_role exaunit_id=<exaunit_id> role=<role>
        or
        ./ecracli userconfig delete_role exaunit_id=<exaunit_id> user=<role>

Purpose:
  Delete a given role from all cells.

Example:
  ecracli> userconfig delete_role exaunit_id=lskdfj user=<role>
  {u'Status': u'Pass', u'cell': {u'slcs08celadm09.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': u"[u'Role cloud_role successfully dropped.\\n']"}, u'slcs08celadm07.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': u"[u'Role cloud_role successfully dropped.\\n']"}, u'slcs08celadm08.usdv1.oraclecloud.com': {u'errorCode': u'0', u'log': u"[u'Role cloud_role successfully dropped.\\n']"}}, u'Log': u'Delete role command succeeded', u'status-detail': u'success', u'ErrorCode': u'0', u'status': 200, u'Command': u'drop role', u'op': u'userconfig_update'}

ATP:
getDetails:
Usage: ./ecracli getDetails_atp <dbSystemId=ID>

Purpose:
    Get ATP network details for a given a dbSystemID

Arguments:
    dbSystemId : dbSystemID passed from DbaaS CP

Examples:
ecra> getDetails_atp dbSystemId=1
* {"dsl_ocid": "test", "cust_region": "region1", "subnet_ocid": "test", "dbsystem_id": "1", "custTenantId": "1234", "shape": "quarter", "subnet_cidr": "test", "rackname": "test", "vnics": [{"macaddress": "test1", "vnicprivateip": "test1", "scan_hostname": "test1", "vnic_ocid": "test1", "vnic_hostname": "test1", "scanip": "test1", "vnic_nodevip": "test1", "subnet_fdqn": "test", "vip_hostname": "test1", "vmname": "vm1"}, {"macaddress": "test2", "vnicprivateip": "test2", "scan_hostname": "test2", "vnic_ocid": "test2", "vnic_hostname": "test2", "scanip": "test2", "vnic_nodevip": "test2", "subnet_fdqn": "test", "vip_hostname": "test2", "vmname": "vm2"}], "cust_ad": "bar"}

getNetwork:
Usage: ./ecracli getNetwork <dbSystemId=ID> [shape=observer]

Purpose:
     Get the subnet OCID for a given dbSystemID for ATP network.

Arguments:
    dbSystemId : dbSystemID passed from DbaaS CP
    shape      : indicates the shape of the subnet, used when observer is
    passed.

Examples:
ecra> getNetwork_atp dbSystemId=1
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/atp/networks/mgmt/1
* {"SubnetOCID":
* "ocid1.subnet.oc1.phx.aaaaaaaat2yu6ngnutza3sihfgsydqdwmehkroiieiiqtmgnbnh46cgwxjia"}

ecra> atp getNetwork dbSystemId=10 shape=observer
* {"status": 200, "status-detail": "success", "management_subnet_ocid":
* "ocid1.subnet.oc1.iad.aaaaaaaasvffivl2ufeh46dawitzcn4ttke7rx3fhj3t6ycuiq2dyt67iyoq",
* "op": "atp_mgmt_network_get"}

bootstrap:
Usage: ./ecracli atp bootstrap <json_path=filepath>

Purpose:
     Sets some of the ecs_properties that are needed in ATP before ingestTerraform API is called.

Arguments:
    json_path  : A json file that has certain ecs_properties.

Examples:
ecra> atp bootstrap json_path=/scratch/rgmurali/ecra_installs/exawatcher/ecracli/tmpl/atpbootstrap.json
* {"status": 200, "status-detail": "success", "op": "atp_mgmt_bootstrap_post"}

Notes:
The sample json is stored in /tmpl directory with the name atpbootstrap.json. A sample file:
{
    "ATP_REGION" : "us-ashburn-1",
    "ATP_ADNAME" : "eGJB:US-ASHBURN-AD-1",
    "KMS_DP_ENDPOINT" :"abc",
    "KMS_KEY_ID" : "abc"
}

createOciUrlMap:
Usage: ./ecracli atp createOciUrlMap <json_path=filepath>

Purpose:
     Sets the OCI Realm & domain information in ECRA. It can be used to update a value as well.

Arguments:
    json_path  : A json file that has the OCI URL mappings.

Examples:
ecra> atp createOciUrlMap json_path=/scratch/rgmurali/ecra_installs/exawatcher/ecracli/tmpl/ociregionurlmap.json
* {"status": 200, "status-detail": "success", "op": "atp_mgmt_ociurlmap_post"}

Notes:
The sample json is stored in /tmpl directory with the name ociregionurlmap.json. A sample file:
[
    {   
        "realm": "OC3", 
        "realmdomain": "oraclegovcloud.com"
    }   
]

getOciUrlMap
Usage: ./ecracli getOciUrlMap realm=<realmname>

Purpose:
     Gets the OCI realm & domain in ECRA for a particular realm.

Arguments:
    realm  : The realm name.

Examples:
ecra>  atp getOciUrlMap realm=OC1
* {
    "urlmapping": [
        {
            "realm": "OC1", 
            "realmdomain": "oraclecloud.com"
        }
    ]
}

getOciUrlMapAll
Usage: ./ecracli getOciUrlMapAll

Purpose:
    Gets the OCI realm & domain in ECRA for all realms.

Arguments:
    None

Examples:
ecra> atp getOciUrlMapAll
* {
    "urlmapping": [
        {
            "realm": "OC1", 
            "realmdomain": "oraclecloud.com"
        }, 
        {
            "realm": "OC2", 
            "realmdomain": "oraclegovcloud.com"
        }, 
        {
            "realm": "OC3", 
            "realmdomain": "oraclegovcloud.com"
        }, 
        {
            "realm": "OC4", 
            "realmdomain": "oraclegovcloud.uk"
        }, 
        {
            "realm": "OC5", 
            "realmdomain": "oracleonsrcloud.com"
        }, 
        {
            "realm": "OC6", 
            "realmdomain": "oracleonsrcloud.com"
        }, 
        {
            "realm": "OC7", 
            "realmdomain": "oracleonsrcloud.com"
        }, 
        {
            "realm": "OC8", 
            "realmdomain": "oraclecloud8.com"
        }, 
        {
            "realm": "R1_ENVIRONMENT", 
            "realmdomain": "oracleiaas.com"
        }
    ]
}

listCustomerTenancy:
Usage: ./ecracli atp listCustomerTenancy [dbsystem_id=value]

Purpose:
     List database records from the table ecs_atpcustomertenancy

Arguments:
     Optional [dbsystem_id=value], if no parameter is set then all records are shown.

Examples:
ecra> atp listCustomerTenancy
* {
    "dbsysteminfo": [
        {
            "dbsystem_id": "1",
            "cloud_account_id": "1",
            "tenancy_name": "test1",
            "tenancy_ocid": "ocid1",
            "creation_time": "2020-10-15 01:39:42.302",
            "rackname": "iad103714exd-d0-05-06-cl-07-09-clu01",
            "atp": "N",
            "compartment_id": "1"
        }
    ]
}

putCustomerTenancy:
Usage: ./ecracli putCustomerTenancy <dbsystem_id=value> [cloud_account_id=value], [tenancy_name=value], [tenancy_ocid=value], [racknamevalue], [compartment_id=value]

Purpose:
     Add a register with the specified values to the ecs_atpcustomertenancy table. If the record with the dbsystem_id exists then it is updated.

Arguments:
     <dbsystem_id=value> [cloud_account_id=value], [tenancy_name=value], [tenancy_ocid=value], [racknamevalue], [compartment_id=value]

Example:
ecra>  atp putCustomerTenancy dbsystem_id=1 cloud_account_id=1 tenancy_name=test1 tenancy_ocid=ocid1 rackname=iad103714exd-d0-05-06-cl-07-09-clu01  compartment_id=1
* {
    "status": 200,
    "op": "atp_customer_tenancy_post",
    "status-detail": "success"
}

deleteCustomerTenancy:
Usage: ./ecracli deleteCustomerTenancy <dbsystem_id=value>

Purpose:
     Deletes a record from the ecs_atpcustomertenancy dabase table. If it required to specify the id of the record.

Arguments:
     <dbsystem_id=value> id of the record to delete.

Example:
ecra> atp deleteCustomerTenancy dbsystem_id=1
* {
    "status": 200,
    "op": "atp_customer_tenancy_delete",
    "status-detail": "success"
}

createPreprovExadataInfrastructure
    Ussage: 
        atp createPreprovExadataInfrastructure [rackname=<RACKNAME>]
            Values:
                RACKNAME   :  The rack with the infrastructure will be created based on the model
    Purpose: 
        Create a preprov exadata infrastructure based on the provided model
    Examples:
        ecra> atp createPreprovExadataInfrastructure rackname='sea201109exd-d0-01-02-cl-01-03-clu01'
        * {
            "status": 200,
            "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/0b16ea5c-76e1-4ad3-8706-47e5761417aa",
            "op": "exadata_infrastructure_preprov_post",
        ....

        ecra> atp createPreprovExadataInfrastructure rackname='slcqab02adm0506clu6'
        * {
            "status": 200,
            "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/944e1657-0675-4cc6-9ac0-cc417a52f735",
            "op": "exadata_infrastructure_preprov_post",
        ...
registerVnic:
Usage: ./ecracli registerVnic_atp <json_path=filepath>

Purpose:
     Register the VNIC OCID for a given dbSystemID for ATP network.

Arguments:
    json_path  : A json file that has dbSystemId and vnics info

Examples:
ecra> registerVnic_atp json_path=/home/rgmurali/vnic.json
* {"Result": "Vnic information saved successfully"}

Notes:
Content of vnic.json:
{
  "dbSystemId" : "123",
  "vnics" : [ 
             {   
               "vnic_ocid" : "oci.vnic.phx.ocid1",
               "vmname" :"slcqab02adm05vm01"
             },  
             {   
               "vnic_ocid" : "oci.vnic.phx.ocid2",
               "vmname" :"slcqab02adm06vm01"
             }   
           ]   
}

getVnicDetails:
Usage: ./ecracli atp getVnicDetails <dbSystemId=ID>

Purpose:
    Get ATP vnic details for a given a dbSystemID

Arguments:
    dbSystemId : dbSystemID passed from DbaaS CP
    
Examples:
ecra> atp getVnicDetails dbSystemId=2
* {"dbSystemId": "2", "vnics": [{"vnicdnsname": "sea2220c1bk1.devsnetbc1220.ociteamvcn.oraclevcn", "vip": "172.16.0.12", "vnic_ocid": "ocid1.vnic.oc1.sea.abzwkljsbdtbfduh5yijgmhtk4cm4b2mxfsdjnr4ffl6moosuqr2y2mcpuoa", "vmname": "sea2220c1bk1", "vipname": "sea2220c1bk1-vip"}, {"vnicdnsname": "sea2220c1bk2.devsnetbc1220.ociteamvcn.oraclevcn", "vip": "172.16.0.13", "vnic_ocid": "ocid1.vnic.oc1.sea.abzwkljsgodtbpx5r344okgmu65o5wmvnhlltsdu75c44aqoo7xmsupzovra", "vmname": "sea2220c1bk2", "vipname": "sea2220c1bk2-vip"}], "scan": [{"scanip": "172.16.0.14", "scanname": "sea2220c1bk-scan1"}]}


registerVcnDetails:
Usage: ./ecracli registerVcnDetails_atp <json_path=filepath>

Purpose:
     Register the VCN details and various components installed in the OM VCN
     with ECRA database. Terraform passes this information.

Arguments:
    json_path  : A json file that has OM VCN details and its components
    information.

Examples:
ecra> registerVcnDetails_atp json_path=/home/rgmurali/service.json
* {"status": 200, "status-detail": "success", "op": "atp_register_omvcn_set"}

Notes:
Contents of service.json
{
  "Identity":
  {
    "tenancy_ocid": "ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq",
    "region": "us-ashburn-1",
    "compartment_ocid": "ocid1.compartment.oc1..aaaaaaaab3oi5umdcm4r6mli2t5ojwe2qv3jonjkpi5ksoqzxenweibm5kca",
    "user_ocid": "ocid1.user.oc1..aaaaaaaac7prwhuedf2k5mmvsnvcnkp5rsfnornp6bptgyg3hztttccuvqia",
    "fingerprint": "b5:7c:be:07:09:06:4f:93:8d:70:2e:40:25:ca:48:5c",
    "private_key_path": "/home/rmallego/.oci/oci_api_key.pem",
    "private_pem_key": "-----BEGIN RSA PRIVATE
    KEY-----\nMIIEpQIBAAKCAQEAtpwm0ysks+9k72lkkASo5kU6vp/uMPNFxR/zmtznk8ABqsuW\n6j+J3lnGjPdg0NO4L0qAW1qTgND5L5TqBoAH3QoUL2K5uMp+OL2ONNsNmcN3Cv/g\naU0sTjTEkw/OJILDkRwdKxJsvao2mCDLp1UuxrxVJo+ULiCwUHGmr203oo8k/vlx\nQG+1FukaW6aV2OYyjH7YCymt+aL1U5889nYt406+IBZcDiIWKx0bPIFBlKYAMylz\negrZg5wtvwkBnRv56DWpXCDOgTK9GAQzW4cZq80g4L+oWPakraS3qGyA0jl7q0b7\ncr6jrBQ34D7eSNwKL7SHGKOcbIGJ3Br+Qa6UoQIDAQABAoIBACza2maQeGmCakas\nmrkNi/dUFgPxAO8hMogjOxFVJcUTKtWrQJy1ksX9Q1opAa0J9HoZUMIf04+WxT68\n02dZV5Uh/qdNFtWfV7XUSfQNwp98dedLxvHWtQVYzNhaz4YEYMlqIHgOBIvqHZLs\nq1mlAOJsLHZWWk2iVezMnecFat8Q4/k41KKv2cRsspu78W4wDaherjVcsKfMH8f8\nTHMeHeeJ+iabAYNB0r+2emnCUqFW52il3Z5GIMf0edUBqrXYzQJFNw3LB0mVtVwz\nq29q6BF28RjB9rSP7aMRldljmsC/IblEaYcJgJrq7BnEaUqoTIdROWW9+G8bvDGW\nB28AuGECgYEA4D/ne/I2eKovd8ZRMsw1Rl6E1euAhTkg53QwJV5+/R4u1BreOzKK\nxVEs+Yo2nZJX8JbfmoKSf+zGN2LpzW6esxv9d0IfAMZ6nhBVAcaV881vI/p8KbFu\nqK4usaiiGuBvQWJg/1hjrhdlENQsV5nLXprlMhvItRGhPh2TP28SB5UCgYEA0Hb8\nnoRRBONyT7lUCFbOL5FtEf5o+d0GXtjZWK0jiuEtwRwRnEH7iK1DliGpYdPolyve\nX6Ctgu9EG2vPUE4cixknGGMP8JP/GGp8mO5vtX62fikZ7xPRWxRekYNYeEI6JIYO\nvxPZxbURw6UcXm7rqXTZf487jpHNEJju13SPpd0CgYEAvuGGgDmfZjyu5Qw5R70N\nSBXiiljI8B29xWZgKR7zhy9u+vrX2ZnfB7BeURb2AFB2bINwWAv2+c8otjKLA2O6\n0IjtytrMmxNXgj4yra1FLN7cUMrBb5fpssl5U55QRgJukUBVgmTRjHm7fISuLe7q\nbl/44htGT+Ju1vnDwgYgWbUCgYEAvRpSypEI1cBlX8CkY/QqkagAIwR/wbkoID3h\n27kjtsXRtY16xB5uyGs0Fipu9pk+MnPPAzxEabQWOjGwHA7fgabNeifSu8/k5gcj\nA6+3khJiBUvPhLqbfV2a87EMPfsFt0AMfHTLZbd9Z9aNR3SjPlMLQdVylz/Xn6i7\ncKMB89kCgYEAwIq+s0vOxNZ1i2jUYwZmGOeQAPrec2seSb3FV2qmS/xjzgByI42g\nysHPurYNJUbj/R3Bt7e8o4zr5b0P2wyFtypB+r+2gDNk1baK7ETpcCBvm1x74jjM\nDlYbP9oFrb+TBmpDzz9H93FOaAHm4DX59LS8+BpG2s6CdsCi+jXxfH4=\n-----END
    RSA PRIVATE KEY-----"
  },
  "Network":
  {
    "MGMT_VCN":
    
      {
        "id": "ocid1.vcn.oc1.iad.aaaaaaaa54lrsucqjhiwpn6moqlfuawcm2xwjs4mgsdazybo7u2jnz2oy52a",
        "cidr_block": "192.168.0.0/24"
      },
    "ADMIN_AD1_VCN":
    [
      
    ],
    "ADMIN_AD2_VCN":
    [
      
    ],
    "ADMIN_AD3_VCN":
    [
      
    ],
    "MGMT_ROUTE_TABLE":
    [
      {
        "id": "ocid1.routetable.oc1.iad.aaaaaaaafkrpfyc57lpfewivaq6g23txn4qwf6jk27tiw7snnuxldci6ax3q"
      }
    ],
    "MGMT_INTERNET_GATEWAY":
    [
      {
        "id": "ocid1.internetgateway.oc1.iad.aaaaaaaanfx2yyo3r32pgeu3abzj726ilyiocsfc6lfxhfsx2wjyjvqshxua"
      }
    ],
    "MGMT_TO_ADMIN_AD1_LPG_GATEWAY":
    [
      
    ],
    "MGMT_TO_ADMIN_AD2_LPG_GATEWAY":
    [
      
    ],
    "MGMT_TO_ADMIN_AD3_LPG_GATEWAY":
    [
      
    ],
    "ADMIN_AD1_TO_MGMT_LPG_GATEWAY":
    [
      
    ],
    "ADMIN_AD2_TO_MGMT_LPG_GATEWAY":
    [
      
    ],
    "ADMIN_AD3_TO_MGMT_LPG_GATEWAY":
    [
      
    ],
    "ADMIN_AD1_ROUTE_TABLE":
    [
      
    ],
    "ADMIN_AD2_ROUTE_TABLE":
    [
      
    ],
    "ADMIN_AD3_ROUTE_TABLE":
    [
      
    ],
    "TFA_WEB_SEC_LIST":
    [
      {
        "id": "ocid1.securitylist.oc1.iad.aaaaaaaaulgfb3h5pi5rlfkot4veqfcybb4x2qgkj5ehflewwvvkjzjqjdga"
      }
    ],
    "TFA_DB_SEC_LIST":
    [
      {
        "id": "ocid1.securitylist.oc1.iad.aaaaaaaatb5cpwfuvdv7ihhxha7fqs6s65eok34ayhwwcj5ct5x4a2qkp7ea"
      }
    ],
    "EM_AGENT_SEC_LIST":
    [
      {
        "id": "ocid1.securitylist.oc1.iad.aaaaaaaawaui7hdiltfyvu4s5wo5trr727d6njr6hqygrwpod5d2lylxibeq"
      }
    ],
    "TFA_WEB_SUBNET":
    [
      {
        "id": "ocid1.subnet.oc1.iad.aaaaaaaaqgaxv3ps5ilczo2c5onosyssgqyxabk5dyvcbfttvgrmpwcufvtq",
        "": "eGJB:US-ASHBURN-AD-1",
        "cidr_block": "192.168.0.0/29"
      }
    ],
    "TFA_DB_SUBNET":
    [
      {
        "id": "ocid1.subnet.oc1.iad.aaaaaaaadbcrze6sjou6f5tmtwm443kfnoodfjzm4urbkxht6y53l3tjwewa",
        "availability_domain_name": "eGJB:US-ASHBURN-AD-1",
        "cidr_block": "192.168.0.16/29"
      }
    ],
    "EM_AGENT_SUBNET":
    [
      {
        "id": "ocid1.subnet.oc1.iad.aaaaaaaams5yay7eb3nx2rjj4cz5ao4igj5mtf74rqx3g4bg27qs6s6xygwa",
        "availability_domain_name": "eGJB:US-ASHBURN-AD-1",
        "cidr_block": "192.168.0.48/29"
      }
    ],
    "MGMT_CUST_SUBNET_SEC_LIST":
    [
      {
        "id": "ocid1.securitylist.oc1.iad.aaaaaaaa2fixcfdxa5i3mtedlrd5wzyia6lxew4dle4m3pwegak534xnkzqq"
      }
    ]
  },
  "Resources":
  {
    "TFA_DB":
    [
      {
        "public_ip": "129.213.87.44",
       "private_ip": "192.168.0.18",
       "id": "ocid1.instance.oc1.iad.abuwcljrjpi3xtqwtwdl3ch76ugnby2mq4hjsqanqkdednmkj3zugpfwouka",
       "hostname": "HostTFADB1",
       "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAuaHxNjxdORVRx6z70DK6dP1UYfadePhYpnoy0NtQo7V/HiEK\ndy5111nCdnXMYyvaMlCyeeOhG2fO0mk4NK+xSgFxHJ/UG7moiBrig73ovUXavOdV\nfJn5o/173AmgxKGw3G6X5K9ZOnNQ66VVo5VTfG29D9iSGcxCq6orUbjJ9tUNE2jo\na5/kkFAXUA6n+HE+8VDAkUg0apulMdOW9PBXv1VVbgRSbOMniKV+q4KSSm/xaPPV\nHcSoEv0NuLmtw1VHqAMvC534pOXVsyWv48cWUl3inXHRA2kQDXpYEFvY0JbLz5MV\njDRIu0HV8sGqUUiWrACyobxI409P8G9TMcg/fQIDAQABAoIBADIO+qYehyEin6gR\n/OH7HA76VawJPhPmHLngEB4EVm2fPwVX8aOMEtkc6nTZdWF07OVOn6KBAOwMBVj2\naOLEUjHby63lZ+SGH218moLeTonj8YWpeIMeXpSbgbAnpIQB+linNizEIHLDsBmr\nvzlaxmWyjh5cz6FHVN9IB2CFTWlTOxl2YbcQG/RbfGWldTOM0JohBSRzXPQOPUsz\nGW85p5MA7xtep4axObxBwDcPLr2R86unQ08Z7/X23GKtvVNjZv7jcMLekc5E+G/O\n/p2SNrWHWO71SUBl3qEkYz4GAa6H/b7Q4nY0jWbQs5D9bTIRYmM54gIa1lq5b/pH\nI4ol3oECgYEA3biE/LHsylW/DXBZYQsO1bXYYBJwaneUlGMy+E6vndszSMoRuiQV\ngcwJ0ZK1myz871DDiqQq38eO3UPnQ1KMXvj/gNBqe0ildjFwmJuKGkenLBk58NcN\n54LZTXfMSfGK5uMhM2I3tJr4ruhih6K1oOkJEIqT3kKm4BGQIMdvLGECgYEA1lUW\n1ZXWHQSHnLXN1Pw3msXpk4GSxlJpNqaryxJE23zYTYBjtnAbEMbT5st8h+oWrMgH\nDTYJkKwYCinm2sXVFeccIxDXUu9ePwTo3rkcWE2MZP0F6Z9PbMDCupKh9XLq+r3K\n9ufgDFIG63srWPr9kNVJktKzxg0VgG52s7yXCJ0CgYBkVk6IdJRt9GPjVwZ7rh9m\ng0aKI44QAFGS3VmBmUpMK5iHxjpDfHTnKkj/OF9K/A7y1h/HrAdjAdIbO9F6W+7+\nQ7yMtMSbSgLm+/SyeyECR47VnAzmesvmCwb/0cj3ZYGwfvTVZgtDhiYoMS31p6J+\nUTcy7yN/n7YZDJmm29npwQKBgFEEhwYjhnUfkjeNjYm18TrjFwD4GMg4vKa45/Vy\nKW8iSQ06u/ZpeAGmdtEmGCO0O/ACCJBY3dK/CrNE1Yva/koyOzOSGSKzcte1fmU6\nadmDLs+5yTNfUgGU98bYyLnkP6iad49PZSSjGRSIUYFoFtNZnF8QoH370iXjG6Gj\nZyANAoGBAJYcomRKQItdymmZsbewdMVRxvr3h7KkVw46ml//DNykfEdcNfffl9ws\nzpzRHevmES+7noy5I7XETJvUKYjOMgRnqN/tS8qXuke+Z8BsCYq2EsLoqpCY5oP9\nl8taBxONpfBfSwJ59Ps2IRwGqbMHBA4+zpHRJQ9ksTJy1N8sYzsr\n-----END RSA PRIVATE KEY-----\n"
      }
    ],
    "TFA_WEB":
    [
      {
        "public_ip": "129.213.145.37",
       "private_ip": "192.168.0.2",
       "id": "ocid1.instance.oc1.iad.abuwcljrd6ka4p2ricynaixf2a73npqfvzlayjlyeematvugixh2y537qfia",
       "hostname": "HostTFAWeb1",
       "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAuaHxNjxdORVRx6z70DK6dP1UYfadePhYpnoy0NtQo7V/HiEK\ndy5111nCdnXMYyvaMlCyeeOhG2fO0mk4NK+xSgFxHJ/UG7moiBrig73ovUXavOdV\nfJn5o/173AmgxKGw3G6X5K9ZOnNQ66VVo5VTfG29D9iSGcxCq6orUbjJ9tUNE2jo\na5/kkFAXUA6n+HE+8VDAkUg0apulMdOW9PBXv1VVbgRSbOMniKV+q4KSSm/xaPPV\nHcSoEv0NuLmtw1VHqAMvC534pOXVsyWv48cWUl3inXHRA2kQDXpYEFvY0JbLz5MV\njDRIu0HV8sGqUUiWrACyobxI409P8G9TMcg/fQIDAQABAoIBADIO+qYehyEin6gR\n/OH7HA76VawJPhPmHLngEB4EVm2fPwVX8aOMEtkc6nTZdWF07OVOn6KBAOwMBVj2\naOLEUjHby63lZ+SGH218moLeTonj8YWpeIMeXpSbgbAnpIQB+linNizEIHLDsBmr\nvzlaxmWyjh5cz6FHVN9IB2CFTWlTOxl2YbcQG/RbfGWldTOM0JohBSRzXPQOPUsz\nGW85p5MA7xtep4axObxBwDcPLr2R86unQ08Z7/X23GKtvVNjZv7jcMLekc5E+G/O\n/p2SNrWHWO71SUBl3qEkYz4GAa6H/b7Q4nY0jWbQs5D9bTIRYmM54gIa1lq5b/pH\nI4ol3oECgYEA3biE/LHsylW/DXBZYQsO1bXYYBJwaneUlGMy+E6vndszSMoRuiQV\ngcwJ0ZK1myz871DDiqQq38eO3UPnQ1KMXvj/gNBqe0ildjFwmJuKGkenLBk58NcN\n54LZTXfMSfGK5uMhM2I3tJr4ruhih6K1oOkJEIqT3kKm4BGQIMdvLGECgYEA1lUW\n1ZXWHQSHnLXN1Pw3msXpk4GSxlJpNqaryxJE23zYTYBjtnAbEMbT5st8h+oWrMgH\nDTYJkKwYCinm2sXVFeccIxDXUu9ePwTo3rkcWE2MZP0F6Z9PbMDCupKh9XLq+r3K\n9ufgDFIG63srWPr9kNVJktKzxg0VgG52s7yXCJ0CgYBkVk6IdJRt9GPjVwZ7rh9m\ng0aKI44QAFGS3VmBmUpMK5iHxjpDfHTnKkj/OF9K/A7y1h/HrAdjAdIbO9F6W+7+\nQ7yMtMSbSgLm+/SyeyECR47VnAzmesvmCwb/0cj3ZYGwfvTVZgtDhiYoMS31p6J+\nUTcy7yN/n7YZDJmm29npwQKBgFEEhwYjhnUfkjeNjYm18TrjFwD4GMg4vKa45/Vy\nKW8iSQ06u/ZpeAGmdtEmGCO0O/ACCJBY3dK/CrNE1Yva/koyOzOSGSKzcte1fmU6\nadmDLs+5yTNfUgGU98bYyLnkP6iad49PZSSjGRSIUYFoFtNZnF8QoH370iXjG6Gj\nZyANAoGBAJYcomRKQItdymmZsbewdMVRxvr3h7KkVw46ml//DNykfEdcNfffl9ws\nzpzRHevmES+7noy5I7XETJvUKYjOMgRnqN/tS8qXuke+Z8BsCYq2EsLoqpCY5oP9\nl8taBxONpfBfSwJ59Ps2IRwGqbMHBA4+zpHRJQ9ksTJy1N8sYzsr\n-----END RSA PRIVATE KEY-----\n"
      }
    ],
    "TFA_PROCESSOR":
    [
      {
        "public_ip": "129.213.145.38",
       "private_ip": "192.168.0.19",
       "id": "ocid1.instance.oc1.iad.abuwcljrh4lzgz565u6eyw2grfsi74xrou6sii6b4mpqxbfiwy6znue3qvoq",
       "hostname": "HostTFAProcessor1",
       "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAuaHxNjxdORVRx6z70DK6dP1UYfadePhYpnoy0NtQo7V/HiEK\ndy5111nCdnXMYyvaMlCyeeOhG2fO0mk4NK+xSgFxHJ/UG7moiBrig73ovUXavOdV\nfJn5o/173AmgxKGw3G6X5K9ZOnNQ66VVo5VTfG29D9iSGcxCq6orUbjJ9tUNE2jo\na5/kkFAXUA6n+HE+8VDAkUg0apulMdOW9PBXv1VVbgRSbOMniKV+q4KSSm/xaPPV\nHcSoEv0NuLmtw1VHqAMvC534pOXVsyWv48cWUl3inXHRA2kQDXpYEFvY0JbLz5MV\njDRIu0HV8sGqUUiWrACyobxI409P8G9TMcg/fQIDAQABAoIBADIO+qYehyEin6gR\n/OH7HA76VawJPhPmHLngEB4EVm2fPwVX8aOMEtkc6nTZdWF07OVOn6KBAOwMBVj2\naOLEUjHby63lZ+SGH218moLeTonj8YWpeIMeXpSbgbAnpIQB+linNizEIHLDsBmr\nvzlaxmWyjh5cz6FHVN9IB2CFTWlTOxl2YbcQG/RbfGWldTOM0JohBSRzXPQOPUsz\nGW85p5MA7xtep4axObxBwDcPLr2R86unQ08Z7/X23GKtvVNjZv7jcMLekc5E+G/O\n/p2SNrWHWO71SUBl3qEkYz4GAa6H/b7Q4nY0jWbQs5D9bTIRYmM54gIa1lq5b/pH\nI4ol3oECgYEA3biE/LHsylW/DXBZYQsO1bXYYBJwaneUlGMy+E6vndszSMoRuiQV\ngcwJ0ZK1myz871DDiqQq38eO3UPnQ1KMXvj/gNBqe0ildjFwmJuKGkenLBk58NcN\n54LZTXfMSfGK5uMhM2I3tJr4ruhih6K1oOkJEIqT3kKm4BGQIMdvLGECgYEA1lUW\n1ZXWHQSHnLXN1Pw3msXpk4GSxlJpNqaryxJE23zYTYBjtnAbEMbT5st8h+oWrMgH\nDTYJkKwYCinm2sXVFeccIxDXUu9ePwTo3rkcWE2MZP0F6Z9PbMDCupKh9XLq+r3K\n9ufgDFIG63srWPr9kNVJktKzxg0VgG52s7yXCJ0CgYBkVk6IdJRt9GPjVwZ7rh9m\ng0aKI44QAFGS3VmBmUpMK5iHxjpDfHTnKkj/OF9K/A7y1h/HrAdjAdIbO9F6W+7+\nQ7yMtMSbSgLm+/SyeyECR47VnAzmesvmCwb/0cj3ZYGwfvTVZgtDhiYoMS31p6J+\nUTcy7yN/n7YZDJmm29npwQKBgFEEhwYjhnUfkjeNjYm18TrjFwD4GMg4vKa45/Vy\nKW8iSQ06u/ZpeAGmdtEmGCO0O/ACCJBY3dK/CrNE1Yva/koyOzOSGSKzcte1fmU6\nadmDLs+5yTNfUgGU98bYyLnkP6iad49PZSSjGRSIUYFoFtNZnF8QoH370iXjG6Gj\nZyANAoGBAJYcomRKQItdymmZsbewdMVRxvr3h7KkVw46ml//DNykfEdcNfffl9ws\nzpzRHevmES+7noy5I7XETJvUKYjOMgRnqN/tS8qXuke+Z8BsCYq2EsLoqpCY5oP9\nl8taBxONpfBfSwJ59Ps2IRwGqbMHBA4+zpHRJQ9ksTJy1N8sYzsr\n-----END RSA PRIVATE KEY-----\n"
      }
    ],
    "EM_AGENT":
    [
      {
        "public_ip": "129.213.88.141",
       "private_ip": "192.168.0.50",
       "id": "ocid1.instance.oc1.iad.abuwcljrl3rxgd43imjg5dihsvvt66565jmvsmcgnibbposfiocbnxsgs53q",
       "hostname": "HostLogstash1",
       "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAuaHxNjxdORVRx6z70DK6dP1UYfadePhYpnoy0NtQo7V/HiEK\ndy5111nCdnXMYyvaMlCyeeOhG2fO0mk4NK+xSgFxHJ/UG7moiBrig73ovUXavOdV\nfJn5o/173AmgxKGw3G6X5K9ZOnNQ66VVo5VTfG29D9iSGcxCq6orUbjJ9tUNE2jo\na5/kkFAXUA6n+HE+8VDAkUg0apulMdOW9PBXv1VVbgRSbOMniKV+q4KSSm/xaPPV\nHcSoEv0NuLmtw1VHqAMvC534pOXVsyWv48cWUl3inXHRA2kQDXpYEFvY0JbLz5MV\njDRIu0HV8sGqUUiWrACyobxI409P8G9TMcg/fQIDAQABAoIBADIO+qYehyEin6gR\n/OH7HA76VawJPhPmHLngEB4EVm2fPwVX8aOMEtkc6nTZdWF07OVOn6KBAOwMBVj2\naOLEUjHby63lZ+SGH218moLeTonj8YWpeIMeXpSbgbAnpIQB+linNizEIHLDsBmr\nvzlaxmWyjh5cz6FHVN9IB2CFTWlTOxl2YbcQG/RbfGWldTOM0JohBSRzXPQOPUsz\nGW85p5MA7xtep4axObxBwDcPLr2R86unQ08Z7/X23GKtvVNjZv7jcMLekc5E+G/O\n/p2SNrWHWO71SUBl3qEkYz4GAa6H/b7Q4nY0jWbQs5D9bTIRYmM54gIa1lq5b/pH\nI4ol3oECgYEA3biE/LHsylW/DXBZYQsO1bXYYBJwaneUlGMy+E6vndszSMoRuiQV\ngcwJ0ZK1myz871DDiqQq38eO3UPnQ1KMXvj/gNBqe0ildjFwmJuKGkenLBk58NcN\n54LZTXfMSfGK5uMhM2I3tJr4ruhih6K1oOkJEIqT3kKm4BGQIMdvLGECgYEA1lUW\n1ZXWHQSHnLXN1Pw3msXpk4GSxlJpNqaryxJE23zYTYBjtnAbEMbT5st8h+oWrMgH\nDTYJkKwYCinm2sXVFeccIxDXUu9ePwTo3rkcWE2MZP0F6Z9PbMDCupKh9XLq+r3K\n9ufgDFIG63srWPr9kNVJktKzxg0VgG52s7yXCJ0CgYBkVk6IdJRt9GPjVwZ7rh9m\ng0aKI44QAFGS3VmBmUpMK5iHxjpDfHTnKkj/OF9K/A7y1h/HrAdjAdIbO9F6W+7+\nQ7yMtMSbSgLm+/SyeyECR47VnAzmesvmCwb/0cj3ZYGwfvTVZgtDhiYoMS31p6J+\nUTcy7yN/n7YZDJmm29npwQKBgFEEhwYjhnUfkjeNjYm18TrjFwD4GMg4vKa45/Vy\nKW8iSQ06u/ZpeAGmdtEmGCO0O/ACCJBY3dK/CrNE1Yva/koyOzOSGSKzcte1fmU6\nadmDLs+5yTNfUgGU98bYyLnkP6iad49PZSSjGRSIUYFoFtNZnF8QoH370iXjG6Gj\nZyANAoGBAJYcomRKQItdymmZsbewdMVRxvr3h7KkVw46ml//DNykfEdcNfffl9ws\nzpzRHevmES+7noy5I7XETJvUKYjOMgRnqN/tS8qXuke+Z8BsCYq2EsLoqpCY5oP9\nl8taBxONpfBfSwJ59Ps2IRwGqbMHBA4+zpHRJQ9ksTJy1N8sYzsr\n-----END RSA PRIVATE KEY-----\n"
      }
    ],
    "BASTION":
    [
      {
       "public_ip": "129.213.19.246",
       "private_ip": "192.168.0.66",
       "id": "ocid1.instance.oc1.iad.abuwcljrf2mnec74h4nixgulgrpldw2somijqmcktexffgyqzblxmg5ivyoa",
       "hostname": "HostBastion1",
       "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAuaHxNjxdORVRx6z70DK6dP1UYfadePhYpnoy0NtQo7V/HiEK\ndy5111nCdnXMYyvaMlCyeeOhG2fO0mk4NK+xSgFxHJ/UG7moiBrig73ovUXavOdV\nfJn5o/173AmgxKGw3G6X5K9ZOnNQ66VVo5VTfG29D9iSGcxCq6orUbjJ9tUNE2jo\na5/kkFAXUA6n+HE+8VDAkUg0apulMdOW9PBXv1VVbgRSbOMniKV+q4KSSm/xaPPV\nHcSoEv0NuLmtw1VHqAMvC534pOXVsyWv48cWUl3inXHRA2kQDXpYEFvY0JbLz5MV\njDRIu0HV8sGqUUiWrACyobxI409P8G9TMcg/fQIDAQABAoIBADIO+qYehyEin6gR\n/OH7HA76VawJPhPmHLngEB4EVm2fPwVX8aOMEtkc6nTZdWF07OVOn6KBAOwMBVj2\naOLEUjHby63lZ+SGH218moLeTonj8YWpeIMeXpSbgbAnpIQB+linNizEIHLDsBmr\nvzlaxmWyjh5cz6FHVN9IB2CFTWlTOxl2YbcQG/RbfGWldTOM0JohBSRzXPQOPUsz\nGW85p5MA7xtep4axObxBwDcPLr2R86unQ08Z7/X23GKtvVNjZv7jcMLekc5E+G/O\n/p2SNrWHWO71SUBl3qEkYz4GAa6H/b7Q4nY0jWbQs5D9bTIRYmM54gIa1lq5b/pH\nI4ol3oECgYEA3biE/LHsylW/DXBZYQsO1bXYYBJwaneUlGMy+E6vndszSMoRuiQV\ngcwJ0ZK1myz871DDiqQq38eO3UPnQ1KMXvj/gNBqe0ildjFwmJuKGkenLBk58NcN\n54LZTXfMSfGK5uMhM2I3tJr4ruhih6K1oOkJEIqT3kKm4BGQIMdvLGECgYEA1lUW\n1ZXWHQSHnLXN1Pw3msXpk4GSxlJpNqaryxJE23zYTYBjtnAbEMbT5st8h+oWrMgH\nDTYJkKwYCinm2sXVFeccIxDXUu9ePwTo3rkcWE2MZP0F6Z9PbMDCupKh9XLq+r3K\n9ufgDFIG63srWPr9kNVJktKzxg0VgG52s7yXCJ0CgYBkVk6IdJRt9GPjVwZ7rh9m\ng0aKI44QAFGS3VmBmUpMK5iHxjpDfHTnKkj/OF9K/A7y1h/HrAdjAdIbO9F6W+7+\nQ7yMtMSbSgLm+/SyeyECR47VnAzmesvmCwb/0cj3ZYGwfvTVZgtDhiYoMS31p6J+\nUTcy7yN/n7YZDJmm29npwQKBgFEEhwYjhnUfkjeNjYm18TrjFwD4GMg4vKa45/Vy\nKW8iSQ06u/ZpeAGmdtEmGCO0O/ACCJBY3dK/CrNE1Yva/koyOzOSGSKzcte1fmU6\nadmDLs+5yTNfUgGU98bYyLnkP6iad49PZSSjGRSIUYFoFtNZnF8QoH370iXjG6Gj\nZyANAoGBAJYcomRKQItdymmZsbewdMVRxvr3h7KkVw46ml//DNykfEdcNfffl9ws\nzpzRHevmES+7noy5I7XETJvUKYjOMgRnqN/tS8qXuke+Z8BsCYq2EsLoqpCY5oP9\nl8taBxONpfBfSwJ59Ps2IRwGqbMHBA4+zpHRJQ9ksTJy1N8sYzsr\n-----END RSA PRIVATE KEY-----\n"
    } 
    ]
  },
  "Config_Properties" :
  {
    "availability_domain" : "eGJB:US-ASHBURN-AD-1",
    "casper_ip" : "newip1",
    "tfa_object_store_url" : "newurl1",
    "tfa_object_store_user_name" : "newuser1",
    "tfa_object_store_user_password" : "'newpwd1'"
 }
}

registerAuth:
Usage: ./ecracli registerAuth_atp <region=name> <user=omuserocid>
<fingerprint=value> <key_file=pem key filepath> <tenancy=omtenancy ocid>
<om_compartment_ocid=compartmentid> [profile=<name>][json_path=<path>][orcl_client=True|False]

Purpose:
    Register the ATP authentication information.

Arguments:
    region      : Name of the region where ATP network needs to be created
    user        : OM User OCID
    fingerprint : fingerprint of the user
    key_file    : Path to the PEM key location
    tenancy     : OM Tenancy OCID
    om_compartment_ocid : OM compartment OCID
    profle      : An optional profile name
    json_path   : Path to the JSON file with all these parameters 
    orcl_client : Oracle Client Credential or Oracle mgmt Credential

Examples:
ecra> registerAuth_atp region=us-phoenix-1 profile=[DEFAULT]
user=ocid1.user.oc1..aaaaaaaazdkww2c7gs3c376xdevwv2sqg4jmsxl3aguoll2iixigy4q7ohrq
fingerprint=68:1d:71:54:92:ef:c5:e6:3f:76:86:80:9c:a2:1c:e7
key_file=~/.oci/oci_api_key.pem passphrase=
tenancy=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq
om_compartment_ocid=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq
* {"status": 200, "status-detail": "success", "message": "Update Successful",
* "op": "atp_authentication_set"}

ecra> registerAuth_atp region=us-ashburn-2 profile=[DEFAULT] user=ocid1.user.oc1..a21aasaaaaazdkww2c7gs3c376xdevwv2sqg4jmsxl3aguoll2iixigy4q7ohrq fingerprint=68:1d:71:54:92:ef:c5:e6:3f:76:86:80:9c:a2:1c:e7:21  passphrase= tenancy=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyavc4wausjousasasaca7pwyjfwb5ebsq5emrpqlql2gj5iq om_compartment_ocid=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsassq5emrpqlql2gjs5iq orcl_client=True
* {"status": 200, "status-detail": "success", "message": "Update Successful", "op": "atp_authentication_set"}

ecra> registerAuth_atp region=us-ashburn-1 profile=[DEFAULT] user=ocid1.user.oc1..aaasaaaaazdkww2c7gs3c376xdevwv2sqg4jmsxl3aguoll2iixigy4q7ohrq fingerprint=68:1d:71:54:92:ef:c5:e6:3f:76:86:80:9c:a2:1c:e7  passphrase= tenancy=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyavc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq om_compartment_ocid=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gjs5iq orcl_client=False
* {"status": 200, "status-detail": "success", "message": "Update Successful", "op": "atp_authentication_set"}

registerAdminIdentity:
Usage: ./ecracli registerAdminIdentity <tenancy_ocid=tenancy ocid> [region=<region name>] [user_ocid=<user ocid>] [fingerprint=<value>] [compartment_ocid=compartmentid> [profile=<name>][json_path=<path>] [private_key_path=<private pem key path>] [passphrase=<passphrase>] [loadbalancer_ocid=<load balancer ocid>] [domain=<region based domain url ex.'r1.oracleiaas.com'>] [cert_path=<path to cert bundle to perform verification against federation endpoint>]

Purpose:
    Registers admin tenancy authentication details for OCI with ECRA.

Arguments:
    region           : Name of the region where ATP network needs to be created
    user_ocid        : User OCID
    fingerprint      : fingerprint of the user
    key_file         : Path to the PEM key location
    tenancy_ocid     : Tenancy OCID
    compartment_ocid : Compartment OCID
    profile          : An optional profile name
    private_key_path : Private PEM key path
    passphrase       : An optional passphrase
    json_path        : Path to the JSON file with all these parameters
    loadbalancer_ocid: Load balancer OCID in admin tenancy
    domain           : Region based domain url ex.'r1.oracleiaas.com'
    cert_path        : Path to cert bundle to perform verification against federation endpoint

Examples:
ecra> atp registerAdminIdentity tenancy_ocid=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq region=us-phoenix-1 user_ocid=ocid1.user.oc1..aaaaaaaaloy5k7qzit2fqsps2z3lnoqepmde7hqu2ok5a2ukulbxcjfjqobq fingerprint=ea:6e:85:25:4f:dd:f6:4d:9c:04:f9:39:f0:21:3f:c7 compartment_ocid=ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq private_key_path=~/.oci/oci_api_key.pem passphrase= loadbalancer_ocid=ocid1.loadbalancer.oc1.phx.aaaaaaaar5hwz76fegxy4lxtrh42vjj2pvmaig7umq6bt5lvakn2bcnkbwqa
* {"status": 200, "status-detail": "success", "op": "atp_admin_identity_post"}


registerSubnet:
Usage: ./ecracli registerSubnet_atp <vcncidr=omvcncidr>

Purpose:
    Create a subnet pool from the VCN CIDR and register it to ECRA.

Arguments:
    vcncidr     : CIDR of OM VCN. Either ops or Terraform will pass it.

Examples:
ecra> registerSubnet_atp vcnCIDR=10.0.0.0/23
* {"status": 200, "status-detail": "success", "message": "Update Successful",
* "op": "registerSubnet_atp"}

deleteNetwork
Usage: ./ecracli deleteNetwork_atp dbSystemId=<id> optimizedDelete=<true/false>
          or
       ecra> deleteNetwork_atp dbSystemId=<id> optimizedDelete=<true/false>

Purpose:
  Deletes an ATP network created.

Arguments:
  dbSystemId    : DbaaS-CP dbSystemId
  optimizedDelete: optmizedDelete true or false

Examples:

i)
ecra> deleteNetwork_atp dbSystemId=8
* STATUS URI :
* http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/f49f3a88-c1bf-4f89-832b-e3b502e57aee
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request deleteNetwork_atp successfully completed
ecra> 

ii) With OPS_DELETE_OPERATIONS DISABLED and ECRA_MODE in prod
ecra> atp deleteNetwork dbSystemId=8
* Delete operations has been disabled for ops in this ECRA
* Skipped deleteNetwork command

iii) With OPS_DELETE_OPERATIONS ENABLED and ECRA_MODE in prod
ecra> atp deleteNetwork dbSystemId=8
* Are you sure you want to delete Db System [8]? This action cannot be undone
Type again 8 in order to proceed with the delete command in opposite case just
hit enter:8
ecra> 

iv) ecra> atp deleteNetwork dbSystemId=18 optimizedDelete=false
http://slc14rlu.us.oracle.com:9035/ecra/endpoint/atp/networks/mgmt/18?optimizedDelete=false

setupDGNetwork
Usage: ./ecracli setupDGNetwork_atp json_path=<json_path> targetType=<primary|standby|observer> slaAvailabilityType=<HA|DR>
         or
	ecra>  setupDGNetwork_atp json_path=<json_path> targetType=<primary|standby|observer> slaAvailabilityType=<HA|DR>

Purpose:
  Setup the secrules needed for Dataguard scenario

Example:
ecra> setupDGNetwork_atp json_path=/home/rgmurali/DG.json targetType=primary
slaAvailabilityType=HA
* {"status": 202, "est_op_end_time": "", "status-detail": "processing",
* "status_uri":
* "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/db5dd654-7b5d-4991-a9d6-6eed9f15f786",
* "op_start_time": "2018-07-18T10:41:30-0700", "message": "processing", "op":
* "atp_dataguard_set"}

getPreprovMetrics
Usage: ./ecracli getPreprovMetrics_atp rackname=<rackname>
          or
       ecra> atp getPreprovMetrics rackname=<rackname>

Purpose:
  Get Preprov Metrics using rackname.

Arguments:
  rackname    : name of the rack

Example:
ecra> atp getPreprovMetrics rackname=sea201109exd-d0-05-06-cl-07-09-clu01
{
  "servers": [
    {
      "hostname": "atpd-exa-65a6h2.o1623426009443.v1623426007218.oraclevcn.com",
      "vnicprivateip": "172.17.64.133",
      "nodeVip": "172.17.64.131",
      "nodeVipName": "backup1",
      "preprovVnicOcid": "ocid1.vnic.region1.sea.abzwkljsfpgib6qpn6iajwe3udl3oc7hjgmcrjdgnk6u4di2i6rmdqxwytoq",
      "preprovMacAddress": "00:00:17:01:09:AF",
      "nodeType": "fixed"
    },
    {
      "hostname": "atpd-exa-65a6h1.o1623426009443.v1623426007218.oraclevcn.com",
      "vnicprivateip": "172.17.64.132",
      "nodeVip": "172.17.64.130",
      "nodeVipName": "backup0",
      "preprovVnicOcid": "ocid1.vnic.region1.sea.abzwkljs2htm7dj3tqh3srwa2fk7xhqqyyh2omdzitp5v2ighxe5huuxwssq",
      "preprovMacAddress": "00:00:17:01:7E:F9",
      "nodeType": "fixed"
    }
  ],
  "scanIp": "172.17.64.134",
  "scanName": "scanip",
  "mgmtSubnetCidr": "172.17.64.128/29",
  "mgmtSubnetOcid": "ocid1.subnet.region1.sea.aaaaaaaameqdzpi5ivsuqqwgpnecaqnz3z3wbyf4bo6a3cwypdzts4dp4l7a",
  "model": "X8M-2",
  "rackname": "sea201109exd-d0-05-06-cl-07-09-clu01",
  "status": 200,
  "op": "atp_preprov_metrics_get",
  "status-detail": "success"
}

deleteDGNetworkRules
Usage: ./ecracli deleteDGNetworkRules_atp json_path=<json_path> targetType=<primary|standby|observer> slaAvailabilityType=<HA|DR>
         or
	ecra>  deleteDGNetworkRules_atp json_path=<json_path> targetType=<primary|standby|observer> slaAvailabilityType=<HA|DR>

Purpose:
  Delete the security rules that were setup for Dataguard scenario

Example:
ecra> deleteDGNetworkRules_atp json_path=/home/rgmurali/DG.json
targetType=observer slaAvailabilityType=HA
* {"status": 202, "est_op_end_time": "", "status-detail": "processing",
* "status_uri":
* "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/eba3bd13-0302-4d3b-b928-36d6b4ec3a01",
* "op_start_time": "2018-07-26T15:53:54-0700", "message": "processing", "op":
* "atp_dataguard_delete"}

launchObserver
Usage: ./ecracli launchObserver_atp dbSystemId=<dbSYstemId> custTenantId=<custTenantId><user_data=data>
         or
       ecra> launchObserver_atp dbSystemId=<dbSYstemId> custTenantId=<custTenantId><user_data=data>

Purpose:
 Launch an observer instance from ECRA

Example:
ecra> atp launchObserver dbSystemId=3 custTenantId=1111 data=cfwdfwaksdXlads'flsd'
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/83eb45d2-9786-4a57-adf7-dfb8518ca802

fetchObserverKeys
Usage: ./ecracli fetchObserverKeys_atp dbSystemId=<dbSYstemId>
         or
       ecra> fetchObserverKeys_atp dbSystemId=<dbSYstemId>

Purpose:
 Fetch the SSH keys for an observer instance.

Example:
ecra> atp fetchObserverKeys dbSystemId=10
* {"status": 200, "sshkey": "-----BEGIN RSA PRIVATE
* KEY-----\nMIIEogIBAAKCAQEAtoedjRgpA6fG/WA4AjzJar4TxVMXGS+q9QJxmBzJNKS654IF\nNxOTJ4bJCuYXd/PiqQoJn0O7+8FjrvjB1BOYO75lufj3LlWX8Dyi2MKB3/pfQcof\nGJa15x0h7ylVlY6DuYUj1uIUiG//Uo8hyqlyysTOPKgOkad4SAo14sf9ZJ1jwyCn\nG70A2+CGJ6nMN+IvI+M6KeFit3wsIGqq4B5tvI9m3c4YRi4dfN9BELzV34/FyngB\nXdsiqm6nIg1XPpum/hJNtbtATvNqmTT6/JxHfMX3M/0uaBuiG6scvtJvnX+bYMgM\nRqplEnoxusf9lgfzdh+Quqa/nHT9lvkljlujswIBIwKCAQEAjM8Egsl+ua1QXQ+2\nLZybYPkH7/5FBM0AOVmoFkIXjwK8Ea1xvMX1LR7VmrF/0ZBBI1Di2fJsccESYmgg\nfwfNNWb+BH47BnyLJwo0e1Q4TbKD/41LMDm/hmbuSsgdc19PrF9kylaiIBviOF/J\nnFbU5ZCB1wVNEUatPuNOI/ldExkGtxre0iaiqkitMQhSIeXkdva3nZDL4xFLJSgu\n3I1XCs6BuIuqkN78s4MwMDnOBA3Qvjix/ppezdqePziGF9HaxV7EI0GkbuJNk89F\nbfdxVkpVNDnGP8olHbZgSYwTtgt1AZyWyhUZHaSuakT7fEcsCY/W3kjam21NAr9f\nldYR8wKBgQDbxYzS7G2O1ESMOZFzsl7Kc/RdtNGaKKVYumf36fwQOLZKVBT6KvCe\ncPAwRzouw6kxBY8BgordWtHsZk/2WI4Zx4Ga4Wc47NtNDeJJIR40RVQRzvWHMogs\n7Mt7RGloDFLp1FOZ7M/HSkSxJZ8HRLON3JsjE4ImjCQI+ns2PumlXwKBgQDUnnD/\nMdr9+3anpQ2PPSB+5lA6Sf7AQpEANdgXZnSg1Kd93N4kjtoRi4dgiv7U8Lg6UxFI\nh8qIC+AmfL/1cdeXjAxfPlRFMSumBJtX2ypaX0ptdqnMJUGQ6+m8XXET8Qrg/CS4\nXWBzvjoZv40rk8i6vIeZfYPJiTUMCrVD/v2uLQKBgEtZrKAWi/Z0qcmtVnDPcPT0\njkwDexBIczRdKvXp0sO7rDa9vgyhAgpv3VJhkEqMOgItyqFulgLADXWfa99u0aJw\nSbFx2j9nJp4TY4bJhrLV8PAps0RL1urU2A0Bgzmd00jbFVlYgcCrv8e1IJTHGP1w\nNTCY+WxNTi72yyiKmUADAoGBAJHLuzKl1/6dzbTI81roFkhjajaZI7cJEvjUdut5\ndIuKgXrgmFOVJ9GEP5KodDo+qjafXE7+Bzi3r6Vc22Z58uuTO68GKyght4fIpQkL\nUD34Mwk7bR5FbsnGVyIUMEgwQflccPNzOtMGGTY6NOquewO0ej1dYa7EfCWDr38V\nQDzrAoGAXq2cKdrXoVE9Y5JGDy0cVi/HfR/ZILVbNe2l9TC1F61jw5AVfhaukgju\nC8KN6AeZKZ17oHWBKDAhajfB3J64p772gjCuqRajV6CDjNZ5J90kTSwBu08w/ClN\niuN/JYwbNaGi8NVb96aI63sGD9H/BgVCnHtHLaa3OQu9ZvSGmjc=\n-----END
* RSA PRIVATE KEY-----\n", "observerid": "10", "status-detail": "success",
* "hostname":
* "10-egjbus-ashburn-ad-1-observer.s1565114542322.dataguardvcnash.oraclevcn.com",
* "op": "atp_observer_keys_get"}

createPreprovDbSystem:
Usage: ./ecracli atp createPreprovDbSystem <rackname=name>

Purpose:
Create Preprovision ATP DbSystem with ORCL Client

Example:
ecra> atp createPreprovDbSystem rackname=slcqab02adm0506clu6
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den02tob.us.oracle.com:9022/ecra/endpoint/statuses/4d9d5cf0-9cd2-40ee-a7de-b876a8fbe09a", "op_start_time": "2018-12-06T14:25:35-0800", "message": "processing", "op": "create_preprovdbsystem_post"}

deletePreprovOracleDbSystem:
Usage: ./ecracli atp deletePreprovOracleDbSystem <rackname=name>

Purpose:
Delete Preprovision ATP DbSystem as well as ORCL Client VCN created

Arguments:
	rackname:Rackname that you want to delete preprov oracle dbSystem

Examples:

i)
ecra> atp deletePreprovOracleDbSytem rackname=slcqab02adm0506clu6
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den02tob.us.oracle.com:9001/ecra/endpoint/statuses/74d8172d-ba3a-4513-809f-68031ddafbef", "op_start_time": "2019-03-07T09:28:51-0800", "message": "processing", "op": "atp_preprovdbsystem_delete"}

ii) With OPS_DELETE_OPERATIONS DISABLED and ECRA_MODE in prod
ecra> atp deletePreprovOracleDbSystem rackname=slcqab02adm0506clu6
* Delete operations has been disabled for ops in this ECRA
* Skipped deletePreprovOracleDbSystem command

iii) With OPS_DELETE_OPERATIONS ENABLED and ECRA_MODE in prod
ecra> atp deletePreprovOracleDbSystem rackname=slcqab02adm0506clu6
* Are you sure you want to delete Rack [slcqab02adm0506clu6]? This action cannot be undone
Type again slcqab02adm0506clu6 in order to proceed with the delete command in opposite case just
hit enter:slcqab02adm0506clu6
* {"status": 202, "est_op_end_time": "", "status-detail": "processing",
"status_uri":
"http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/5d0172ae-08ed-4e45-a350-7ee75f9afba6",
"op_start_time": "2019-08-28T14:48:53-0700", "message": "processing", "op":
"atp_preprovdbsystem_delete"}

ingestTerraformData:
Usage: ./ecracli atp ingestTerraformData <json_path=Path to terraform json> <oss_filename=OSS filename to perform terraform ingestion> [resetMgmtSubnetPool=true/false] [resetMgmtVcn=true/false]

Purpose:
Ingest terraform data based on filesystem or OSS and reset subnets from subnet pool if resetMgmtSubnetPool is passed as true. It resets the mgmt vcn metadata if resetMgmtVcn is true.

Example:
ecra> atp ingestTerraformData json_path=/scratch/diegchav/GBTE_SEA-AD-2_service.json resetMgmtSubnetPool=True
{"status": 200, "status-detail": "success", "op": "atp_ingest_terraform_post"}

ecra> atp ingestTerraformData oss_filename=GBTE_SEA-AD-2_service.json
{"status": 200, "status-detail": "success", "op": "atp_ingest_oss_terraform_post"}

ecra> atp ingestTerraformData json_path=/scratch/diegchav/GBTE_SEA-AD-2_service.json
{"status": 200, "status-detail": "success", "op": "atp_ingest_terraform_post"}

ecra> atp ingestTerraformData
json_path=/home/rgmurali/eGJB_US-ASHBURN-AD-2_service_1.0.3.json
resetMgmtVcn=true
* {"status": 200, "status-detail": "Successfully reset terraform meta data",
* "message": "Successfully reset terraform meta data", "op":
* "atp_ingest_terraform_post"}

configRule:
Usage: ./ecracli atp configDom0Rule <rackname=name> <port=portNum> <action=add/remove> [source=sourceIp] [target=targetIp] [protocol=ssh/udp/tcp/http/icmp]
        or
        ecra> atp configDom0Rule <rackname=name> <port=portNum> <action=add/remove> [source=sourceIp] [target=targetIp] [protocol=ssh/udp/tcp/http/icmp]

Purpose:
Add or remove a VCN config rule to a client.

Arguments:
    rackname: Name of target rack or cluster
    port: TCP/UDP port to apply the rule to
    action: Whether to add or remove the config rule
    source: Source IP address for the rule
    target: Destination IP address for the rule
    protocol: Network or application protocol to apply the rule to

Example:
ecra> atp configDom0Rule rackname=slcqab02adm0506clu6 port=80 action=add source=10.0.0.1 target=10.0.0.2 protocol=http
{"status": 200, "status-detail": "success", "message": "Successfully applied config rule", "op": "atp_vcn_config_rule_post"}
ecra> atp configDom0Rule rackname=slcqab02adm0506clu6 port=22 action=remove
{"status": 200, "status-detail": "success", "message": "Successfully applied config rule", "op": "atp_vcn_config_rule_post"}


atp configDomuRules 

Usage:
    atp configDomURules rackname=<Rackname>  cidr=<CIDRs comma separated>
    
Arguments: 
    rackname: Name of target rackname to make changes
    cidr = values of new cidrs comma separated in the format <numValue>.<numValue>.<numValue>.<numValue>/<network base>
    
Examples

ecra> atp configDomURules rackname=slcqab02adm0506clu6  cidr=10.0.1.11/2
* {"status": 200, "status-detail": "success", "op": "update_domu_rules_post"}


ecra> atp configDomURules rackname=slcqab02adm0506clu6  
* Error: Please provide all mandatory parameters. Missing mandatory parameters are: [u'cidr']

ecra> atp configDomURules rackname=slcqab02adm0506  cidr=10.0.1.11/2
* Error: POST request to http://den00ucw.us.oracle.com:9001/ecra/endpoint/atp/client/configdomurules failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Given Rackname doesn't exists: slcqab02adm0506","status-detail":"Given Rackname doesn't exists: slcqab02adm0506","op":"update_domu_rules_post"}
________________________________________________________________________________

###########
#  Ecra   #
###########

1) ecra validateApis:

Usage: ecra validateApis testJsonPath=<JSON-PATH>

Purpose: 
    The purpose of this endpoint is to make tests on ECRA installation to provide certainty that the installation/setup of ECRA was successfully applied 

Example: 

call: atp validateHealth testJsonPath=/scratch/jvaldovi/ecra_installs/ecra18252/health.json
JSON content
{
  "atp":
    {
      "createMgmtNetwork": "Y",
      "deleteMgmtNetwork": "Y",
      "createOrclClientNetwork": "Y",
      "deleteOrclClientNetwork": "Y"
    },
  "ecraVM":
    {
      "pingTest": "Y",
      "ioTest": "Y"
    },
  "ecraWLS":
    {
      "versionCheck": "Y"
    },
  "exaCloudService":
    {
      "healthCheck": "Y"
    },
  "kms":
    {
      "kmsCheck": "N"
    }
 }
 
 Output
 
 {
  "atp":
    {
      "createMgmtNetwork": "PASSED | FAILED | null if input is N",
      "deleteMgmtNetwork": "",
      "createOrclClientNetwork": "",
      "deleteOrclClientNetwork": ""
    },
  "ecraVM":
    {
      "pingTest": "",
      "ioTest": ""
    },
  "ecraWLS":
    {
      "versionCheck": ""
    },
  "exaCloudService":
    {
      "healthCheck": ""
    },
  "kms":
    {
      "kmsCheck": ""
    }
 }

2) ECRA DUMP CONFIG:

Usage: ecra dumpConfig target=<ecracli>

Purpose:
Dumps selected config in Json Format, for now this command only supports all ecracli.cfg data

Example:

ecra> ecra dumpConfig target=ecracli
* {
    "DBParams": {
        "backupDest": "NONE", 
        "charset": "", 
        "cloudStorageContainer": "https://storage.oraclecorp.com/v1/Storage-dbcsdev/TEST", 
        "cloudStorageUsername": "Storageadmin", 
        "clusterID": "CLU10", 
        "dbTemplate": "dw", 
        "dbVersion": "12.1.0.2", 
        "db_bp": "", 
        "db_bp_update": "", 
        "db_bp_url": "", 
        "db_gg": "", 
        "db_init_params": "", 
        "db_nid": "no", 
        "ncharset": "", 
        "nfsRemoteBackup": "10.128.78.97:/export/DBaaS/patching/exadata", 
        "nodelist": "", 
        "pga_memory_size": "", 
        "sga_memory_size": "", 
        "sshkey": "", 
        "tenantID": "usquestintern35490", 
        "ximages_service_type": ""
    }, 
    "apiParams": {
        "ecra_cert_file": "", 
        "ecracli_cert_file": "", 
        "ecracli_key_file": "", 
        "exacloudpath": "/scratch/jvaldovi/ecra_installs/dev/mw_home/user_projects/domains/exacloud", 
        "host": "http://den00ucw.us.oracle.com:9001/ecra/endpoint"
    }, 
    "atpParams": {
        "AutonomousDb": "N"
    }, 
    "clusterPatching": {
        "BackupMode": "yes", 
        "EnablePlugins": "no", 
        "Operation": "patch", 
        "OperationStyle": "auto", 
        "PayloadType": "exadata_release", 
        "PluginTypes": "none", 
        "TargetVersion": "LATEST", 
        "force": "no"
    }, 
    "deleteParams": {
        "sse": "True"
    }, 
    "exadataClusters": {
        "r417cluster1": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/preprod-ns/r417-fpcl-pass-cluster1.xml", 
        "r417cluster2": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/preprod-ns/r417-fpcl-pass-cluster2.xml", 
        "r417cluster3": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/preprod-ns/r417-fpcl-pass-cluster3.xml", 
        "r417cluster4": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/preprod-ns/r417-fpcl-pass-cluster4.xml", 
        "scas07adm0102": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0102/scas07adm0102.xml", 
        "scas07adm0102clu1": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0102/scas07adm0102clu1.xml", 
        "scas07adm0102clu2": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0102/scas07adm0102clu2.xml", 
        "scas07adm0304clu1": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0304/scas07adm0304clu1.xml", 
        "scas07adm0304clu2": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0304/scas07adm0304clu2.xml", 
        "scas07adm0304clu3": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0304/scas07adm0304clu3.xml", 
        "scas07adm0304clu4": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/scas07adm0304/scas07adm0304clu4.xml", 
        "slcs08adm0102": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/slcs08adm0102/slcs08adm0102.xml", 
        "slcs08adm0506": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/slcs08adm0506/slcs08adm0506.xml", 
        "slcs09adm0102": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/slcs09adm0102/slcs09adm0102.xml", 
        "slcs09adm0508": "/ade_autofs/ud46_db/ECS_MAIN_LINUX.X64.rdd/LATEST/ecs/ecra/racks/devracks/slcs09adm0508/slcs09adm0508.xml", 
        "testrack": ""
    }, 
    "higgsParams": {
        "admin_username": "sdi", 
        "appidUser": "APPID", 
        "higgs_url": "https://10.128.95.197/", 
        "subscriptionId": "502078462"
    }, 
    "noSDIserviceParams": {
        "datacenterId": "uscom-central-1", 
        "datacenterName": "uscom-central-1", 
        "datacenterRegionId": "North_America_Region", 
        "datacenterRegionName": "North America", 
        "ipNet": "N", 
        "isHA": "Y", 
        "model": "X5-2", 
        "racksize": "", 
        "zone": "uscom-central-1a"
    }, 
    "serviceParams": {
        "backupNetwork": "/Compute-123456787/administrator/Bnetwork", 
        "backupToDisk": "N", 
        "clientNetwork": "/Compute-123456787/administrator/Cnetwork", 
        "exaunitName": "exaclu", 
        "grid_bp": "", 
        "grid_version": "", 
        "iaas": "N", 
        "memsize": "", 
        "service_type": "Exadata", 
        "suspend_on_create": "N", 
        "type": "subscription"
    }, 
    "sshkeyOperationParams": {
        "env": "gen1", 
        "hostname": "", 
        "sshkey": "<path-to-ssh-key>", 
        "user": "oracle", 
        "users": "oracle", 
        "vms": "_all_"
    }, 
    "vmBackupParams": {
        "delete_local_backup": "False", 
        "oss_backup": "disabled", 
        "remote_backup": "disabled", 
        "skip_checksum": "True", 
        "skip_img": "False"
    }
}
ecra>

    3)coredump:
        Usage:
            ./ecracli action=<ACTION> coredumppath=<CORE_DUMP_PATH> exaunitId=<EXAUNIT_ID>
            ACTION:         Valid options are (setup|detach|dumpcore|uploadimagefile)
            CORE_DUMP_PATH: Valid options are (local|mount_target) a mount_target example is 10.0.0.3:\/FileSystem-389274
            EXAUNIT_ID:     Exaunit where you want to run this operation
        Purpose:
            Provides both domU triggered code dump and dom0 triggered core dump
        Examples:
            ecra> ecra coredump action=setup coredumppath=local exaunitId=361
            * {"status": 202, "status_uri": "http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/7be3716a-dd94-42bb-a534-363fdf902a6c", "op": "exacloud_coredump_put", "op_start_time": "2020-11-12T23:59:31+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 361}

4)UPGRADE HISTORY

        Usage: ecra upgradeHistory [fromDate=<MMM-DD-YYYY>]

        Purpose:
            Return dbaas, exacloud, oeda and ecra war upgrade versions from the specified date.
            If fromDate parameter is omitted it returns upgrades of the last 6 months.

        Examples:

        ecra> ecra upgradeHistory
        * {
            "upgrades": [
                {
                    "dbaas_version": "dbaastools_exa-1.0-1+MAIN_210507.0125",
                    "exacloud_version": "main(21.132)",
                    "oeda_version": "210423",
                    "label": "ECS_MAIN_LINUX.X64_210512.0900",
                    "upgrade_type": "upgrade_allatonce_noimagechanges",
                    "end_time": "2021-07-22 20:57:50.912",
                    "start_time": "2021-07-22 20:33:29.0"
                },
                {
                    "dbaas_version": "dbaastools_exa-1.0-1+MAIN_210507.0125",
                    "exacloud_version": "main(21.132)",
                    "oeda_version": "210423",
                    "label": "ECS_MAIN_LINUX.X64_210512.0900",
                    "upgrade_type": "upgrade_allatonce_noimagechanges",
                    "end_time": "2021-05-15 06:07:38.478"
                    "start_time": "2021-05-15 05:40:29.0"
                }
            ],
            "status": 200,
            "op": "upgrade_history",
            "status-detail": "success"
        }

        ecra> ecra upgradeHistory fromDate=MAY-15-2021
        * {
            "upgrades": [
                {
                    "dbaas_version": "dbaastools_exa-1.0-1+MAIN_210507.0125",
                    "exacloud_version": "main(21.132)",
                    "oeda_version": "210423",
                    "label": "ECS_MAIN_LINUX.X64_210512.0900",
                    "upgrade_type": "upgrade_allatonce_noimagechanges",
                    "end_time": "2021-05-15 06:07:38.478"
                }
            ],
            "status": 200,
            "op": "upgrade_history",
            "status-detail": "success"
        }

5)GET FILE

        Usage: ecra getfile <filename>

        Purpose:
            Retrieves and downloads the specified file from the ECRA_FILES table in the
            database to the corresponding file system directory.

        Examples:

        ecra> ecra getfile ../json/delete_service_input_exa_205.json
        * {
            "file_path": "../json/delete_service_input_exa_205.json",
            "status": 200,
            "op": "ecra_file_get",
            "status-detail": "success"
        }

6)CHECK
       Usage: ecra check
       
       Purpose:
           Performs a series of operations to verify the status of each ECRA component (WLS, DB, ExaCloud, Managed Servers).
        
       Example:
       ecra> ecra check
       *{
            "weblogic": {
                "healthy": true
            },
            "database": {
                "healthy": true
            },
            "managedServers": [
                {
                    "hostname": "http://phoenix109261.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/",
                    "healthy": true
                },
                {
                    "hostname": "http://phoenix109261.dev3sub3phx.databasede3phx.oraclevcn.com:9062/ecra/endpoint/",
                    "details": "Server unreachable.",
                    "healthy": false
                }
            ],
            "exacloud": {
                "healthy": true
            }
        }

7)Connect
       Usage: ecra connect
       
       Purpose:
           Connect ECRACLI to the specified ECRA host. All the following operations will be executed using the new host.
        
       Example:
       ecra> ecra connect http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/
        * {
            "status": 200,
            "hostname": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/",
            "message": "The ECRA host has been set to: http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/"
        }

8)UPDATE FILES

        Usage: ecra updatefile filename=<filename> contentpath=<path of new content file>

        Purpose:
            Updates a the file contents on a file on the database using the filename
             as destination and content path as the information to update

        Examples:

        ecra> ecra updatefile filename=../PodRepo/new_xml_rack_payload_sea2-d4-cl3-6eeb66d9-2655-44ed-b007-22a5df51c0ba-clu01_fbab3d31-fd45-4c15-8f44-cb0709a093e4.json contentpath=/scratch/gvalderr/ecra_installs/myecra/mw_home/user_projects/domains/PodRepo/newcontentfile.json
        * {"updated_file": "../PodRepo/new_xml_rack_payload_sea2-d4-cl3-6eeb66d9-2655-44ed-b007-22a5df51c0ba-clu01_fbab3d31-fd45-4c15-8f44-cb0709a093e4.json", "status": 200, "op": "ecra_file_update_put", "status-detail": "success"}

9)LIST FILES

        Usage: ecra listfiles [rackname=<filename>|exaunitid=<exaunitid>] [maxfiles=<number of max files to display>]

        Purpose:
            Retrieves a list of files related to the rackname or exaunit id indicated

        Examples:
        ecra> ecra listfiles rackname=sea2-d4-cl3-6eeb66d9-2655-44ed-b007-22a5df51c0ba-clu01 maxfiles=5
* {
    "filelist": [
        {
            "filename": "../PodRepo/new_xml_rack_created_sea2-d4-cl3-6eeb66d9-2655-44ed-b007-22a5df51c0ba-clu01_09b852ec-6479-4b38-8b00-0acd0da3eb40.xml",
            "date": "2024-11-25 20:37:09"
        },
        {
            "filename": "../PodRepo/new_xml_rack_payload_sea2-d4-cl3-6eeb66d9-2655-44ed-b007-22a5df51c0ba-clu01_fbab3d31-fd45-4c15-8f44-cb0709a093e4.json",
            "date": "2024-11-25 20:36:49"
        },
        {
            "filename": "../PodRepo/rack_sea2-d4-cl3-6eeb66d9-2655-44ed-b007-22a5df51c0ba-clu01_updated_xml.xml",
            "date": "2024-11-25 20:36:18"
        },
        {
            "filename": "../json/delete_service_input_exa_2654.json",
            "date": "2024-11-25 20:36:17"
        },
        {
            "filename": "../PodRepo/XMLTransientStorage__337_ccdb2654-c323-4d39-a074-4430c66b02a5.xml",
            "date": "2024-11-25 20:35:30"
        }
    ],
    "status": 200,
    "op": "ecra_file_list_get",
    "status-detail": "success"
}

________________________________________________________________________________

ecralogs:
Usage: ./ecracli ecralogs <target_path> [-zip] <requestId>

Purpose:
Returns available internal logs for the target ecra instance to the given folder.
Optionally a request Id can be especified to filter logs where it is included. Only available with -zip option

Example:
ecra> ecralogs /home/marcoslo -zip f4e35653-d1f4-4bf6-ad6a-b1ea66f0b39a
* {"status": 200, "status-detail": "success", "logFile": "/home/marcoslo/ecralogs.zip", "op": "logs"}

Using endpoint from http GET request:
http://slc17ubh.us.oracle.com:9028/ecra/endpoint/control/logs/zip?requestId=d1f4-4bf6-ad6a-b1ea66f0b39a&dest=/home/aime

Using wget command:
wget -O ecralogs.zip --user=<weblogic_user> --password=<weblogic_pass> http://slc17ubh.us.oracle.com:9028/ecra/endpoint/control/logs/zip?requestId=d1f4-4bf6-ad6a-b1ea66f0b39a&dest=/home/aime

atpvmrollback:
Usage: ./ecracli atp atpvmrollback <exaunit_id>

Purpose:
Performs a rollback on the previous backup vm from preprov dbSystem.

Example:
ecra> atp atpvmrollback 50
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den03cke.us.oracle.com:9001/ecra/endpoint/statuses/cb26206f-0544-4b5c-bdd9-114a11876ed8", "op_start_time": "2019-06-25T16:11:36-0700", "message": "processing", "op": "atp-vm-rollback"}

getObserverDetails
Usage: ./ecracli getObserverDetails_atp dbSystemId=<dbSYstemId>
        or
       ecra> getObserverDetails_atp dbSystemId=<dbSYstemId>

Purpose:
  Get the observer VM details from ECRA

Example:
ecra> getObserverDetails_atp dbSystemId=16
* {"status": 200, "observerStatus": "PROVISIONEDOBSERVERVM", "instanceOcid": "ocid1.instance.oc1.iad.abuwcljrgq2zkcxppnwjifok25b4id23x24z2p2kmajrgtkmha65l76bn5uq", "observerid": "16", "vnicOcid": "ocid1.vnic.oc1.iad.abuwcljrbc6ggr2lcccq7kxb6cxkta5g4tgvrtatv65vy4xfnvq52ueqnq7a", "privateIp": "10.0.0.186", "compartmentOcid": "ocid1.tenancy.oc1..aaaaaaaao3lj36x6lwxyvc4wausjouca7pwyjfwb5ebsq5emrpqlql2gj5iq", "status-detail": "success", "op": "atp_observer_get"}

deleteObserver
Usage: ./ecracli deleteObserver custTenantId=<custTenantId> dbSystemId=<OCID>
         or
       ecra> atp deleteObserver custTenantId=<custTenantId> dbSystemId=<OCID>

Purpose:
 Deletes an observer instance from ECRA for a DG system.

Arguments:
    custTenantId  : Customer tenancy OCID
    dbSystemId    : Observer ID

Example:
ecra> atp deleteObserver custTenantId=testcustomer dbSystemId=60
* Are you sure you want to delete DbSystemOCID [60]? This action
* cannot be undone
Type again 60 in order to proceed with the delete command in
opposite case just hit enter:60
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/ab46c7eb-77b5-42b3-90b3-dc740a9eb8ae

ecra> status ab46c7eb-77b5-42b3-90b3-dc740a9eb8ae
* {"status": 200, "status-detail": "success", "start_time": "2019-10-02T14:43:35-07", 
"status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/ab46c7eb-77b5-42b3-90b3-dc740a9eb8ae",
"end_time": "2019-10-02T14:45:20-", "message": "Done", "op": "deleteAtpObserver"}

terminateObserver
Usage: ./ecracli terminateObserver custTenantId=<custTenantId>
         or
       ecra> terminateObserver_atp custTenantId=<custTenantId>

Purpose:
 Terminate an observer instance from ECRA

Example:
ecra>  atp terminateObserver custTenantId=1234
* Are you sure you want to delete CustomerOCID [1234]? This action
* cannot be undone
Type again 1234 in order to proceed with the delete command in
opposite case just hit enter:1234
http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/d2c755a0-4be3-4894-b046-10d1e709ecb6

startObserver
Usage: ./ecracli startObserver custTenantId=<custTenantId>
         or
       ecra> startObserver_atp custTenantId=<custTenantId>

Purpose:
 Start an observer instance from ECRA which might have already been stopped during an LCM operation.

Example:
ecra> startObserver_atp custTenantId=1234
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/50804137-e51e-47b1-b6fa-d52d9ec58948
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request observer_operation successfully completed


stopObserver
Usage: ./ecracli stopObserver custTenantId=<custTenantId>
         or
       ecra> stopObserver_atp custTenantId=<custTenantId>

Purpose:
 Stop an observer instance from ECRA which might have already been running during an LCM operation.

Example:
ecra> stopObserver_atp custTenantId=1234
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/a5e2d416-b29e-4a71-8754-0abd236f43a6
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request observer_operation successfully completed

restartObserver
Usage: ./ecracli restartObserver custTenantId=<custTenantId>
         or
       ecra> restartObserver_atp custTenantId=<custTenantId>

Purpose:
 SOft reset an observer instance from ECRA. This will stop and start an observer during an LCM operation.

Example:
ecra> restartObserver_atp custTenantId=1234
* STATUS URI : http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/618c0e4f-6eaf-48e3-91a3-30af024aff7f
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request observer_operation successfully completed

reconfigService:
Usage: ./ecracli atp reconfigService <rackname=name> <reconfig_payload=payload_path>

Purpose:
Reconfig a service.

Example:
ecra> atp reconfigService rackname=slcqab02adm0506clu6 reconfig_payload=/path/to/reconfig/payload
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den02tob.us.oracle.com:9001/ecra/endpoint/statuses/3f951ac0-40d2-4b0c-a392-e46daec73d95", "op_start_time": "2018-12-18T11:00:30-0800", "message": "processing", "op": "atp_reconfig_service_post"}
 
getProperty:
Usage: ./ecracli atp getProperty [name=propName] [value=propValue] [type=propType]

Purpose:
Get an ATP property

Examples:
ecra> atp getProperty
* {"status": 200, "status-detail": "success", "properties": ["{name=null, type=IPTABLE_WHITELIST, value=443}", "{name=null, type=IPTABLE_WHITELIST, value=6200}", "{name=null, type=IPTABLE_WHITELIST, value=2484}"], "op": "atp_properties_get"}

ecra> atp getProperty name=test
* {"status": 200, "status-detail": "success", "properties": [], "op": "atp_properties_get"}

ecra> atp getProperty type=IPTABLE_WHITELIST
* {"status": 200, "status-detail": "success", "properties": ["{name=null, type=IPTABLE_WHITELIST, value=443}", "{name=null, type=IPTABLE_WHITELIST, value=6200}", "{name=null, type=IPTABLE_WHITELIST, value=2484}"], "op": "atp_properties_get"}

ecra> atp getProperty value=443
* {"status": 200, "status-detail": "success", "properties": ["{name=null, type=IPTABLE_WHITELIST, value=443}"], "op": "atp_properties_get"}

addProperty:
Usage: ./ecracli atp addProperty <value=propValue> <type=propType> [name=propName]

Purpose:
Add an ATP property

Examples:
ecra> atp addProperty
* Error: Please provide all mandatory parameters. Missing mandatory parameters are: [u'value', u'type']

ecra> atp addProperty value=test type=test
* {"status": 200, "status-detail": "success", "message": "Added Successfull", "op": "atp_properties_post"}

ecra> atp addProperty name=test value=test type=test
* {"status": 200, "status-detail": "success", "message": "Added Successfull", "op": "atp_properties_post"}

deleteProperty:
Usage: ./ecracli atp addProperty <value=propValue> <type=propType> [name=propName]

Purpose:
Delete an ATP property

Examples:
ecra> atp deleteProperty
* Error: Please provide all mandatory parameters. Missing mandatory parameters are: [u'value', u'type'] 

ecra> atp deleteProperty value=test type=test
* {"status": 200, "status-detail": "success", "message": "Deleted Successfully", "op": "atp_properties_delete"}

updateNetMetadata:
Usage: ./ecracli atp updateNetMetadata <rackname=rackname> <dev=[true|false]>  <json_path=path> <addCluster_json_path=path of add cluster>

Purpose:
Update ECRA metadata for ATP if VNIC details are already present.

Examples:
ecra> atp updateNetMetadata json_path=/home/rgmurali/metadata.json
* {"status": 200, "status-detail": "success", "op": "atp_metadata_post"}

ecra> atp updateNetMetadata rackname=iad1-d4-cl6-d079b4dd-9ecd-47f0-b408-a89e5f85638d-clu01 dev=true json_path=/ade/ddelgadi_AD_MAIN02/ecs/ecra/test/scenarios/exacsmvm/full/updateMetaData.json addCluster_json_path=/scratch/ddelgadi/view_storage/ddelgadi_AD_MAIN02/ecs/ecra/test/scenarios/exacsmvm/full/addcluster1.json
* {"status": 200, "status-detail": "success", "op": "atp_metadata_post"}

createOracleClientSubnet:
Usage: ./ecracli atp createOracleClientSubnet shape=quarter rackname=slcs20adm0304clu4

Purpose:
Create Oracle Client Subnet for Preprovisionng

Examples:
ecra> createOracleClientSubnet_atp shape=quarter
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://slc14rlu.us.oracle.com:9001/ecra/endpoint/statuses/a5204b4f-5406-4f16-8790-31d99098b814", "op_start_time": "2018-11-21T05:33:21-0800", "message": "processing", "op": "create_clientsubnet_post"}

getPreprovScheduler:
Usage: ./ecracli atp getPreprovScheduler

Purpose:
Get pre provisioning scheduler details.

Examples:
ecra> atp getPreprovScheduler
* {"status": 200, "status-detail": "success", "scheduler_job": {"status": "READY", "job_class": "oracle.exadata.ecra.cloudservices.atp.jobs.ATPPreprovScheduler", "last_update_by": "http://den01cxd.us.oracle.com:7032/EcraServer1", "job_params": "{\"rack_list_preconfigured\":false,\"scheduler_mode\":\"SEQUENTIAL\"}", "interval": 60, "enabled": "Y", "last_update": "2019-01-29 22:21:14.0", "target_server": "PRIMARY", "type": "RECURRENT", "id": 35}, "scheduler_state": "ENABLED", "message": "Successfully fetched details of pre provisioning scheduler.", "op": "preprov_scheduler_get"}

deletePreprovOracleClientVCN:
Usage: ./ecracli atp deletePreprovOracleClientVCN <rackname=name>

Purpose:
Delete an Oracle Client VCN

Arguments:
	rackname:Rackname that you want to delete preprov oracle client vcn

Examples:

i)
ecra> atp deletePreprovOracleClientVCN rackname=slcs20adm0304clu4
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den02tob.us.oracle.com:9001/ecra/endpoint/statuses/2c5f4f4c-b886-4998-bd87-18eace55abb2", "op_start_time": "2019-03-07T09:39:51-0800", "message": "processing", "op": "atp_clientsubnet_delete"}

ii) With OPS_DELETE_OPERATIONS DISABLED and ECRA_MODE in prod
ecra> atp deletePreprovOracleClientVCN rackname=slcs20adm0304clu4
* Delete operations has been disabled for ops in this ECRA
* Skipped deletePreprovOracleClientVCN command

iii) With OPS_DELETE_OPERATIONS ENABLED and ECRA_MODE in prod
ecra> atp deletePreprovOracleClientVCN rackname=slcs20adm0304clu4
* Are you sure you want to delete Rack [slcs20adm0304clu4]? This action cannot be undone
Type again slcs20adm0304clu4 in order to proceed with the delete command in opposite case just
hit enter:slcs20adm0304clu4
* {"status": 202, "est_op_end_time": "", "status-detail": "processing",
"status_uri":
"http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/d2cb2245-0b05-4af7-b720-34f31b807c7e",
"op_start_time": "2019-08-28T14:50:20-0700", "message": "processing", "op":
"atp_clientsubnet_delete"}

listScheduledRacks
Usage: ./ecracli atp listScheduledRacks

Purpose:
List racks scheduled for pre provisioning.

Examples:
ecra> atp listScheduledRacks
* {"status": 200, "status-detail": "success", "message": "Successfully fetched list of scheduled racks.", "scheduled_racks": ["slcs16adm0304clu1", "slcs16adm0304clu2", "slcs16adm0304clu3"], "op": "preprov_scheduled_racks_list"}

getScheduledRackPreprovJobs
Usage: ./ecracli atp getScheduledRackPreprovJobs rackname=<rack name>

Purpose:
Get pre provisioning jobs associated with given rack.

Examples:
ecra> atp getScheduledRackPreprovJobs rackname=slcs16adm0304clu2
* {"status": 200, "status-detail": "success", "message": "Successfully fetched pre provisioning jobs for rack: slcs16adm0304clu2", "jobs": {"ready": [], "running": [], "completed": ["{\"id\":23,\"job_class\":\"oracle.exadata.ecra.cloudservices.atp.jobs.ATPPreprovCreateOracleNetwork\",\"job_params\":\"{\\\"rack_name\\\":\\\"slcs16adm0304clu2\\\",\\\"expected_rack_status\\\":\\\"READY\\\"}\",\"start_time\":\"2019-01-29 08:14:06.0\",\"end_time\":\"2019-01-29 08:14:06.725992\",\"last_update_by\":\"http:\\/\\/den01cxd.us.oracle.com:7032\\/EcraServer1\",\"target_server\":\"PRIMARY\",\"type\":\"ONE-OFF\",\"planned_start\":\"2019-01-29 08:13:11.0\",\"timeout\":900,\"exit_status\":\"SUCCESS\",\"result\":\"{\\\"status\\\":202,\\\"status_uri\\\":\\\"internal-request-uri-not-set\\\\\\/ecra\\\\\\/endpoint\\\\\\/statuses\\\\\\/995e8354-c6cb-4bb7-8654-5744363f20c1\\\",\\\"op\\\":\\\"create_clientsubnet_post\\\",\\\"op_start_time\\\":\\\"2019-01-29T08:14:06-0800\\\",\\\"est_op_end_time\\\":\\\"\\\",\\\"message\\\":\\\"processing\\\",\\\"status-detail\\\":\\\"processing\\\"}\",\"job_group_id\":3}"]}, "op": "scheduled_rack_preprov_jobs_get"}

startPreprovScheduler
Usage: ./ecracli atp startPreprovScheduler [payload=<payload path>]

Purpose:
Start pre provisioning scheduler. If payload file is not provided, scheduler will be started with default payload present at <ecracli src>/tmpl/atp_preprov_scheduler.json. Input payload file must be based on <ecracli src>/tmpl/atp_preprov_scheduler.json. Default json will be like this.
bash-4.2$ cat ecracli/tmpl/atp_preprov_scheduler.json 
{
    "mode": "SEQUENTIAL",
    "process_all_racks": true,
    "racks": []
}

mode value will be SEQUENTIAL or PARALLEL

Examples:
ecra> atp startPreprovScheduler payload=/home/sachikuk/atp_preprov_scheduler.json
* {"status": 200, "status-detail": "success", "message": "Succesfully started pre provisioning scheduler.", "op": "preprov_scheduler_start"}

shutdownPreprovScheduler
Usage: ./ecracli atp shutdownPreprovScheduler

Purpose:
Shutdown pre provisioning scheduler.

Examples:
ecra> atp shutdownPreprovScheduler
* {"status": 200, "status-detail": "success", "message": "Successfully shut down pre provisioning scheduler.", "op": "preprov_scheduler_shutdown", "skipped_jobs": []}

createPreProvVMCluster
Usage: ./ecracli atp createPreProvVMCluster [payload=<payload path>]

Purpose:
This api will create preprov vmcluster for atp.

bash-4.2$ cat ecracli/tmpl/atp_preprov_vmcluster.json 
{
}

Examples:
ecra> atp createPreProvVMCluster payload=/home/sachikuk/atp_preprov_vmcluster.json
* {"status": 200, "status-detail": "success", "message": "Succesfully started preprov VMcluster.", "op": "preprov_scheduler_start"}


giServiceStop:
Usage: ./ecracli atp giServiceStop  rackname=slcs20adm0304clu4

Purpose:
Stop the GI Service for ATP Preprovisioing

Examples:
ecra> atp giServiceStop rackname=slcs20adm0304clu4
* {"status": 200, "status-detail": "success", "op": "giservicestop_get"}

sshkey:
add:
Usage: ecra> sshkey add <exaunit_id> <sshkey=<path-to-shh-key>> [users=oracle/opc/root][vms=_all_/specific vm] [sshcomment=<comment>]

Purpose:
Add sshkey information to authorized_keys in domU

Example:
ecra> sshkey add 1 sshkey=~/.ssh/id_rsa.den01syx.test.pub users=opc,oracle sshcomment=ECRA_PUB
* addkey for user opc, oracle at vm _all_ on exaunit 1
* STATUS URI : http://den01syx.us.oracle.com:9001/ecra/endpoint/statuses/0aa0ca6b-84cd-11e8-96c3-fa163e656ffc
* TARGET URI : http://den01syx.us.oracle.com:9001/ecra/endpoint/vms
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request addkey successfully completed

delete:
usage: ecra> sshkey delete <exaunit_id>[vms=_all_/specific vm]

Purpose:
Delete sshkey information from authorized_keys in domU

Example:
ecra> sshkey delete 1
* deletekey for user opc, oracle at vm _all_ on exaunit 1
* STATUS URI : http://den01syx.us.oracle.com:9001/ecra/endpoint/statuses/0aa0ca6b-84cd-11e8-96c3-fa163e656ffc
* TARGET URI : http://den01syx.us.oracle.com:9001/ecra/endpoint/vms
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
* Request deletekey successfully completed

get:
Usage: ecra> sshkey get exaunit_id=<id> user=<username> node_type=<dom0/domU/all_nodes/ibswitch/cell> host=<hostname/all>
       or
       ./ecracli sshkey get

Purpose:
 Fetch sshkey information of dom0 and domU machines.

Example:
ecra> sshkey get exaunit_id=1 node_type=ibswitch host=slcs16sw-iba0.us.oracle.com
* {
    "data": {
        "error": "", 
        "output": {
            "ibswitch": {
                "slcs16sw-iba0.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXgIBAAKBgQC4JIl07gxGkBkidFzxKEef6Y1JMOM5fEkgWIQk92GbD2KIkgQ0\nvYuy9MrCFK9ib/sKj4/k+oanDe/4ufjfjHzXgxKTbbp+q/09mki7PRdiQBUq68Q0\nt6gbc6z4DTCJu9Fz4sS0f4nqep+EsLmb9wKoBYNSeSh8Ig7b2cxuC9cvGQIDAQAB\nAoGAPvx4bB+04ToO7uMgm3isrz1DD6MCRjqGBONiKAbaQyDLEm3ntGaVb1weMq7C\nowgstZsPnEI5ZtD0oX5za3vxg22MHVA92gS3Jjvrm1/VZ6ThEoJbgKbX8XDik2aj\nyWa9qtsFIwZMmbjKD6GkCHA/oZrlsOZUs2UJhdXdXILpl9ECQQDcclmMAmBl6A0A\nbGVb4Folh8wgYznGvhgEN+AdVE0cGO217HEKIECox6IIVG4F2mcyeGbyZ83TxD54\n0x9USTANAkEA1ddLYmWVaUEQ0ZGcljYohYaVGkR0BbnOh2edYEaUGCeB4oYtPfBr\nAXprikjnIqlnEEjC2TKQNLkmQ8hHDRasPQJBALIqPRM6LHzQMgngkX7S8SiZ+zFF\n4MEui6yFGD28D2IhB6XbxXRgosGGLv+6dP2ICZWx18oceS6o0bDHOO/fAtUCQQDM\neSNCITRvAqJcYcnC8GJq2zdzeIUgfHz5iKA5UQOG3TAbNIXKNjt7nF18Sx2ITUeZ\nkJmQKgMuBuSJ59XYtBdZAkEAhNaWe4es4YC2ICTI0NmBJ7+PljTIKqaxEusmw4Ge\n2uYwHge1QOYiG+yM4u8IdVPep+1s1PYfweCj9dXbbE+LMA==\n-----END RSA PRIVATE KEY-----\n"
                }
            }
        }, 
        "success": "True"
    }, 
    "exaunitId": 1, 
    "hostname": "slcs16sw-iba0.us.oracle.com", 
    "node_type": "ibswitch", 
    "op": "exaunit_keys", 
    "status": 200, 
    "status-detail": "success", 
    "user": "root"
}

ecra> sshkey get exaunit_id=1
* {
    "data": {
        "error": "", 
        "output": {
            "cell": {
                "slcs16celadm04.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEA2vh/GCpjRSlnMqfAkEKKSGUGDYcWXuQOuF8QZWPOFaGZk4iT\nfWWB7gRh758lqYeb7+ECR4jU28hW5VAHn/JMUxwEEot/jnF8L7E6byt2rs0Uf+s/\n/ql6HQS6WJCoxz7E+p3Jf5d9vn5Nbjo7h7FrLCEkBpQRikyCbp9hh8LjCATCoyCx\nY+JiS/9mQivUBVTGJ17oguXbsGfeAbxZVDGHUU8xKrMyXmQ6c6wT/3ZokY7/Qaiv\njBWElKSGpb6sOrgbOuBXxHY6CbPoOxRX6U75dzT6xmknThbtuZOKYHmQxTNbpKkd\nCuGW0SeP+Sq2awWjL7+uYv57vHlVODvNxwpZCQIBIwKCAQEA1Lbh3PX6CKvgl5ul\nHmyGVPRsR6fMlrGn5k24J/qNrpz7lqHuXI5+N6x8ZR5B1+LR/vfWVB6Fok2WPdi2\n8yXjvnL8pEz/kbASPPVOtSLoUgkMmYVxXck0y7tzMXaVU9aTdxzvoISIx63k0Xpl\ntwQe96sqT4iGEVGjRuP4V/8lsALTzhfMUOUcfWbJOrNnZFPFVLmy+hsmeRRUZn/i\n/PYpAWEuIZypl1QIRcPY3BEtxh7lr/lheidXeZEJvk1EbDkosUKqDZY0TYLgmko2\nxHf5ya4fsmKY33+67HFLoIf961JGcv8cjzNPFm+OdDkKLE7jaho5QxMwg2HUTdt1\n3ykTiwKBgQDu4I3W7jZxOrSrksj+zu3m835L8tyhhGVE6y4rRvfd/oCUOpUrgK0T\ngqZppFQ9x+4Wmy0e8vJnt+iaWWeminZ+arxWij7h56qANMPqYylYUTXECqjCaTtd\n89Y+ggFyt3RFQkCM8BQAGRfXMfGGSDgLTXGIqRcN7hrAzegRpK+qSQKBgQDqqqeI\nImW9JspU8vVyTx+yL3vNu8AaGMgF+FXTcjxC4HIaoFccDTsATtotAB+KueqDvKB/\nE9x/DMS8nwd7fRXUzl9hO0nmDnsmdouPf6ogA4+7wFrlpG6ptDmcIqDU5sxGVXEB\nw6BM1avxbbMtMW1TbY2BXkSdv5f9obWVnoM4wQKBgQCBrRnMcq/XET2BthVXH+A7\ni38TSVMzG/x13sFKsX89/y/bcEJZcb0Kl2GnEBB5T0a70JTWSV8FGrF4XGt3qkBT\nQUGrUlymhRNqK0XIYbdb1FBjG7qyrieKxjJ5tEnt0U2/MpgR/qvFifb/yqevS8an\nDMiapO9CE4rdsZs8xx2IUwKBgQCg6gx6mz5zE0jpyyv2nKgFJ9/diA6yzyoSuOpl\nGyIB+P3JHX2PlAszaUUmK/hfIGZLtItP0xraxu1OI+ffpjrbESt134MhaQP9HhaO\nSOmvjWnf1FuWJ5xXHH9GfiUkRn1yDrPj89uiZqHKH1ZK4BBzuNYPkRkbtpQbohYd\ndAI1iwKBgQCCnBcMdR0H6r42luPGVC2JY0AlqHTG3nxqZdM/XQ0hHFLr5w623+xl\nvIAthdYfANpkkxbJmE/2cv0Xvnf9HFGaYD+S7Rw6QlzO9toLt2RBePlE6YYG+xZ3\nJZ5ByKKugklKRF1SX2oDYhC+I7uhSwOBD5+qplnsnPBVH3u6uKb9Nw==\n-----END RSA PRIVATE KEY-----\n"
                }, 
                "slcs16celadm05.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXAIBAAKBgQDSsMPckLpimQ7y2nk5GRZOHp/ovzNvmNOPnkbR3aG766ZJVZBV\n2lb+gCACkxIds+rrxXnct1/jlrf/yUFEU9QypKvYxQiQnPaHP+M45sTL3MIcemLE\nerhd6g2wGJ4SvN2HPIvjyZtEr1RdgpHFBGjPqEkqwxqd25wr+nMxzuI6owIDAQAB\nAoGAEQ3//MW2YK7VF/F5aJbQSGiQNy3rAviS/4gnYWuYYPbVUhBcC6cN7bH/ZVX0\nXHUo6gblM2mgmHKl2E25O8exYHZVHXb4x/YM2DqFeakv/txtlZR/iodyucl+ULaP\nFupvJ//Bc472Z448mH4ui0Y/s/ltL1n3B3Nt3QXxKtIM8AECQQD+P6heh/NQalig\nxMfS0+YEMKxOrTflfdADTrEOMFrDOUpr1sRGEEqV6dS3pygn10/bBrui+j1nmYMK\naBpdI5KjAkEA1CRL/7RZN6l11I2RO5/TJnsL/I6Og4Gf4/E4ndx+CtE9ZgoKBRCS\n5W/Orbg2CYtcIlPp4efZN3tTxkrZhVk4AQJBAN2vNahPE9k/EM4FJlJujnWC1wq2\nwDEqtQ/dMkYz5T+pmXlTxslsdQwn2WDUsA+lDizkvwCI/rdxQ6/0O2CQns8CQA8w\n7jRIYN8ohmSLIqxHXKJzyz7xomjuXlm/S1Oal3gE1cW50E/eiPZfFEjCWTRDw3w9\n0BC6PobHkQ8xCvSOmAECQCFtAdJFpV/8NKoHt+XbM/TWYLjTF6mPcmSxxT+c7nsT\ndNhmmG/CVS9umKt58mppYQUx6N62C6/qj8BY60Ho5kM=\n-----END RSA PRIVATE KEY-----\n"
                }, 
                "slcs16celadm06.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQDXThgniZaPW3qKdiMBcSWW43HEDGmcy++QUD97mPPQGrCGpU/s\nngNJ4L1UdNGa2CneLNCBeNO+EEPsDb5dAwy3iOlfIdXoIKT+zJpXMtVo/SM6MEn1\nWCfyAsg0udZYlRvicIUS4Pr6CUY2QE5zc8mU6HYzxtb2Nz3fswoQwuOMlQIDAQAB\nAoGAScy6+tJuiTUSC+Pym8vs1oufs1ON3/EHbLAVEoibCfocCAsiGjkPZ4NhYlGo\nhysRLtatobOI4N0yavdLCRbChIWsh4n9YU1zZxAoo8LDzc5J7ObNupjrEdkKuS4+\nJrfVN7hRW5p54QKAvXMYKaLw9nA8OOGWRbqImjOIGUoFMAECQQDwGhLh1rPxs7+a\na0mM7DzG/MewXIk2/tm1mJauCV+210iBjhexkv53oKpsk/5QJHspXNmO801UBaYh\n1c4Xj6uFAkEA5Y+xvKil1nSo6RIEZrx+a9nrvrZXRHgbLAo2jy53KLUbmkHgbeKQ\nZYBZpBMcNwi7SF4r7g2Df92Mwa3qNkkB0QJBANO8+rflAs19SdRhFvzK/JIzK9rw\n0CUKvG20AfW62IjC8/Mknup/ih9vNbwJCzYb5e1FL6ssDx6w2KBwD46hqY0CQF5N\nOyxO82E3pzOnbRtvD1fqu4cqjIrZ8/+RanxDEDwuudoSeclqKvsnUKuwFgUdlyHR\nXaZ68qwSLQJbGT2XnCECQQCHpvUANcvKSkx6uSlWcl61ENSH4iHNDp9CeCal+lvq\n88KsqG8tnqqgkY1wmMr6R7a+fGPsBGpnsdYj/SDbbgsp\n-----END RSA PRIVATE KEY-----\n"
                }
            }, 
            "dom0": {
                "slcs16adm03.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQCmbYbeaLVS3ndliGsEt5w4VZ+f4H/Qgtk99ZdYiYypPV0IExvc\n+6JxHtz6oIPL91aPJLO/RXBv4CLxirD/FP1yt5aFeR6CB72GHMKh/MFVrLjbDZkD\nQLvUgBRe7TEHkSwV4uzEnC84cqNpHE0/E3ZO8pfnAxV0OW4gsth6oSXF4wIDAQAB\nAoGAfB468yvL7t2S1doDViVJEIpq3WUkbXDoa1j5YkJS8PSeqSL3KLtRzmNiElgb\ncsYne+G3W/KBhC34YYM5tUMGMI9NkvXt/SevLQ0XK+yy53TfVulhE/LuVZRvjsSq\nzkKLverrPS9Pi7wXG2DMZDToR7ykFwYq/BWmgq8n+N4LXaECQQDcKlNdGR0i2r9t\n2UYKbrlDZMgFZvEAWxVwZl9cT0eeTpyLkGTN8rAHHwQnzSXG/mfzsY1NSO4Dc/r8\nlC790BkXAkEAwYQcIm1WMt0YM71V+enAIk+Xiw4yPlrLKAoqc5AsHIwOWgP7RPuX\nAPdwX7Uu7yvOFIWp1fgXKtas8Rqqbj5hFQJBAKVbTL1RjWaOMNSKKWbQfmi1mt0j\n0cJYpqOC4ABusvWdSUoxKuTbb4YJr49NLyBkFyMaqWvwaINDarClgx2yXAUCQQCg\nsWh/ehWLNSeEx2OenGmM1FT+BrLYLqLmw9JOllja975vJ0E/HkBdcBujjhvERbbi\nOcA3SsVKMGv55m/CDhClAkBS76stOnRgUifre22aHBySYXxJcFlwE5bbxsUAuF28\nIscwrJIjXXGWvznyu3dLjkZYUXUzqVqABU2Cwe2SWz78\n-----END RSA PRIVATE KEY-----\n"
                }, 
                "slcs16adm04.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXAIBAAKBgQCa8LnEIJWCrgyU8UiXg93OstDqiQmPNEA/g3NMWPdgYFS8vZO1\ncfrCdoediFAQkH1BnN1H5WUAAUy4zP9d8unFoBWQv8OhDVeq3jk0j4PXdjiweY67\n/o7pvYn+8A+VKoNebwFwZGLkqASCfAUViXgwKIj1JgBp5J27gGMSyeD5wQIDAQAB\nAoGAQwO/tX7Ka/1P39QEq9QTSeW5ytd+1Puqlk4Kvoj0ZjEENaZhjuc/qICP46kj\nyCZWptxsMT6c0sW9I2k3QrFgPrfQEqcZy4vRQl3UaYjI4ulj3RVY/mbWSpNDWQez\nMrNbUorSODtW+9j7hVITQRUCukbytJtAgPlhJ7GzSsbPN+kCQQDLB+Qq4juyHBKP\nWepBzB8qtzFkdcIX5z96Xv5C7Hg1aHjAde037s6lNyacyj8tT8xq36TKH5O3qvn6\nEu8+sdavAkEAw1zyQZJ090R/hDjLte8/LuyH1PBWeRA7+giXRaerl5PBHzrob6KR\nc1G8ffVABfcV27ViOR2v65QwYnfWABpSjwJAMhQXNnCo8syz00IFYwdbJKkc+L+H\nCWhTovZtVsqG9/1101sDEQnJVL0evAuyu5V0QWQ6fFR/lg0JLaKf+mHZJwJBAMGF\nVbhcsp6p7ML2W9yZ5PW/egIWHSKJUVApqGdoYxKgW2JrQQoseHZKVjRTd5sxGibs\nsyKu5K+wuIkh+gtaB8MCQCuCBYFnsrryhDRcdsgEBEGGWyWyjre6svy9LF7J7YtI\nqm+au0EQFl8iWu0CREmAZSvQSzYyyChwtIP/bwhxal0=\n-----END RSA PRIVATE KEY-----\n"
                }
            }, 
            "domu": {
                "slcs16adm03vm01-v303.us.oracle.com": {
                    "NAT_HOST": "", 
                    "NAT_IP": "", 
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXAIBAAKBgQCHashUGB7JQQWCSVQ2SVKhs9PpZCOY/awWKDbGTS+ml0JBYQZn\ncEUZU9AudbjL3/B7pICGPx3aHdoq7KmmlSF6eZom8MkCWIu3vafKBXJa3HQANJUP\nkyRjs83hovXR0jPWQjdPIjDXvTyE/xy5nzqYctkF7djrBbxxPwzg66BfFwIDAQAB\nAoGAf7lyFg9iCkTv40Ey0rk53Rb2S26OPOEXDRcFAukOhryoW24eUjYMlqT8+LVE\nhddExfoU14p0p6P8gPwTz/FdTvsDr7hgfAETnFjRQKEwsCffBmYyRViea8AWIAQZ\nB0Jiw8CGkeBtNiAXuLOwWwroCELy6WPnh8WIbouGsIukRWECQQDV2x+O/R2CfnjE\neBsPHADlfTeKGB5xI472uJMOIi/FT0HN7JwvoYx0Q9619Diyg9+KJq/rNN46gpFu\nxnQJXMg5AkEAohp6OW7XkZhVxkO6+psYEmJDBj5O9T5MBurqIi/VMQXaDvtuC80y\nwyDZ/XssHnTcKk8a8yPB3LoeSJIuOORBzwJAD16OKBKc2lIIj+Yp264hilyzbyNI\nnMz3a1fcibl/QWjuy8PjfbDYjUqLaPxCTuIXYLBjGD5WclIL7bApirq2UQJBAIPa\nW455vTg9G4/AKceL/cF+UZwzdFAA0yBRVg5mr9dHNj43fyR0TRTwlL+cv58qWKbF\nX1tju11JujY3SQeXinsCQAreSDsAvWpp18z8SSmTVparOhkC7KTDSwDgF7G/NQkr\nobnaIPCZDfz+Q1JzHrWaW7bT06QKk9TxSLQbypekcdo=\n-----END RSA PRIVATE KEY-----\n"
                }, 
                "slcs16adm04vm01-v303.us.oracle.com": {
                    "NAT_HOST": "", 
                    "NAT_IP": "", 
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXAIBAAKBgQCCttLSTvUOum7Ah3oopMtk31rImT76/WVIWVcIB9Ef6m2KyIri\noz1yix9S5ZaLt13ZK2AU1QUknCwZx9ngBW8Sgsv+pBVVbZE8H7ex/quuQ2kgEvG7\nan0NRxJSbfGpS0xQgwbqA/kpqovUlpQibEmShi1MBqGDwzFaG2WxzPYXGQIDAQAB\nAoGAGjdAoR1k2MdbXxHM1kn24QxK0OCrWPtpTNFeOyYWMyh5P9Roxnum30o3xhB1\n2R+1mtCwPH1cwrLvxVvnvp5YYDoq9vngVXz/9+5Vv7kNQ1yypb/z290UnOu3P87T\n8MjnAKwP3WwQhp0L6tPXcL8F882EuMjyDBxKCbo0/xYghmECQQDtUI9kgU7HJw4C\nMk1pnMfvTLXkJaaaFifInRT8jEhqDRLOjjjDJKbycKbmoyq+YCb6esGcKHh9d6dB\nfxwPUT+jAkEAjQGRHwbfSAq6EWmyM0RB6Hu5cNSToI7mu+w2UCKK2tzkhT/ynjOo\n8MXLr5XiNQbQSe8vT54vTCZWruvbe+YKEwJBANeoMea/q3tHfm94jui+1OId791Y\nacH1CEpClWO7h8L4BnM2w1Zy5FPFE6bb+GfwsPtGutLR5E0Agzn97N3uk8kCQDMw\nAW2hAgdWFYvisdUYj1CFMaF7GghsN+i6bFEU6RFgpPiWaU3y9P5K35FjONYFHjHo\nyWT+yK69MDSZ3HiS3s8CQHR4R9xu1cTamaVyUXSCvy2ZtlGFN/15CuM2U1efEjFW\nvx00XokeLHIf9QyAqNGq90WllzA4Rf+9ReF+cSWImyc=\n-----END RSA PRIVATE KEY-----\n"
                }
            }, 
            "ibswitch": {
                "slcs16sw-iba0.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXgIBAAKBgQC4JIl07gxGkBkidFzxKEef6Y1JMOM5fEkgWIQk92GbD2KIkgQ0\nvYuy9MrCFK9ib/sKj4/k+oanDe/4ufjfjHzXgxKTbbp+q/09mki7PRdiQBUq68Q0\nt6gbc6z4DTCJu9Fz4sS0f4nqep+EsLmb9wKoBYNSeSh8Ig7b2cxuC9cvGQIDAQAB\nAoGAPvx4bB+04ToO7uMgm3isrz1DD6MCRjqGBONiKAbaQyDLEm3ntGaVb1weMq7C\nowgstZsPnEI5ZtD0oX5za3vxg22MHVA92gS3Jjvrm1/VZ6ThEoJbgKbX8XDik2aj\nyWa9qtsFIwZMmbjKD6GkCHA/oZrlsOZUs2UJhdXdXILpl9ECQQDcclmMAmBl6A0A\nbGVb4Folh8wgYznGvhgEN+AdVE0cGO217HEKIECox6IIVG4F2mcyeGbyZ83TxD54\n0x9USTANAkEA1ddLYmWVaUEQ0ZGcljYohYaVGkR0BbnOh2edYEaUGCeB4oYtPfBr\nAXprikjnIqlnEEjC2TKQNLkmQ8hHDRasPQJBALIqPRM6LHzQMgngkX7S8SiZ+zFF\n4MEui6yFGD28D2IhB6XbxXRgosGGLv+6dP2ICZWx18oceS6o0bDHOO/fAtUCQQDM\neSNCITRvAqJcYcnC8GJq2zdzeIUgfHz5iKA5UQOG3TAbNIXKNjt7nF18Sx2ITUeZ\nkJmQKgMuBuSJ59XYtBdZAkEAhNaWe4es4YC2ICTI0NmBJ7+PljTIKqaxEusmw4Ge\n2uYwHge1QOYiG+yM4u8IdVPep+1s1PYfweCj9dXbbE+LMA==\n-----END RSA PRIVATE KEY-----\n"
                }, 
                "slcs16sw-ibb0.us.oracle.com": {
                    "key": "-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQCYreonEbPcnRjicPw7Z5fx05CoCAYduRTmfHubFakf18iR0z9F\n7W9ixQBcPIoxz4h4zlCRvzUHPItsE2Ylp0+6Ml/j11+u/egVlJcrEecTrRuaENmJ\nrJ1ujbLxnCXkNeAiK3IkMPBNUaxfbOR7XBkVSsrDebhYYXkMCUZErLDbZQIDAQAB\nAoGBAI82w2b2YgJUkd0GInMOjyZVT2FudV44F/TDW6ZzQPsPi6HNx5IuT8cUB2x9\nlRt4EglPbZ/o/TLWhelQoQY81Ljc8vNew1R3K7V4ijc5TRfb42OgcP5fpqiznFKq\nu9bNKSrEpD2DEfmeTGO/+RTGfzBH4V4vSrNwnqG7BeCJbNlZAkEA15DZQso8qVjM\nZ1LPl0wO0kJqOFwMbOwYJKYzkgJWA2+2vCOw+8FGCD/l+YSNdg7kEsNQ65pnA0YA\nR9hjTxR/wwJBALVRWemmg+9l9uExmh8L6xcNMYddp0odsVm+4l+ZCtlQR4fMCcke\n4nB8Q/ZMfsluSJwbxxKBtadiM6KMRhAW7bcCQBoOplSOgbquwzaSKgnN5dTAtnpN\nlirsdxanCIDTy3Xq4Rno7pHgEQkaQEBjJ35n2mXyOivgpCcfJRWKMKb0gWUCQHnJ\nrs8WHcCLiIwyOQdphfrxzbbS3S8XSqyxXnQ/492b4rAACQKiUA6mKTAiqXa7MOJK\ndiikH1PSzkP8XIMqI3kCQQCpyluDV94DFxJz98e2rRO8xzq2jwSXjuRhJTwtIlpD\n8J4cj6v8YTlrcAd++5D+tzb14J8XWvW7UxcG0J88GW91\n-----END RSA PRIVATE KEY-----\n"
                }
            }
        }, 
        "success": "True"
    }, 
    "exaunitId": 1, 
    "hostname": "all", 
    "node_type": "all_nodes", 
    "op": "exaunit_keys", 
    "status": 200, 
    "status-detail": "success", 
    "user": "root"
}

createdomukey:
usage: 
  ecra> sshkey createdomukey <exaunit id> [domu=<domu>] [user=<user>] [wait=<true/false>]

Purpose:
  Crea a new temporal SSH Key pair to get access to DomU

Arguments:
  exaunit_id: the exaunit id
  domu: if not provided, a domU will be taken from the ECS_CORES table.
  user: if not provided, the default user will be 'ops'
  wait: use false to return the response from async api, use true to wait until the async call finishes

Example:
ecra> sshkey createdomukey exaunit_id=17051
* {
    "domu": "_all_",
    "public_key": "zeuskey",
    "user": "opc"
}

ecra> sshkey createdomukey exaunit_id=17051 wait=false
* {
    "est_op_end_time": "",
    "exaunit_id": 17051,
    "message": "processing",
    "op": "generate-vm-public-key",
    "op_start_time": "2025-03-10T18:24:37+0000",
    "status": 202,
    "status-detail": "processing",
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/154d67d7-7d87-49ff-bc40-3776334c5967",
    "target_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/exaunit/17051/vms/sshkey/154d67d7-7d87-49ff-bc40-3776334c5967"
}
ecra> status 154d67d7-7d87-49ff-bc40-3776334c5967
* {"progress_percent": 0, "exaunit_id": 17051, "start_time_ts": "2025-03-10 18:24:37.0", "end_time": "2025-03-10T18:24:44+0000", "ecra_server": "EcraServer1", "wf_uuid": "95a07457-843a-42da-bb59-bc8d1227cd70", "start_time": "2025-03-10T18:24:37+0000", "exa_ocid": "flowtesterInfra", "target_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/exaunit/17051/vms/sshkey/154d67d7-7d87-49ff-bc40-3776334c5967", "last_heartbeat_update": "2025-03-10T18:24:37+0000", "status": 200, "message": "Done", "op": "generate-vm-public-key", "completion_percentage": 0, "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/154d67d7-7d87-49ff-bc40-3776334c5967", "status-detail": "success"}
ecra> workflows describe workflowId=95a07457-843a-42da-bb59-bc8d1227cd70
* {
    "workflowName": "ssh-temporal-key-create-wfd",
    "workflowId": "95a07457-843a-42da-bb59-bc8d1227cd70",
    "workflowStatus": "Completed",
    "workflowStartTime": "10 Mar 2025 18:24:37 UTC",
    "workflowEndTime": "10 Mar 2025 18:24:44 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "InvokeECForCreateDomUPublicKeyTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Mon Mar 10 18:24:37 UTC 2025",
            "taskEndTime": "Mon Mar 10 18:24:43 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:06"
        },
        {
            "taskName": "UpdateMetadataCreateDomUPublicKeyTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Mon Mar 10 18:24:43 UTC 2025",
            "taskEndTime": "Mon Mar 10 18:24:43 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "EndWf",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Mon Mar 10 18:24:43 UTC 2025",
            "taskEndTime": "Mon Mar 10 18:24:43 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "EndWf",
            "lastOperationDetails": {
                "lastTaskLastOperationId": "58f43f09-abfb-4147-8849-0ea97d0fa3fb",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "10 Mar 2025 18:24:43 UTC",
                "lastTaskLastOperationEndTime": "10 Mar 2025 18:24:44 UTC"
            }
        }
    ],
    "workflowElapsed": "00:00:07",
    "workflowRuntime": "00:00:06",
    "exaOCID": "",
    "requestId": "154d67d7-7d87-49ff-bc40-3776334c5967",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}


verifydomukey
usage: 
  ecra> sshkey createdomukey <exaunit id> domu=<domu> user=<user>

Purpose:
  Verify if the SSH key pair associated to the specified VM and user is still operational.

Arguments:
  exaunit_id: the exaunit id
  domu: the target domU.
  user: The user associated to the key.

Example:
  ecra> sshkey  verifydomukey 1 domu=scaqai17dv0208.us.oracle.com user=opc
  * {
      "key_status": "available",
      "op": "exaunit_publickey_verify",
      "status": 200,
      "status-detail": "success"
  }

deletedomukey
usage: 
  ecra> sshkey deletedomukey <exaunit id> [domu=<domu>] [user=<user>]

Purpose:
  Delete the private SSH key associated to the specified exaunit, domU and user.

Arguments:
  exaunit_id: the exaunit id
  domu: the target domU, if not specified the target will be all exaunit's domUs
  user: The target user, if not specified, the default value will be 'ops'

Example:
  ecra> sshkey deletedomukey 1 user=ecrauser
* {
    "op": "exaunit_publickey_delete",
    "status": 200,
    "status-detail": "success"
}

listsubmittedwfs
usage:
  ecra> listsubmittedwfs operation=<operation_type> status=<status> start_time=<start_time> end_time=<end_time> id=<request_id> wf_uuid=<workflow_id> resource_id=<resource_id>

Purpose:
  Get list of submitted workflows

Arguments:
  operation: type of operation
  start_time: operation start time
  end_time: operation end time
  status: status(202,500)
  id: request id
  wf_id: workflow-id
  resource_id: id of the resource
  page: number of pages
  pagesize: number of records in each page(max size is 25)


Examples:
1- ecra> listsubmittedwfs operation=reshape-service
* {
    "message": "Operation to get list of submitted wf is successful",
    "op": "submitted_wf_list_get",
    "requests": [
        {
            "endTime": "2025-07-09T14:48:01+0000",
            "id": "71b4919a-edf3-4588-b166-9caa01e6fc11",
            "operation": "reshape-service",
            "resourceId": "sea131326exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-09T14:47:21+0000",
            "status": "200",
            "wfUuid": "d9f6ea8f-1bea-46f0-b447-11df29776c3f"
        },
        {
            "endTime": "2025-07-09T14:47:01+0000",
            "id": "8bdf95dc-c2fa-4180-a110-fe16fb2eebd9",
            "operation": "reshape-service",
            "resourceId": "sea131326exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-09T14:46:05+0000",
            "status": "200",
            "wfUuid": "6521f11d-9c28-4f47-a4e4-bbeca9c170fd"
        },
        {
            "endTime": "2025-07-09T14:46:01+0000",
            "id": "bd52b10c-59a3-4e40-8f46-6ef8ed7a804c",
            "operation": "reshape-service",
            "resourceId": "sea131326exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-09T14:45:15+0000",
            "status": "200",
            "wfUuid": "4f315144-0a3b-4df0-a01e-d57f08d6dc33"
        },
        {
            "endTime": "2025-07-09T14:45:14+0000",
            "id": "c92dcb68-0e22-40ba-a574-412627eb460d",
            "operation": "reshape-service",
            "resourceId": "sea131326exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-09T14:44:59+0000",
            "status": "200",
            "wfUuid": "3f132bba-504d-43ba-b22e-e543dc7459d8"
        },
        {
            "endTime": "2025-07-09T14:44:01+0000",
            "id": "e38a3609-089d-4748-901a-23919a071026",
            "operation": "reshape-service",
            "resourceId": "sea131326exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-09T14:32:13+0000",
            "status": "200",
            "wfUuid": "efa06341-76cb-4ac8-98b7-7afeddb712a7"
        },
        {
            "endTime": "2025-07-09T14:32:01+0000",
            "id": "8709f6b6-2a43-48b3-b4aa-4fea2f900a19",
            "operation": "reshape-service",
            "resourceId": "sea131326exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-09T14:22:12+0000",
            "status": "200",
            "wfUuid": "7cef2ca7-b12c-417f-a680-2c5a6f90bd8e"
        },
    ],
    "status": 200,
    "status-detail": "success"
}

2- ecra> listsubmittedwfs operation=reshape-service status=500 start_time=2025-07-01 end_time=2025-07-01 id=b151fa0f-f0d3-4b52-b637-eba9036bca61 wf_uuid=090b8dba-cdaa-448f-948c-d88b59863208 resource_id=sea114065exd-hbpat-MyFirstTXXX-clu01
* {
    "message": "Operation to get list of submitted wf is successful",
    "op": "submitted_wf_list_get",
    "requests": [
        {
            "endTime": "2025-07-01T10:57:58+0000",
            "id": "b151fa0f-f0d3-4b52-b637-eba9036bca61",
            "operation": "reshape-service",
            "resourceId": "sea114065exd-hbpat-MyFirstTXXX-clu01",
            "startTime": "2025-07-01T10:56:39+0000",
            "status": "500",
            "wfUuid": "090b8dba-cdaa-448f-948c-d88b59863208"
        }
    ],
    "status": 200,
    "status-detail": "success"
}



addadbskey
usage: 
  ecra> sshkey addadbskey <exaunitid> [idemtoken=<idemtoken>]

Purpose:
  Add the adbs key to KMS.

Arguments:
  exaunitid: the exaunit id
  idemtoken: the idemtoken for the operation

Example:
 ecra> sshkey addadbskey 20068
* {"status": 202, 
"status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f886f3ed-f3a0-432f-a326-6525b20bb1a0", 
"op": "add_adbs_key_post", "op_start_time": "2025-05-27T16:46:43+0000", "est_op_end_time": "", "message": "processing", 
"status-detail": "processing", "exaunit_id": 20068}

ecra> status f886f3ed-f3a0-432f-a326-6525b20bb1a0
* {"progress_percent": 0, "exaunit_id": 20068, "start_time_ts": "2025-05-27 16:46:43.0",
 "end_time": "2025-05-27T16:46:44+0000", "ecra_server": "EcraServer1", 
 "wf_uuid": "a595150d-11e4-4028-8de1-c921855aa86b", "start_time": "2025-05-27T16:46:43+0000", 
 "last_heartbeat_update": "2025-05-27T16:46:43+0000", "status": 200, "message": "Done", 
 "op": "add_adbs_key_post", "completion_percentage": 0, 
 "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f886f3ed-f3a0-432f-a326-6525b20bb1a0", 
 "status-detail": "success"}

removeadbskey
usage: 
  ecra> sshkey removeadbskey <exaunitid> [idemtoken=<idemtoken>]

Purpose:
  Delete the adbs key from KMS.

Arguments:
  exaunitid: the exaunit id
  idemtoken: the idemtoken for the operation

Example:
 ecra> sshkey removeadbskey 20068
* {"status": 202, 
"status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/159fe8da-17cb-4f14-80a9-728731ef6e28", 
"op": "remove_adbs_key_post", "op_start_time": "2025-05-28T01:05:55+0000", "est_op_end_time": "", 
"message": "processing", "status-detail": "processing", "exaunit_id": 20068}

ecra> status 159fe8da-17cb-4f14-80a9-728731ef6e28
* {"progress_percent": 0, "exaunit_id": 20068, "start_time_ts": "2025-05-28 01:05:55.0", 
"end_time": "2025-05-28T01:06:01+0000", "ecra_server": "EcraServer1", 
"wf_uuid": "af2ffe83-bc00-4965-b7d4-151962e5384f", "start_time": "2025-05-28T01:05:55+0000", 
"last_heartbeat_update": "2025-05-28T01:05:55+0000", "status": 200, "message": "Done", 
"op": "remove_adbs_key_post", "completion_percentage": 0, 
"status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/159fe8da-17cb-4f14-80a9-728731ef6e28", 
"status-detail": "success"}


Requests:

requests info:
Usage:  ./ecracli requests info [raw=<true/false>] [<key1=value1> <key2=value2> ...]
             or
        ecra> requests info [raw=<true/false>] [<key1=value1> <key2=value2> ...]

Purpose:
    Query requests using input options as query params
    
Arguments:
    raw : By default raw is set to False and ecracli will print out a nicely formatted output.
          By setting raw to either True or true, ecracli will print output in raw json format.

    optional: zone=<zone_name> if not passed then connects to all the zones
              operation=<operation-name>, 
              status=<operation-status> like 200/500/202
              exaunitid=<exaunit_id>
              id=<requestid or status_uuid>

Examples:
ecra> requests info id=af0ddb40-8475-4e45-8b4d-e3b683cbb12c
* {u'status': 200, u'status-detail': u'success', u'data': [], u'op': u'handle_requests'}
* No request found for given query

ecra> requests info id=13882be2-69a4-11e7-9030-fa163ed5ac29
* GET http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/13882be2-69a4-11e7-9030-fa163ed5ac29
* {"status": 200, "exaunit_id": 2, "target_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/vms/slcs20adm05vm05.us.oracle.com", "status-detail": "success", "start_time": "2017-07-15T14:25:08-0700", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/13882be2-69a4-11e7-9030-fa163ed5ac29", "statusinfo": "000:: No status info available", "end_time": "2017-07-15T14:28:08-0700", "error": "0", "ec_details": "Undef", "message": "Done", "op": "vm_command", "error_str": "No Errors"}


ecra> requests info status=500
* list of found requests
* ------------------------------------------------
* request id  f9470185-1a88-4f21-bb4e-380ebea5ff04
* zone        uscom-central-1a
* operation   create-service
* status      500
* uri         http://slc14rlu.us.oracle.com:9001/ecra/endpoint
* dc          us1
* region      rg001
* start_time  2018-04-10T22:51:45-0700
* ------------------------------------------------
* request id  f1d921d0-a50e-44f4-8476-6a49b7551b70
* zone        uscom-central-1a
* operation   create-service
* status      500
* uri         http://slc14rlu.us.oracle.com:9001/ecra/endpoint
* dc          us1
* region      rg001
* start_time  2018-04-09T01:54:47-0700
* ------------------------------------------------
* request id  3b7913aa-69c1-4815-9f08-f8cf267664de
* zone        uscom-central-1a
* operation   create-service
* status      500
* uri         http://slc14rlu.us.oracle.com:9001/ecra/endpoint
* dc          us1
* region      rg001
* start_time  2018-04-09T01:53:59-0700


*) requests info status=500
*) requests info status=202 operation=creaet-service
*) requests info status=202 zone=hsc001
*) requests info status=202 
*) requests info status=202 exaunitid=100 raw=true

requests abort:
Usage: ./ecracli requests abort exaunitid=<exaunit_id> operation_name=<operation_name> [status=<status>]

Purpose:
    Abort a pending request

Arguments:
    exaunitid: The exaunit pod id.
    operation:  Operation name (eg. 'create-service')
    optional:
    	status: HTTP status to set in request. If no status is provided, the default value is 500

Examples:
ecra> requests abort exaunitid=2 operation='delete-service'
* *** Note that this operation only cleans up the metadata in ECRA, if there is any operation in progress in ExaCloud it needs to be terminated manually ***
* Error: Delete request to http://den02tob.us.oracle.com:9001/ecra/endpoint/exaunit/2/abort/delete-service failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Couldn not find POD record, exaunit id: 2","status-detail":"Could not find POD record, exaunit id: 2","op":"version_get"}

ecra> requests abort exaunitid=1 operation='delete-service'
* *** Note that this operation only cleans up the metadata in ECRA, if there is any operation in progress in ExaCloud it needs to be terminated manually ***
* Error: Delete request to http://den02tob.us.oracle.com:9001/ecra/endpoint/exaunit/1/abort/delete-service failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Could not find request with given parameters","status-detail":"Could not find request with given parameters","op":"notset"}

ecra> requests abort exaunitid=1 operation='create-service'
* *** Note that this operation only cleans up the metadata in ECRA, if there is any operation in progress in ExaCloud it needs to be terminated manually ***
* {"status": 200, "status-detail": "success", "message": "Successfully aborted request", "op": "notset"}

ecra> requests abort exaunitid=1 operation='create-service' status=200
* *** Note that this operation only cleans up the metadata in ECRA, if there is any operation in progress in ExaCloud it needs to be terminated manually ***
* {"status": 200, "status-detail": "success", "message": "Successfully aborted request", "op": "notset"}


requests abort_async:
Usage: ./ecracli requests abort_async uuid=<uuid>

Purpose:
    Abort an async call setting its status to 500 so the status updater can terminate the async operation

Arguments:
    Required:
        uuid: Unique identifier for the async call

Examples:



requests list_async:
Usage: ./ecracli requests list_async [status=<http_status>]

Purpose:
    Get a list of ecra async calls

Arguments:
    Optional:
        status: List only async calls with this http status

Examples:
ecra> requests list_async
* Async requests:
* -----------------------------------------
* uuid 663d6c79-d5e4-4903-adae-4665ac492522
* type        createATPDbSystem
* start_time  2019-03-01T10:34:01-08
* end_time    2019-03-01T10:34:32-
* status      200
* -----------------------------------------
* uuid c2ede10e-26ab-4adc-a681-4c0de1f5afab
* type        createATPDbSystem
* start_time  2019-03-01T10:29:55-08
* end_time    2019-03-01T10:30:26-
* status      200
* -----------------------------------------
* uuid 7770acfc-0e79-4fca-b402-d86f746377d1
* type        createATPDbSystem
* start_time  2019-03-01T09:58:42-08
* status      500

ecra> requests list_async status=500
* Async requests:
* -----------------------------------------
* uuid 7770acfc-0e79-4fca-b402-d86f746377d1
* type        createATPDbSystem
* start_time  2019-03-01T09:58:42-08
* status      500

Requests list_multiop_request for multioperations:
Usage: ./ecracli multiop_details id=<request id>
            
Purpose:
    Return child details of the parent request

Arguments:
    id : Query by request id.
   

Examples:
ecra> requests multiop_details id=51d4fe7c-e153-4d50-ae3d-df9af7042963
* list of found requests
* ------------------------------------------------
* request id  93adea7e-52bb-4a1d-bf59-d8c304ba92a9
* sub_req_id  0
* operation   exaunit-attach-cell
* status      200
* exaunit_id  1420
* status_uuid 98b16bce-5be4-11e9-905a-fa163e51ff8d
* start_time  2019-04-10T16:01:38-0700
* details     {"exaunitId":1420,"formationId":61,"inventoryId":"cell01adm","ec_details":"{\"subop\":\"resizecells\",\"OldUpdatedXmlPath\":\"..\\\/PodRepo\\\/info.scaqab10adm0708-clu-1.74f46017-b620-4996-a0b7-a59d7a04e8f6.prereshape.xml\",\"exaunit_id\":1420,\"OldOriginalXmlPath\":\"..\\\/PodRepo\\\/rack_scaqab10adm0708-clu-1_0b68f4cd-d099-4465-897b-495fa96acd3b.orig.xml\"}"}
* ------------------------------------------------
* request id  713e29bb-a65c-4f4a-86d4-6a04a777c9d0
* sub_req_id  1
* operation   exaunit-attach-cell
* status      202
* exaunit_id  1420
* status_uuid c6235356-600d-11e9-900d-fa163e51ff8d
* start_time  2019-04-15T23:06:28-0700
* details     {"exaunitId":1420,"formationId":61,"inventoryId":"cell02adm","ec_details":"{\"subop\":\"resizecells\",\"OldUpdatedXmlPath\":\"..\\\/PodRepo\\\/info.scaqab10adm0708-clu-1.88fdfbd3-79dc-4ada-9c40-b4efa75d5ce7.prereshape.xml\",\"exaunit_id\":1420,\"OldOriginalXmlPath\":\"..\\\/PodRepo\\\/rack_scaqab10adm0708-clu-1_74e2ae01-7995-4e4a-b0f7-23db95a1ca89.orig.xml\"}"}

Requests multiop_recover for multioperations:
Usage: ./ecracli recover_multiop id=<request_id>
            

Purpose:
    Recover a multi operation request

Arguments:
    id : Request id for multioperation.

Examples:
ecra> requests multiop_recover id=51d4fe7c-e153-4d50-ae3d-df9af7042963
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den03cke.us.oracle.com:9001/ecra/endpoint/statuses/51d4fe7c-e153-4d50-ae3d-df9af7042963", "op_start_time": "2019-04-15T23:06:28-0700", "message": "processing", "op": "multiple_operation_action_post"}


Request multiop_disable_step 

Usage: requests multiop_disable_step id=<parent id> step=<step>

Purpose:
    Disable the execution of the specified step

Arguments:
    id   : Request id for multioperation.
    step : The index if the child operation to disable.

Examples: 
ecra> requests multiop_disable_step id=b3580f8b-55f4-47a7-9e02-a48c186f67fe step=2


Request multiop_enable_step 

Usage: requests multiop_enable_step id=<parent id> step=<step>

Purpose:
    Enable the execution of the specified step

Arguments:
    id   : Request id for multioperation.
    step : The index if the child operation to enable.

Examples: 
ecra> requests multiop_enable_step id=b3580f8b-55f4-47a7-9e02-a48c186f67fe step=2


Requests Update:

usage: ecra> requests update request_id=<request_id>  [status=<status>] [operation=<operation>] [errors=<errors>] [target_uri=<target_uri>] [details=<details>] [body=<body>] [resource_id=<resource_id>] [status_uuid=<status_uuid>]

PAYLOAD:

{
	"params" : [
		
		{
			"parameter":"<parameter>",
			"value":"<value>"
		},{
			"parameter2":"<parameter2>",
			"value2":"<value2>"
		}
		]
}

has to be in above way, could have any number of valid params with no duplicates 

Examples:

with non existent reqId

ecra> requests update request_id=2b24a707-e3b7-4e5f-afe4-f09a89d2dfd664
* POST http://den00ucw.us.oracle.com:9032/ecra/endpoint/reqoperations/2b24a707-e3b7-4e5f-afe4-f09a89d2dfd664
* Error: POST request to http://den00ucw.us.oracle.com:9032/ecra/endpoint/reqoperations/2b24a707-e3b7-4e5f-afe4-f09a89d2dfd664 failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Request primary key is not supplied for the update query","status-detail":"Request primary key is not supplied for the update query","op":"reqoperations_post"}
* Error: Failed to get http://den00ucw.us.oracle.com:9032/ecra/endpoint/reqoperations/2b24a707-e3b7-4e5f-afe4-f09a89d2dfd664
ecra> 


with no parameters to update will work in a idempotent way showing ok status

ecra> requests update request_id=2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6
* POST http://den00ucw.us.oracle.com:9032/ecra/endpoint/reqoperations/2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6
* {
    "status": "succesfully updated values of req: 2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6"
}

with no supported parameters

ecra> requests update request_id=2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6 staus=200
* Error: Not supported parameter(s): ['staus']. The available ones are: [u'request_id', u'operation', u'status', u'error', u'target_uri', u'details', u'body', u'resource_id', u'status_uuid']
ecra> 

cant update without requestID

ecra> requests update  status=200
* Error: Please provide all mandatory parameters. Missing mandatory parameters are: [u'request_id']

sucesfully made changes

ecra> requests update request_id=2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6 status=500 operation='rack-register' errors="Internal Server Error"
* POST http://den00ucw.us.oracle.com:9032/ecra/endpoint/reqoperations/2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6
* {
    "status": "succesfully updated values of req: 2b24a707-e3b7-4e5f-afe4-f09a89d2dfd6"
}
ecra> 

requests get:
Usage:  ./ecracli requests get id=<request_id> [fields=<comma splitted fields to retrieve>]
             or
        ecra> requests get id=<request_id> [fields=<comma splitted fields to retrieve>]

Purpose:
    Retrieves data related to the request. Use fields to add the extra columns to be retrieved
    
Arguments:
    id: The request id
    fields: Comma splitted fields to be retrieved 

Examples:
ecra> requests get id=11299d69-cdf3-4aee-9bc5-657803ffe65a fields=body,details,errors,resource_id
* {
    "result": {
        "details": {
            "operations": [
                {
                    "exaunit_id": 412,
                    "resource_id": "sea201507exdcl08",
                    "operation": "exaunit-delete-cell",
                    "details": "{\"cellnodes\":[\"sea201507exdcl08\"],\"releaseservers\":true,\"inventoryId\":[\"sea201507exdcl08\"],\"exaunitId\":412,\"rackname\":\"iad1-d4-cl3-559310b4-f51e-40e3-9840-e77430899e0f-clu02\",\"rack\":\"iad1-d4-cl3-559310b4-f51e-40e3-9840-e77430899e0f-clu02\",\"formationId\":\"412\"}",
                    "enabled": true
                },
                {
                    "exaunit_id": 411,
                    "resource_id": "sea201507exdcl08",
                    "operation": "exaunit-delete-cell",
                    "details": "{\"cellnodes\":[\"sea201507exdcl08\"],\"releaseservers\":true,\"inventoryId\":[\"sea201507exdcl08\"],\"exaunitId\":411,\"rackname\":\"iad1-d4-cl3-559310b4-f51e-40e3-9840-e77430899e0f-clu01\",\"rack\":\"iad1-d4-cl3-559310b4-f51e-40e3-9840-e77430899e0f-clu01\",\"formationId\":\"411\"}",
                    "enabled": true
                }
            ],
            "step": 1,
            "child_details": {
                "0": {
                    "wf_uuid": "33148737-e466-4ef2-88d4-884fb35b1a99"
                },
                "1": {
                    "wf_uuid": "2c5f64b2-20d5-49e7-b00e-dc61539a4fc3"
                }
            },
            "deleted_cells": [
                "sea201507exdcl08"
            ],
            "payload": {
                "idemtoken": "81d41657-162c-4449-a389-a680ca1b7cc0",
                "servers": "sea201507exdcl08",
                "releaseservers": "true"
            },
            "cdb_response": [
                {
                    "type": "rack",
                    "name": "iad1-d4-cl3-559310b4-f51e-40e3-9840-e77430899e0f-clu02",
                    "ocid": "test.vmocid1",
                    "message": "done",
                    "success": true
                },
                {
                    "type": "rack",
                    "name": "iad1-d4-cl3-559310b4-f51e-40e3-9840-e77430899e0f-clu01",
                    "ocid": "test.vmocid1",
                    "message": "done",
                    "success": true
                }
            ]
        },
        "resource_id": "sea201507exdcl08",
        "id": "11299d69-cdf3-4aee-9bc5-657803ffe65a",
        "status": "200",
        "wf_uuid": "2c5f64b2-20d5-49e7-b00e-dc61539a4fc3",
        "start_time": "2024-03-22T06:12:19+0000",
        "end_time": "2024-03-22T06:14:31+0000"
    },
    "status": 200,
    "op": "requests_get",
    "status-detail": "success"
}

ecra> requests get id=11299d69-cdf3-4aee-9bc5-657803ffe65a
* {
    "result": {
        "id": "11299d69-cdf3-4aee-9bc5-657803ffe65a",
        "status": "200",
        "wf_uuid": "2c5f64b2-20d5-49e7-b00e-dc61539a4fc3",
        "start_time": "2024-03-22T06:12:19+0000",
        "end_time": "2024-03-22T06:14:31+0000"
    },
    "status": 200,
    "op": "requests_get",
    "status-detail": "success"
}

requests addregistry:
Usage:  ./ecracli requests addregistry requestid=<request id> rackname=<>rackname operationname=<operation name>

Purpose:
    Generate a registry record with the information provided.

Arguments:
    requestid: The request id
    rackname: The rack which request belongs to
    operationname: The operation running on the rack

Examples:
ecra> requests addregistry requestid=60f4fabb-8a4e-4234-a537-57d6b5f9d753 rackname=sea2-d4-cl3-3eec8336-93ba-44f2-98e9-e990b57a8a71-clu01 operationname=mvm_attach_storage
* PUT http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/requests/addregistry/60f4fabb-8a4e-4234-a537-57d6b5f9d753
* {
    "op": "add_registry_put",
    "status": 200,
    "status-detail": "success"
}

Exadata Infra Patch:
patch: 
Usage: ecra> help patch
                      or
             ./ecracli help patch
Purpose:
  Run to get the help of exadata patch commands.
  
Example:
 ____________________________________
Usage: ecra> help patch
<target> <cluster_name(s)> [op=<operations>] [serviceType=<serviceType>] [exasplice=yes|no] [rackModel=<rackModel>]
<target> <exaocid=<exaocid>> [op=<operations>] [serviceType=<serviceType>] [TargetVersion=<targetVersion>] in case of cps patching. For cps patching details, type help patch cps
Apply Exadata patch operation for given target type (cell, dom0, domu, ibswitch and qfab) in each given cluster.
*) Examples:
    patch dom0 slcs08adm07adm08 serviceType=EXACS
    patch dom0 slcs08adm07adm08 serviceType=EXACS rackModel=X9M-2
    patch domu slcs16adm0708clu12 serviceType=EXACS
    patch dom0+cell slcs08adm07adm08 serviceType=EXACS
    patch dom0+cell slcs08adm07adm08 scas07adm0304 serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=rollback serviceType=EXACS
    patch switch scas07adm0304clu1 serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=patch serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=patch serviceType=EXACS exasplice=yes
    patch domu slcs16adm0708clu12 op=patch serviceType=EXACS
    patch dom0+cell slcs08adm07adm08 op=patch serviceType=EXACS
    patch dom0+cell slcs08adm07adm08 op=patch serviceType=EXACC
    patch dom0 slcs08adm07adm08 op=rollback serviceType=EXACC exasplice=yes
    patch dom0 slcs08adm07adm08 op=patch_prereq_check EnablePlugins=yes PluginTypes=dom0domu serviceType=EXACS
    patch domu slcs08adm07adm08 op=patch_prereq_check EnablePlugins=yes PluginTypes=domu serviceType=EXACS
    patch domu all op=patch_prereq_check serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=patch BackupMode=no serviceType=EXACC
    patch domu slcs08adm07adm08 op=backup_image serviceType=EXACS
    patch domu slcs08adm07adm08 op=patch BackupMode=no serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=patch EnablePlugins=yes PluginTypes=dom0+dom0domu serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=patch EnablePlugins=yes PluginTypes=dom0 serviceType=EXACS
    patch domu slcs08adm07adm08 op=patch EnablePlugins=yes PluginTypes=domu serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=postcheck serviceType=EXACS
    patch domu slcs08adm07adm08 op=postcheck serviceType=EXACS
    patch cell slcs08adm07adm08 op=postcheck serviceType=EXACS exasplice=yes
    patch switch slcs08adm07adm08 op=postcheck serviceType=EXACS
    patch dom0 slcs08adm07adm08 op=oneoff
    patch domu slcs08adm07adm08 op=oneoff
    patch cell slcs08adm07adm08 op=oneoff
    patch switch slcs08adm07adm08 op=oneoff
    patch switch slcs08adm07adm08 op=patch_prereq_check serviceType=EXACC
    patch switch slcs08adm07adm08 op=patch serviceType=EXACC
    patch switch slcs08adm07adm08 op=rollback serviceType=EXACC
    patch switch slcs08adm07adm08 op=patch_prereq_check serviceType=EXACC PatchSwitchType=admin
    patch switch slcs08adm07adm08 op=patch serviceType=EXACC PatchSwitchType=admin
    patch switch slcs08adm07adm08 op=rollback serviceType=EXACC PatchSwitchType=admin
    patch switch slcs08adm07adm08 op=patch_prereq_check serviceType=EXACC PatchSwitchType=all
    patch switch slcs08adm07adm08 op=patch serviceType=EXACC PatchSwitchType=all
    patch switch slcs08adm07adm08 op=rollback serviceType=EXACC PatchSwitchType=all
    patch switch slcs08adm07adm08 op=oneoff
    patch switch slcs08adm07adm08 op=patch_prereq_check
    patch switch slcs08adm07adm08 op=patch
    patch switch slcs08adm07adm08 op=rollback
    patch switch slcs08adm07adm08 op=rollback_prereq_check
    patch switch slcs08adm07adm08 op=oneoff
    patch dom0 SEA200420 op=patch_prereq_check ClusterLess=yes
    patch dom0 SEA200420 op=patch ClusterLess=yes 
    patch dom0 SEA200420 op=patch ClusterLess=yes LaunchNode=<dom0Node> LaunchNodeType=COMPUTE
    patch dom0 SEA200420 op=patch ClusterLess=yes LaunchNode=<management_host> LaunchNodeType=MANAGEMENT_HOST
    patch dom0 SEA200420 op=rollback ClusterLess=yes
    patch cell SEA200420 op=patch_prereq_check ClusterLess=yes LaunchNode=<dom0Node>
    patch cell SEA200420 op=patch ClusterLess=yes LaunchNode=<dom0Node>
    patch cell SEA200420 op=patch ClusterLess=yes LaunchNode=<dom0Node> LaunchNodeType=COMPUTE
    patch cell SEA200420 op=patch ClusterLess=yes LaunchNode=<management_host> LaunchNodeType=MANAGEMENT_HOST
    patch cell SEA200420 op=rollback_prereq_check ClusterLess=yes LaunchNode=<dom0Node>
    patch cell SEA200420 op=rollback ClusterLess=yes LaunchNode=<dom0Node>

*) Examples of cps patching (For cps patching details only, type help patch cps):
    patch cps exaocid=ocid1.exadatainfrastructure.oc1.eu-frankfurt-1 op=patch serviceType=EXACC TargetVersion=20.1.2.0.0.200930
    patch cps exaocid=ocid1.exadatainfrastructure.oc1.eu-frankfurt-1 op=patch_prereq_check serviceType=EXACC TargetVersion=LATEST
    patch cps exaocid=ocid1.exadatainfrastructure.oc1.eu-frankfurt-1 op=image_backup serviceType=EXACC
    patch cps exaocid=ocid1.exadatainfrastructure.oc1.eu-frankfurt-1 op=patch serviceType=EXACC ForceRemoveCustomRpms=yes
    patch cps exaocid=ocid1.exadatainfrastructure.oc1.eu-frankfurt-1 op=patch serviceType=EXACC AllowActiveNfsMounts=no
    patch cps exaocid=ocid1.exadatainfrastructure.oc1.eu-frankfurt-1 op=patch serviceTyps=EXACC TargetVersion=19.2.4.0.0.190709 IgnoreAlerts=no

"*) Example of qfab patching:
    patch qfab sea2xx2xx0061 op=patch TargetVersion=22.1.5.0.0.221111.1
    patch qfab sea2xx2xx0061 op=rollback"
    patch qfab sea2xx2xx0061 op=patch_prereq_check"

*) valid patching targets:
    -> dom0,domu,cell,ibswitch,cps,switch(works for both roceswitch and ibswitch) and qfab
*) valid cluster name(s):
    -> all - will run the specified patch operation on all the provisioned clusters in the ECRA
    -> cluster_name(s) -> comma sperarated list of cluster names which need to be patched
*) valid service  type(s):
    -> [EXACS, FA, ADBD, ADBS, EXACC, PREPROD, GBU, IDCS, OMCS, TEST]
*) valid exasplice values:
    -> [yes, no -> no is the default value]
*) operations available with op parameter
    -> patch                 [default]
    -> rollback              [rollback the patches ]
    -> patch_prereq_check    [precheck for patching]
    -> rollback_prereq_check [precheck for rollback]
    -> postcheck             [postcheck for patch and rollback on all targets]
    -> backup_image          [image backup on dom0 and domU]
    -> oneoff                [To apply one off related fixes]
*) valid BackupMode targets:
    -> dom0,domu
*) valid EnablePlugins options:
    -> yes,no                           [enable or disable running of plugins]
*) valid PluginTypes options:
    -> for domu upgrade - domu          [Run plugins on domu node only]
    -> for dom0 upgrade - dom0+dom0domu [Run plugins on both dom0's domu node and dom0 node]
                        - dom0          [Run plugins on dom0 node only]
                        - dom0domu      [Run plugins on dom0's domu node only]
*) valid rackModel values:
    -> X6-2                  [Exadata Rack Model]
    -> X7-2                  [Exadata Rack Model]
    -> X8-2                  [Exadata Rack Model]
    -> X8M-2                 [Exadata Rack Model]
    -> X9M-2                 [Exadata Rack Model]
    -> X10M-2                [Exadata Rack Model]
    -> X10M-2L               [Exadata Rack Model]
    -> X10M-2XL              [Exadata Rack Model]

*) Usage notes
    ibswitch, roceswitch and domu are only supported as standalone targets
 ____________________________________

Pass additional option with exadata infra patching: 
Usage: ecra> patch domu slcs16adm0304clu4 op=patch_prereq_check
       exra> patch switch slcs16adm0304clu4 op=patch_prereq_check
                      or
             ./ecracli patch switch slcs16adm0304clu4 op=patch_prereq_check
	     ./ecracli patch domu slcs16adm0304clu4 op=patch_prereq_check
Purpose:
  Using exadata_infra_patch_extra_params.json file we can pass any number of additional options (via 'aAdditionalOptions') and same is read and validated by ecracli layer and passes to ecra layer, and then further down to exacloud layer and, patching layer takes appropriate action.

 The following option(s) can be given to specify the additional option to patchmgr command, depending upon the need.

 o) The 'RackSwitchesOnly' = 'yes', option is to upgrade leaf switches of the a particular cluster in the cloud env. Default is 'no'.
 o) The 'AllowActiveNfsMounts'= 'yes',  option is to allow active network NFS mounts option, and it's applicable only for dom0/domU targets and the default option is 'yes'. This option can be updated in 'ecs/ecra/ecracli/src/tmpl/exadata_infra_patch_extra_params.json'. Actually, using this file, eracli.py reads the options and passes to ecra -> exacloud -> infrapatching layer. If default option is overridden with 'no' then 'allow_active_network_mounts' option is not used with infrapatching on the cluster.
  
 o) The 'EnvType' is used to mention what type of env. By, default we put 'ecs'. We can also specify env 'higgs' for higgs rpm upgrade.

 o) The options 'isSingleNodeUpgrade' and 'SingleUpgradeNodeName' are used to mention whether we need to upgrade the given node at a time on the specified cluster. This will be used mostly when someone navigate the database/grid service to another node and then upgrade the node. The default option for parameter 'isSingleNodeUpgrade' is 'no' and if someone wanted to upgrade the given node, then it has to be set to 'yes'. The parameter 'SingleUpgradeNodeName' should be having valid node and complete name (either dom0 or domU) and it's effective only when 'isSingleNodeUpgrade = "yes"'. Therefore, if 'isSingleNodeUpgrade = "no"', then we don't really care about SingleUpgradeNodeName value.

 o) The option "IncludeNodeList" parameter requires a list of nodes to be included as part of patching operations. By default the values are set to none indicating all the nodes in the cluster are considered for patching and is curently applicable to Dom0, DomU and Cell targets.

Note:
 1) Include node list upgrade can be done for dom0, domU and cell nodes.
 2) Include node list upgrade is applicable only to Rolling patch operations.
 3) The list of nodes should be of FQDN format and FQDN format can be obtained from cluster xml. For Dom0 and cells, FQDN details can be obtained from the cluster xml file. For DomU, client hostname need to be considered when input arguments are passed.
 4) Single node upgrade can be done for dom0, domU and cell nodes.
 5) Single node upgrade is applicable only during 'rolling' patch.
 6) Single node upgrade and Include node list are applicable to all primary patch operations like patch, rollback, backup and prechecks.

 o) The 'IgnoreAlerts'= 'yes',  option is to allow patchmgr utility to proceed with upgrade of Dom0, DomU, and Cells even in case of any hardware alerts or issues observed and the default option is 'no'

 o) The 'ForceRemoveCustomRpms'= 'yes', option is to allow patchmgr utility to remove any custom rpms. For example : when db node update goes from OL5 to OL6.

 o) The 'SkipGiDbValidation'= 'yes', option is to allow patchmgr utility to skip the verification of GI and DB versions. Default is 'no'

 o) The 'exasplice'= 'yes', option is to apply monthly patches on dom0 and cell. 
 o) The 'serviceType'= 'EXACS', which means, env/service type is exacloud cloud service. Possible values are FA, ADWS, etc. 
 o) The 'SkipDomuCheck'= 'yes', indicates that skipping of domU check on dom0. Default is set to 'no', which means,  infra patching checks the domU availability on dom0s during rolling upgrade. This option is not applicable for non-rolling upgrade of dom0s.
 o) The 'EnableDBHealthChecks'= 'yes', indicate whether the dbhealthchecks should be executed or not during patching. Default is set to 'no'. This option is applicable only for domu patching.

 These options can be updated in 'ecs/ecra/ecracli/src/tmpl/exadata_infra_patch_extra_params.json'. Actually, using this file, eracli.py reads and passes to ecra -> exacloud -> infrapatching layer. We need to ensure that we understand the impact of overrding the default options.

 In ecs/ecra/ecracli/src/tmpl/exadata_infra_patch_extra_params.json, we can update these properties and it's going to be pickup by ecracli

    "AdditionalOptions": [
       {
          "RackSwitchesOnly"      : "no",
          "AllowActiveNfsMounts"  : "yes",
          "EnvType"               : "ecs",
          "isSingleNodeUpgrade"   : "no",
          "SingleUpgradeNodeName" : "none",
          "IncludeNodeList"       : "none",
          "IgnoreAlerts"          : "no",
          "ForceRemoveCustomRpms"    : "no",
          "exasplice"             : "no",
          "serviceType"           : "EXACS",
          "SkipDomuCheck"         : "no",
          "EnableDBHealthChecks"  : "no"
       }
    ],

Example:
Usage:
1) The 'RackSwitchesOnly=yes' case for ibwitches:
 ____________________________________
 ecra> patch switch slcs16adm0304clu4 op=patch_prereq_check 
* Warning: The 'RackSwitchesOnly' allows to upgrade leaf switches of cluster ['slcs16adm0304clu4'] only.
* Do you want to continue? y/n
y
* Proceed to upgrade leaf switches of cluster ['slcs16adm0304clu4'] only.
* STATUS URI : http://slc15zvq.us.oracle.com:9001/ecra/endpoint/statuses/697c8017-7aec-11e8-b5bd-fa163edfa92b
* Request issued. Wait for completion. Pulling Status.
* Status: processing... ......
 ____________________________________

 2) The 'AllowActiveNfsMounts=no' case for dom0/domU:
  ____________________________________
 ecra> patch domu slcs16adm0304clu4 op=patch_prereq_check serviceType=FA exasplice=no
* Warning: The 'AllowActiveNfsMounts' allows Active Network Mounts with infra patching on cluster ['slcs16adm0304clu4'].Specified value is 'no'.
* Do you want to continue? y/n
n
* Error: Infra Patching Operation stopped. Check exadata_infra_patch_extra_params.json for detail.
* Error: patching failed.
ecra> patch domu slcs16adm0304clu4 op=patch_prereq_check
* Warning: The 'AllowActiveNfsMounts' allows Active Network Mounts with infra patching on cluster ['slcs16adm0304clu4'].Specified value is 'no'.
* Do you want to continue? y/n
y
* The option 'allow_active_network_mounts' is not used with infra patching on cluster ['slcs16adm0304clu4'].
* STATUS URI : http://slc15zvq.us.oracle.com:9001/ecra/endpoint/statuses/4ea601ee-7ae3-11e8-b28e-fa163edfa92b
 ______________________________

3) In the following example, we enable to upgrade/downgrade include node list as per provided input and is applicable to all primary patch operations on Dom0,DomU and Cells :
 __________________________________
ecra> patch domu slcs16adm0304clu4 op=patch serviceType=FA IncludeNodeList=slcs27adm03.us.oracle.com,slcs27adm04.us.oracle.com
* Warning: Perform patch operations on Include node list for cluster ['slcs16adm0304clu4'] node list 'slcs16adm03vm04-v303.us.oracle.com'. Please note, the node names that you see here must contain complete FQDN and can be obtained from cluster xml. Also,ensure to upgrade all other nodes within the cluster to the same version.
* Do you want to continue? y/n
y
* Proceeding to perform patch operations on include node list for cluster ['slcs16adm0304clu4'].
 __________________________________

4) In the following example, we enable to upgrade single node at a time:
 __________________________________
ecra> patch domu slcs16adm0304clu4 op=patch_prereq_check serviceType=FA exasplice=no
* Warning: Choose to upgrade single node at a time for cluster ['slcs16adm0304clu4'] node 'slcs16adm03vm04-v303.us.oracle.com'. Please note, the node name that
 you see here should be having complete and it can be get from cluster xml. Also, ensure to upgrade all other nodes within the cluster.
* Do you want to continue? y/n
y
* Proceeding to upgrade single node at a time for cluster ['slcs16adm0304clu4'].
* Warning: Enable to upgrade single node at a time for ['slcs16adm0304clu4']. Specified value is 'yes'.
* Do you want to continue? y/n
y
* Proceeding to upgrade single node at a time for ['slcs16adm0304clu4'].
 __________________________________

5) The 'IgnoreAlerts=yes' case for dom0/domU/cell:
  ____________________________________
ecra>  patch cell slcs27 op=patch_prereq_check serviceType=FA exasplice=no
* Warning: The 'IgnoreAlerts' forces patchmgr utility to proceed with infra patching on Dom0,DomU,Cell components even in any case of Hardware alerts observed.Ensure to fix alerts and issues in the pre-check phase ['slcs27'].
* Do you want to continue? y/n
n
* Error: Infra Patching Operation stopped. Check exadata_infra_patch_extra_param.json for detail.
* Error: patching failed.
ecra>

ecra> patch cell slcs27 op=patch_prereq_check serviceType=FA exasplice=no
* Warning: The 'IgnoreAlerts' forces patchmgr utility to proceed with infra patching on Dom0,DomU,Cell components even in any case of Hardware alerts observed.Ensure to fix alerts and issues in the pre-check phase ['slcs27'].
* Do you want to continue? y/n
y
* Proceed to use 'IgnoreAlerts' with infra patching on cluster ['slcs27'].
http://den03czi.us.oracle.com:9024/ecra/endpoint/statuses/dee6c6e2-4713-11e9-a9aa-fa163ec13bc5
ecra>
  _________________________________

6)The 'ForceRemoveCustomRpms=yes' case for dom0/domU:
   ____________________________________
   ecra>  patch dom0 slcs27 op=patch_prereq_check serviceType=FA exasplice=no
* Warning: The 'ForceRemoveCustomRpms' forces patchmgr utility to remove custom RPMs installed on Dom0,DomU in case there is a major upgrade. ['slcs27'].
* Do you want to continue? y/n
n
* Error: Infra Patching Operation stopped. Check exadata_infra_patch_extra_param.json for detail.
* Error: patching failed.
ecra>

ecra> patch dom0 slcs27 op=patch_prereq_check
* Warning: The 'ForceRemoveCustomRpms' forces patchmgr utility to remove custom RPMs installed on Dom0,DomU in case there is a major upgrade. ['slcs27'].
* Do you want to continue? y/n
y
* Proceed to use 'ForceRemoveCustomRpms' with infra patching on cluster ['slcs27'].
http://den03czi.us.oracle.com:9024/ecra/endpoint/statuses/392053ce-4711-11e9-8f50-fa163ec13bc5
ecra>
   ____________________________________

7) To avoid prompt for confirmation about Non-default AdditionalOptions , specify 'force=yes':
  ____________________________________
ecra> patch dom0 slcs27 op=patch_prereq_check serviceType=FA exasplice=no force=yes
* Warning: The 'IgnoreAlerts' forces infra patching to ignore the hardware alerts. Run prereq-check and fix the hardware alerts or understand the implication of removing alerts on cluster ['slcs27']. Specified value is 'yes'.
http://den03czi.us.oracle.com:9024/ecra/endpoint/statuses/d00a0c52-ba08-11e9-b22b-fa163e6523fb
ecra>
  ____________________________________

8) The exasplice=yes with dom0 or cell will allow to apply monthly or exasplice patches: 
  ____________________________________
ecra> patch dom0 slcs16adm0304clu4 op=patch_prereq_check serviceType=FA exasplice=yes 
* Reading additional parameter from ecracli prompt: key 'exasplice' value 'yes'
* Warning:  Requested monthly patching. Ensure to have target version registered in ecra db.
* Do you want to continue? y/n
  ____________________________________

9) In below example, we are specifying env type as EXACS (possible values are ADWS, FA):
  ____________________________________
ecra> patch dom0 slcs16adm0304clu4 op=patch_prereq_check serviceType=EXACS
* Reading additional parameter from ecracli prompt: key 'serviceType' value 'EXACS'
* Warning:  Service type is specified. 
* Do you want to continue? y/n
  ____________________________________

10) In below example, we are specifying option to skip domu check on dom0s.
  ____________________________________
ecra> patch dom0 slcs16adm0304clu4 op=patch_prereq_check serviceType=EXACS SkipDomuCheck=yes
...
...
* Proceeding to perform patching on cluster ['slcs16adm0304clu4'].
* Warning:  The 'SkipDomuCheck' forces infra patching to ignore domu availability check on dom0s. Specified value is 'yes'.
* Do you want to continue? y/n
  ____________________________________

11) In below example, we are specifying option to execute db healthchecks during domu patching.
  ____________________________________
ecra> patch domu slcs16adm0304clu4 op=patch serviceType=EXACS EnableDBHealthChecks=yes
...
...
* Proceeding to perform patching on cluster ['slcs16adm0304clu4'].
* Warning:  This 'EnableDBHealthChecks' makes infra patching to execute db health checks during patching. Specified value is 'yes'.
* Do you want to continue? y/n
  ____________________________________

Exadata Infra Patch Debugging:
patch debug:
Usage: ecra> help patch getDebugInfo
                      or
             ./ecracli help patch getDebugInfo
Purpose:
  Run to get the help of exadata patch debugging command.

Example:
____________________________________
Usage: ecra>
ecra> patch getDebugInfo workflowId=<workflowId>
*) Examples of patch getDebugInfo CLI with workflowId specified:
    patch getDebugInfo workflowId=b41870a6-4d02-4a0d-9523-00d95ffd0567
*) Mandatory Parameters:
    -> workflowId [where workflowId is the id of the workflow]

ecra> patch getDebugInfo rackName=<rackName> days=<debug info for operations on this rack for the last n days>
*) Examples of patch getDebugInfo CLI with rackName specified:
    patch getDebugInfo rackName=slcs27adm0102clu7
    patch getDebugInfo rackName=slcs27adm0102clu7 days=5
*) Mandatory Parameters:
    -> rackName [rackName on which you want to debug]
*) Optional Parameters:
    -> days [debug info for all operations on this rack for the last n days, If not specified, default value is 7]


Inventory:
register:
Usage: ./ecracli inventory register <inventoryId> <hw_type=(cell|compute)> 

Inventory:
register:
Usage: ./ecracli inventory register <inventoryId> <hw_type=(cell|compute)> 

Purpose:
     Register an inventory in ECRA, now supported attribytes are cell and compute.
     This new inventory has to be valid hardware and visible to exadata config.

Arguments:
    inventoryId : Id of the inventory
    hw_type     : Type of the hardware, could be cell or compute

Examples:
ecra> inventory register cell04 hw_type=cell
* {"status": 200, "ip_info": "192.168.0.1/24", "cell_type": "highPerformance", "hw_type": "CELL", "pkey": "0x45f", "status-detail": "success", "inventory_id": "cell04", "memory": "60000", "model": "cellx-6", "op": "inventory_register", "name": "cell01adm02"}


get:
Usage: ./ecracli inventory get <hw_type=(cell|compute)> [param=value]*

Purpose:
     Get all inventory for the specified hawdware type.

Arguments:
    hw_type: Hardware type.
    A list of spaced separated key=value values to get.

Examples:
ecra> inventory get hw_type=cell
* GET http://den03cke.us.oracle.com:9001/ecra/endpoint/inventory?hw_type=cell
* {"CELL": [{"status": "READY", "pkey": "0x45f", "cell_type": "highPerformance", "hw_type": "CELL", "ip_info": "192.168.0.1/24", "opstate": "ONLINE", "inventory_id": "cell03", "memory": "60000", "model": "cellx-6", "name": "cell01adm02"}, {"status": "READY", "pkey": "0x45f", "cell_type": "highPerformance", "hw_type": "CELL", "ip_info": "192.168.0.1/24", "opstate": "ONLINE", "inventory_id": "cell02", "memory": "60000", "model": "cellx-6", "name": "cell01adm02"}, {"status": "READY", "pkey": "0x45f", "cell_type": "highPerformance", "hw_type": "CELL", "ip_info": "192.168.0.1/24", "opstate": "ONLINE", "inventory_id": "cell01", "memory": "60000", "model": "cellx-6", "name": "cell01adm02"}, {"status": "READY", "pkey": "0x45f", "cell_type": "highPerformance", "hw_type": "CELL", "ip_info": "192.168.0.1/24", "opstate": "ONLINE", "inventory_id": "cell04", "memory": "60000", "model": "cellx-6", "name": "cell01adm02"}], "status": 200, "status-detail": "success", "op": "inventory_list"}

ecra> inventory get hw_type=cell inventory_id=cell01
* GET http://den03cke.us.oracle.com:9001/ecra/endpoint/inventory?inventory_id=cell01&hw_type=CELL
* {"CELL": [{"status": "READY", "pkey": "0x45f", "cell_type": "highPerformance", "hw_type": "CELL", "ip_info": "192.168.0.1/24", "opstate": "ONLINE", "inventory_id": "cell01", "memory": "60000", "model": "cellx-6", "name": "cell01adm02"}], "status": 200, "status-detail": "success", "op": "inventory_list"}

get_hardware:
Usage: ./ecracli inventory get_hardware <hw_type=(CELL|COMPUE)> <stauts=value> <model=value> <fabric_name=value> <servicetype=value>

Purpose:
     Get all inventory for the specified hawdware, this also gets data from compose cluster tables

Arguments:
    hw_type: Hardware type.
    status : status of this hardware, from FREE to PROVISIONED.
    model  : This the model of the server. ie. X8M
    fabric_name : Name of the fabric
    servicetype : Service type like exacompute, exacs, etc...

Examples:
ecra> inventory get_hardware 
* {"servers": [{"status": "PROVISIONED", "hw_type": "COMPUTE", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdd001", "inventory_id": "sea201207exdd001", "model": "X7-2", "cabinet_id": "1"}, {"status": "PROVISIONED", "hw_type": "COMPUTE", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdd002", "inventory_id": "sea201207exdd002", "model": "X7-2", "cabinet_id": "1"}, {"status": "FREE", "hw_type": "COMPUTE", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdd003", "inventory_id": "sea201207exdd003", "model": "X7-2", "cabinet_id": "1"}, {"status": "FREE", "hw_type": "COMPUTE", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdpd01", "inventory_id": "sea201207exdpd01", "model": "X7-2", "cabinet_id": "1"}, {"status": "FREE", "hw_type": "PDU", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdpd02", "inventory_id": "sea201207exdpd02", "model": "X7-2", "cabinet_id": "1", "cabinet_serial_number": "example_serial_number_here"}]}

ecra> inventory get_hardware  status=ALLOCATED
* {"servers": [{"status": "ALLOCATED", "hw_type": "CELL", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdcl02", "inventory_id": "sea201207exdcl02", "model": "X7-2", "cabinet_id": "1"}, {"status": "ALLOCATED", "hw_type": "CELL", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdcl03", "inventory_id": "sea201207exdcl03", "model": "X7-2", "cabinet_id": "1"}, {"status": "ALLOCATED", "hw_type": "IBSW", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdib01", "inventory_id": "sea201207exdib01", "model": "X7-2", "cabinet_id": "1"}, {"status": "ALLOCATED", "hw_type": "IBSW", "domainname": "sea201207exd.adminsea2.oraclevcn.com", "fabric_name": "1", "hostname": "sea201207exdib02", "inventory_id": "sea201207exdib02", "model": "X7-2", "cabinet_id": "1", "cabinet_serial_number": "example_serial_number_here"}]}

ecra> inventory get_hardware hw_type=COMPUTE servicetype=exacompute fabric_name=IAD1FABRIC1
* {
    "servers": [
        {
            "cabinetname": "IAD103709",
            "availability_domain": "IAD1",
            "fault_domain": "IAD1FD2",
            "cluster_size_constraint": "18comp2rocesw2pdu1ethsw",
            "domainname": "iad103709exd.adminiad1.oraclevcn.com",
            "eth0": "Y",
            "cabinet_id": "17",
            "hw_type": "COMPUTE",
            "model": "X8M-2",
            "sw_version": "21.1.0.0.0.210319",
            "creation_date": "2022-03-29 22:39:44.367911",
            "ip": "10.0.6.9",
            "hostname": "iad103709exdd008",
            "ilom_ip": "10.0.6.27",
            "ilom_hostname": "iad103709exdd008lo",
            "status": "FREE",
            "dom0_bonding": "N",
            "clustertag": "ALL",
            "servicetype": "exacompute",
            "mvmbonding": "N",
            "model_subtype": "STANDARD",
            "fabric_name": "IAD1FABRIC1",
            "cabinet_serial_number": "example_serial_number_here"
        },
        {
            "cabinetname": "IAD103709",
            "availability_domain": "IAD1",
            "fault_domain": "IAD1FD2",
            "cluster_size_constraint": "18comp2rocesw2pdu1ethsw",
            "domainname": "iad103709exd.adminiad1.oraclevcn.com",
            "eth0": "Y",
            "cabinet_id": "17",
            "hw_type": "COMPUTE",
            "model": "X8M-2",
            "sw_version": "21.1.0.0.0.210319",
            "creation_date": "2022-03-29 22:39:44.374407",
            "ip": "10.0.6.8",
            "hostname": "iad103709exdd007",
            "ilom_ip": "10.0.6.26",
            "ilom_hostname": "iad103709exdd007lo",
            "status": "FREE",
            "dom0_bonding": "N",
            "clustertag": "ALL",
            "servicetype": "exacompute",
            "mvmbonding": "N",
            "model_subtype": "STANDARD",
            "fabric_name": "IAD1FABRIC1",
            "cabinet_serial_number": "example_serial_number_here"
        },
        [...]

capacityreview
Usage: ./ecracli inventory reviewcapacity <hw_type=(CELL|COMPUE)> <stauts=value> <model=value> <fabric_name=value> <servicetype=value>

Purpose:
    Get a boolean that will tell if exists HW with given spec

Examples:

ecra> help inventory reviewcapacity
inventory reviewcapacity  [status=<status> | model=<model> | hw_type=<COMPUTE|CELL>] | fabric_name=<value> | servicetype=<value> | <param=value>
 Get true/false depending if there's hw info  for given parameters spec
ecra> 
ecra> 
ecra> inventory reviewcapacity status=FREE
* {
    "capacityavailable": false,
    "status": 200,
    "op": "review_capacity",
    "status-detail": "success"
}

ecra> inventory reviewcapacity status=RESERVED hw_type=CELL mode=X9M-2
* {
    "capacityavailable": true,
    "status": 200,
    "op": "review_capacity",
    "status-detail": "success"
}

getExcludelist
Usage: ./ecracli inventory getexcludelist <cabinetname=name>

Purpose:
    Get a list of non-free nodes from a compute only or a storage only
    cabinet. Today, this API will be used by infrapatching for these special
    types of cabinets.

Arguments:
    cabinetname : Name of the cabinet

Examples:
ecra> inventory getexcludelist cabinetname=IAD103317
* {"status": 200, "ExcludeList": ["iad103317exdd001.iad103317exd.adminiad1.oraclevcn.com"], "status-detail": "success", "op": "inventory_get_excludelist"}

deregister:
Usage: ./ecracli inventory deregister <inventoryId>  

Purpose:
     Deregister an inventory in ECRA Metadata. Such inventory must be on status READY

Arguments:
    inventoryId : Id of the inventory
    
Examples:
ecra> inventory deregister cell04
* {"status": 200, "status-detail": "success", "op": "inventory_deregister"}

update:
Usage: ./ecracli inventory update <inventoryId>  <params=value>*

Purpose:
     Update data for the given inventoryId

Arguments:
    inventoryId : Id of the inventory
    A list of spaced separated key=value values to update.
    
Examples:
ecra> inventory update cell01 name=cell01adm01
* {"inventory_id": "cell01", "status": 200, "status-detail": "success", "name": "cell01adm01", "op": "inventory_update"}

update_hwnode:
Usage: inventory update_hwnode <hostname> [<key>=<value>]*

Purpose:
    Update data in the ECS_HW_NODE for the given hostname

Arguments:
    hostname :  the hostname of the inventory
    <key>    :  the attribute to update.

Examples:
    ecra> inventory  update_hwnode sea201109exdcl06 node_state=ERROR

updatenodes:
Usage: inventory updatenodes <listofnodes=hostname list> [<key>=<value>]*

Purpose:
    Update data in the ECS_HW_NODE for the given list of hosts

Arguments:
    listofnodes :  the hostname list of the inventory
    <key>       :  the attribute to update.

Examples:
ecra> inventory updatenodes listofnodes=sea303717exdd018,sea303717exdd017 clustertag=ZDLRA
* Successfully updated the node: sea303717exdd018
* Successfully updated the node: sea303717exdd017	

reserve:
Usage: ecra> inventory reserve json_path=<json file path> hostnames=<hostnames>

Purpose:
    Reserve inventory for elastic additions

Arguments:
    json_path: keys pertaining to the inventory
    hostnames: List of hostnames separated by commas.

Examples:
ecra> inventory reserve
json_path=/scratch/rgmurali/ecra_installs/deletetest/ecracli/tmpl/inventory_reserve.json
* {"status": 200, "status-detail": "success", "op": "inventory_reserve",
* "servers": [{"hostname": "sea201109exdd005", "hw_type": "COMPUTE",
* "domainname": "sea201109exd.adminsea2.oraclevcn.com"}, {"hostname":
* "sea201109exdd006", "hw_type": "COMPUTE", "domainname":
* "sea201109exd.adminsea2.oraclevcn.com"}]}

{
    "rackname": "sea201109exd-d0-01-02-cl-01-03-clu01", 
    "idemtoken": "b2481cab-3b73-4284-9725-4f8a125d7190",
    "exadataInfrastructureId": "testdbsystem",
    "servers": [
        {
	    "hw_type": "COMPUTE", 
	    "model": "X8M-2", 
	    "quantity" : 2
	}
    ]
}

ecra> inventory reserve json_path=/scratch/rgmurali/ecra_installs/deletetest/ecracli/tmpl/inventory_reserve.json
* {"status": 200, "status-detail": "success", "op": "inventory_reserve", "servers": [{"hostname": "sea203416exdcl04",
 "hw_type": "CELL", "domainname": "iad103416exd.adminiad1.oraclevcn.com"}, {"hostname": "sea201109exdd005", 
 "hw_type": "COMPUTE", "domainname": "sea201109exd.adminsea2.oraclevcn.com"}]}

[rgmurali@den01gpy tmpl]$ cat inventory_reserve.json 
{
    "rackname": "sea201109exd-d0-01-02-cl-01-03-clu01",
    "idemtoken": "645d5a10-56ed-4b43-96ab-ea9a91a4c43d",
    "exadataInfrastructureId": "testdbsystem",
    "hostnames" : ["sea203416exdcl04", "sea201109exdd005"]
}

resetilomdefaultpassword:
Usage: ./ecracli inventory resetilomdefaultpassword <listofnodes=value1,value2,...,valueN>

Purpose:
     Reset ilom pwd to default one from the indicated node(s) (multiple values are allowed using comma)

Arguments:
    listofnodes: Nodes name where password needs to be reset.

Examples:
ecra> inventory resetilomdefaultpassword listofnodes=iad103714exdd003iad103714exdd003,iad103714exdd004,iad103714exdd005
* {
    "status": 202,
    "status_uri":
"http://phoenix94477.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/9eb9e523-7fce-4854-a074-e023dfba653f",
    "op": "inventory_reset_ilom_password",
    "op_start_time": "2025-06-27T02:51:20+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing",
    "exaunit_id": -1
}

resetilomvaultpassword:
Usage: ./ecracli inventory resetilomvaultpassword <listofnodes=value1,value2,...,valueN>

Purpose:
     Reset ilom pwd to default one from the indicated node(s) (multiple values are allowed using comma)

Arguments:
    listofnodes: Nodes name where password needs to be reset.

Examples:
ecra> inventory resetilomvaultpassword listofnodes=iad103714exdd003iad103714exdd003,iad103714exdd004,iad103714exdd005
* {
    "status": 202,
    "status_uri":
"http://phoenix94477.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/9eb9e523-7fce-4854-a074-e023dfba653f",
    "op": "inventory_reset_ilom_password",
    "op_start_time": "2025-06-27T02:51:20+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing",
    "exaunit_id": -1
}

##########
#release:#
##########

Usage: ecra> inventory release [json_path=<filepath> | hw_type=<COMPUTE|CELL> [hostname=<host> | quantity=<# of servers> rackname=<rackname>]]

Purpose:
    Release inventory 

Arguments 
    json_path: keys pertaining to the inventory

Examples:
    1)
        ecra> inventory release hostname=iad103709exdd001 hw_type=COMPUTE
        * {"status": 200, "op": "inventory_release", "status-detail": "success"}
    2) 
        ecra> inventory release json_path=/scratch/rgmurali/ecra_installs/deletetest/ecracli/tmpl/inventory_release.json
        * {"status": 200, "status-detail": "success", "op": "inventory_release"}

        {
             "servers": [
                 {     
                     "hostname": "sea201109exdd005",
                     "hw_type": "COMPUTE", 
                     "domainname": "sea201109exd.adminsea2.oraclevcn.com"
                 },    
                 {     
                     "hostname": "sea201109exdd006",
                     "hw_type": "COMPUTE", 
                     "domainname": "sea201109exd.adminsea2.oraclevcn.com"
                 }     
             ]     
        }
    3)
        ecra> inventory release quantity=1 hw_type=CELL rackname=sea201109exd-d0-01-02-cl-01-03-clu01
        * {"servers": [{"hostname": "sea201109exdcl09", "hw_type": "CELL"}], "status": 200, "op": "inventory_release", "status-detail": "success"}
    4)
        ecra> inventory release rackname=slot_iad1-d4-cl4-5eb848c2-50ca-4116-b897-f8c5c95522d5-clu02 hostname=iad103709exdd016 hw_type=COMPUTE

check:
Usage: ecra> inventory check [target_nodes=<all|node names>] [update_node_state=<true|false>]

Purpose:
    Check free compute/cell nodes in elastic pool

Arguments
    target_nodes: "all" or comma-separated list of the target nodes (default: all)
    update_node_state: If true, when an error is detected, the node status will be changed to ERROR (default: true)

Examples:
ecra> inventory check target_nodes=iad103714exdcl07,iad103714exdd005,iad103714exdd006 update_node_state=true
* {
    "status": 200,
    "status-detail": "success",
    "op": "inventory_check",
    "check_result": {
        "hosts_not_in_elastic_pool": [],
        "healthy_nodes": {
            "iad103714exdd005.iad103714exd.adminiad1.oraclevcn.com": {
                "old_state": "FREE",
                "type": "COMPUTE",
                "new_state": "FREE"
            },
            "iad103714exdcl07.iad103714exd.adminiad1.oraclevcn.com": {
                "old_state": "FREE",
                "type": "CELL",
                "new_state": "FREE"
            }
        },
        "unhealthy_nodes": {
            "iad103317exdd001.iad103317exd.adminiad1.oraclevcn.com": {
                "old_state": "FREE",
                "errors": [
                    "[ESC-00002] DNS missing *** iad103317exdd001.iad103317exd.adminiad1.oraclevcn.com is not registered",
                    "[ESC-00065] SSH failed *** iad1devecra1.ecramgmt.adminiad1.oraclevcn.com -> root@iad103317exdd001.iad103317exd.adminiad1.oraclevcn.com, [Errno -2] Name or service not known"
                ],
                "type": "COMPUTE",
                "new_state": "ERROR"
            }
        }
    }
}

get_node_detail:

Purpose:
    Get details on computes and cells.

Arguments:
    cabinetName: Cabinet name associated to nodes
    hostnames: List of hostnames separeted by commas

Examples:

ecra> inventory get_node_detail cabinetName=IAD103712
http://slc16cew.us.oracle.com:9001/ecra/endpoint/inventory/nodeDetail/cabinetName
{'data': 'IAD103712'}
* {
    "nodes": [
        {
            "oracle_hostname": "iad103712exdcl15",
            "oracle_ip": "10.0.4.144",
            "oracle_ilom_ip": "10.0.4.159",
            "oracle_ilom_hostname": "iad103712exdcl15lo"
        },
        {
            "oracle_hostname": "iad103712exdcl14",
            "oracle_ip": "10.0.4.143",
            "oracle_ilom_ip": "10.0.4.158",
            "oracle_ilom_hostname": "iad103712exdcl14lo"
        },
        {
            "oracle_hostname": "iad103712exdcl13",
            "oracle_ip": "10.0.4.142",
            "oracle_ilom_ip": "10.0.4.157",
            "oracle_ilom_hostname": "iad103712exdcl13lo"
        },
        ...
        {
            "oracle_hostname": "iad103712exdpd01",
            "oracle_ip": "10.0.4.161"
        }
    ],
    "status": 200,
    "op": "inventory_node_detail_get",
    "status-detail": "success"
}

ecra> inventory get_node_detail hostnames=iad103709exdd014,iad103709exdd015
* {
    "nodes": [
        {
            "oracle_hostname": "iad103709exdd014",
            "oracle_ip": "10.0.6.15",
            "oracle_ilom_ip": "10.0.6.33",
            "oracle_ilom_hostname": "iad103709exdd014lo",
            "admin_mac": "00:10:e0:ef:7e:9a",
            "serial_number": "2006XLB090"
        },
        {
            "oracle_hostname": "iad103709exdd015",
            "oracle_ip": "10.0.6.16",
            "oracle_ilom_ip": "10.0.6.34",
            "oracle_ilom_hostname": "iad103709exdd015lo",
            "admin_mac": "00:10:e0:ef:b1:88",
            "serial_number": "2006XLB092"
        }
    ],
    "status": 200,
    "op": "inventory_node_detail_get",
    "status-detail": "success"
}

update_node_detail:

Purpose:
Recover from exacloud admin ether and serial number

Arguments:
    cabinetName: Cabinet name associated to nodes
    hostnames: List of hostnames separated by commas. Hostnames correspond to cells OR computes.
    rackName : A rack name to update nodes information

Note: if no parameter is provided, then all nodes will be updated.

Examples:

ecra> inventory update_node_detail cabinetName=IAD103712
* {
    "status": 202,
    "status_uri": "http://slc16cew.us.oracle.com:9001/ecra/endpoint/statuses/273682f3-3949-461f-a47a-27861b925aeb",
    "op": "inventory_node_detail_put",
    "op_start_time": "2021-06-30T18:09:10+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

ecra> inventory update_node_detail hostnames=iad103709exdd014,iad103709exdd015
* {
    "status": 202,
    "status_uri": "http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9035/ecra/endpoint/statuses/262e94e8-25ba-45d2-9391-1decc0888b2e",
    "op": "inventory_node_detail_put",
    "op_start_time": "2021-07-02T21:29:48+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}


ecra> inventory update_node_detail rackName=iad103714exd-d0-01-02-cl-01-03-clu01
* {
    "status": 202,
    "status_uri": "http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9035/ecra/endpoint/statuses/48dd29c9-2a83-4c8f-88fe-1cca2cfab44f",
    "op": "inventory_node_detail_put",
    "op_start_time": "2021-08-12T00:03:06+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

summary:

Purpose:
Endpoint that return an easy-to-visualize summary containing nodes that are categorized by fabric, fault domain, model, etc. and match the specified state.

Arguments:
    nodestate: state that the nodes should optionally match (ALL | FREE | ALLOCATED | RESERVED | ERROR)

Examples: 
ecra> inventory summary
sea2xx2xx0051qf
        1
                X9M-2 Elastic
                        COMPUTE
                                ALL
                                        14comp2rocesw2pdu1ethsw
                                                19.2.15.0.0.200724
                                                        N N (14)
                                                                sea201610exdd012        FREE
                                                                sea201610exdd011        FREE
                                                                sea201610exdd014        FREE
                                                                sea201610exdd001        FREE
                                                                sea201610exdd002        FREE
                                                                sea201610exdd003        FREE
                                                                sea201610exdd013        FREE
                                                                sea201610exdd005        FREE
                                                                sea201610exdd006        FREE
                                                                sea201610exdd007        FREE
                                                                sea201610exdd008        FREE
                                                                sea201610exdd009        FREE
                                                                sea201610exdd010        FREE
                                                                sea201610exdd004        FREE
                        CELL
                                ALL
                                        15cell2rocesw2pdu1ethsw
                                                21.2.2.0.0.210720
                                                        N N (15)
                                                                sea201507exdcl10        FREE
                                                                sea201507exdcl12        FREE
                                                                sea201507exdcl09        FREE
                                                                sea201507exdcl11        FREE
                                                                sea201507exdcl13        FREE
                                                                sea201507exdcl14        FREE
                                                                sea201507exdcl15        FREE
                                                                sea201507exdcl01        FREE
                                                                sea201507exdcl02        FREE
                                                                sea201507exdcl03        FREE
                                                                sea201507exdcl04        FREE
                                                                sea201507exdcl05        FREE
                                                                sea201507exdcl06        FREE
                                                                sea201507exdcl07        FREE
                                                                sea201507exdcl08        FREE
IAD1FABRIC1
        IAD1FD2
                X8M-2 Elastic
                        COMPUTE
                                ALL
                                        18comp2rocesw2pdu1ethsw
                                                19.2.6.0.0.190911.1
                                                        Y N (1)
                                                                iad103709exdd001        FREE
                                                        N N (17)
                                                                iad103709exdd013        FREE
                                                                iad103709exdd017        FREE
                                                                iad103709exdd012        FREE
                                                                iad103709exdd011        FREE
                                                                iad103709exdd010        FREE
                                                                iad103709exdd009        FREE
                                                                iad103709exdd008        FREE
                                                                iad103709exdd007        FREE
                                                                iad103709exdd006        FREE
                                                                iad103709exdd005        FREE
                                                                iad103709exdd004        FREE
                                                                iad103709exdd003        FREE
                                                                iad103709exdd002        FREE
                                                                iad103709exdd015        FREE
                                                                iad103709exdd016        FREE
                                                                iad103709exdd018        FREE
                                                                iad103709exdd014        FREE
                        CELL
                                ALL
                                        15cell2rocesw2pdu1ethsw
                                                12.2.0.1.0_18032017
                                                        N N (14)
                                                                iad103712exdcl13        FREE
                                                                iad103712exdcl15        FREE
                                                                iad103712exdcl12        FREE
                                                                iad103712exdcl11        FREE
                                                                iad103712exdcl10        FREE
                                                                iad103712exdcl09        FREE
                                                                iad103712exdcl08        FREE
                                                                iad103712exdcl07        FREE
                                                                iad103712exdcl06        FREE
                                                                iad103712exdcl03        FREE
                                                                iad103712exdcl04        FREE
                                                                iad103712exdcl05        FREE
                                                                iad103712exdcl02        FREE
                                                                iad103712exdcl01        FREE
                                JUNIT
                                        15cell2rocesw2pdu1ethsw
                                                12.2.0.1.0_18032017
                                                        N N (1)
                                                                iad103712exdcl14        FREE

ecra> inventory summary nodestate=
sea2xx2xx0051qf
        1
                X9M-2 Elastic
                        COMPUTE
                                ALL
                                        14comp2rocesw2pdu1ethsw
                                                19.2.15.0.0.200724
                                                        N N (14)
                                                                sea201610exdd014        FREE
                                                                sea201610exdd013        FREE
                                                                sea201610exdd012        FREE
                                                                sea201610exdd011        FREE
                                                                sea201610exdd010        FREE
                                                                sea201610exdd009        FREE
                                                                sea201610exdd008        FREE
                                                                sea201610exdd007        FREE
                                                                sea201610exdd006        FREE
                                                                sea201610exdd005        FREE
                                                                sea201610exdd004        FREE
                                                                sea201610exdd003        FREE
                                                                sea201610exdd002        FREE
                                                                sea201610exdd001        FREE
                        CELL
                                ALL
                                        15cell2rocesw2pdu1ethsw
                                                21.2.2.0.0.210720
                                                        N N (15)
                                                                sea201507exdcl15        FREE
                                                                sea201507exdcl14        FREE
                                                                sea201507exdcl13        FREE
                                                                sea201507exdcl12        FREE
                                                                sea201507exdcl11        FREE
                                                                sea201507exdcl10        FREE
                                                                sea201507exdcl09        FREE
                                                                sea201507exdcl08        FREE
                                                                sea201507exdcl07        FREE
                                                                sea201507exdcl06        FREE
                                                                sea201507exdcl05        FREE
                                                                sea201507exdcl04        FREE
                                                                sea201507exdcl03        FREE
                                                                sea201507exdcl02        FREE
                                                                sea201507exdcl01        FREE
IAD1FABRIC1
        IAD1FD2
                X8M-2 Elastic
                        COMPUTE
                                ALL
                                        3cell2comp2rocesw2pdu1ethsw
                                                12.2.0.1.0_18032017
                                                        N N (6)
                                                                iad103714exdd006        ALLOCATED
                                                                iad103714exdd005        ALLOCATED
                                                                iad103714exdd001        ALLOCATED
                                                                iad103714exdd002        ALLOCATED
                                                                iad103714exdd003        ALLOCATED
                                                                iad103714exdd004        ALLOCATED
                                        18comp2rocesw2pdu1ethsw
                                                19.2.6.0.0.190911.1
                                                        Y N (1)
                                                                iad103709exdd001        FREE
                                                        N N (17)
                                                                iad103709exdd003        FREE
                                                                iad103709exdd002        FREE
                                                                iad103709exdd004        FREE
                                                                iad103709exdd005        FREE
                                                                iad103709exdd006        FREE
                                                                iad103709exdd007        FREE
                                                                iad103709exdd008        FREE
                                                                iad103709exdd009        FREE
                                                                iad103709exdd010        FREE
                                                                iad103709exdd011        FREE
                                                                iad103709exdd012        FREE
                                                                iad103709exdd013        FREE
                                                                iad103709exdd014        FREE
                                                                iad103709exdd015        FREE
                                                                iad103709exdd016        FREE
                                                                iad103709exdd018        FREE
                                                                iad103709exdd017        FREE
                        CELL
                                ALL
                                        3cell2comp2rocesw2pdu1ethsw
                                                12.2.0.1.0_18032017
                                                        N N (9)
                                                                iad103714exdcl01        ALLOCATED
                                                                iad103714exdcl03        ALLOCATED
                                                                iad103714exdcl04        ALLOCATED
                                                                iad103714exdcl05        ALLOCATED
                                                                iad103714exdcl06        ALLOCATED
                                                                iad103714exdcl07        ALLOCATED
                                                                iad103714exdcl08        ALLOCATED
                                                                iad103714exdcl09        ALLOCATED
                                                                iad103714exdcl02        ALLOCATED
                                        15cell2rocesw2pdu1ethsw
                                                12.2.0.1.0_18032017
                                                        N N (14)
                                                                iad103712exdcl05        FREE
                                                                iad103712exdcl04        FREE
                                                                iad103712exdcl03        FREE
                                                                iad103712exdcl02        FREE
                                                                iad103712exdcl01        FREE
                                                                iad103712exdcl15        FREE
                                                                iad103712exdcl13        FREE
                                                                iad103712exdcl12        FREE
                                                                iad103712exdcl11        FREE
                                                                iad103712exdcl10        FREE
                                                                iad103712exdcl09        FREE
                                                                iad103712exdcl08        FREE
                                                                iad103712exdcl07        FREE
                                                                iad103712exdcl06        FREE
                                JUNIT
                                        15cell2rocesw2pdu1ethsw
                                                12.2.0.1.0_18032017
                                                        N N (1)
                                                                iad103712exdcl14        FREE

updatestatuscommnent:

Purpose:
Endpoint that updates the field of STATUS_COMMENT for a node or cabinet as indicated.

Arguments:
    component: Component that will be updated. Currently only applies for node or cabinet
    name: name assigned to the component that will be updated.
    content: message that will be stored in the STATUS_COMMENT message.

Examples:
ecra> inventory updatestatuscomment component=node name=iad103709exdd011 content="Last modified 10/05 2:52pm"
* {
    "status": 200,
    "op": "inventory_update_status_comment",
    "status-detail": "success"
}

getstatuscommnent:

Purpose:
Endpoint that retreives the field of STATUS_COMMENT for a node or cabinet as indicated.

Arguments:
    component: Component that will be updated. Currently only applies for node or cabinet
    name: name assigned to the component that will be updated.

Examples:
ecra> inventory getstatuscomment component=node name=iad103709exdd011
* {
    "status": 200,
    "op": "inventory_update_status_comment",
    "status-detail": "success",
    "Current_Status_Comment": "This component does not have a previous status comment."
}
ecra> inventory getstatuscomment component=node name=iad103709exdd011
* {
    "status": 200,
    "op": "inventory_update_status_comment",
    "status-detail": "success",
    "Current_Status_Comment": "Last modified 10/05 2:52pm"
}

resetcavium:

Purpose:
Endpoint that resets off t93 slot

Arguments:
    caviumid: cavium id where reset is required
    ignorenodestate: flag to ignore forbidden node states and allow reset
    action: action to execute, can be either start, stop, reset (defaults to reset)
    targetdevice: Target device, valid valid are ilom or dom0 (Default value: ilom)

Examples:

ecra> resetcavium caviumid="4.0G1950-GBC001872"
* {
    "status": 202,
    "status_uri": "http://slc16ccl.us.oracle.com:9001/ecra/endpoint/statuses/3110a88b-557a-49c7-beca-5b31d95e89d4",
    "op": "inventory_reset_cavium",
    "op_start_time": "2021-10-07T18:57:12+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}
ecra> status 3110a88b-557a-49c7-beca-5b31d95e89d4
* {"start_time": "2021-10-07T18:57:12+0000", "end_time": "2021-10-07T18:57:32+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2021-10-07T18:57:12+0000", "status": 200, "message": "Done", "op": "reset-cavium", "atp_enabled": "Y", "status_uri": "http://slc16ccl.us.oracle.com:9001/ecra/endpoint/statuses/3110a88b-557a-49c7-beca-5b31d95e89d4", "status-detail": "success"}

ecra> inventory resetcavium caviumid=4.0G1950-GBC001023 action=stop
* {
    "status": 202,
    "status_uri": "http://phoenix94112.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/20b26a38-3421-4ecc-9122-bce2193841f3",
    "op": "inventory_reset_cavium",
    "op_start_time": "2022-08-25T19:10:52+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

caviumcollectdiag:

Purpose:
Endpoint that gets diagnostic information about T93 slot

Arguments:
    hostname: hostname where T93 slot is
    caviumid: cavium id of T93

Examples:

ecra> inventory caviumcollectdiag hostname="iad103709exdd005"
* {
    "status": 202,
    "status_uri": "http://slc16ccl.us.oracle.com:9001/ecra/endpoint/statuses/2ec57de8-7ca4-4340-b432-eb1252e9c7c3",
    "op": "inventory_cavium_collect_diag",
    "op_start_time": "2021-11-10T19:20:15+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

ecra> status 2ec57de8-7ca4-4340-b432-eb1252e9c7c3
* {"start_time": "2021-11-10T19:20:15+0000", "target_uri": "http://slc16ccl.us.oracle.com:9001/ecra/endpoint/inventory/caviumdiagresponse?clob_id=IAD103709CAVIUM_DIAG", "end_time": "2021-11-10T19:20:35+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2021-11-10T19:20:15+0000", "status": 200, "message": "Done", "op": "cavium-collect-diag", "atp_enabled": "Y", "status_uri": "http://slc16ccl.us.oracle.com:9001/ecra/endpoint/statuses/2ec57de8-7ca4-4340-b432-eb1252e9c7c3", "status-detail": "success"}

caviumdiagresponse:

Purpose:
Endpoint that gets response from caviumcollectdiag

Arguments:
    clobid: clob id from the response, returned in target_uri

Examples:

ecra> inventory caviumdiagresponse clobid="IAD103709CAVIUM_DIAG"
* {
    "SP_logs": [
        {
            "Datetime": "Sat Oct  2 22:52:28 2021",
            "Class": "Power",
            "Type": "On",
            "Severity": "major",
            "Message": "Power to /SYS has been turned on by: Shell session, Username: itadm "
        },
        {
            "Datetime": "Sat Oct  2 21:36:33 2021",
            "Class": "Power",
            "Type": "Off",
            "Severity": "major",
            "Message": "Power to /SYS has been turned off by: SP, Reason: Cold boot "
        }
    ]
}

resetvlan:
Usage: ecracli inventory resetvlan cells=<hostname1,hostname2,..> (rack=<rack> | cabinet=<cabinet>)

Purpose:
    Reset VLAN ID of READY cells to the default value

Arguments:
    cells: comma-separated list of the target cell nodes
    rack: rack name
    cabinet: cabinet name (for clusterless nodes)

Examples:
ecra> inventory resetvlan cells=sea201209exdcl04,sea201209exdcl05 rack=sea201209exd-d0-03-04-cl-04-06-clu1
* {
    "status": 202,
    "status_uri": "http://den00rfr.us.oracle.com:9001/ecra/endpoint/statuses/b2bd265a-5729-11ec-aa61-acde48001122",
    "op": "inventory_reset_vlan",
    "op_start_time": "2021-12-07T06:09:10+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

ecra> inventory resetvlan cells=sea201207exdcl01 cabinet=SEA201207
* {
    "status": 202,
    "status_uri": "http://den00rfr.us.oracle.com:9001/ecra/endpoint/statuses/b84c5686-5729-11ec-aa61-acde48001122",
    "op": "inventory_reset_vlan",
    "op_start_time": "2021-12-07T06:17:48+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

startblackout:
Usage: ecracli inventory startblackout hostname=<name>

Purpose:
    SRE team initiates the blackout for an X9M node which in turn puts the 
    node into *_UNDER_MAINT state. After they start the blackout, they would
    go ahead with accessing and servicing the T93 cards.

Arguments:
    hostname: name of the node for which blackout needs to be initiated

Notes:
    On a successful start of the operation, the node_state will be transitioned from <OLD> to 
    <OLD>_UNDER_MAINT state. For example, a node in ALLOCATED state will transition to
    ALLOCATED_UNDER_MAINT

Examples:
ecra> inventory startblackout hostname=sea303717exdd001
* {
    "status": 200,
    "op": "inventory_start_blackout",
    "status-detail": "success"
}

endblackout:
Usage: ecracli inventory endblackout hostname=<name>

Purpose:
    Terminate the blackout for a node. SRE team would initiate this step for
    X9M nodes once they are done servicing the T93 cards.

Arguments:
    hostname: name of the node for which blackout needs to be terminated

Notes:
    On a successful end of the operation, the node_state will be transitioned from 
    <OLD>_UNDER_MAINT state to <OLD> state. For example, a node in ALLOCATED_UNDER_MAINT 
    state will transition to ALLOCATED

Examples:
ecra> inventory endblackout hostname=sea303717exdd001
* {
    "status": 200,
    "op": "inventory_end_blackout",
    "status-detail": "success"
}

getspec:
Usage: ecracli inventory getspec inventoryid=<inventory_id> rackname=<rackname>

Purpose:
    Get JSON spec of inventory id in given rack

Arguments:
    inventoryid: inventory id of the node
    rackname: rackname or rackid of the rack

Examples:
ecra> inventory getspec inventoryid=iad103709exdd007 rackname=iad103708exd-d0-01-02-cl-01-03-clu01
* {
    "spec": {
        "reshaped_node_subset": {
            "added_cells": [
                {
                    "network_info": {
                        "cellnetworks": [
                            {
                                "admin": [
                                    {
                                        "ipaddr": "10.0.4.133",
                                        "fqdn": "iad103709exdcl01.iad103709exd.adminiad1.oraclevcn.com",
                                        "gateway": "10.0.4.129",
                                        "netmask": "255.255.255.128"
                                    }
                                ]
                            },
                            {
                                "private": [
                                    {
                                        "ipaddr": "100.106.30.18",
                                        "fqdn": "iad103709exdcl01-priv1.iad103709exd.adminiad1.oraclevcn.com"
                                    },
                                    {
                                        "ipaddr": "100.106.30.19",
                                        "fqdn": "iad103709exdcl01-priv2.iad103709exd.adminiad1.oraclevcn.com"
                                    }
                                ]
                            },
                            {
                                "ilom": [
                                    {
                                        "ipaddr": "10.0.4.148",
                                        "fqdn": "iad103709exdcl01lo.iad103709exd.adminiad1.oraclevcn.com",
                                        "gateway": "10.0.4.129",
                                        "netmask": "255.255.255.128"
                                    }
                                ]
                            }
                        ]
                    },
                    "cell_hostname": "iad103709exdcl01.iad103709exd.adminiad1.oraclevcn.com",
                    "rack_info": {
                        "uloc": 11,
                        "uheight": 1
                    }
                }
            ]
        }
    },
    "status": 200,
    "op": "inventory_get_spec",
    "status-detail": "success"
}

update_node_details:
Usage: ecracli inventory update_node_details hostnames=<name1,name2> cabinetname=<cabinetname> rackname=<rackname>

Purpose:
    Update the node details for fields node_serial_number and admin_mac 

Arguments:
    hostnames: comma separated hostnames of dom0
    cabinetname: cabinet name to update all dom0 details
    rackname: rackname to update all dom0 details
Examples:
ecra> inventory update_node_detail rackname=iad1-d2-cl3-afc40582-3083-4a21-ba8c-7e0b523eed62-clu01
* {
    "status": 202,
    "status_uri":
"http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/a6401654-5650-4220-8d30-554c91722cde",
    "op": "inventory_node_detail_put",
    "op_start_time": "2022-10-03T15:10:59+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

Formation:

attach:
Usage: ./ecracli formation attach formation_id=<id> inventory_id=<id> 

Purpose:
     Attach a new hardware to the specified Exadata formation ID. This harwdware must be
     previously registered and must be in READY status

Arguments:
    formation_id  : Id of the rack formation. i.e 1,2,3..
    inventory_id : Inventory id of the hardware to attach.

Examples:
ecra> formation attach formation_id=21 inventory_id=cell01
* STATUS URI : http://den03cke.us.oracle.com:9001/ecra/endpoint/statuses/bb68ca66-5bb6-4e97-a045-737f18aaa94c
* TARGET URI : http://den03cke.us.oracle.com:9001/ecra/endpoint/formation/21
* Request issued. Wait for completion. Pulling Status.
* Status: processing...
* Request formation_attach successfully completed

list:
Usage: ./ecracli formation list [formation_id=<id>]

Purpose:
     Get the information of all current formations in ECRA.

Arguments:
    formation_id: If formation id is given, then all related elements associated with this
    formation id will be displayed.
    
Examples:
ecra> formation list
* GET http://den03cke.us.oracle.com:9001/ecra/endpoint/formation
* {"status": 200, "status-detail": "success", "result": [{"exadata_formation_id": 21, "exadata_id": "slcs09adm0607"}, {"exadata_formation_id": 41, "exadata_id": "slcqab02adm0506clu6"}], "op": "formation_get_all"}


ecra> formation list formation_id=21
* GET http://den03cke.us.oracle.com:9001/ecra/endpoint/formation/21
* {"formationId": 21, "components": [{"status": "PROVISIONED", "ip_info": "192.168.0.1/24", "cell_type": "highPerformance", "hw_type": "CELL", "pkey": "0x45f", "opstate": "ONLINE", "inventory_id": "cell01", "memory": "60000", "model": "cellx-6", "name": "cell01adm01"}]}


detach:
Usage: ./ecracli formation detach formation_id=<id> inventory_id=<id>

Purpose:
     Detach the provided inventory id from this exadata formation

Arguments:
    formation_id: Id of the exadata formation.
    inventory_id : Inventory id of the hardware to attach.
    
Examples:
ecra> formation detach formation_id=21 inventory_id=cell01
* STATUS URI : http://den03cke.us.oracle.com:9001/ecra/endpoint/statuses/c8c9ff9e-1a11-4c7b-bcb5-1e8625e2e661
* Request issued. Wait for completion. Pulling Status.
* Status: processing...
* Request formation_detach successfully completed


Switch ecracli mode:
switchmode
Usage: 
ecra> switchmode mode=<default|brokerproxy> [cimid=<cimid>]

Purpose:
Switch ecracli to given mode. Currently supported modes are: default and brokerproxy. By default, ecracli will start in default mode.

default mode:
-------------
It means regular ecracli. 

brokerproxy mode:
-----------------
It is tied to a particular service instance by supplying CIM ID of the service instance. In this mode, only those operations for which request forwarding is enabled in broker ECRA will be allowed and rest of the operations will be blocked. Furthermore, the behavior of certain commands (like info) which operate on ECRA level will be restricted to the corresponding service instance only. All the requests made in this mode to the ECRA will be based on <ecra-host>/ecra/endpoint/brokerproxy/<cimid>/* resource paths.

Arguments:
        mode: Mode in which to start the ecracli.
        cimid: CIM ID of the service instance to which ecracli should be tied in brokerproxy mode. It is a mandatory argument for brokerproxy mode.

Examples:
switchmode command example:
---------------------------
1. Start the ecracli in brokerproxy mode:
./ecracli --mode brokerproxy --cimid b49619c1-14be-413c-b1a5-85eadd318f71
* Ecracli -18.254
* username : sdi
* password : ****
* host     : http://den01cxd.us.oracle.com:9001/ecra/endpoint/brokerproxy/b49619c1-14be-413c-b1a5-85eadd318f71
* created exaunits
*  <id> : <rackname>          : <exaname>  : <rackstate> : <ongoing op> : <dbSIDs>
*  2    : slcs16adm0304-clu-1 : clu9c88e81 : PROVISIONED :              :
brokerproxy>

2. Switch ecracli mode from default to brokerproxy:
ecra> switchmode mode=brokerproxy cimid=b49619c1-14be-413c-b1a5-85eadd318f71
* Ecracli -18.254
* username : sdi
* password : ****
* host     : http://den01cxd.us.oracle.com:9001/ecra/endpoint/brokerproxy/b49619c1-14be-413c-b1a5-85eadd318f71
* created exaunits
*  <id> : <rackname>          : <exaname>  : <rackstate> : <ongoing op> : <dbSIDs>
*  2    : slcs16adm0304-clu-1 : clu9c88e81 : PROVISIONED :              :
brokerproxy>

Exaservice add cluster operation in brokerproxy mode:
-----------------------------------------------------
1. Silent invocation of ecracli:
./ecracli --mode brokerproxy --cimid 489e8953-87af-4c9d-bad5-32ec00d5d6e6 exaservice addcluster exaservice_id=489e8953-87af-4c9d-bad5-32ec00d5d6e6
Racksize is: quarter Model is: X5-2
http://den01cxd.us.oracle.com:9001/ecra/endpoint/brokerproxy/489e8953-87af-4c9d-bad5-32ec00d5d6e6/statuses/1ceb3740-5088-4f1d-9f70-f41dc621909b

2. Interactive invocation of ecracli:
brokerproxy> exaservice addcluster exaservice_id=489e8953-87af-4c9d-bad5-32ec00d5d6e6
* Racksize is: quarter Model is: X5-2
* Adding cluster to exaservice with id: 489e8953-87af-4c9d-bad5-32ec00d5d6e6
http://den01cxd.us.oracle.com:9001/ecra/endpoint/brokerproxy/489e8953-87af-4c9d-bad5-32ec00d5d6e6/statuses/1ceb3740-5088-4f1d-9f70-f41dc621909b

backfill:
caviumip
Usage: ./ecracli backfill caviumip flatfile=/home/rgmurali/1109.flat

Purpose:
   Provide the ability to backfill the cavium IPs in production clusters.

Arguments:
    flatfile: Location of the flatfile.

Examples:
ecra>  backfill caviumip flatfile=/home/rgmurali/1109cav.flat
* {"status": 200, "op": "caviumip_post", "status-detail": "success"}

update_caviumid
Usage: ./ecracli backfill update_caviumid old_id=<old value> new_id=<new value>

Purpose:
    Provide the ability to update the cavium IDs.

Arguments:
    old_id: The cavium id that needs to be changed.
    new_id: The new cavium id that needs to be used.

Examples:
ecra> backfill update_caviumid old_id=4.0G1947-GBC001954 new_id=4.0G1947-GBC001956
* {"status": 200, "op": "caviumid_post", "status-detail": "success"}


adminsmartnics
ecra> backfill adminsmartnics payload=/admin.json
* {"updatedRecords": 0, "insertedRecords": 2, "status": 200, "op": "cavium_adminsmartnic_post", "status-detail": "success"}
Purpose:
   Provide the ability to backfill the cavium records for admin network for cabinets.

Arguments:
    payload: Location of the admin payload.

Examples:
ecra>  backfill adminsmartnics payload=admin.json
* {"status": 200, "op": "caviumip_post", "status-detail": "success"}

update_caviumid
Usage: ./ecracli backfill update_caviumid old_id=<old value> new_id=<new value>

Purpose:
    Provide the ability to update the cavium IDs.

Arguments:
    old_id: The cavium id that needs to be changed.
    new_id: The new cavium id that needs to be used.

Examples:
ecra> backfill update_caviumid old_id=4.0G1947-GBC001954 new_id=4.0G1947-GBC001956
* {"status": 200, "op": "caviumid_post", "status-detail": "success"}

updatecaviumip
Usage: ./ecracli backfill updatecaviumip <caviumid=id> <caviumip=ip>

Purpose:
    Provide the ability to update the cavium IP when spare cavium is added.

Arguments:
    caviumid: The cavium id for which IP needs to be updated.
    caviumip: The cavium IP that needs to be used

Examples:
ecra> backfill updatecaviumip caviumid=4.0G2001-GBC001357 caviumip=10.9.150.1
* {"status": 200, "op": "caviumip_spare_post", "status-detail": "success"}

update_cavium
Usage: ./ecracli backfill update_cavium current_cavium_id=<current id> current_etherface_type=<DB_CLIENT|DB_BACKUP> new_cavium_id=<id> new_cavium_ip=<ip> new_mac=<mac>

Purpose:
    Provide the ability to update multiple cavium properties like id, ip, mac for a particular cavium id. 

Arguments:
    current_cavium_id: The cavium ID for the cavium that needs update. Mandatory input parameter
    current_etherface_type: Current etherface_type <DB_CLIENT|DB_BACKUP>. This parameter is required for updating cavium mac
    new_cavium_id: New cavium ID
    new_cavium_ip: New cavium IP
    new_mac:  New cavium mac 

Examples:
ecra> backfill update_cavium current_cavium_id=4.0G1949-GBC000073 new_cavium_id=4.0G1949-GBC000073_new  current_etherface_type=DB_CLIENT new_mac=00:10:8a:09:d0:b3_new new_cavium_ip=10.9.127.430 
{"status": 200, "op": "cavium_put", "status-detail": "success"}

qfabdetails
Usage: ./ecracli backfill qfabdetails flatfile=/home/rgmurali/1109.flat

Purpose:
   Provide the ability to backfill the Qfab details in production clusters.

Arguments:
    flatfile: Location of the flatfile.

Examples:
ecra> backfill qfabdetails flatfile=/scratch/rgmurali/ecra_installs/fabric1/ecracli/tmpl/cabinet.txt
* {"status": 200, "op": "qfabdetails_post", "status-detail": "success"}

Note: 
Flat file content:
SEA201109 sea2 10 3 serial1
SEA101111 sea1 5 6 serail2

vnic_cabinets
Usage: ./ecracli backfill vnic_cabinets flatfile=path/fileName

Purpose:
  Provide the ability to backfill the active and standby vnic for the existing cabinets

Arguments:
  flatfile: Location of the flatfile.

Examples:
ecra> backfill vnic_cabinets flatfile=/scratch/cabinet.txt
{"cabinetsUpdated": 1, "cabinetsNotFound": ["ocid1.vnic.region1.sea.abzwkljsdgvfcutqhylc7x37oxq2rly6zgez2v7uwmjouvcbyuqo53a3aezq"], "status": 200, "op": "ExascaleVaultCS_PUT", "status-detail": "success"}

Note:
Flat file content:
<CABINETNAME> <ADMIN_ACTIVE_VNIC_ID> <ADMIN_STANDBY_VNIC_ID>

fabricexascale
Usage: ./ecracli backfill fabricexascale fabricname=<fabric_name>

Purpose:
    Provide the ability to update the exascale IP range.

Arguments:
    fabricname: Name of the QFAB that needs to be backfilled.

Examples:
ecra> backfill fabricexascale fabricname=SEA100051QFAB
2022-04-13 10:28:07 - 6957 - {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/7d70948c-0dd4-479b-9a4b-32ca3ed494ce", "op": "fabric_exascale_update_post", "op_start_time": "2022-04-13T17:28:07+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

** mvmsubnet_info **
Usage: ./ecracli backfill mvmsubnetinfo subnetmask=10.10.0.0 gateway=10.0.0.0 domain=aaa.com cabinetname=IAD103712
or
Usage: ./ecracli backfill mvmsubnetinfo flatfile=<FLATFILE> [force=<true>] [cabinetname=<CABINETNAME>]

Purpose:
   Provide the ability to backfill the multivm subnet information for ExaCS

Arguments:
    <FLATFILE>    : A flat file that has the details for the mvm network information and also the information for the new vlan
    <CABINETNAME> : Caibnet ID or name of cabinet where to store the new information
    <SUBNETMASK>  : Subnet mask of the new mvm subnet.
    <GATEWAY>     : Gateway of new mvm subnet.
    <DOMAIN>      : Admin domain of new subnet.
    <FORCE>       : If true, skip the IP validations.

Examples:
    ecra>  backfill mvmsubnet_info  subnetmask=10.10.0.0 gateway=10.0.0.0 domain=aaa.com cabinetname=IAD103712
    * {"status": 200, "op": "cabinet_mvmsubnettinfo_put", "status-detail": "success"}
     or
    ecra>  backfill mvmsubnetinfo flatfile=/scratch/illamas/flatfiles/testfile.flat cabinetname=IAD103712 force=true
    * {"status": 200, "op": "cabinet_mvmsubnettinfo_put", "status-detail": "success"}

    ecra> backfill mvmsubnetinfo jsonpayload=/scratch/zpallare/payloads/adminsubnets.json
    * {"status": 200, "op": "cabinet_mvmsubnetinfo_put", "status-detail": "success"}

Note:
    You could use (subnetmask, gateway, domain and cabinetname) or (flatfile and cabinetname[This is an optional parameter if this is not provided,
    by default will fill the information for all the KVM cabinets that have a null value])

[user]$ cat testfile.flat 
MVM_SUBNET_MASK=255.255.0.0
MVM_GATETWAY=10.0.0.1
MVM_DOMAINNAME=sea2mvm01roce.adminsea2.oraclevcn.com
MVM_SUBNETID=ocid1.subnet.oc1.iad.aaaaaaaanupjgcpw6hgjdtpqqzrrcog6v6qzjt6tcjkvasdfasfda3qtasdgag
# HOST IPS
# vnid_id                                                                      nathostnamefqdn    admin_ip vlantag
ocid1.vcn.oc1.sea.aaaaaaaafmag3qy7puleicj2pz6mimvjte2zdqhlkjlkjsrguac4y2x4xziq sea201602exddu0302 10.1.0.3 1446
ocid1.vcn.oc1.sea.aaaaaaaafmag3qy7puleicj2pz6mimvjte2zdqhlkjlkjsrguac4y2x4xziq sea201602exddu0402 10.1.0.4 1446
ocid1.vcn.oc1.sea.aaaaaaaafmag3qy7puleicj2pz6mimvjte2zdqhlkjlkjsrguac4y2x4xziq iad103714exddu0102 10.1.0.5 1446
ocid1.vcn.oc1.sea.aaaaaaaafmag3qy7puleicj2pz6mimvjte2zdqhlkjlkjsrguac4y2x4xziq iad103714exddu0202 10.1.0.6 1446
ocid1.vcn.oc1.sea.aaaaaaaafmag3qy7puleicj2pz6mimvjte2zdqhlkjlkjsrguac4y2x4xziq iad103709exddu0102 10.1.0.7 1447
ocid1.vcn.oc1.sea.aaaaaaaafmag3qy7puleicj2pz6mimvjte2zdqhlkjlkjsrguac4y2x4xziq iad103709exddu0202 10.1.0.8 1447
________________________________________________________________________________


Backfill updatesitegroup 

Usage 


ecra> help backfill updatesitegroup
backfill updatesitegroup grouptype=[fabric|cabinet|faultdomain] groupidentifier=<Group name for selected type> sitegroup=<value>
 Update the sitegroup values for CPG on selected group of Cabinets/Fabric or Fault domain
ecra> 


Samples 


backfill cabinet 

ecra> backfill  updatesitegroup grouptype=cabinet groupidentifier=SEA201607  sitegroup=sg001 restricted=false
* {"status": 200, "op": "cabinet_updatesitegroup_put", "status-detail": "success"}
ecra> 

SQL> select name, NVL(RESTRICTED_SITEGROUP, 'null'), NVL(SITEGROUP, 'null') from ecs_hw_cabinets;

SEA201607
N     sg001

SEA201606
null  null


SQL> 

backfill fabric 

ecra> backfill  updatesitegroup grouptype=fabric groupidentifier=IAD1FABRIC1  sitegroup=sg003 restricted=false
* {"status": 200, "op": "cabinet_updatesitegroup_put", "status-detail": "success"}
ecra> 


SQL> select name, NVL(RESTRICTED_SITEGROUP, 'null'), NVL(SITEGROUP, 'null') from ecs_hw_cabinets;

SEA201607
N     sg003

SEA201606
N     sg003


SQL> 



backfill fault domain 

ecra> backfill  updatesitegroup grouptype=faultdomain groupidentifier=1  sitegroup=sg002 restricted=false
* {"status": 200, "op": "cabinet_updatesitegroup_put", "status-detail": "success"}
ecra> 


SQL> select name, NVL(RESTRICTED_SITEGROUP, 'null'), NVL(SITEGROUP, 'null'), fault_domain from ecs_hw_cabinets;

SEA201607
N     sg002
1

SEA201606
N     sg002
1


SQL> 




Bonding:
consistencycheck:
Usage: ./ecracli bonding consistencycheck rackname=<name> [hostname=<dom0 hostname>]

Purpose:
    check the status of the bonding, ips, interfaces and networking in general.

Arguments:
    rackname : rackname for which bonding info needs to be found.
    hostname: [Optional] If user only requires a check to a single dom0 node.

Examples:
ecra> bonding consistencycheck rackname=iad1-d2-cl3-56c4816e-ddc5-4ce4-871d-b3c57ee8e92c-clu01
* {"status": 202, "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/67c1c57f-bfad-43c9-ad2d-bdf654b0ffca", "op": "bonding_consistencycheck_post", "op_start_time": "2024-04-10T00:33:44+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

ecra> status 67c1c57f-bfad-43c9-ad2d-bdf654b0ffca
* {"progress_percent": 0, "start_time_ts": "2024-04-10 00:33:44.0", "end_time": "2024-04-10T00:33:48+0000", "ecra_server": "EcraServer1", "error": "0", "start_time": "2024-04-10T00:33:44+0000", "parent_req_id": "parent_sequential", "statusinfo": "000:: No status info available", "error_str": "No Errors", "ec_details": "{\"mockdata\":\"mockdata\"}", "last_heartbeat_update": "2024-04-10T00:33:48+0000", "status": 200, "message": "Done", "op": "bonding-consistencycheck", "completion_percentage": 0, "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/67c1c57f-bfad-43c9-ad2d-bdf654b0ffca", "status-detail": "success"}



getInfo:
Usage: ./ecracli [rackname=<name> || hostname=<hostname>]

Purpose:
    Provide bonding related info associated with the rack or hostname from ecs_bonding table

Arguments:
    rackname : rackname for which bonding info needs to be found.
    hostname : hostname for which bonding info needs to be found.

Examples:
ecra> bonding getInfo rackname=sea201109exd-d0-01-02-cl-01-03-clu01

{   "status":200,
   "status-detail":"success",
   "nodes":[      
      {         
       "sea201109exdd002":{
            "control_vip":"10.0.3.58",
            "control_netmask":"255.255.255.128",
            "control_vlantag":0,
            "control_ip1":"10.0.3.27 ",
            "control_ip2":"10.0.3.28"
         
        }
      
      },

      {         
      "sea201109exdd001":{
            "control_vip":"10.0.3.55",
            "control_netmask":"255.255.255.128",
            "control_vlantag":0,
            "control_ip1":"10.0.3.25",
            "control_ip2":"10.0.3.26"
         
        }
      }
   
   ],
   "op":"bonding_info_get"
}

ecra> bonding getInfo hostname=iad103716exdd013
"*"{
   "nodes":[
      {
         "iad103716exdd013":{
            "control_ip1":"192.168.0.44",
            "control_ip2":"192.168.3.125",
            "control_vip":"192.168.1.123",
            "control_netmask":"255.255.252.0",
            "control_vlantag":0
         }
      }
   ],
   "status":200,
   "op":"bonding_info_get",
   "status-detail":"success"
}

setupMonitoringBond 
Usage:
./ecracli bonding setupMonitoringBond json_path=<path>

Purpose:
    Creates/updates the monitoring bond

Arguments:
    json_path: Information related to bonding.

Examples:
ecra> bonding setupMonitoringBond json_path=/scratch/rgmurali/ecra_installs/bonding/ecracli/tmpl/dbcp_bonding.json
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den00uew.us.oracle.com:9001/ecra/endpoint/statuses/09f366b8-5bfa-4c05-b253-84c1c1488275", "op_start_time": "2020-07-27T08:44:32+0000", "message": "processing", "op": "bonding_setup_post"}

{
    "rackname" : "sea201109exd-d0-01-02-cl-01-03-clu01",
    "racktype" : "QUARTER",
    "nodes":[
      {   
       "sea201109exdd001" : { 
            "control_ip1":"10.0.3.53",
            "control_ip2":"10.0.3.54",
            "control_vip":"10.0.3.55",
            "control_netmask":"255.255.255.128",
            "control_vlantag":0
        }   
      },  
      {   
      "sea201109exdd002":{
            "control_ip1":"10.0.3.56",
            "control_ip2":"10.0.3.57",
            "control_vip":"10.0.3.58",
            "control_netmask":"255.255.255.128",
            "control_vlantag":0
        }   
      }   
  
   ]   
} 

deleteMonitoringBond 
Usage:
./ecracli bonding deleteMonitoringBond json_path=<path>

Purpose:
    Deletes the monitoring bond

Arguments:
    json_path: Information related to bonding.

Examples: 
ecra> bonding deleteMonitoringBond json_path=/scratch/rgmurali/ecra_installs/bonding/ecracli/tmpl/dbcp_bonding.json
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den00uew.us.oracle.com:9001/ecra/endpoint/statuses/8fe8c1d9-130d-4083-9bb6-4730d8c0d455", "op_start_time": "2020-07-27T08:46:43+0000", "message": "processing", "op": "bonding_setup_delete"}

linkfailover 
Usage:
./ecracli bonding linkfailover components=<list of names> newactive=<interface>

Purpose:
    Failsover the link on the interfaces of the indicated component.

Arguments:
    hostname: list of one or more components names (Infra, rack or dom0).
    newactive: Interface to activate first.

Examples: 
ecra> bonding linkfailover components=SEA201112 newactive=eth1
* {"status": 202, "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f103509f-56b3-4920-8983-e2e77a076eac", "op": "bonding_linkfailover_post", "op_start_time": "2023-03-16T16:37:46+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

ecra> bonding linkfailover components=sea201112exd-d0-03-04-cl-04-06-clu01 newactive=eth1
* {"status": 202, "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/566979da-9463-493d-aaa0-292b7b0d2455", "op": "bonding_linkfailover_post", "op_start_time": "2023-03-16T16:58:08+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

ecra> bonding linkfailover components=sea201112exdd004,sea201112exdd003 newactive=eth1
* {"status": 202, "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/05e0a720-8abf-4e50-8399-d36590d1d7d7", "op": "bonding_linkfailover_post", "op_start_time": "2023-03-16T16:13:04+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

Notes:
When using the command it can be used with only a component at a time, meaning only a list of cabinets, or only rack or only dom0s.Also when using a list of Dom0s, this can be only the name or it can include the name with the domain.

getpayload 
Usage:
./ecracli bonding getpayload [rackname=<rackname> || hostname=<hostname>]

Purpose:
    Get the DBCP payload for bonding from ecra_clobs table

Arguments:
    rackname: Information needed about a rack.
    hostname: Information needed about a compute 

Examples:
ecra> bonding getpayload rackname=sea201109exd-d0-01-02-cl-01-03-clu01
* {
    "nodes": [
        {
            "control_monitor": [
                {
                    "cavium_ids": [
                        {
                            "id": "id1",
                            "interface": "eth1"
                        },
                        {
                            "id": "id2",
                            "interface": "eth2"
                        }
                    ],
                    "control_ip1": "10.0.3.53",
                    "control_ip2": "10.0.3.54",
                    "control_netmask": "255.255.255.128",
                    "control_type": "bond0",
                    "control_vip": "10.0.3.55",
                    "control_vlantag": 0,
                    "preferred_interface": "eth1"
                },
                {
                    "cavium_ids": [
                        {
                            "id": "id3",
                            "interface": "eth1"
                        },
                        {
                            "id": "id3",
                            "interface": "eth2"
                        }
                    ],
                    "control_ip1": "10.0.3.59",
                    "control_ip2": "10.0.3.60",
                    "control_netmask": "255.255.255.128",
                    "control_type": "bond1",
                    "control_vip": "10.0.3.61",
                    "control_vlantag": 0,
                    "preferred_interface": "eth1"
                }
            ],
            "hostname": "sea201109exdd001"
        },
        {
            "control_monitor": [
                {
                    "cavium_ids": [
                        {
                            "id": "id5",
                            "interface": "eth1"
                        },
                        {
                            "id": "id6",
                            "interface": "eth2"
                        }
                    ],
                    "control_ip1": "10.0.3.56",
                    "control_ip2": "10.0.3.57",
                    "control_netmask": "255.255.255.128",
                    "control_type": "bond0",
                    "control_vip": "10.0.3.58",
                    "control_vlantag": 0,
                    "preferred_interface": "eth2"
                },
                {
                    "cavium_ids": [
                        {
                            "id": "id7",
                            "interface": "eth1"
                        },
                        {
                            "id": "id8",
                            "interface": "eth2"
                        }
                    ],
                    "control_ip1": "10.0.3.62",
                    "control_ip2": "10.0.3.63",
                    "control_netmask": "255.255.255.128",
                    "control_type": "bond1",
                    "control_vip": "10.0.3.64",
                    "control_vlantag": 0,
                    "preferred_interface": "eth2"
                }
            ],
            "hostname": "sea201109exdd002"
        }
    ],
    "op": "bonding_payload_get",
    "rackname": "sea201109exd-d0-01-02-cl-01-03-clu01",
    "racktype": "QUARTER",
    "status": 200,
    "status-detail": "success"
}

ecra> bonding getpayload hostname=iad103716exdd013
* {
    "mvmbonding": true,
    "nodes": [
        {
            "control_monitor": [
                {
                    "cavium_ids": [
                        {
                            "id": "FPC2251824F",
                            "networkinterface": "eth2"
                        },
                        {
                            "id": "FPC22520272",
                            "networkinterface": "eth1"
                        }
                    ],
                    "control_ip1": "192.168.0.44",
                    "control_ip2": "192.168.3.125",
                    "control_netmask": "255.255.252.0",
                    "control_type": "bond0",
                    "control_vip": "192.168.1.123",
                    "control_vlantag": "0",
                    "preferred_interface": "eth2"
                }
            ],
            "hostname": "iad103716exdd013"
        }
    ],
    "op": "bonding_payload_get",
    "operationtype": null,
    "rackname": "IAD103716",
    "racktype": "COMPUTE-ONLY",
    "status": 200,
    "status-detail": "success"
}


retrysetup 
Usage:
./ecracli bonding retrysetup rackname=<rackname>

Purpose:
    This cli triggers the setupMonitoringBond API for the given rack

Arguments:
    rackname: Information needed about a rack.

Examples:
ecra> bonding retrysetup rackname=sea201109exd-d0-01-02-cl-01-03-clu01
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9001/ecra/endpoint/statuses/566926b8-d5f4-42a6-bbfd-15f9fafd0689", 
"op": "bonding_setup_retry", "op_start_time": "2021-01-26T06:49:21+0000", "est_op_end_time": "", "message": "processing", 
"status-detail": "processing"}

migrationPrecheck
Usage: 
./ecracli bonding migrationPrecheck json_path=<JSON file path of BondingPrecheck Arguments>

Purpose:
    This cli is used to run precheck for bonding migration

Arguments:
    json_path: JSON file path of BondingPrecheck Arguments listed below
    rackname: Rack for which Bonding Migration will be performed
    idemtoken: idemtoken for this request 
    bondedhosts: JSON list of Bonded hosts in the Rack
    nonbondedhosts: JSON list of non-Bonded hosts in the Rack
    
Examples:
sh$ cat /a/b/c.json
{
    "rackname" : "sea201112exd-d0-01-02-cl-01-03-clu01",
    "idemtoken" : "41ee4a14-8011-4796-986d-9ade29970d70",
    "bondedhosts": ["sea201112exdd001"],
    "nonbondedhosts": ["sea201112exdd002"]
}

ecra> bonding migrationPrecheck json_path=/a/b/c.json
* Idemtoken used is: 60e6b1ac-efbe-4da6-af28-3cb6c961de49
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/8207b63d-f61f-414a-b534-25343c1798f8", "op": "bonding_precheck_post", "op_start_time": "2021-05-17T18:10:37+0000", 
"est_op_end_time": "", "message": "processing", "status-detail": "processing"}

ecra> status 8207b63d-f61f-414a-b534-25343c1798f8
* {"end_time": "2021-05-17T18:11:00+0000", "ecra_server": "EcraServer1", "error": "0", "remote_user": "ops", "start_time": 
"2021-05-17T18:10:37+0000", "statusinfo": "Pending", "error_str": "No Errors", "ec_details": "{}", "last_heartbeat_update": 
"2021-05-17T18:10:59+0000", "status": 200, "message": "Done", "op": "BONDING_PRECHECK", "atp_enabled": "N", "status_uri": 
"http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/8207b63d-f61f-414a-b534-25343c1798f8", "status-detail": "success"}

smartnicaction
Usage: 
./ecracli bonding smartnicaction nodeid=<Compute Node's Oracle host name> actionjson=<json file, with path, for the SmartNIC's operation from DOM0 bond_utils.py and the operation's parameters.\n Please make sure to follow the syntax defined for the ecra endpoint /bonding/[nodeid]/ports/smartNICAction>

Purpose:
    This cli is used to execute actions or fetch status of compute node's caviums

Arguments:
    nodeid: Oracle Hostname of the compute node whose Caviums need to be operated on. 
    actionjson: JSON file, with path, for the SmartNIC's operation from DOM0 bond_utils.py and the operation's parameters.\n Please make sure to follow the syntax defined for the ecra endpoint /bonding/[nodeid]/ports/smartNICAction.
    
Examples:
sh$ cat /a/b/c.json
{
    "operation" : "check_active"
}

ecra> bonding smartnicaction nodeid="sea20112exdd001" actionjson=/a/b/c.json
* {"status": 202, "status_uri": "http://atpecra.ecramgmt.adminsea2.oraclevcn.com:9079/ecra/endpoint/statuses/0501d9d5-9f06-4e0b-b60d-9cb4155e441d", "op": "bonding_smart_nic_action_post", "op_start_time": "2022-11-08T03:55:56+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}
ecra> status 0501d9d5-9f06-4e0b-b60d-9cb4155e441d
* {"progress_percent": 0, "end_time": "2022-11-08T03:56:54+0000", "ecra_server": "EcraServer1", "error": "0", "remote_user": "ops", "start_time": "2022-11-08T03:55:52+0000", "statusinfo": "000:: No status info available", "error_str": "No Errors", "ec_details": "{\"error\": \"\", \"output\": \"Calling Test Standby for Bond interface bondeth0\\nStandby interface for bond bondeth0 are ['eth2']\\nremove_intf_from_bond(interface=eth2, bond=bondeth0)\\nARPING 10.0.1.129 from 10.0.1.213 eth2\\nUnicast reply from 10.0.1.129 [00:00:17:F9:63:76]  0.635ms\\nSent 5 probes (5 broadcast(s))\\nReceived 1 response(s)\\n\\n\\narp link test successful for eth2\\n Arping output - out: ARPING 10.0.1.129 from 10.0.1.213 eth2\\nUnicast reply from 10.0.1.129 [00:00:17:F9:63:76]  0.635ms\\nSent 5 probes (5 broadcast(s))\\nReceived 1 response(s)\\n ,  err: \\nAdding eth2 as standby to bond interface bondeth0\\nCalling check_preferred_intf_active for bond : bondeth0\"}", "last_heartbeat_update": "2022-11-08T03:56:54+0000", "status": 200, "message": "Done", "op": "BONDING_SMART_NIC_ACTION", "completion_percentage": 0, "atp_enabled": "N", "status_uri": "http://atpecra.ecramgmt.adminsea2.oraclevcn.com:9079/ecra/endpoint/statuses/0501d9d5-9f06-4e0b-b60d-9cb4155e441d", "status-detail": "success"}

migratevlan
Usage:
./ecracli bonding migratevlan json_path=<filepath>

Purpose:
    This cli is used to migrate vlans for bonding migration

Arguments:
    json_path: A json file containing the necessary parameters to the endpoint.

Note:
{
   "rackname" : "sea101111exd-d0-03-04-cl-04-06-clu01",
   "nodes": [
        {
            "hostname": "sea101111exdd003",
            "client":{
                "vlantag": "1"
            },
            "backup":{
                "vlantag": "2"
            }
        }
     ]
}

Examples:
ecra> bonding migratevlan json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/vlanmigrate.json
* Idemtoken used is: d22fb901-19ff-4bba-adee-b0d5fe7d8932
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/f0f3a326-bc3c-43a1-8e2b-2a28e4da5dbc", "op": 
"bonding_vlanmigrate_post", "op_start_time": "2021-05-25T01:12:22+0000", "est_op_end_time": "", "message": "processing", "status-detail": 
"processing"}
ecra> status f0f3a326-bc3c-43a1-8e2b-2a28e4da5dbc
* {"end_time": "2021-05-25T01:12:48+0000", "ecra_server": "EcraServer1", "error": "0", "remote_user": "ops", "start_time": 
"2021-05-25T01:12:04+0000", "statusinfo": "Pending", "error_str": "No Errors", "ec_details": "{}", "last_heartbeat_update": 
"2021-05-25T01:12:04+0000", "status": 200, "message": "Done", "op": "BONDING_VLANMIGRATE", "atp_enabled": "N", "status_uri": 
"http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/f0f3a326-bc3c-43a1-8e2b-2a28e4da5dbc", "status-detail": "success"}


networkupdate
Usage:
./ecracli bonding networkupdate json_path=<filepath>

Purpose:
    This cli is used to update network info for bonding migration

Arguments:
    json_path: A json file containing the necessary parameters to the endpoint.

Note:
{
    "rackname" : "sea101111exd-d0-03-04-cl-04-06-clu01",
    "nodes":[
      {
            "hostname" : "sea101111exdd003",
            "client":{
               "ip":"10.0.3.126",
               "netmask":"255.255.255.0",
               "vlantag":"1",
               "gateway":"10.0.3.1",
               "mac":"00:00:17:01:06:C3",
               "standby_vnic_mac": "00:00:17:01:FF:81"
            },
            "backup":{
               "ip":"10.0.4.80",
               "netmask":"255.255.255.0",
               "vlantag":"2",
               "gateway":"10.0.4.1",
               "mac":"00:00:17:01:B7:9F",
               "standby_vnic_mac": "02:00:17:01:F9:80"
            },
            "vip": {
                "ip": "10.0.3.124"
             }
      }  
   ]
} 

Examples:
ecra> bonding networkupdate json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/tmpl/bondnet.json
* Idemtoken used is: a5bb3027-7878-4ab0-b88d-9f398ab36e12
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/439576d8-8bfd-4bc8-aa93-c9192606bc43", "op": 
"bonding_networkmigrate_post", "op_start_time": "2021-05-25T01:14:14+0000", "est_op_end_time": "", "message": "processing", "status-detail": 
"processing"}

ecra> status 439576d8-8bfd-4bc8-aa93-c9192606bc43
* {"remote_user": "ops", "start_time": "2021-05-25T01:14:13+0000", "end_time": "2021-05-25T01:15:35+0000", "ecra_server": "EcraServer1", 
"last_heartbeat_update": "2021-05-25T01:14:13+0000", "wf_uuid": "e5bb8568-a3e7-4846-b96a-4b6999f13a72", "status": 200, "message": "Done", 
"op": "bonding-network-migrate", "atp_enabled": "N", "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/439576d8-8bfd-4bc8-aa93-c9192606bc43", "status-detail": "success"}

monitorswitch:
Usage: ./ecracli bonding monitorswitch json_path=<json path>

Purpose:
   Enable/Disable bond monitor

Arguments:
   json_path: json path containing monitor switch information

Examples:
ecra> bonding monitorswitch json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/
bondmonitorswitch.json
* Idemtoken used is: b286d223-782a-4d83-a058-b533db6acedd
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/3a511bd6-43cb-4497-a257-377fdea3c7fa", "op": "bondmonitor_switch_post", 
"op_start_time": "2021-06-01T21:52:22+0000", "est_op_end_time": "", "message": 
"processing", "status-detail": "processing"}
ecra> status 3a511bd6-43cb-4497-a257-377fdea3c7fa
* {"end_time": "2021-06-01T21:53:08+0000", "ecra_server": "EcraServer1", "error": "0", 
"remote_user": "ops", "start_time": "2021-06-01T21:52:22+0000", "statusinfo": "Pending", 
"error_str": "No Errors", "ec_details": "{}", "last_heartbeat_update": 
"2021-06-01T21:52:22+0000", "status": 200, "message": "Done", "op": 
"enable-bond-monitor", "atp_enabled": "N", "status_uri": 
"http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/3a511bd6-43cb-4497-a257-377fdea3c7fa", "status-detail": "success"}
ecra> 

Note:
{
    "rackname": "sea101111exd-d0-03-04-cl-04-06-clu01", 
    "hostname": "sea101111exdd003", 
    "bond_monitoring": "enable"
}

getelasticcabinets:
Usage: ./ecracli bonding getelasticcabinets

Purpose:
    List all the elastic cabinets where bonding is enabled on atleast one node

Arguments: 
    None

Examples:
ecra> bonding getelasticcabinets
* {
    "cabinetnames": [
        "SEA203709",
        "SEA303717"
    ]
}

rpmupdate:
Usage: ./ecracli bonding rpmupdate rackname=<cluster> hostnames=<hostname1,hostnameN>

Purpose:
    Update bond monitor update on the given rack or hostnames.

Arguments:
    rackname: [Optional] Clustername where rpm needs to be updated.
    hostnames: [Optional] Comma separated hostnames (dom0).

Examples:
ecra> bonding rpmupdate rackname=sea101111exd-d0-03-04-cl-04-06-clu01
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/6e749a18-12ea-4431-b44f-eb140a785105", "op": "bonding_rpmupdate_put", "op_start_time": 
"2021-08-10T01:31:38+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

ecra> bonding rpmupdate hostnames=sea201610exdd007,sea201610exdd005

rpmupdateall:
Usage: ./ecracli bonding rpmupdateall 

Purpose:
    Update bond monitor rpm on all the bonded clusters and nodes.

Arguments:
    None

Examples:
ecra> bonding rpmupdateall
* Updating rpm for cluster: sea101111exd-d0-01-02-cl-01-03-clu01
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/82db04b7-c8cb-4b2e-9752-345f533d30f8", "op": "bonding_rpmupdate_put", "op_start_time": 
"2021-08-10T01:13:04+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}
* Status UUID: 82db04b7-c8cb-4b2e-9752-345f533d30f8
* Updating rpm for cluster: sea301112exd-d0-05-06-cl-07-09-clu01
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/9c9cb3d5-45e3-45ed-8ff1-cd7ba5ab136f", "op": "bonding_rpmupdate_put", "op_start_time": 
"2021-08-10T01:14:06+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}
* Status UUID: 9c9cb3d5-45e3-45ed-8ff1-cd7ba5ab136f

* {"cabinetnames": ["SEA203709", "SEA303717"]}
* Updating the rpm for cabinet: SEA203709
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/
ae44d6f4-9b3b-424b-9167-45ba04731bee", "op": "bonding_rpmupdate_put", "op_start_time": "2021-08-10T01:17:13+0000", 
"est_op_end_time": "", "message": "processing", "status-detail": "processing"}
* Status UUID: ae44d6f4-9b3b-424b-9167-45ba04731bee

* Updating the rpm for cabinet: SEA303717
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/
e51454ea-dfb1-4b65-b723-4b2fbfbf6fdf", "op": "bonding_rpmupdate_put", "op_start_time": "2021-08-10T01:18:15+0000", 
"est_op_end_time": "", "message": "processing", "status-detail": "processing"}
* Status UUID: e51454ea-dfb1-4b65-b723-4b2fbfbf6fdf
ecra> 

addcustomvip:
Usage: ./ecracli bonding addcustomvip json_path=filepath 

Purpose:
    Adds custom-vip to monitor

Arguments:
    json_path : Json file containing all the data

Example:
ecra> bonding addcustomvip json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/
tmpl/customvip.json
* Idemtoken used is: 6f70d706-ccd8-48ce-a100-7ea765b4565e
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/65f1186e-f975-4246-a581-4e090b523c1b", "op": "custom_vip_delete", 
"op_start_time": "2021-08-26T23:42:14+0000", "est_op_end_time": "", "message": 
"processing", "status-detail": "processing"}
ecra> 

deletecustomvip:
Usage: ./ecracli bonding deletecustomvip json_path=filepath 

Purpose:
    Deletes custom-vip 

Arguments:
    json_path : Json file containing all the data

Example:
ecra> bonding deletecustomvip json_path=/scratch/rgmurali/ecra_installs/
fabric1/ecracli/tmpl/customvip.json
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/
statuses/ac46861c-f02a-4ead-9da1-2195dd367ef5", "op": "custom_vip_add", 
"op_start_time": "2021-08-26T23:44:04+0000", "est_op_end_time": "", "message": 
"processing", "status-detail": "processing"}

Notes:
{
    "rackname" : "sea101111exd-d0-03-04-cl-04-06-clu01",
    "customvip": [
        {
            "domainname": "data.customer2.oraclevcn.com",
            "hostname": "ed2db01-vip",
            "ip": "10.0.0.5",
            "interfacetype" : "client/backup",
            "standby_vnic_mac": "00:09:A9:78:67",
            "mac": "00:09:A6:EF:78",
            "nodename": "FQDN of the VM where VIP is attached"
        },
        {
            "domainname": "data.customer2.oraclevcn.com",
            "hostname": "ed2db02-vip",
            "ip": "10.0.0.6",
            "interfacetype" : "client/backup",
            "standby_vnic_mac": "00:09:A9:78:68",
            "mac": "00:09:A6:EF:79",
            "nodename": "FQDN of the VM"
        }
    ]
}

restartmonitor:
  Usage:
    bonding status component=<COMPONENT>
  Values:
    <COMPONENT>: The component could be an exadataInfrastructureId, rackname (provisioned or not), hostname or cabinet name.
  Purpose:
    Checks status for bondmonitor service & network
  Examples:
    ecra> bonding status component=testdbsystem5
    * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/441b051a-6dd5-4480-abbd-7c6f2ed5a251", "op": "bonding_restartmonitor_put", "op_start_time": "2023-01-20T00:10:00+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

    ecra> bonding restartmonitor component=iad1-d4-cl4-ec510a34-47ba-4687-8340-8f21fe5961f0-clu02
    * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/543613cb-8292-4e78-afda-00bc77a375bb", "op": "bonding_restartmonitor_put", "op_start_time": "2023-01-20T00:23:02+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

    ecra> bonding restartmonitor component=IAD101608
    * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/2efafe05-aef4-4be4-b8b9-11062e3ebc6e", "op": "bonding_restartmonitor_put", "op_start_time": "2023-01-20T00:25:24+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

status:
  Usage:
    bonding status component=<COMPONENT> [id=<OPERATION_ID>]
  Values:
    <COMPONENT>: The component could be exadataInfrastructureId, rackname (provisioned or not),hostname or  cabinet name.
    <OPERATION_ID>: The usage of component returns an Id: <OPERATION_ID> use the OPERATION_ID to get the response from exacloud
  Purpose:
    Check the status for bondmonitor & networking connectivity.
  Examples:
    ecra> bonding status component=iad1-d3-cl3-0b7e01e7-d7e9-4156-b05b-2ae9e4363242-clu01
    * Id: c458fba1-e6fb-40c6-b91d-d167311cf5e8
    * STATUS URI : http://phoenix112400.dev3sub3phx.databasede3phx.oraclevcn.com:9037/ecra/endpoint/statuses/c458fba1-e6fb-40c6-b91d-d167311cf5e8
    * Request issued. Wait for completion. Pulling Status.
    * Status: processing...

    * Request bonding successfully completed
    * {
        "nodes": [
            {
                "eth1_link": true,
                "eth2_link": false,
                "eth1_ifstatus": true,
                "eth2_ifstatus": false,
                "bondmonitor": false,
                "bondmonitor_json": true,
                "dom0": "iad103709exdd011.iad103709exd.adminiad1.oraclevcn.com"
            },
            {
                "eth1_link": true,
                "eth2_link": false,
                "eth1_ifstatus": true,
                "eth2_ifstatus": false,
                "bondmonitor": false,
                "bondmonitor_json": true,
                "dom0": "iad103709exdd014.iad103709exd.adminiad1.oraclevcn.com"
            },
            {
                "eth1_link": true,
                "eth2_link": false,
                "eth1_ifstatus": true,
                "eth2_ifstatus": false,
                "bondmonitor": false,
                "bondmonitor_json": true,
                "dom0": "iad103709exdd004.iad103709exd.adminiad1.oraclevcn.com"
            },
            {
                "eth1_link": true,
                "eth2_link": false,
                "eth1_ifstatus": true,
                "eth2_ifstatus": false,
                "bondmonitor": false,
                "bondmonitor_json": true,
                "dom0": "iad103709exdd015.iad103709exd.adminiad1.oraclevcn.com"
            }
        ],
        "overall_health": false,
        "status": 200,
        "op": "bonding_statusmonitor_get",
        "status-detail": "success"
    }

________________________________________________________________________________

cabinet:
list:
Usage: ./ecracli cabinet list [<filter_column>=<value>]

Purpose:
    List all the cabinets managed by the ECRA. If filters are not specified all the cabinets will be retrieved

Arguments:
    [filters]: add the column name and the value to apply filters. <column_name>=<value>. Example name=IAD103712

Examples:
ecra> cabinet list
{
    "cabinets": [
        {
            "cabinetid": "7",
            "cabinetname": "SEA203416",
            "cabinettype": "STORAGE-ONLY",
            "model": "X8M-2"
        },
        {
            "cabinetid": "8",
            "cabinetname": "IAD103317",
            "cabinettype": "COMPUTE-ONLY",
            "model": "X8M-2"
        },
        {
            "cabinetid": "1",
            "cabinetname": "SEA201109",
            "cabinettype": "6:9",
            "model": "X8M-2"
        },
        {
            "cabinetid": "3",
            "cabinetname": "SEA200220",
            "cabinettype": "FIXED",
            "model": "X7-2"
        }
    ],
    "op": "cabinet_list_get",
    "status": 200,
    "status-detail": "success"
}

ecra> cabinet list name=IAD103712
* {
    "cabinets": [
        {
            "cabinetid": "1119",
            "cabinetname": "IAD103712",
            "cabinetstatus": "READY",
            "eth0": "Y",
            "model": "X8M-2 Elastic",
            "cabinettype": "STORAGE-ONLY"
        }
    ],
    "status": 200,
    "op": "cabinet_list_get",
    "status-detail": "success"
}

ecra> cabinet list model=X10M-2
* {
    "cabinets": [
        {
            "cabinetid": "1127",
            "cabinetname": "SEA201732",
            "cabinetstatus": "READY",
            "eth0": "Y",
            "model": "X10M-2 Elastic",
            "cabinettype": "STORAGE-ONLY"
        },
        {
            "cabinetid": "1128",
            "cabinetname": "SEA201733",
            "cabinetstatus": "READY",
            "eth0": "Y",
            "model": "X10M-2 Elastic",
            "cabinettype": "COMPUTE-ONLY"
        }
    ],
    "status": 200,
    "op": "cabinet_list_get",
    "status-detail": "success"
}



get:
Usage: ./ecracli cabinet get cabinetname=<cabinetname>

Purpose:
    Get detailed information for a given cabinet

Arguments:
    cabinetname: CabinetName of this cabinet

Examples:
ecra> cabinet get cabinetname=IAD103709
* {
    "MVMnetworkInfo": {
        "domainname": "mvmsubnet.sea2.com",
        "gateway": "10.1.0.1",
        "netmask": "255.255.0.0"
    },
    "cabinetId": "2",
    "cabinetName": "IAD103706",
    "clusterConstraint": "15cell2rocesw2pdu1ethsw",
    "launchNode": "iad103709exdd011.iad103709exd.adminiad1.oraclevcn.com",
    "model": "X8M-2 Elastic",
    "networkInfo": {
        "domainname": "iad103706exd.adminiad1.oraclevcn.com",
        "gateway": "10.0.2.1",
        "netmask": "255.255.255.128"
    },
    "status": "READY"
}



ports:
Usage: ./ecracli cabinet ports

Purpose:
    Get all the ports and cavium info for a given cabinet

Arguments:
    cabinetid: CabinetID which is a number
    cabinetname: Cabinet name which is a string

Examples:
ecra> cabinet ports cabinetid=1
{
    "cabinetid": 1,
    "cabinetname": "SEA201109",
    "op": "cabinet_ports_get",
    "ports": [
        {
            "cavium_id": "4.0G1944-GBC000855",
            "cavium_ip": "10.193.47.1",
            "dom0_oracle_name": "sea201109exdd001",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "1",
            "mac": "00:10:51:57:8f:fc"
        },
        {
            "cavium_id": "4.0G1944-GBC000855",
            "cavium_ip": "10.193.47.1",
            "dom0_oracle_name": "sea201109exdd001",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "1",
            "mac": "02:00:17:01:d2:41"
        },
        {
            "cavium_id": "4.0G1943-GBC002604",
            "cavium_ip": "10.193.61.1",
            "dom0_oracle_name": "sea201109exdd001",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "1",
            "mac": "00:10:69:67:de:0a"
        },
        {
            "cavium_id": "4.0G1943-GBC002604",
            "cavium_ip": "10.193.61.1",
            "dom0_oracle_name": "sea201109exdd001",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "1",
            "mac": "02:00:17:01:e3:78"
        },
        {
            "cavium_id": "4.0G1943-GBC002299",
            "cavium_ip": "10.193.61.3",
            "dom0_oracle_name": "sea201109exdd002",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "2",
            "mac": "00:10:5e:33:03:b2"
        },
        {
            "cavium_id": "4.0G1943-GBC002299",
            "cavium_ip": "10.193.61.3",
            "dom0_oracle_name": "sea201109exdd002",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "2",
            "mac": "02:00:17:01:ba:18"
        },
        {
            "cavium_id": "4.0G1943-GBC002262",
            "cavium_ip": "10.193.47.3",
            "dom0_oracle_name": "sea201109exdd002",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "2",
            "mac": "00:10:5d:93:d0:a1"
        },
        {
            "cavium_id": "4.0G1943-GBC002262",
            "cavium_ip": "10.193.47.3",
            "dom0_oracle_name": "sea201109exdd002",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "2",
            "mac": "02:00:17:01:86:65"
        },
        {
            "cavium_id": "4.0G1943-GBC002503",
            "cavium_ip": "10.193.47.5",
            "dom0_oracle_name": "sea201109exdd003",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "3",
            "mac": "00:10:62:6f:01:64"
        },
        {
            "cavium_id": "4.0G1943-GBC002503",
            "cavium_ip": "10.193.47.5",
            "dom0_oracle_name": "sea201109exdd003",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "3",
            "mac": "02:00:17:01:ff:d7"
        },
        {
            "cavium_id": "4.0G1943-GBC002665",
            "cavium_ip": "10.193.61.5",
            "dom0_oracle_name": "sea201109exdd003",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "3",
            "mac": "00:10:b2:27:4d:c9"
        },
        {
            "cavium_id": "4.0G1943-GBC002665",
            "cavium_ip": "10.193.61.5",
            "dom0_oracle_name": "sea201109exdd003",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "3",
            "mac": "02:00:17:01:5a:37"
        },
        {
            "cavium_id": "4.0G1947-GBC001953",
            "cavium_ip": "10.193.61.7",
            "dom0_oracle_name": "sea201109exdd004",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "4",
            "mac": "00:10:5c:eb:29:e5"
        },
        {
            "cavium_id": "4.0G1947-GBC001953",
            "cavium_ip": "10.193.61.7",
            "dom0_oracle_name": "sea201109exdd004",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "4",
            "mac": "02:00:17:01:01:28"
        },
        {
            "cavium_id": "4.0G1947-GBC001990",
            "cavium_ip": "10.193.47.7",
            "dom0_oracle_name": "sea201109exdd004",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "4",
            "mac": "00:10:38:94:c8:a2"
        },
        {
            "cavium_id": "4.0G1947-GBC001990",
            "cavium_ip": "10.193.47.7",
            "dom0_oracle_name": "sea201109exdd004",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "4",
            "mac": "02:00:17:01:7c:2a"
        },
        {
            "cavium_id": "4.0G1944-GBC000974",
            "cavium_ip": "10.193.47.9",
            "dom0_oracle_name": "sea201109exdd005",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "5",
            "mac": "00:10:ae:94:f7:16"
        },
        {
            "cavium_id": "4.0G1944-GBC000974",
            "cavium_ip": "10.193.47.9",
            "dom0_oracle_name": "sea201109exdd005",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "5",
            "mac": "02:00:17:01:9f:93"
        },
        {
            "cavium_id": "4.0G1947-GBC001150",
            "cavium_ip": "10.193.61.9",
            "dom0_oracle_name": "sea201109exdd005",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "5",
            "mac": "00:10:62:2f:f0:d5"
        },
        {
            "cavium_id": "4.0G1947-GBC001150",
            "cavium_ip": "10.193.61.9",
            "dom0_oracle_name": "sea201109exdd005",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "5",
            "mac": "02:00:17:01:5c:ef"
        },
        {
            "cavium_id": "4.0G1944-GBC000963",
            "cavium_ip": "10.193.61.11",
            "dom0_oracle_name": "sea201109exdd006",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "6",
            "mac": "00:10:b4:21:49:04"
        },
        {
            "cavium_id": "4.0G1944-GBC000963",
            "cavium_ip": "10.193.61.11",
            "dom0_oracle_name": "sea201109exdd006",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "6",
            "mac": "02:00:17:01:41:29"
        },
        {
            "cavium_id": "4.0G1947-GBC001954",
            "cavium_ip": "10.193.47.11",
            "dom0_oracle_name": "sea201109exdd006",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "6",
            "mac": "00:10:65:05:41:7e"
        },
        {
            "cavium_id": "4.0G1947-GBC001954",
            "cavium_ip": "10.193.47.11",
            "dom0_oracle_name": "sea201109exdd006",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "6",
            "mac": "02:00:17:01:53:e5"
        }
    ],
    "status": 200,
    "status-detail": "success"
}

ecra> cabinet ports cabinetname=IAD102036
* {
    "cabinetid": 1121,
    "cabinetname": "IAD102036",
    "eth0": "Y",
    "message": "Operation to get port information is successful",
    "op": "cabinet_ports_get",
    "ports": [
        {
            "cavium_id": "JCN2215A52767",
            "cavium_ip": "10.52.10.27",
            "dom0_oracle_name": "iad102036exdd014",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12201",
            "mac": "00:10:8a:21:22:6a"
        },
        {
            "cavium_id": "JCN2215A52767",
            "cavium_ip": "10.52.10.27",
            "dom0_oracle_name": "iad102036exdd014",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12201",
            "mac": "02:00:17:01:05:e8"
        },
        {
            "cavium_id": "JCN2213A50682",
            "cavium_ip": "10.52.11.27",
            "dom0_oracle_name": "iad102036exdd014",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12201",
            "mac": "00:10:38:ef:b3:69"
        },
        {
            "cavium_id": "JCN2213A50682",
            "cavium_ip": "10.52.11.27",
            "dom0_oracle_name": "iad102036exdd014",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12201",
            "mac": "02:00:17:01:7f:e8"
        },
        {
            "cavium_id": "NCN2212A20070",
            "cavium_ip": "10.52.10.25",
            "dom0_oracle_name": "iad102036exdd013",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12202",
            "mac": "00:10:85:87:3e:c5"
        },
        {
            "cavium_id": "NCN2212A20070",
            "cavium_ip": "10.52.10.25",
            "dom0_oracle_name": "iad102036exdd013",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12202",
            "mac": "02:00:17:01:02:fe"
        },
        {
            "cavium_id": "NCN2215A34055",
            "cavium_ip": "10.52.11.25",
            "dom0_oracle_name": "iad102036exdd013",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12202",
            "mac": "00:10:3d:66:70:6e"
        },
        {
            "cavium_id": "NCN2215A34055",
            "cavium_ip": "10.52.11.25",
            "dom0_oracle_name": "iad102036exdd013",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12202",
            "mac": "02:00:17:01:77:8b"
        },
        {
            "cavium_id": "JCN2211A45677",
            "cavium_ip": "10.52.10.23",
            "dom0_oracle_name": "iad102036exdd012",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12203",
            "mac": "00:10:e0:ea:ec:78"
        },
        {
            "cavium_id": "JCN2211A45677",
            "cavium_ip": "10.52.10.23",
            "dom0_oracle_name": "iad102036exdd012",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12203",
            "mac": "02:00:17:01:c3:a0"
        },
        {
            "cavium_id": "JCN2209A42265",
            "cavium_ip": "10.52.11.23",
            "dom0_oracle_name": "iad102036exdd012",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12203",
            "mac": "00:10:57:f6:28:27"
        },
        {
            "cavium_id": "JCN2209A42265",
            "cavium_ip": "10.52.11.23",
            "dom0_oracle_name": "iad102036exdd012",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12203",
            "mac": "02:00:17:01:a5:9d"
        },
        {
            "cavium_id": "JCN2213A51653",
            "cavium_ip": "10.52.10.21",
            "dom0_oracle_name": "iad102036exdd011",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12204",
            "mac": "00:10:f7:65:5c:2a"
        },
        {
            "cavium_id": "JCN2213A51653",
            "cavium_ip": "10.52.10.21",
            "dom0_oracle_name": "iad102036exdd011",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12204",
            "mac": "02:00:17:01:4b:07"
        },
        {
            "cavium_id": "JCN2215A52944",
            "cavium_ip": "10.52.11.21",
            "dom0_oracle_name": "iad102036exdd011",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12204",
            "mac": "00:10:1a:c5:11:dc"
        },
        {
            "cavium_id": "JCN2215A52944",
            "cavium_ip": "10.52.11.21",
            "dom0_oracle_name": "iad102036exdd011",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12204",
            "mac": "02:00:17:01:82:c6"
        },
        {
            "cavium_id": "JCN2205A37872",
            "cavium_ip": "10.52.10.19",
            "dom0_oracle_name": "iad102036exdd010",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12205",
            "mac": "00:10:0e:4f:bf:f1"
        },
        {
            "cavium_id": "JCN2205A37872",
            "cavium_ip": "10.52.10.19",
            "dom0_oracle_name": "iad102036exdd010",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12205",
            "mac": "02:00:17:01:c6:2c"
        },
        {
            "cavium_id": "JCN2205A36699",
            "cavium_ip": "10.52.11.19",
            "dom0_oracle_name": "iad102036exdd010",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12205",
            "mac": "00:10:3e:74:e6:f6"
        },
        {
            "cavium_id": "JCN2205A36699",
            "cavium_ip": "10.52.11.19",
            "dom0_oracle_name": "iad102036exdd010",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12205",
            "mac": "02:00:17:01:e6:70"
        },
        {
            "cavium_id": "NCN2212A18609",
            "cavium_ip": "10.52.10.17",
            "dom0_oracle_name": "iad102036exdd009",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12206",
            "mac": "00:10:cd:36:b2:eb"
        },
        {
            "cavium_id": "NCN2212A18609",
            "cavium_ip": "10.52.10.17",
            "dom0_oracle_name": "iad102036exdd009",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12206",
            "mac": "02:00:17:01:53:41"
        },
        {
            "cavium_id": "NCN2213A20311",
            "cavium_ip": "10.52.11.17",
            "dom0_oracle_name": "iad102036exdd009",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12206",
            "mac": "00:10:13:11:e8:7a"
        },
        {
            "cavium_id": "NCN2213A20311",
            "cavium_ip": "10.52.11.17",
            "dom0_oracle_name": "iad102036exdd009",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12206",
            "mac": "02:00:17:01:03:d8"
        },
        {
            "cavium_id": "JCN2203A33553",
            "cavium_ip": "10.52.10.15",
            "dom0_oracle_name": "iad102036exdd008",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12207",
            "mac": "00:10:b0:26:5b:e5"
        },
        {
            "cavium_id": "JCN2203A33553",
            "cavium_ip": "10.52.10.15",
            "dom0_oracle_name": "iad102036exdd008",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12207",
            "mac": "02:00:17:01:b7:9e"
        },
        {
            "cavium_id": "NCN2234A82647",
            "cavium_ip": "10.52.11.15",
            "dom0_oracle_name": "iad102036exdd008",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12207",
            "mac": "00:10:fd:b0:39:5e"
        },
        {
            "cavium_id": "NCN2234A82647",
            "cavium_ip": "10.52.11.15",
            "dom0_oracle_name": "iad102036exdd008",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12207",
            "mac": "02:00:17:01:a8:93"
        },
        {
            "cavium_id": "JCN2203A35517",
            "cavium_ip": "10.52.10.13",
            "dom0_oracle_name": "iad102036exdd007",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12208",
            "mac": "00:10:3c:ff:72:07"
        },
        {
            "cavium_id": "JCN2203A35517",
            "cavium_ip": "10.52.10.13",
            "dom0_oracle_name": "iad102036exdd007",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12208",
            "mac": "02:00:17:01:be:78"
        },
        {
            "cavium_id": "NCN2116A36101",
            "cavium_ip": "10.52.11.13",
            "dom0_oracle_name": "iad102036exdd007",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12208",
            "mac": "00:10:cf:7e:9f:3f"
        },
        {
            "cavium_id": "NCN2116A36101",
            "cavium_ip": "10.52.11.13",
            "dom0_oracle_name": "iad102036exdd007",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12208",
            "mac": "02:00:17:01:50:fc"
        },
        {
            "cavium_id": "JCN2205A36107",
            "cavium_ip": "10.52.10.11",
            "dom0_oracle_name": "iad102036exdd006",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12209",
            "mac": "00:10:e5:f2:b8:82"
        },
        {
            "cavium_id": "JCN2205A36107",
            "cavium_ip": "10.52.10.11",
            "dom0_oracle_name": "iad102036exdd006",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12209",
            "mac": "02:00:17:01:01:90"
        },
        {
            "cavium_id": "JCN2205A37057",
            "cavium_ip": "10.52.11.11",
            "dom0_oracle_name": "iad102036exdd006",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12209",
            "mac": "00:10:52:c8:ee:ee"
        },
        {
            "cavium_id": "JCN2205A37057",
            "cavium_ip": "10.52.11.11",
            "dom0_oracle_name": "iad102036exdd006",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12209",
            "mac": "02:00:17:01:ef:dc"
        },
        {
            "cavium_id": "NCN2213A21453",
            "cavium_ip": "10.52.10.9",
            "dom0_oracle_name": "iad102036exdd005",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12210",
            "mac": "00:10:d6:3d:7c:22"
        },
        {
            "cavium_id": "NCN2213A21453",
            "cavium_ip": "10.52.10.9",
            "dom0_oracle_name": "iad102036exdd005",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12210",
            "mac": "02:00:17:01:a5:af"
        },
        {
            "cavium_id": "NCN2213A21918",
            "cavium_ip": "10.52.11.9",
            "dom0_oracle_name": "iad102036exdd005",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12210",
            "mac": "00:10:80:1a:d9:ba"
        },
        {
            "cavium_id": "NCN2213A21918",
            "cavium_ip": "10.52.11.9",
            "dom0_oracle_name": "iad102036exdd005",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12210",
            "mac": "02:00:17:01:08:ec"
        },
        {
            "cavium_id": "NCN2213A21354",
            "cavium_ip": "10.52.10.7",
            "dom0_oracle_name": "iad102036exdd004",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12211",
            "mac": "00:10:e2:7d:0e:d9"
        },
        {
            "cavium_id": "NCN2213A21354",
            "cavium_ip": "10.52.10.7",
            "dom0_oracle_name": "iad102036exdd004",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12211",
            "mac": "02:00:17:01:c5:a1"
        },
        {
            "cavium_id": "NCN2215A30501",
            "cavium_ip": "10.52.11.7",
            "dom0_oracle_name": "iad102036exdd004",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12211",
            "mac": "00:10:aa:a6:b9:07"
        },
        {
            "cavium_id": "NCN2215A30501",
            "cavium_ip": "10.52.11.7",
            "dom0_oracle_name": "iad102036exdd004",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12211",
            "mac": "02:00:17:01:69:32"
        },
        {
            "cavium_id": "NCN2212A17478",
            "cavium_ip": "10.52.10.5",
            "dom0_oracle_name": "iad102036exdd003",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12212",
            "mac": "00:10:00:b1:f1:5c"
        },
        {
            "cavium_id": "NCN2212A17478",
            "cavium_ip": "10.52.10.5",
            "dom0_oracle_name": "iad102036exdd003",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12212",
            "mac": "02:00:17:01:f1:f2"
        },
        {
            "cavium_id": "NCN2212A18571",
            "cavium_ip": "10.52.11.5",
            "dom0_oracle_name": "iad102036exdd003",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12212",
            "mac": "00:10:61:35:f1:ae"
        },
        {
            "cavium_id": "NCN2212A18571",
            "cavium_ip": "10.52.11.5",
            "dom0_oracle_name": "iad102036exdd003",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12212",
            "mac": "02:00:17:01:0c:1b"
        },
        {
            "cavium_id": "NCN2218A52844",
            "cavium_ip": "10.52.10.3",
            "dom0_oracle_name": "iad102036exdd002",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12213",
            "mac": "00:10:1b:6d:26:de"
        },
        {
            "cavium_id": "NCN2218A52844",
            "cavium_ip": "10.52.10.3",
            "dom0_oracle_name": "iad102036exdd002",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12213",
            "mac": "02:00:17:01:0f:25"
        },
        {
            "cavium_id": "NCN2219A61593",
            "cavium_ip": "10.52.11.3",
            "dom0_oracle_name": "iad102036exdd002",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12213",
            "mac": "00:10:be:43:32:a5"
        },
        {
            "cavium_id": "NCN2219A61593",
            "cavium_ip": "10.52.11.3",
            "dom0_oracle_name": "iad102036exdd002",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12213",
            "mac": "02:00:17:01:ce:79"
        },
        {
            "cavium_id": "NCN2215A31495",
            "cavium_ip": "10.52.10.1",
            "dom0_oracle_name": "iad102036exdd001",
            "etherface": "eth1",
            "etherface_type": "client",
            "hw_node_id": "12214",
            "mac": "00:10:bc:9f:e4:14"
        },
        {
            "cavium_id": "NCN2215A31495",
            "cavium_ip": "10.52.10.1",
            "dom0_oracle_name": "iad102036exdd001",
            "etherface": "eth1",
            "etherface_type": "backup",
            "hw_node_id": "12214",
            "mac": "02:00:17:01:43:5d"
        },
        {
            "cavium_id": "NCN2215A31429",
            "cavium_ip": "10.52.11.1",
            "dom0_oracle_name": "iad102036exdd001",
            "etherface": "eth2",
            "etherface_type": "client",
            "hw_node_id": "12214",
            "mac": "00:10:a1:18:55:2f"
        },
        {
            "cavium_id": "NCN2215A31429",
            "cavium_ip": "10.52.11.1",
            "dom0_oracle_name": "iad102036exdd001",
            "etherface": "eth2",
            "etherface_type": "backup",
            "hw_node_id": "12214",
            "mac": "02:00:17:01:bc:bf"
        }
    ],
    "status": 200,
    "status-detail": "success"
}


update:
Usage: ./ecracli cabinet update <cabinetname=name> [key=value] [force=true]

Purpose:
    Update the attributes of a cabinet

Arguments:
    cabinetname: Name of the cabinet to operate on
    key: The attribute you want to update.

Examples:
ecra> cabinet update cabinetname=SEA303717 status=MAINTENANCE
* {"status": 200, "op": "cabinet_update_put", "status-detail": "success"}
ecra> cabinet update SEA303717 status=READY
* {"status": 200, "op": "cabinet_update_put", "status-detail": "success"}


modelsubtype:
Usage: ./ecracli cabinet modelsubtype [ convert | convertlarge | convertextralarge | convertstandard | getreport | releasenodes] [parameters]
Purpose:
    API to consult and convert the model subtype in the nodes, so they can be removed from the physical rack, upgraded them, 
    and set it back to be used again by ECRA

Arguments:
    convert: This is the main command that will convert the nodes to the required spec and put it in HW_REPAIR state to avoid its used during the upgrade process
        modelsubtype=[LARGE | EXTRALARGE | EF | Z | STANDARD] AND {nodetype=[COMPUTE | CELL] model=[X11M | X10M-2 | X9M-2] amount=[1 - n]} OR {cabinetname=[string name] AND nodetype=[COMPUTE | CELL] AND amount=[1 - n]} OR {hostnames=[comma splitted]}
    convertlarge: This is a wrapper for convert command to define the model subtype as LARGE
        {model=[X11M | X10M-2 | X9M-2] AND amount=[1 - n]} OR {cabinetname=[string name] AND amount=[1 - n]} OR {hostnames=[comma splitted]}
    convertextralarge: This is a wrapper for convert command to define the model subtype as ELASTIC_EXTRALARGE
        {model=[X11M | X10M-2 | X9M-2] AND amount=[1 - n]} OR {cabinetname=[string name] AND amount=[1 - n]} OR {hostnames=[comma splitted]}    
    convertstandard: This is a wrapper for convert command to define the model subtype as STANDARD
        {model=[X11M | X10M-2 | X9M-2] AND amount=[1 - n]} OR {cabinetname=[string name] AND amount=[1 - n] AND nodetype=[COMPUTE | CELL]} OR {hostnames=[comma splitted]}
    getreport: This will generate a report for the available cabinets to be used for the convertion
        modelsubtype=[LARGE | EXTRALARGE | EF | Z | STANDARD] nodetype=[COMPUTE | CELL] model=[X10M-2 | X9M-2] {cabinetname=[string name]}
    releasenodes: This will release the nodes to be used by ECRA, this means set the state back to FREE
        {requestid=[UUID] OR cabinetname=[string name] OR hostnames=[comma splitted]}
Examples:

ecra> cabinet modelsubtype convertlarge model=X10M-2 nodetype=COMPUTE amount=14
* {
    "model": "X10M-2",
    "nodetype": "COMPUTE",
    "amount": "14",
    "modelsubtype": "LARGE"
}
* {
    "nodes": [
        "sea201391exdd014",
        "sea201391exdd013",
        "sea201391exdd012",
        "sea201391exdd011",
        "sea201391exdd010",
        "sea201391exdd009",
        "sea201391exdd008",
        "sea201391exdd007",
        "sea201391exdd006",
        "sea201391exdd005",
        "sea201391exdd004",
        "sea201391exdd003",
        "sea201391exdd002",
        "sea201391exdd001"
    ],
    "nodetype": [
        "COMPUTE"
    ],
    "modelsubtype": [
        "LARGE"
    ],
    "UUID": "8c3fbf40-cf04-4a9c-a4a3-18afbe3f3663",
    "status": 200,
    "op": "cabinet_modelsubtype_put",
    "status-detail": "success"
}
ecra> cabinet modelsubtype releasenodes
requestid=8c3fbf40-cf04-4a9c-a4a3-18afbe3f3663
* {
    "nodes": [
        "sea201391exdd014",
        "sea201391exdd013",
        "sea201391exdd012",
        "sea201391exdd011",
        "sea201391exdd010",
        "sea201391exdd009",
        "sea201391exdd008",
        "sea201391exdd007",
        "sea201391exdd006",
        "sea201391exdd005",
        "sea201391exdd004",
        "sea201391exdd003",
        "sea201391exdd002",
        "sea201391exdd001"
    ],
    "status": 200,
    "op": "cabinet_modelsubtype_put",
    "status-detail": "success"
}

getxml:
Usage: ./ecracli cabinet getxml <cabinetname=name>

Purpose:
    Retreive the xml and save it to the file system of teh indicated cabinet.

Arguments:
    cabinetname: Name of the cabinet to operate on.

Examples:
ecra> cabinet getxml IAD103712
* {
    "op": "rack_xml_get",
    "status": 200,
    "status-detail": "success",
    "xml": "../PodRepo/cabinet_IAD103712_xml_downloaded.xml"
}

updatexml:
Usage: ./ecracli cabinet updatexml <cabinetname=name> <newxmlpath=filepath>

Purpose:
    Updates the xml stored in the database of the indicated cabinet.

Arguments:
    cabinetname: Name of the cabinet to operate on.
    newxmlpath: Path of the new version of the xml file.

Examples:
ecra> cabinet updatexml cabinetname=SEA201207 newxmlpath=/scratch/gvalderr/ecra_installs/myecra/mw_home/user_projects/domains/PodRepo/cabinet_SEA201207_xml_downloaded.xml
* {"status": 200, "op": "cabinet_updatexml_put", "status-detail": "success"}

composexml:
Usage: ./ecracli cabinet updatexml <cabinetname=cabinetname> [force=true/false]

Purpose:
    Generates the xml for the cabinet and stores it in cabinet registry.

Arguments:
    cabinetname: Name of the cabinet to operate on.
    force: Indicates if xml should be replaced if already exists.

Examples:
ecra> cabinet composexml cabinetname=IAD103714
* {
    "status": 202,
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/b5fc7e18-6b8a-4ab6-aa16-11b834d10c30",
    "op": "cabinet_compose_xml_post",
    "op_start_time": "2024-04-03T02:25:48+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

ecra> status b5fc7e18-6b8a-4ab6-aa16-11b834d10c30
* {"start_time": "2024-04-03T02:25:48+0000", "progress_percent": 0, "start_time_ts": "2024-04-03 02:25:48.0", "end_time": "2024-04-03T02:26:09+0000",
 "ecra_server": "EcraServer1", "last_heartbeat_update": "2024-04-03T02:25:48+0000", "wf_uuid": "e7613560-5449-43c0-8c0b-b5af8c052c3d", "status": 200, 
 "message": "Done", "op": "CabinetComposeXml", "completion_percentage": 0, "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/b5fc7e18-6b8a-4ab6-aa16-11b834d10c30", 
 "status-detail": "success"}

 softdeletenode:
Usage: ./ecracli cabinet softdeletenode cabinetname=<cabinetname> hostname=<hostname> [servicetype=<service to which capacity is given>]

Purpose:
    Retrieves all the information of the node and archives it on
    ECS_HW_ELASTIC_NODES, then erase it from ECS_HW_NODES

Arguments:
    cabinetname: Name of the cabinet to operate on.
    hostname: Name of the noud that will be archived.
    servicetype: Service to which capacity is being given

Examples:

ecra> cabinet softdeletenode cabinetname=SEA201605 hostname=sea201605exdd001
* {
    "status": 200,
    "op": "cabinet_softdelete_node_put",
    "status-detail": "success"
}
ecra> cabinet softdeletenode cabinetname=SEA201605 hostname=sea201605exdd002
* {
    "status": 200,
    "op": "cabinet_softdelete_node_put",
    "status-detail": "success"
}

ecra> cabinet softdeletenode hostname=iad103496exdd008 cabinetname=IAD103496 servicetype=exacompute-cp
* {
    "status": 200,
    "op": "cabinet_softdelete_node_put",
    "status-detail": "success"
}


 getnodes:
Usage: ./ecracli cabinet getnodes cabinetname=<cabinetname>

Purpose:
    Get a report of the current status of the nodes,
    whether they are active or archived.

Arguments:
    cabinetname: Name of the cabinet to operate on.

Examples:
ecra> cabinet getnodes cabinetname=SEA201605
* {
    "cabinetinfo": {
        "id": 18,
        "name": "SEA201605",
        "node_status": "SHARED"
    },
    "currentnodes": [
        {
            "oracle_hostname": "sea201605exdd014",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd014.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd013",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd013.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd012",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd012.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd011",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd011.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd010",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd010.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd009",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd009.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd008",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd008.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd007",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd007.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd006",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd006.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd005",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd005.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd004",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd004.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd003",
            "node_type": "COMPUTE",
            "node_state": "FREE",
            "fqdn": "sea201605exdd003.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdre02",
            "node_type": "ROCESW",
            "node_state": "FREE",
            "fqdn": "sea201605exdre02.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdre01",
            "node_type": "ROCESW",
            "node_state": "FREE",
            "fqdn": "sea201605exdre01.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdpd02",
            "node_type": "PDU",
            "node_state": "FREE",
            "fqdn": "sea201605exdpd02.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdpd01",
            "node_type": "PDU",
            "node_state": "FREE",
            "fqdn": "sea201605exdpd01.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        }
    ],
    "archivednodes": [
        {
            "oracle_hostname": "sea201605exdd001",
            "node_type": "COMPUTE",
            "node_state": "ARCHIVED",
            "fqdn": "sea201605exdd001.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        },
        {
            "oracle_hostname": "sea201605exdd002",
            "node_type": "COMPUTE",
            "node_state": "ARCHIVED",
            "fqdn": "sea201605exdd002.sea2xx2xx0051qf.adminsea2.oraclevcn.com"
        }
    ]
}

 recovernode:
Usage: ./ecracli cabinet recovernode cabinetname=<cabinetname> hostname=[<hostname>|all]

Purpose:
    Recovers all the information of the node/nodes from
    ECS_HW_ELASTIC_NODES and saves it on ECS_HW_NODES

Arguments:
    cabinetname: Name of the cabinet to operate on.
    hostname: Name of the node that will be archived. "all" option will retreive all the nodes taht are currently archived

Examples:

ecra> cabinet recovernode cabinetname=SEA201605 hostname=sea201605exdd002
* {
    "status": 200,
    "op": "cabinet_restore_node_put",
    "status-detail": "success"
}

 purgenode:
Usage: ./ecracli cabinet purgenode cabinetname=<cabinetname> hostname=<hostname>

Purpose:
    Checks all the information is in order (ECS_TEMP_DOMUS, ECS_CAVIUMS and ECS_HW_NODES)
    and erases the archive record of the node in case of existing

Arguments:
    cabinetname: Name of the cabinet to operate on.
    hostname: Name of the node that will be archived.

Examples:

ecra> cabinet purgenode cabinetname=SEA201605 hostname=sea201605exdd002
* {
    "status": 200,
    "op": "cabinet_purge_node_put",
    "status-detail": "success"
}

getnodestatusreport:
Usage: ./ecracli cabinet getnodestatusreport

Purpose:
    Get a report of all the cabinets, if they are DEDICATED or SHARED and the archived nodes they have, if any.

Arguments:
    None

Examples:

ecra> cabinet getnodestatusreport
* {
    "cabinets": [
        {
            "cabinetid": "17",
            "cabinetname": "SEA201207",
            "opstate": "DEDICATED",
            "cabinettype": "FIXED",
            "activeNodesCount": 24,
            "archivedNodesCount": 0,
            "archivedNodes": []
        },
...
        {
            "cabinetid": "30",
            "cabinetname": "SEA202223",
            "opstate": "DEDICATED",
            "cabinettype": "STORAGE-ONLY",
            "activeNodesCount": 19,
            "archivedNodesCount": 0,
            "archivedNodes": []
        }
    ]
}

getnodearchivedreason:
Usage: ./ecracli cabinet getnodearchivedreason hostname=<hostname>

Purpose:
    Gets the reason a node was archived

Arguments:
    hostname: Name of the node that will be retieved.

Examples:
ecra> cabinet getnodearchivedreason hostname=sea201323exdd001
* {
    "hostname": "sea201323exdd001",
    "status": "ARCHIVED",
    "cabinet": "SEA201323",
    "archivedreason": "THE NODE WAS ARCHIVED BECAUSE IT WAS BROKEN"
}

updatenodearchivedreason:
Usage: ./ecracli cabinet updatenodearchivedreason hostname=<hostname> archivedreason=<'archived reason'>

Purpose:
    Updates or sets the reason a node was archived

Arguments:
    hostname: Name of the node that will be updated.
    archivedreason: Reason the node was archived.

Examples:

ecra> cabinet updatenodearchivedreason hostname=sea201323exdd001 archivedreason='THE NODE WAS ARCHIVED BECAUSE IT WAS BROKEN'
* {
    "status": 200,
    "op": "cabinet_node_archive_info_put",
    "status-detail": "success"
}


getnodearchivedextrainfo:
Usage: ./ecracli cabinet getnodearchivedextrainfo hostname=<hostname>

Purpose:
    Gets the extra information stored of an archived node

Arguments:
    hostname: Name of the node that will be used to retrieve archived extra information.

Examples:

ecra> cabinet getnodearchivedextrainfo hostname=sea201323exdd001
* {
    "id": "130",
    "ib_fabric_id": "26",
    "sw_version": "24.1.90.0.0.240715",
    "node_type_order_bottom_up": "1",
    "cluster_size_constraint": "14comp2rocesw2pdu1ethsw",
    "node_state": "FREE",
    "dom0_bonding": "N",
    "mvmbonding": "N",
    "clustertag": "ALL",
    "ingestion_status": "INGESTION_IN_PROGRESS",
    "model_subtype": "STANDARD",
    "localbackupenabled": "Y",
    "ossbackupenabled": "Y",
    "servicetype": "exacs",
...
    "archivedreason": "THE NODE WAS ARCHIVED BECAUSE IT WAS BROKEN"
}

updatenodearchivedextrainfo:
Usage: ./ecracli cabinet updatenodearchivedextrainfo hostname=<hostname> extrainfojsonpath=<jsonpath>

Purpose:
    Updates  the extra information stored of a archived node using the new json file

Arguments:
   hostname: Name of the node that will be updated.
   extrainfojsonpath: Path of the json that contains the new extra information.

Examples:

ecra> cabinet updatenodearchivedextrainfo hostname=sea201323exdd001 extrainfojsonpath=/scratch/user/payloads/extrainfojson.json
* {
    "status": 200,
    "op": "cabinet_node_extra_info_put",
    "status-detail": "success"
}

ingestion:
Usage: ./ecracli cabinet ingestion <xml=path to XML file> <flatfile=Path to Flatfile>

Purpose:
    Ingest a new Cabinet or Add new nodes to present Cabinets that are Elastic Flex Cabinets.
    NOTE: For Elastic Flex Cabinet, XML and Flatfile should contains all the nodes, old and new ones.

Arguments:
    xml: Full path where the XML file is
    flatfile: Full path where the Flatfile is.

Examples:
ecra> cabinet ingestion
xml=/scratch/caborbon/flatfiles/fake_x11m/5088_flexrack_phase1.xml
flatfile=/scratch/caborbon/flatfiles/fake_x11m/5088_flexrack_phase1.flat
* {
    "status": 202,
    "status_uri":
"http://phoenix94477.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d2a7b9d9-68b6-4d94-bbb1-b2dad244998c",
    "op": "cabinet_ingestion_post",
    "op_start_time": "2025-09-17T18:30:21+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}


cluster:
details:
Usage: ./ecracli cluster details [rackname=<name>][exaunitid=<id>][domu=<domuname>][subscriptionid=<id>][dbsid=<dbsid>][resourceocid=<resourceocid>][resourcetype=<adb|cdb|pdb>]] [shortresponse=<true|false>] 

Purpose:
     Provide cluster details such as dom), domU, cells, ibswitches, ILOM information

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    exaunitid: exaunitid to get the details about.
    domu     : domU name of the exadata VM
    subscriptionid : subscriptionid associated with the customer VM
    dbsid : Database SID for which you need the information of the corresponding exadata
    resourceid : OCID of the Db system, CDB or PDB
    resourcetype : type of the resource - ADB, CDB or PDB
    shortresponse: By default is false. In case it is provided with true, this will not go to Exacloud nor include the exacloud response cached.
    
Examples:
i) cluster details rackname=scaqab10adm0102clu7
ii) cluster details exaunitid=1
iii) cluster details domu=scaqab10adm01vm07scaqab10adm02vm07
iv) cluster details subscriptionid=1234
v) cluster details dbsid=db122
vi) cluster details resourceocid=ocid1.autonomousdbsystem.oc1.iad.abuwcljr6d575vcsio5wdbosleye23jc4ssaxmop2piodbet3aepz5hx66pa resourcetype=adb
vii) cluster details resourceocid=pdb2ocid resourcetype=pdb
viii) cluster details resourceocid=cdbocid1 resourcetype=cdb
ix) cluster details resourceocid=ocid1.autonomousdbsystem.oc1.iad.abuwcljr6d575vcsio5wdbosleye23jc4ssaxmop2piodbet3aepz5hx66pa
x) cluster details rackname=iad103714exd-d0-01-02-cl-01-03-clu01 shortresponse=true

Output:
* {
    "status": 200, 
    "dbsystemid": "ocid1.autonomousdbsystem.oc1.iad.abuwcljr6d575vcsio5wdbosleye23jc4ssaxmop2piodbet3aepz5hx66pa",
    "DatabaseSID": "db122,db1901", 
    "rackname": "scaqab10adm0102clu7", 
    "exadataInfrastructureOCID": "ocid1.autonomousexainfrastructure.oc1.sea.abzwkljsz4vrvpumza7fahsjly2pwodupaqvoch7dscaqak01adm0102clu4",
    "rackType": "X6-2 Quarter Rack HC 8TB", 
    "exaunitid": 1,
    "dom0s": [
        {
            "VMSize": null, 
            "HostName": "scaqab10adm01.us.oracle.com", 
            "Virtual": "false", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxDom0", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10adm01.us.oracle.com_id", 
            "Type": "compute", 
            "Networks": [
                "scaqab10adm01.us.oracle.com_admin", 
                "scaqab10adm01.us.oracle.com_priv1", 
                "scaqab10adm01.us.oracle.com_priv2"
            ], 
            "Machines": [
                "scaqab10adm01vm01.us.oracle.com_id", 
                "scaqab10adm01vm02.us.oracle.com_id", 
                "scaqab10adm01vm03.us.oracle.com_id", 
                "scaqab10adm01vm04.us.oracle.com_id", 
                "scaqab10adm01vm05.us.oracle.com_id", 
                "scaqab10adm01vm06.us.oracle.com_id", 
                "scaqab10adm01vm07.us.oracle.com_id", 
                "scaqab10adm01vm08.us.oracle.com_id"
            ]
        }, 
        {
            "VMSize": null, 
            "HostName": "scaqab10adm02.us.oracle.com", 
            "Virtual": "false", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxDom0", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10adm02.us.oracle.com_id", 
            "Type": "compute", 
            "Networks": [
                "scaqab10adm02.us.oracle.com_admin", 
                "scaqab10adm02.us.oracle.com_priv1", 
                "scaqab10adm02.us.oracle.com_priv2"
            ], 
            "Machines": [
                "scaqab10adm02vm01.us.oracle.com_id", 
                "scaqab10adm02vm02.us.oracle.com_id", 
                "scaqab10adm02vm03.us.oracle.com_id", 
                "scaqab10adm02vm04.us.oracle.com_id", 
                "scaqab10adm02vm05.us.oracle.com_id", 
                "scaqab10adm02vm06.us.oracle.com_id", 
                "scaqab10adm02vm07.us.oracle.com_id", 
                "scaqab10adm02vm08.us.oracle.com_id"
            ]
        }
    ], 
    "status-detail": "success", 
    "ATPOcids": {
        "pdbocid": [
            "pdb1ocid", 
            "pdb2ocid"
        ], 
        "cdbocid": [
            "cdbocid1", 
            "cdbocid2"
        ], 
        "dbsystemocid": "6666"
    },
    "cells": [
        {
            "VMSize": null, 
            "HostName": "scaqab10celadm03.us.oracle.com", 
            "Virtual": "false", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxPhysical", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10celadm03.us.oracle.com_id", 
            "Type": "storage", 
            "Networks": [
                "scaqab10celadm03.us.oracle.com_admin", 
                "scaqab10celadm03.us.oracle.com_priv1", 
                "scaqab10celadm03.us.oracle.com_priv2"
            ], 
            "Machines": []
        }, 
        {
            "VMSize": null, 
            "HostName": "scaqab10celadm02.us.oracle.com", 
            "Virtual": "false", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxPhysical", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10celadm02.us.oracle.com_id", 
            "Type": "storage", 
            "Networks": [
                "scaqab10celadm02.us.oracle.com_admin", 
                "scaqab10celadm02.us.oracle.com_priv1", 
                "scaqab10celadm02.us.oracle.com_priv2"
            ], 
            "Machines": []
        }, 
               {
            "VMSize": null, 
            "HostName": "scaqab10celadm01.us.oracle.com", 
            "Virtual": "false", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxPhysical", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10celadm01.us.oracle.com_id", 
            "Type": "storage", 
            "Networks": [
                "scaqab10celadm01.us.oracle.com_admin", 
                "scaqab10celadm01.us.oracle.com_priv1", 
                "scaqab10celadm01.us.oracle.com_priv2"
            ], 
            "Machines": []
        }
    ], 
    "iloms": [
        {
            "ntp_ip": [
                "10.210.176.28", 
                "10.132.0.122"
            ], 
            "ilomnetid": "scaqab10celadm03.us.oracle.com_ilom", 
            "ilomname": "scaqab10celadm03.us.oracle.com ILOM", 
            "dns_ip": [
                "10.210.255.250", 
                "10.231.225.65", 
                "192.135.82.4"
            ], 
            "ilomver": "12", 
            "ilomid": "scaqab10celadm03.us.oracle.com_ilom", 
            "ilomtz": "America/Los_Angeles"
        }, 
        {
            "ntp_ip": [
                "10.210.176.28", 
                "10.132.0.122"
            ], 
            "ilomnetid": "scaqab10adm01.us.oracle.com_ilom", 
            "ilomname": "scaqab10adm01.us.oracle.com ILOM", 
            "dns_ip": [
                "10.210.255.250", 
                "10.231.225.65", 
                "192.135.82.4"
            ], 
            "ilomver": "12", 
            "ilomid": "scaqab10adm01.us.oracle.com_ilom", 
            "ilomtz": "America/Los_Angeles"
        }, 
        {
            "ntp_ip": [
                "10.210.176.28", 
                "10.132.0.122"
            ], 
            "ilomnetid": "scaqab10adm02.us.oracle.com_ilom", 
            "ilomname": "scaqab10adm02.us.oracle.com ILOM", 
            "dns_ip": [
                "10.210.255.250", 
                "10.231.225.65", 
                "192.135.82.4"
            ], 
            "ilomver": "12", 
            "ilomid": "scaqab10adm02.us.oracle.com_ilom", 
            "ilomtz": "America/Los_Angeles"
        }, 
        {
            "ntp_ip": [
                "10.210.176.28", 
                "10.132.0.122"
            ], 
            "ilomnetid": "scaqab10celadm02.us.oracle.com_ilom", 
            "ilomname": "scaqab10celadm02.us.oracle.com ILOM", 
            "dns_ip": [
                "10.210.255.250", 
                "10.231.225.65", 
                "192.135.82.4"
            ], 
            "ilomver": "12", 
            "ilomid": "scaqab10celadm02.us.oracle.com_ilom", 
            "ilomtz": "America/Los_Angeles"
        }, 
        {
            "ntp_ip": [
                "10.210.176.28", 
                "10.132.0.122"
            ], 
            "ilomnetid": "scaqab10celadm01.us.oracle.com_ilom", 
            "ilomname": "scaqab10celadm01.us.oracle.com ILOM", 
            "dns_ip": [
                "10.210.255.250", 
                "10.231.225.65", 
                "192.135.82.4"
            ], 
            "ilomver": "12", 
            "ilomid": "scaqab10celadm01.us.oracle.com_ilom", 
            "ilomtz": "America/Los_Angeles"
        }
    ], 
     "ibswitches": [
        {
            "swid": "scaqab10sw-iba0.us.oracle.com_id", 
            "swmship": "both", 
            "swnetid": "scaqab10sw-iba0.us.oracle.com_admin", 
            "swver": "version2", 
            "swdesc": "Exadata Leaf Switch"
        }, 
        {
            "swid": "scaqab10sw-ibs0.us.oracle.com_id", 
            "swmship": "both", 
            "swnetid": "scaqab10sw-ibs0.us.oracle.com_admin", 
            "swver": "version2", 
            "swdesc": "Exadata Spine Switch"
        }, 
        {
            "swid": "scaqab10sw-ibb0.us.oracle.com_id", 
            "swmship": "both", 
            "swnetid": "scaqab10sw-ibb0.us.oracle.com_admin", 
            "swver": "version2", 
            "swdesc": "Exadata Leaf Switch"
        }
    ], 
        "domUs": [
        {
            "VMSize": "Small", 
            "HostName": "scaqab10adm01vm07.us.oracle.com", 
            "Virtual": "true", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxGuest", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10adm01vm07.us.oracle.com_id", 
            "Type": "compute", 
            "Networks": [
                "c6_scaqab10adm01vm07-bk.us.oracle.com_backup", 
                "c6_scaqab10adm01vm07.us.oracle.com_admin", 
                "c6_scaqab10adm01vm07.us.oracle.com_client", 
                "c6_scaqab10adm01vm07.us.oracle.com_priv1", 
                "c6_scaqab10adm01vm07.us.oracle.com_priv2", 
                "c6_scaqab10db01vmclu07-priv.us.oracle.com_clusterpriv1", 
                "c6_scaqab10db01vmclu07-priv.us.oracle.com_clusterpriv2"
            ], 
            "Machines": []
        }, 
         {
            "VMSize": "Small", 
            "HostName": "scaqab10adm02vm07.us.oracle.com", 
            "Virtual": "true", 
            "GateWay": null, 
            "SubType": "Undefined", 
            "OsType": "LinuxGuest", 
            "TimeZone": "America/Los_Angeles", 
            "Id": "scaqab10adm02vm07.us.oracle.com_id", 
            "Type": "compute", 
            "Networks": [
                "c6_scaqab10adm02vm07-bk.us.oracle.com_backup", 
                "c6_scaqab10adm02vm07.us.oracle.com_admin", 
                "c6_scaqab10adm02vm07.us.oracle.com_client", 
                "c6_scaqab10adm02vm07.us.oracle.com_priv1", 
                "c6_scaqab10adm02vm07.us.oracle.com_priv2", 
                "c6_scaqab10db02vmclu07-priv.us.oracle.com_clusterpriv1", 
                "c6_scaqab10db02vmclu07-priv.us.oracle.com_clusterpriv2"
            ], 
            "Machines": []
        }
    ], 
     "DbSystemDetails": {
        "dsl_ocid": "ocid1.securitylist.oc1.iad.aaaaaaaandonibmqfm64yhr5hrp4rx5kpeooty4svtogcpoeyrcelhqpwu7q", 
        "cust_region": "us-ashburn-1", 
        "subnet_ocid": "ocid1.subnet.oc1.iad.aaaaaaaanqprt47nrq6bzbfb77iprl7ddfjf5iotaplg4hbmmiu2probmkmq", 
        "dbsystem_id": "1", 
        "custTenantId": "1234", 
        "shape": "quarter", 
        "subnet_cidr": "10.0.0.112/29", 
        "rackname": "scaqab10adm0102clu7", 
        "vnics": [
            {
                "macaddress": "00:23:45:56:78:89", 
                "vnicprivateip": "10.0.0.115", 
                "scan_hostname": "scanhostname", 
                "vnic_ocid": "vnic_ocid1", 
                "vnic_hostname": "vnichostname", 
                "scanip": "10.0.0.114", 
                "vnic_nodevip": "10.0.0.116", 
                "subnet_fdqn": "subnetfqdn", 
                "vip_hostname": "viphostname", 
                "vmname": "scaqab10adm02vm07.us.oracle.com"
            }, 
            {
                "macaddress": "00:23:45:56:78:90", 
                "vnicprivateip": "10.0.0.117", 
                "vnic_ocid": "vnic_ocid2", 
                "vnic_hostname": "vnichost2", 
                "vnic_nodevip": "10.0.0.118", 
                "subnet_fdqn": "subnetfqdn", 
                "vip_hostname": "viphost2", 
                "vmname": "scaqab10adm01vm07.us.oracle.com"
            }
        ], 
        "cust_ad": "eGJB:US-ASHBURN-AD-1"
    }, 
    "DatabaseMapping": {
        "cdbs": [
            {
                "cdbname": "dbsid1", 
                "cdbocid": "cdb1ocid", 
                "dbUniqueName": "cdbunique1",
                "pdbs": [
                    {
                        "pdbocid": "cdb1pdbocid1", 
                        "pdbname": "cdb1pdb1"
                    }, 
                    {
                        "pdbocid": "cdb1pdbocid2", 
                        "pdbname": "cdb1pdb2"
                    }
                ]
            }, 
            {
                "cdbname": "dbsid2", 
                "cdbocid": "cdb2ocid", 
                "dbUniqueName": "cdbunique2",
                "pdbs": [
                    {
                        "pdbocid": "cdb2pdbocid1", 
                        "pdbname": "cdb2pdb1"
                    }, 
                    {
                        "pdbocid": "cdb2pdbocid2", 
                        "pdbname": "cdb2pdb2"
                    }
                ]
            }
        ]
    }, 
    "op": "cluster_details_post"
}

gcsinfra:
getinfo:
Usage: ./ecracli gcsinfra getinfo rackname=<clustername>
Purpose:
     Get the infra details for GCS requirements

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    
Examples:
ecra> gcsinfra getinfo rackname=scaqae14exd-d0-01-02-cl-01-03-clu01
{
    "nodedetails": {
        "cells": [
            {
                "hostname": "scaqae14celadm01.us.oracle.com",
                "imageverion": "21.2.1.0.0.210514"
            },
            {
                "hostname": "scaqae14celadm02.us.oracle.com",
                "imageversion": "21.2.1.0.0.210514"
            },
            {
                "hostname": "scaqae14celadm03.us.oracle.com",
                "imageversion": "21.2.1.0.0.210514"
            }
        ],
        "dom0s": [
            {
                "hostname": "scaqae14adm01.us.oracle.com",
                "imageversion": "21.2.1.0.0.210514",
                "lastreboot": "2021-10-0223:01:22"
            },
            {
                "hostname": "scaqae14adm02.us.oracle.com",
                "imageversion": "21.2.1.0.0.210514",
                "lastreboot": "2021-10-02 23:02:32"
            }
        ],
        "ibswitches": [
            {
                "hostname": "scaqae14ib01.us.oracle.com",
                "imageversion": "21.2.1.0.0.210514"
            },
            {
                "hostname": "scaqae14dib02.us.oracle.com",
                "imageversion": "21.2.1.0.0.210514"
            }
        ]
    },
    "status": 200,
    "op": "gcs_infra_get",
    "status-detail": "success"
}

exawatcher:
getlog:
Usage: ./ecracli exawatcher getlog <rackname=<name>>[fromtime=<time to collect logs from>][totime=<endtime>][targets=<hostname1,hostname2][filter=NetStat etc][targettypes=<dom0|cell|all>]

Purpose:
     Get the exawatcher logs on the exadata nodes.

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    fromtime: time from when logs needs to be collected, ex: 08/16/2019_11:00:00
    totime  : time upto which logs have to retrieved. If absent, current time will be taken.
    targets : one can directly specify the hostname of the box from where log is to be retrieved.
    filter  : option to restrict the logs to certain types only such as ps/netstat etc.
    targettypes : specifies which the type of nodes from which exawatcher logs have to be 
                  retrieved. If absent, logs from all nodes will be retrieved.
    
Examples:

ecra> exawatcher getlog rackname=slcqab02adm0506clu5 fromtime=08/16/2019_11:00:00 targettypes=dom0
* {
    "status": 202, 
    "est_op_end_time": "", 
    "status-detail": "processing", 
    "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/e3574bd2-a515-4e8d-b9d3-f457f1e23243", 
    "op_start_time": "2019-08-16T15:31:19-0700", 
    "message": "processing", 
    "op": "exawatcher-logs-get"
}

ecra> exawatcher getlog rackname=slcqab02adm0506clu5 fromtime=08/16/2019_11:00:00 targettypes=dom0 filter=ps
* {
    "status": 202, 
    "est_op_end_time": "", 
    "status-detail": "processing", 
    "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/1fd82ec0-31b6-46da-b6fc-590bd87e636e", 
    "op_start_time": "2019-08-16T15:32:40-0700", 
    "message": "processing", 
    "op": "exawatcher-logs-get"
}

ecra> exawatcher getlog rackname=slcqab02adm0506clu5 fromtime=08/16/2019_11:00:00 
* {
    "status": 202, 
    "est_op_end_time": "", 
    "status-detail": "processing", 
    "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/12e2f003-d630-4086-89f7-5ca50ac27fae", 
    "op_start_time": "2019-08-16T15:34:00-0700", 
    "message": "processing", 
    "op": "exawatcher-logs-get"
}

listlog:
Usage: ./ecracli exawatcher listlog <rackname=<name>>[retrieval-history=value]

Purpose:
     This command lists the details of the last 'N' log retrieval operations. 
     The count can be specified as an input via "retrieval-history". 
     If not specified, it will be 10 by default. The output will include 
     details of each operation such as : Status, availability-time*, Log Location, 
     Fromtime, ToTime, Filter, targettypes, targets.

     * availability-time specifies how much more time is left before 
     we delete the file on exacloud box. 

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    retrieval-history : A count can be specified, default is 10.
    
Examples:
ecra> exawatcher listlog rackname=slcqab02adm0506clu5
* {
    "status": 200, 
    "status-detail": "success", 
    "op": "exawatcher-list-logs-get", 
    "exawatcher logs list": [
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "10:04:49 2019-08-17", 
            "from-time": "08/16/2019_10:00:00", 
            "log-location": "log/exawatcher/exawatcher-2019_08_16-10_04_49.tar"
        }, 
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "09:44:33 2019-08-17", 
            "from-time": "08/15/2019_11:00:00", 
            "log-location": "log/exawatcher/exawatcher-2019_08_16-09_44_32.tar"
        }, 
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "12:33:40 2019-08-16", 
            "from-time": null, 
            "log-location": "log/exawatcher/exawatcher-2019_08_15-12_33_39.tar"
        }, 
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "12:25:03 2019-08-16", 
            "from-time": null, 
            "log-location": "log/exawatcher/exawatcher-2019_08_15-12_25_03.tar"
        }, 
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "12:19:50 2019-08-16", 
            "from-time": null, 
            "log-location": "log/exawatcher/exawatcher-2019_08_15-12_19_50.tar"
        }
    ]
}

ecra>  exawatcher listlog rackname=slcqab02adm0506clu5 retrieval-history=2
* {
    "status": 200, 
    "status-detail": "success", 
    "op": "exawatcher-list-logs-get", 
    "exawatcher logs list": [
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "15:38:24 2019-08-17", 
            "from-time": "08/16/2019_11:00:00", 
            "log-location": "log/exawatcher/exawatcher-2019_08_16-15_38_24.tar"
        }, 
        {
            "filter": null, 
            "status": "DONE", 
            "expiry-time": "15:33:07 2019-08-17", 
            "from-time": "08/16/2019_11:00:00", 
            "log-location": "log/exawatcher/exawatcher-2019_08_16-15_33_07.tar"
        }
    ]
}


cpsswpatch:
Usage:
    ecra> patchcps cpsswupgrade cps_payload=/scratch/mkera/ecra_installs/ecra19434/ecracli/payload-cps.json

Purpose:
    This ecracli supports CPS Sw upgrade & CPS sw prechecks to be done before upgrade

Arguments:
    cps_payload - payload which will contain delow details
    1. idemtoken - new idemtoken 
    2. exaOcid - infra ocid
    3. operation - This ca be precheck or upgrade
    4. cpsSwVersion - ECS label to be compared ( label installed in CPS)
    5. ocpstarmd5 - MD5 sum of the ocps tar file to be upgraded in CPS
Examples:
    ecra> patchcps cpsswupgrade cps_payload=/scratch/mkera/ecra_installs/ecra19434/ecracli/payload-cps.json
* Idemtoken is: 6817e52e-64da-4a2f-b070-f2b44a30ad35
* {"operation": "precheck", "idemtoken": "6817e52e-64da-4a2f-b070-f2b44a30ad35", "exaOcid": "ocid1.exa.mvm.infrastructure.oc1.sea.scaqae03adm0102clu1",
  "cpsSwVersion": "LATEST", "ocpstarmd5": "22snkksr88ushh"}
*  POST request to http://slc10zit.us.oracle.com:9001/ecra/endpoint/patching/patchCPS

cps_tar_upload:
Usage:
    ecra> patchcps cps_tar_upload cps_tar_payload=/scratch/bshenoy/ecra_installs/ecra2231/ecracli/payload-cps.json

Purpose:
    This ecracli supports uploading the tar bundle for pre post upgrade steps

Arguments:
    cps_tar_payload - payload which will contain delow details
    1. idemtoken - new idemtoken 
    2. scriptOrder - This can be pre or post
    3. ecsSeries - ECS series where one off scripts to be run
    4. tarTzLoc - tar file location
    5. component_name - CPSSW or CPSOS
Examples:
    ecra> patchcps cps_tar_upload cps_tar_payload=/scratch/bshenoy/ecra_installs/ecra2231/ecracli/payload-cps.json
* Idemtoken is: 6817e52e-64da-4a2f-b070-f2b44a30ad35
* {"operation": "pre", "idemtoken": "6817e52e-64da-4a2f-b070-f2b44a30ad35" "scriptOrder":"pre", "ecsSeries"="ECS_22.3.1", "tarTzLoc"="/tmp/CPStar.zip"}
*  POST request to http://slc10zit.us.oracle.com:9001/ecra/endpoint/dynTask/tarLoc


exacloud:
setexassh:
Usage: ./ecracli exacloud setexassh <rackname=name>

Purpose:
     Update Exacloud exassh table with the rackname argument

Arguments:
    rackname: rackname such as slcqab02adm0506clu5

Examples:
ecra>  exacloud setexassh rackname=sea200214exd-d0-05-06-cl-07-09-clu01
* {"status": 200, "op": "exacloud_setexassh_put", "status-detail": "success"}
________________________________________________________________________________
#########################
# exadatainfrastructure #
#########################
1) create:
Usage: ./ecracli exadatainfrastructure create json_path=<path>

Purpose:
    Create the initial CEI for elastic shapes.

Arguments:
    json_path: A json file containing information necessary for CEI reservation.

Examples:
 exadatainfrastructure create json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/tmpl/elastic_shape_valid.json
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/8a960fdb-dea7-4b4a-ad85-4768da64fb4c", "op": 
"elastic_cei_post", "op_start_time": "2021-02-14T18:11:47+0000", "est_op_end_time": "", "message": "processing", "status-detail": 
"processing"}

Note:
{
    "exadataInfrastructureId": "ocid1.cloudexadatainfrastructure.oc1.sea.abzwkljsvmh7wskx62rxxjjboioxmejuyyls5h6xjdqouk6uhbw3bwol7r3q2",
    "servers": [
        {
            "hw_type": "CELL", 
            "model": "X8M-2", 
            "quantity" : 4
        },
        {
            "hw_type": "COMPUTE", 
            "model": "X8M-2", 
            "quantity" : 3
        },
    ],
    "provisionType": "preprovision/reconfig"
}

2) get:
Usage: ./ecracli exadatainfrastructure get exadataInfrastructureId=<exainfraocid>
       ./ecracli exadatainfrastructure get        
       ./ecracli exadatainfrastructure get filter=<FILTER>
       ./ecracli exadatainfrastructure get rackname=<RACKNAME>

Purpose:
    Get the information about the nodes reserved for CEI along with rackname or get information about all infrastructures.

Arguments:
    exadataInfrastructureId : OCID for the CEI.
    filter                  : computes|servers|rackslots|allocations 
    rackname                : The name of a rack

Examples:

1:
ecra> exadatainfrastructure get
* {
    "infras": [
        {
            "ceiocid": "asdfasdf",
            "rackname": "iad103714exd-d0-01-02-cl-01-03-clu01"
        },
        {
            "ceiocid": "testdbsystem",
            "rackname": "iad1-d2-cl4-df2328e7-96ec-46d5-bcae-1cb0c5b72564"
        }
    ]
}
ecra> 

2:
exadatainfrastructure get 
exadataInfrastructureId=ocid1.cloudexadatainfrastructure.oc1.sea.abzwkljsvmh7wskx62rxxjjboioxmejuyyls5h6xjdqouk6uhbw3bwol7r3q2
 {
    "dom0_bonding": false,
    "exadataInfrastructureId": "ocid1.cloudexadatainfrastructure.oc1.sea.abzwkljsvmh7wskx62rxxjjboioxmejuyyls5h6xjdqouk6uhbw3bwol7r3q2",
    "model": "X8M-2",
    "op": "elastic_cei_get",
    "rackname": "sea201109exd-d0-03-04-cl-04-06-clu01",
    "servers": [
        {
            "domainname": "iad103709exd.adminiad1.oraclevcn.com",
            "hostname": "sea203709exdd018",
            "hw_type": "COMPUTE",
            "node_state": "RESERVED"
        },
        {
            "domainname": "sea201109exd.adminsea2.oraclevcn.com",
            "hostname": "sea201109exdd004",
            "hw_type": "COMPUTE",
            "node_state": "ALLOCATED"
        },
        {
            "domainname": "sea201109exd.adminsea2.oraclevcn.com",
            "hostname": "sea201109exdd003",
            "hw_type": "COMPUTE",
            "node_state": "ALLOCATED"
        },
        {
            "domainname": "sea201109exd.adminsea2.oraclevcn.com",
            "hostname": "sea201109exdcl06",
            "hw_type": "CELL",
            "node_state": "ALLOCATED"
        },
        {
            "domainname": "sea201109exd.adminsea2.oraclevcn.com",
            "hostname": "sea201109exdcl05",
            "hw_type": "CELL",
            "node_state": "ALLOCATED"
        },
        {
            "domainname": "sea201109exd.adminsea2.oraclevcn.com",
            "hostname": "sea201109exdcl04",
            "hw_type": "CELL",
            "node_state": "ALLOCATED"
        },
        {
            "domainname": "iad103706exd.adminiad1.oraclevcn.com",
            "hostname": "sea203706exdcl15",
            "hw_type": "CELL",
            "node_state": "RESERVED"
        }
    ],
    "status": 200,
    "status-detail": "success"
}

3: 
ecra> exadatainfrastructure get exadataInfrastructureId=testdbsystem3 filter=rackslots
* [
    {
        "cluster_status": "ACTIVE",
        "dom0_bonding": false,
        "exaunitId": 0,
        "name": "iad1-d4-cl4-cc31c34c-1688-4c04-a397-bf297eba8ec8-clu01",
        "status": "RESERVED"
    },
    {
        "cluster_status": "ACTIVE",
        "dom0_bonding": false,
        "dom0domUDetails": [
            {
                "dom0Hostname": "iad103709exdd012.iad103709exd.adminiad1.oraclevcn.com",
                "domuCustomerHostname": "iad103709exddu1202.iad103709mvm.adminiad1.oraclevcn.com",
                "domuNatHostname": "iad103709exddu1202.iad103709mvm.adminiad1.oraclevcn.com"
            },
            {
                "dom0Hostname": "iad103709exdd013.iad103709exd.adminiad1.oraclevcn.com",
                "domuCustomerHostname": "iad103709exddu1302.iad103709mvm.adminiad1.oraclevcn.com",
                "domuNatHostname": "iad103709exddu1302.iad103709mvm.adminiad1.oraclevcn.com"
            }
        ],
        "dom0domUPairs": "{iad103709exdd012.iad103709exd.adminiad1.oraclevcn.com=iad103709exddu1202.iad103709mvm.adminiad1.oraclevcn.com, iad103709exdd013.iad103709exd.adminia

4: 
ecra> exadatainfrastructure get rackname=iad1-d4-cl4-cc31c34c-1688-4c04-a397-bf297eba8ec8-clu01
* {
    "ComputeNodeResourcesStatus": [
        {
            "allocatedCores": 0,
            "allocatedMemoryGb": 0,
            "allocatedOhomeSizeGb": 0,
            "cores": 50,
            "hostname": "iad103709exdd014.iad103709exd.adminiad1.oraclevcn.com",
            "memoryGb": 1390,
            "nodeAlias": "dbserver-1",
            "oHomeSizeGb": 2340
        },
        {
            "allocatedCores": 27,
            "allocatedMemoryGb": 300,
            "allocatedOhomeSizeGb": 800,
            "cores": 50,
            "hostname": "iad103709exdd013.iad103709exd.adminiad1.oraclevcn.com",
            "memoryGb": 1390,
            "nodeAlias": "dbserver-2",
            "oHomeSizeGb": 2
         ......


3) delete:
Usage: ./ecracli exadatainfrastructure delete exadataInfrastructureId=<exainfraocid>

Purpose:
    Delete the information about the nodes reserved for CEI along with rackname, similar to capacity release.

Arguments:
    exadataInfrastructureId : OCID for the CEI.

Examples:
ecra> exadatainfrastructure delete 
exadataInfrastructureId=ocid1.cloudexadatainfrastructure.oc1.sea.abzwkljsvmh7wskx62rxxjjboioxmejuyyls5h6xjdqouk6uhbw3bwol7r3q2
* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/9f711b5c-380b-41ec-8c9d-4e55b57566a0", "op": 
"elastic_cei_delete", "op_start_time": "2021-02-14T18:13:03+0000", "est_op_end_time": "", "message": "processing", "status-detail": 
"processing"}

4) rack_reserve
    Ussage:
         exadatainfrastructure rack_reserve exadataInfrastructureId=<exainfraocid> nodeComputeAliases=<list-of-aliases> vmclusterid=<vmclusterid> rackname=<rackname>
         Values:
            exainfraocid   : OCID for the CEI
            list-of-aliases: List of aliases, in comma separated
            vmclusterid : OCID of the rack
            rackname: Name of the rack that you want to reserve
    Purpose:
        Create a slot for the given ocid and based on the compute aliases 
    Examples:
       ecra> exadatainfrastructure rack_reserve exadataInfrastructureId=testdbsystem3 nodeComputeAliases=dbserver-01,dbserver-02
        * {"status": 202, "status_uri":
        "http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/a69997d3-1352-4732-a8da-803b77fab042",
        "op": "elastic_cei_get", "op_start_time": "2021-08-16T22:07:59+0000",
        "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

        ecra> status a69997d3-1352-4732-a8da-803b77fab042
        * {"start_time": "2021-08-16T22:07:59+0000", "target_uri":
        "http://slc16lme.us.oracle.com:9001/ecra/endpoint/racks?name=slot_iad1-d4-cl4-9cae053c-df85-436c-a141-d3a48415b469-clu01",
        "end_time": "2021-08-16T22:08:04+0000", "ecra_server": "EcraServer1",
        "last_heartbeat_update": "2021-08-16T22:07:59+0000", "status": 200, "message":
        "Done", "op": "ExadataInfraReserveRackOperation", "atp_enabled": "Y",
        "status_uri":
        "http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/a69997d3-1352-4732-a8da-803b77fab042",
        "status-detail": "success"}

        ecra> exadatainfrastructure rack_reserve exadataInfrastructureId=testdbsystem5 rackname=iad1-d4-cl4-180fae64-346f-4223-b8d3-34ef70af45b4-clu07
        * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f21618b0-2abd-4501-b902-94868c5c5dd6", "op": "elastic_rack_reserve", "op_start_time": "2023-02-08T17:57:20+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}
        ecra> status f21618b0-2abd-4501-b902-94868c5c5dd6
        * {"start_time": "2023-02-08T17:57:20+0000", "target_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/racks?name=iad1-d4-cl4-180fae64-346f-4223-b8d3-34ef70af45b4-clu07", "resource_id": "iad1-d4-cl4-180fae64-346f-4223-b8d3-34ef70af45b4-clu07", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-02-08T17:57:20+0000", "status": 200, "message": "Done", "op": "ExadataInfraReserveRackOperation", "atp_enabled": "Y", "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f21618b0-2abd-4501-b902-94868c5c5dd6", "status-detail": "success"}

        ***The name of the rack is present in the target_uri of the status command***
5) rack_release
    Ussage:
         exadatainfrastructure rack_release exadataInfrastructureId=<exainfraocid> rackname=<rackname>
         Values:
            exainfraocid   : OCID for the CEI
            rackname       : Name of the slot that will be released
    Purpose:
        Relase the rackname for the given exainfraocid
    Examples:
        ecra> exadatainfrastructure rack_release exadataInfrastructureId=testdbsystem3
        rackname=slot_iad1-d4-cl4-9cae053c-df85-436c-a141-d3a48415b469-clu02
        * {"status": 200, "op": "elastic_cei_get", "status-detail": "success"}

6) add_cluster
    Ussage:
         exadatainfrastructure add_cluster exadataInfrastructureId=<exainfraocid> rackname=<rackname> json_path=<Path to the JSON payload> [cores=<CORES> memorygb=<MEMORY> ohomesizegb=<OHSIZE> storagetb=<STORAGETB>]
         Values:
            exainfraocid   : OCID for the CEI
            rackname       : Name of the slot that will be provisioned
            json_path=     : The Path to the JSON payload
            cores          : Specify the number of cores for the cluster
            memorygb       : Specify the memory in Gb for this cluster
            storagetb      : Specify the storage in Tb for this cluster
            ohomesizegb    : Specify the size of home in this cluster
    Purpose:
        Performe the create_service operation over the provided slot.
    Examples:
        ecra> exadatainfrastructure add_cluster exadataInfrastructureId=ocid.infa.test json_path=temp/mvm_add_cluster.json
        rackname=slot_iad1-d4-cl4-9cae053c-df85-436c-a141-d3a48415b469-clu02 cores=200 memorygb=5560 storagetb=153276 ohomesizegb=2000

7) reshapecluster
    Usage:
         ecra> exadatainfrastructure reshapecluster exadataInfrastructureId=<exainfraocid> exaunitId=<exaunitid> [cores=<CORES> memoryGb=<MEMORY> ohomeSizeGb=<OHSIZE> storageTb=<STORAGETB> filesystems=<FILESYSTEMS>]
         Values:
            exainfraocid   : OCID for the CEI
            exaunitid      : Exaunit Id of the cluster
            CORES          : #of Cores
            MEMORY         : Memory in GB
            OHSIZE         : Oracle home in GB
            STORAGETB      : Storage in GB
            filesystem    : Filesystem, mountpoints separated by comma
    Note:
        The command should be used just with one of the following options at a time:
            CORES,MEMORY,OHSIZE,STORAGETB,FILESYSTEMS
    Purpose:
        Performs the reshapecluster operation over the provided exaunitid.
    Examples:
        ecra> exadatainfrastructure reshapecluster exaunitId=1021 exadataInfrastructureId=testdbsystem3 ohomeSizeGb=600
        * {"status": 202, "status_uri": "http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/0d9533d0-3407-4778-881b-7c6a609e35cd", "op": "reshape-service", "op_start_time": "2022-01-04T23:48:35+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 1021, "target_uri": "http://slc16lme.us.oracle.com:9001/ecra/endpoint/exaunit/1021"}

	    ecra> exadatainfrastructure reshapecluster exadataInfrastructureId=flowtesterInfra exaunitId=583 filesystem=/u01:150,/:50
		* {"status": 202, "status_uri": "http://phoenix94112.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f89e0e4f-7bf0-4e3d-90f4-7194a00ef3bb", "op": "reshape-service", "op_start_time": "2023-07-07T17:54:52+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 583, "target_uri": "http://phoenix94112.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/exaunit/583"}

8) migratetomvm
    Ussage:
         exadatainfrastructure migratetomvm exadataInfrastructureId=<infra ocid> rackname=<infra rack> precheckonly=true|false [vmclusterocid=<cluster OCID>]
         Values:
            exainfraocid   : OCID for the CEI
            rackname       : The infrastructure rack
            vmclusterocid  : The VM cluster OCID (if the infra rack is provisioned)
            precheckonly   : if true, the operation will be exdecuted in validation mode(changes are not saved in the DB).
    Purpose:
        Migrate the specified SVM infrastructure to a MVM infrastructure
    Examples:
        ecra> exadatainfrastructure migratetomvm  exadataInfrastructureId=ocid1.cloudexadatainfrastructure.split.svm.migrat_06 
              rackname=iad103714exd-d0-03-04-cl-04-06-clu01 precheckonly=false
        * {"status": 202, "status_uri": "http://slc11yoj.us.oracle.com:9001/ecra/endpoint/statuses/e7b1699e-28a5-43e4-bdb1-a0a0bfc7e07a", "op": "cei_migrate_post", 
           "op_start_time": "2022-02-16T08:25:32+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

9) checkdataintegrity
    Usage:
         ecra> exadatainfrastructure checkdataintegrity exadataInfrastructureId=<exainfraocid> [onlyvalidations=true]
         Values:
            exainfraocid   : OCID for the CEI
    Purpose:
        Perform a check of the integrity if the data in the DB to confirm that everything is as expected. Using the optional parameter
        onlyvalidations = true is to avoid show summary information about the infra and show only the validations results
    Examples:
	ecra> exadatainfrastructure checkdataintegrity exadataInfrastructureId=flowtesterInfra
	* {
	    "allocatedCores": 0,
	    "allocatedMemoryGb": 0,
	    "allocatedOhomeSizeGb": 0,
	    "allocatedStorageGb": 0,
	    "allocatedStorageTb": 0,
	    "clusterCount": 0,
	    "cores": 200,
	    "dom0_bonding": false,
	    "exadataInfrastructureId": "flowtesterInfra",
	    "memoryGb": 5560,
	    "model": "X8M-2",
	    "multiVM": true,
	    "oHomeSizeGb": 9360,
	    "op": "elastic_cei_get",
	    "rackname": "iad1-d4-cl3-2c32a66c-ec5f-43f4-b323-2387a5b3f364-clu01",
	    "status": 200,
	    "status-detail": "success",
	    "storageGb": 150528,
	    "storageTb": 147
	}
	* [
	    {
		"allocatedCores": 0,
		"allocatedMemoryGb": 0,
		"allocatedOhomeSizeGb": 0,
		"cores": 50,
		"hostname": "iad103709exdd008.iad103709exd.adminiad1.oraclevcn.com",
		"memoryGb": 1390,
		"nodeAlias": "dbserver-4",
		"oHomeSizeGb": 2340
	    },
	    {
		"allocatedCores": 0,
		"allocatedMemoryGb": 0,
		"allocatedOhomeSizeGb": 0,
		"cores": 50,
		"hostname": "iad103709exdd003.iad103709exd.adminiad1.oraclevcn.com",
		"memoryGb": 1390,
		"nodeAlias": "dbserver-3",
		"oHomeSizeGb": 2340
	    },
	    {
		"allocatedCores": 0,
		"allocatedMemoryGb": 0,
		"allocatedOhomeSizeGb": 0,
		"cores": 50,
		"hostname": "iad103709exdd002.iad103709exd.adminiad1.oraclevcn.com",
		"memoryGb": 1390,
		"nodeAlias": "dbserver-2",
		"oHomeSizeGb": 2340
	    },
	    {
		"allocatedCores": 0,
		"allocatedMemoryGb": 0,
		"allocatedOhomeSizeGb": 0,
		"cores": 50,
		"hostname": "iad103709exdd001.iad103709exd.adminiad1.oraclevcn.com",
		"memoryGb": 1390,
		"nodeAlias": "dbserver-1",
		"oHomeSizeGb": 2340
	    }
	]
	* {
	    "Results": {
		"AllRacksAppearsInDomus": {
		    "details": {
			"checkLevel": "Rack"
		    },
		    "pass": true,
		    "validations": {
			"AreRacksCorrect": true
		    }
		},
		"CorrectAmountOfComputesAndCellsInHwNodes": {
		    "details": {
			"cellsExpected": "3",
			"cellsFound": "3",
			"checkLevel": "Infrastructure",
			"computesExpected": "4",
			"computesFound": "4"
		    },
		    "pass": true,
		    "validations": {
			"doesCellsMatch": true,
			"doesComputesMatch": true
		    }
		},
		"ExadataCapacityMatchExadataComputeAndExadataCell": {
		    "details": {
			"cells": "3",
			"cellsAndComputesInExaservice": "7",
			"checkLevel": "Infrastructure",
			"computes": "4"
		    },
		    "pass": true,
		    "validations": {
			"doesItMatch": true
		    }
		},
		"InfraSpecsMatchwithEcsHardware": {
		    "details": {
			"checkLevel": "Infrastructure",
			"coresExpected": "200",
			"coresFound": "200",
			"memoryExpected": "5560",
			"memoryFound": "5560",
			"oHomeExpected": "9360",
			"oHomeFound": "9360",
			"storageExpected": "150528",
			"storageFound": "150528"
		    },
		    "pass": true,
		    "validations": {
			"areCoresCorrect": true,
			"isCellCapacityCorrect": true,
			"isMemoryCorrect": true,
			"isOhomeCorrect": true
		    }
		},
		"RacksInHwNodesMatchWithRacks": {
		    "details": {
			"checkLevel": "Rack"
		    },
		    "pass": true,
		    "validations": {
			"AreRacksCorrect": true
		    }
		},
		"SpecsInExaunitDetailsMatchWithCores": {
		    "details": {
			"checkLevel": "Exaunit"
		    },
		    "pass": false,
		    "validations": {}
		},
		"checkExadataVcomputeNodeEntries": {
		    "details": {
			"checkLevel": "Exaunit"
		    },
		    "pass": false,
		    "validations": {}
		},
		"checkExaserviceAllocationsAgainstComputeInformation": {
		    "details": {
			"checkLevel": "Infrastructure",
			"coresExpected": "0",
			"coresFound": "0",
			"memoryExpected": "0",
			"memoryFound": "0",
			"oHomeExpected": "0",
			"oHomeFound": "0"
		    },
		    "pass": true,
		    "validations": {
			"DoesCoresMatch": true,
			"DoesMemoryMatch": true,
			"DoesOhomeMatch": true
		    }
		},
		"checkExaserviceAllocationsAgainstExaunitDetails": {
		    "details": {
			"checkLevel": "Exaunit"
		    },
		    "pass": false,
		    "validations": {}
		},
		"checkExaserviceAllocationsAreInExaserviceLimits": {
		    "details": {
			"checkLevel": "Infrastructure",
			"coresExpected": "200",
			"coresFound": "0",
			"memoryExpected": "5560",
			"memoryFound": "0",
			"oHomeExpected": "9360",
			"oHomeFound": "0",
			"storageExpected": "150528",
			"storageFound": "0"
		    },
		    "pass": true,
		    "validations": {
			"AreCoresValid": true,
			"IsCapacityValid": true,
			"IsMEmoryValid": true,
			"IsOhomeValid": true
		    }
		},
		"checkNodeWiseAllocations": {
		    "details": {
			"checkLevel": "Infrastructure"
		    },
		    "pass": true,
		    "validations": {}
		},
		"checkRackNamesFromHwNodesAreNotRepeated": {
		    "details": {
			"Exception": "java.lang.NullPointerException",
			"checkLevel": "Rack"
		    },
		    "pass": false,
		    "validations": {}
		},
		"checkXmlInformation": {
		    "details": {
			"checkLevel": "Exaunit"
		    },
		    "pass": true,
		    "validations": {}
		}
	    }
	}
	ecra> 

10) restorecluster
    Usage:
         ecra> exadatainfrastructure restorecluster exaunitId=<exaunitId> exadataInfrastructureId=<exainfraocid> requestId=<requestId>
         Values:
            exainfraocid   : OCID for the CEI
            exaunitId      : Exaunit Id of the cluster
            requestId      : Request for the failed reshape operation
    Note:
        After the command is finished, workflows abort workflowId=<workflowId> should be performed.
    Purpose:
        Performs the restorecluster for the failed reshapecluster operation
    Examples:
        ecra> exadatainfrastructure restorecluster exaunitId=1022 exadataInfrastructureId=testdbsystem3 requestId=123
        * {
            "idemtoken": "f6ff2c63-63ea-4423-b217-ffd397a353eb",
            "operation": "restoreAllocation",
            "requestId": "123"
        }
11) info
    Usage:
         ecra> exadatainfrastructure info
    Purpose:
         Show a summary table with the information about all the infrastructures created
    Examples:
         ecra> exadatainfrastructure info
         *  <infrastructure> : <rackname>                                             : <state>              : <clusters> : <model>
         *  flowtesterInfra2 : iad1-d4-cl3-681b4182-f19e-4263-b6bb-66a3a9ede305-clu01 : PROVISIONED          : 0          : X8M-2 

12) computevms
    Usage:
         exadatainfrastructure computevms oraclehostname=<ORACLEHOSTNAME>
         Values:
            <ORACLEHOSTNAME>  : Oracle hostname
    Purpose:
        The API will return the VMs for the provided oracle hostname
    Examples:
        ecra> exadatainfrastructure computevms oraclehostname=iad103709exdd013
        * {
            "vms": [
                {
                    "adminhostname": "iad103709exddu1301.sea2mvm01roce.adminsea2.oraclevcn.com",
                    "adminip": "10.0.6.59",
                    "adminvlanid": "1337",
                    "clienthostname": "3709exd13c.clientsubnet.devx8melastic.oraclevcn.com",
                    "rackname": "exacompute-iad1-d2-95c2ebae-cd53-4523-ab2a-4c2599a41738-clu01",
                    "vmocid": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525a"
                }
            ]
        }

13) reshapecluster_precheck
    Usage:
         ecra> exadatainfrastructure reshapecluster_precheck exadataInfrastructureId=<exainfraocid> exaunitId=<exaunitid> [cores=<CORES> memoryGb=<MEMORY> ohomeSizeGb=<OHSIZE> storageTb=<STORAGETB>]
         Values:
            exainfraocid   : OCID for the CEI
            exaunitid      : Exaunit Id of the cluster
            CORES          : #of Cores
            MEMORY         : Memory in GB
            OHSIZE         : Oracle home in GB
            STORAGETB      : Storage in GB
    Note:
        The command should be used just with one of the following options at a time:
            CORES,MEMORY,OHSIZE,STORAGETB
    Purpose:
        Performs  precheck for reshapecluster operation over the provided exaunitid.
    Examples:
    
        ecra> exadatainfrastructure reshapecluster_precheck exaunitId=1 exadataInfrastructureId=testdbsystem3 cores=16

              * {"exaunitId": "1", "exaInfraId": "testdbsystem3", "upsize": true, "status": 200, "op": "precheck_reshape-service", "status-detail": "success"}

14) drop
    Usage:
        ecra> exadatainfrastructure drop rackname=<rackname> exadataInfrastructureId=<exainfraocid>
        Values:
           rackname     : Name of the rack to be looked for
           exainfraocid : The OCID of the infra to be cleaned up
    Note:
        If the ECRA_ENV property has the "prod" value, a prompt will ask the user if they wish to proceed. Be aware that this is not recommended unless instructed otherwise.
    Purpose:
        Perform a metadata cleanup for an MVM infra in case a failed operation where this is normally done has already happened.
    Examples:
        ecra>  exadatainfrastructure drop rackname=

15) deletestorage 
    Usage:
        ecra> exadatainfrastructure deletestorage exadataInfrastructureId=<exainfraocid> servers=<cell1,cell2,...> [releaseservers=<true|false>]
    Values:
           exainfraocid : The OCID of the infra to be cleaned up
           cells : cell name or FQDN separated by commas
           relaseservers: At the end of the delete it will release the cell from the infrastructure, by default this option is true.
    Purpose:
        Perform a deletion of cells on each cluster that belongs to an infractructure, in case the infrastucture has no clusters, disables the cell for provisioning or releases them.
    Examples:
        ecra> exadatainfrastructure deletestorage exadataInfrastructureId=testdbsystem  servers=iad103712exdcl14.iad103712exd.adminiad1.oraclevcn.com
* {"status": 202, "status_uri": "http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/55658306-4dd6-43e2-93aa-ea4a66be2885", "op": "cei_storage_post", "op_start_time": "2023-11-16T15:44:48+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 184}

ecra> status 55658306-4dd6-43e2-93aa-ea4a66be2885
* {"progress_percent": 0, "exaunit_id": 184, "ecra_server": "EcraServer1", "wf_uuid": "02a37922-4b35-4e59-b0b4-eeb20de99d3a", "start_time": "2023-11-16T15:44:48+0000", "parent_req_id": "parent_sequential", "exa_ocid": "testdbsystem", "last_heartbeat_update": "2023-11-16T15:44:48+0000", "status": 202, "message": "Pending", "op": "mvm-delete-storage", "completion_percentage": 0, "status_uri": "http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/55658306-4dd6-43e2-93aa-ea4a66be2885", "op_start_time": "2023-11-16T15:44:59+0000", "est_op_end_time": ""}

ecra> workflows describe workflowId=02a37922-4b35-4e59-b0b4-eeb20de99d3a
* {
    "workflowName": "delete-elastic-cell-wfd",
    "workflowId": "02a37922-4b35-4e59-b0b4-eeb20de99d3a",
    "workflowStatus": "Completed",
    "workflowStartTime": "16 Nov 2023 15:44:48 UTC",
    "workflowEndTime": "16 Nov 2023 16:06:05 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "GetXMLForDeleteTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Nov 16 15:44:48 UTC 2023",
            "taskEndTime": "Thu Nov 16 15:44:48 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "PrepareReshape",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Nov 16 15:44:48 UTC 2023",
            "taskEndTime": "Thu Nov 16 15:44:49 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:01"
        },
        {
            "taskName": "DeleteCellTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Nov 16 15:44:49 UTC 2023",
            "taskEndTime": "Thu Nov 16 16:06:04 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:21:15"
        },
        {
            "taskName": "UpdateCellDataTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Nov 16 16:06:04 UTC 2023",
            "taskEndTime": "Thu Nov 16 16:06:04 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "LaunchNextWorkflow",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Nov 16 16:06:04 UTC 2023",
            "taskEndTime": "Thu Nov 16 16:06:05 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:01"
        },
        {
            "lastTaskName": "LaunchNextWorkflow",
            "lastOperationDetails": {
                "lastTaskLastOperationId": "6c8270bc-c6c6-45bc-bdbc-2aea002f671f",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "16 Nov 2023 16:06:04 UTC",
                "lastTaskLastOperationEndTime": "16 Nov 2023 16:06:05 UTC"
            }
        }
    ],
    "exaOCID": "",
    "requestId": "55658306-4dd6-43e2-93aa-ea4a66be2885",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}

16) getinitialpayload
    Ussage:
         exadatainfrastructure getinitialpayload ceiocid=<ceiocid> | rackname=<rackname>
         Values:
            ceiocid   : OCID for the CEI
            rackname  : The rackname such as iad1-d4-cl3-f8536645-8939-401d-8471-16e195f62dcb-clu01
    Purpose:
        Retrieves the initial payload for the exadata infrastructure.
    Examples:
        ecra> exadatainfrastructure getinitialpayload rackname=iad1-d4-cl3-f8536645-8939-401d-8471-16e195f62dcb-clu02
        * {
            "elasticNodes": [
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd014",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd015",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd016",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd017",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103712exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103712exdcl01",
                    "hw_type": "CELL"
                },
                {
                    "domainname": "iad103712exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103712exdcl02",
                    "hw_type": "CELL"
                },
                {
                    "domainname": "iad103712exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103712exdcl03",
                    "hw_type": "CELL"
                }
            ],
            "exadataInfrastructureId": "ZeusInfra",
            "fabricname": null,
            "faultdomain": null,
            "idemtoken": "488ba284-96fd-40e2-9853-6da4ac83830f",
            "multiVM": true,
            "provisionType": null,
            "requestId": "8240b9b2-9715-4c99-84f0-fe764a0a5dd1",
            "servers": [
                {
                    "hw_type": "CELL",
                    "model": "X8M-2",
                    "model_subtype": "STANDARD",
                    "quantity": 3
                },
                {
                    "dom0_bonding": true,
                    "hw_type": "COMPUTE",
                    "model": "X8M-2",
                    "model_subtype": "STANDARD",
                    "quantity": 4
                }
            ],
            "tenantName": "dbaasnm",
            "tenantOcid": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaaep2yyhfkxoyejr4ijamds2oidrdu7untvshgpcmcvbla"
        }

        ecra> exadatainfrastructure getinitialpayload ceiocid=ZeusInfra
        * {
            "elasticNodes": [
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd014",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd015",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd016",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103709exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103709exdd017",
                    "hw_type": "COMPUTE"
                },
                {
                    "domainname": "iad103712exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103712exdcl01",
                    "hw_type": "CELL"
                },
                {
                    "domainname": "iad103712exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103712exdcl02",
                    "hw_type": "CELL"
                },
                {
                    "domainname": "iad103712exd.adminiad1.oraclevcn.com",
                    "hostname": "iad103712exdcl03",
                    "hw_type": "CELL"
                }
            ],
            "exadataInfrastructureId": "ZeusInfra",
            "fabricname": null,
            "faultdomain": null,
            "idemtoken": "488ba284-96fd-40e2-9853-6da4ac83830f",
            "multiVM": true,
            "provisionType": null,
            "requestId": "8240b9b2-9715-4c99-84f0-fe764a0a5dd1",
            "servers": [
                {
                    "hw_type": "CELL",
                    "model": "X8M-2",
                    "model_subtype": "STANDARD",
                    "quantity": 3
                },
                {
                    "dom0_bonding": true,
                    "hw_type": "COMPUTE",
                    "model": "X8M-2",
                    "model_subtype": "STANDARD",
                    "quantity": 4
                }
            ],
            "tenantName": "dbaasnm",
            "tenantOcid": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaaep2yyhfkxoyejr4ijamds2oidrdu7untvshgpcmcvbla"
        }

17) getkeys:
Usage: ./ecracli exadatainfrastructure getkeys <exainfraocid> [host=<hostname of machine/all>] [user=<username for which you need key root/oracle>] [nodetype=<dom0/domu/ibswitch/cell/all_nodes>]

Purpose:
    Retrieve the ssh keys for the infra components

Arguments:
    exainfraocid: The ocid from the infra
    host: The hostname of the machine
    user: The user for which you need the key
    nodetype: The type of the node for which the key is required

Examples:
ecra> exadatainfrastructure getkeys ZeusInfraTesting18
* {
    "est_op_end_time": "",
    "message": "processing",
    "op": "exadatainfra_keys_post",
    "op_start_time": "2025-01-06T15:43:21+0000",
    "status": 202,
    "status-detail": "processing",
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/0a2109b1-25ac-4eaf-953e-a44fbdc0b928"
}

ecra> status 0a2109b1-25ac-4eaf-953e-a44fbdc0b928
* {"step_progress_details": "{\"data\":{\"error\":\"\",\"output\":{\"dom0\":{\"sea202123exdd002.sea2xx2xx0111qf.adminsea2.oraclevcn.com\":{\"key\":\"mock key 1\"},
\"sea202123exdd003.sea2xx2xx0111qf.adminsea2.oraclevcn.com\":{\"key\":\"mock key 2\"},\"sea202123exdd014.sea2xx2xx0111qf.adminsea2.oraclevcn.com\":{\"key\":\"mock key 3\"}}},\"success\":\"True\"}}",
 "progress_percent": 0, "start_time_ts": "2025-01-06 15:43:21.0", "end_time": "2025-01-06T15:43:50+0000", "ecra_server": "EcraServer1", "wf_uuid": "3a7b167f-474b-4a8a-b8df-17d7981eee21",
  "start_time": "2025-01-06T15:43:21+0000", "last_heartbeat_update": "2025-01-06T15:43:21+0000", "status": 200, "message": "Done", "op": "exadatainfra_keys_post", "completion_percentage": 0,
   "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/0a2109b1-25ac-4eaf-953e-a44fbdc0b928", "status-detail": "success"}

18) updatevmstate
Usage: ./ecracli exadatainfrastructure updatevmstate exaocid=<exaoci> state=<running|stopped> servicetype=<exacc|exacs> json_path=<file_full_path| optional>
Purpose:
  Update the vm state.

Arguments:
  exaocid: Resource ExaOcid
  state: Desired vm state <runnning|stopped>
  servicetype: Desired service type <exacc|exacs>
  json_path: json file that contains list of vms

  sample json: JsonFile format:
        {
        "vms": [
            "sea111238exdd001nat02.oraclecloud.internal",
            "sea111238exdd001nat01.oraclecloud.internal",
            "sea111238exdvm02clu01.oraclecloud.internal"
        ]
    }

Note: json_path is optional paramater if json_path is not provided it will update all vm state for that exaocid.
Examples:
    ecra> exadatainfrastructure updatevmstate exaocid=ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102 state=stopped servicetype=exacc
    * {
        "ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102": [
            {
                "exaunitId": 3,
                "vmNatHostname": "sea111238exdd002nat01.oraclecloud.internal",
                "vmStatus": "stopped"
            },
            {
                "exaunitId": 3,
                "vmNatHostname": "sea111238exdd001nat01.oraclecloud.internal",
                "vmStatus": "stopped"
            },
            {
                "exaunitId": 21,
                "vmNatHostname": "sea111238exdd001nat02.oraclecloud.internal",
                "vmStatus": "stopped"
            },
            {
                "exaunitId": 21,
                "vmNatHostname": "sea111238exdd002nat02.oraclecloud.internal",
                "vmStatus": "stopped"
            }
        ]
    }
    ecra> exadatainfrastructure updatevmstate exaocid=ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102 state=stopped servicetype=exacc json_path=/tmp/vmlist.json
    * {
        "ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102": [
            {
                "exaunitId": 3,
                "vmNatHostname": "sea111238exdd001nat01.oraclecloud.internal",
                "vmStatus": "stopped"
            },
            {
                "exaunitId": 21,
                "vmNatHostname": "sea111238exdd001nat02.oraclecloud.internal",
                "vmStatus": "stopped"
            }
        ]
    }
    ecra>
________________________________________________________________________________
############
# kvmroce  #
############
allocateComputeVlan:
Usage: ./ecracli kvmroce allocateComputeVlan <fabric_name=id> <rackname=name> [number_of_vlans=number] [ListOfVlans=<comma separated ranges>]

Purpose:
     Allocate compute VLAN for KVM RoCE

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    number_of_vlans : number to allocate, by default its 1.
    ListOfVlans : Its a comma separated list of vlan ranges
    
Examples:
ecra> kvmroce allocateComputeVlan fabric_name=1 rackname=slcqab02adm0506clu5
* {"status": 200, "status-detail": "success", "vlans": [{"vlan_id": "2"}], "op": "vlan_allocate_compute_post"}
 
ecra> kvmroce allocateComputeVlan fabric_name=1 rackname=slcqab02adm0506clu6 number_of_vlans=2
* {"status": 200, "status-detail": "success", "vlans": [{"vlan_id": "1"}, {"vlan_id": "3"}], "op": "vlan_allocate_compute_post"}

ecra> kvmroce allocateComputeVlan fabric_name=1 rackname=slcqab02adm0506clu5 ListOfVlans=7-10,15-16
* {"status": 200, "status-detail": "success", "op": "vlan_allocate_compute_post"}

allocateStorageVlan:
Usage: ./ecracli kvmroce allocateStorageVlan <fabric_name=id> <rackname=name> [number_of_vlans=number] [ListOfVlans=<comma separated ranges>]

Purpose:
     Allocate storage VLAN for KVM RoCE

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    number_of_vlans : number to allocate, by default its 1.
    ListOfVlans : Its a comma separated list of vlan ranges
    
Examples:
ecra> kvmroce allocateStorageVlan fabric_name=1 rackname=slcqab02adm0506clu7
* {"status": 200, "status-detail": "success", "vlans": [{"vlan_id": "4"}], "op": "vlan_allocate_storage_post"}

ecra> kvmroce allocateStorageVlan fabric_name=1 rackname=slcqab02adm0506clu5 ListOfVlans=11-14
* {"status": 200, "status-detail": "success", "op": "vlan_allocate_storage_post"}

getComputeVlan:
Usage: ./ecracli kvmroce getComputeVlan <rackname=name>

Purpose:
    Return the compute VLAN(s) associated with the rack.

Arguments:
    rackname: rackname such as slcqab02adm0506clu5

Examples:
ecra>  kvmroce getComputeVlan rackname=slcqab02adm0506clu5
* {"status": 200, "status-detail": "success", "vlans": [{"vlan_id": "2"}], "op": "vlan_compute_get"}
 
getStorageVlan:
Usage: ./ecracli kvmroce getStorageVlan <rackname=name>

Purpose:
    Return the compute VLAN(s) associated with the rack.

Arguments:
    rackname: rackname such as slcqab02adm0506clu5

Examples:
ecra> kvmroce getStorageVlan rackname=slcqab02adm0506clu7
* {"status": 200, "status-detail": "success", "vlans": [{"vlan_id": "4"}], "op": "vlan_storage_get"}

freeComputeVlan:
Usage: ./ecracli kvmroce freeComputeVlan <fabric_name=id> [vlan_id=id] [ListOfVlans=<comma separated ranges>]

Purpose: 
    Free the allocated compute VLAN

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    vlan_id : the ID of the vlan to be freed.
    ListOfVlans : Its a comma separated list of vlan ranges

Examples:
ecra> kvmroce freeComputeVlan fabric_name=1 vlan_id=2
* {"status": 200, "status-detail": "success", "op": "vlan_free_compute_delete"}

ecra> kvmroce freeComputeVlan fabric_name=1 ListOfVlans=7-10,15-16
* {"status": 200, "status-detail": "success", "op": "vlan_free_compute_delete"}

freeStorageVlan:
Usage: ./ecracli kvmroce freeStorageVlan <fabric_name=id> [vlan_id=id] [ListOfVlans=<comma separated ranges>]

Purpose: 
    Free the allocated storage VLAN

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    vlan_id : the ID of the vlan to be freed.
    ListOfVlans : Its a comma separated list of vlan ranges

Examples:
ecra> kvmroce freeStorageVlan fabric_name=1 vlan_id=4
* {"status": 200, "status-detail": "success", "op": "vlan_free_storage_delete"}

ecra> kvmroce freeStorageVlan fabric_name=1 ListOfVlans=11-14
* {"status": 200, "status-detail": "success", "op": "vlan_free_storage_delete"}

allocateComputeIP:
Usage: ./ecracli kvmroce allocateComputeIP <fabric_name=id> <rackname=name> <shape=<quarter|half|full|double|elastic>>[number_of_nodes=<no>][ListOfIps=<comma separated IPs>]
[ListOfNodes=<comma seperated list of hostnames>] [generateNodeNames=true/false] [exacompute=true/false]

Purpose:
     Allocate clusterInterconnect and storage IPs for KVM RoCE compute node

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    ListOfIps: Comma separated IPs that needs to be allocated if you want to allocate specific IPs.
    shape: Rack shape such as quarter, half or full or elastic shape
    number_of_nodes: If shape is elastic, you need to specify the number of nodes.
    ListOfNodes : Comma separated hostnames that can be used to group the IPs under different hosts
    generateNodeNames : Generate node names or not, true by default
    
Examples:
ecra> kvmroce allocateComputeIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu6 shape=quarter
* {"status": 200, "storageIps": [{"Node1": ["100.106.64.32", "100.106.64.33"]}, {"Node2": 
["100.106.64.34", "100.106.64.35"]}], "clusterInterconnectIps": [{"Node1": ["100.107.0.6", 
"100.107.0.7"]}, {"Node2": ["100.107.0.8", "100.107.0.9"]}], "status-detail": "success",
"StorageGateway": "100.106.0.1", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "ComputeNetmask": "255.255.0.0", "op": "ipaddress_allocate_compute_post"}

ecra> kvmroce allocateComputeIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu7 shape=half
* {"status": 200, "storageIps": [{"Node1": ["100.106.64.36", "100.106.64.37"]}, {"Node2": 
["100.106.64.38", "100.106.64.39"]}, {"Node3": ["100.106.64.40", "100.106.64.41"]}, {"Node4": 
["100.106.64.42", "100.106.64.43"]}], "clusterInterconnectIps": [{"Node1": ["100.107.0.10", 
"100.107.0.11"]}, {"Node2": ["100.107.0.12", "100.107.0.13"]}, {"Node3": ["100.107.0.14", 
"100.107.0.15"]}, {"Node4": ["100.107.0.16", "100.107.0.17"]}], "status-detail": "success", 
"StorageGateway": "100.106.0.1", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "ComputeNetmask": "255.255.0.0", "op": "ipaddress_allocate_compute_post"}

ecra> kvmroce allocateComputeIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu8 shape=full
* {"status": 200, "storageIps": [{"Node1": ["100.106.64.44", "100.106.64.45"]}, {"Node2": ["100.106.64.46", 
"100.106.64.47"]}, {"Node3": ["100.106.64.48", "100.106.64.49"]}, {"Node4": ["100.106.64.50", 
"100.106.64.51"]}, {"Node5": ["100.106.64.52", "100.106.64.53"]}, {"Node6": ["100.106.64.54",
"100.106.64.55"]}, {"Node7": ["100.106.64.56", "100.106.64.57"]}, {"Node8": ["100.106.64.58",
"100.106.64.59"]}], "clusterInterconnectIps": [{"Node1": ["100.107.0.18", "100.107.0.19"]}, 
{"Node2": ["100.107.0.20", "100.107.0.21"]}, {"Node3": ["100.107.0.22", "100.107.0.23"]}, 
{"Node4": ["100.107.0.24", "100.107.0.25"]}, {"Node5": ["100.107.0.26", "100.107.0.27"]},
{"Node6": ["100.107.0.28", "100.107.0.29"]}, {"Node7": ["100.107.0.30", "100.107.0.31"]}, 
{"Node8": ["100.107.0.32", "100.107.0.33"]}], "status-detail": "success", 
"StorageGateway": "100.106.0.1", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "ComputeNetmask": "255.255.0.0", "op": "ipaddress_allocate_compute_post"}

ecra>  kvmroce allocateComputeIP fabric_name=1 rackname=slcqab02adm0506clu7 shape=full
* Error: POST request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/roce/ipaddress/compute failed
* HTTP Error 500: Internal Server Error
* {"status":500,"message":"Requested number of IPs not available",
"status-detail":"Requested number of IPs not available","op":"ipaddress_allocate_compute_post"}

ecra> kvmroce allocateComputeIP fabric_name=1 rackname=slcqab02adm0506clu3 shape=elastic
* Error: POST request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/roce/ipaddress/compute failed
* HTTP Error 500: Internal Server Error
* {"status":500,"message":"Please specify the number of nodes for the elastic shape",
"status-detail":"Please specify the number of nodes for the elastic shape",
"op":"ipaddress_allocate_compute_post"}

ecra> kvmroce allocateComputeIP fabric_name=1 rackname=slcqab02adm0506clu3 shape=elastic number_of_nodes=2 generateNodeNames=false
* {"status": 200, "storageIps": ["100.104.64.26", "100.104.64.27", "100.104.64.28", "100.104.64.29"], 
"clusterInterconnectIps": ["100.104.1.2", "100.104.1.9", "100.104.1.10", "100.104.1.11"], 
"StorageGateway": "100.106.0.1", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "ComputeNetmask": "255.255.0.0", "status-detail": "success", "op": "ipaddress_allocate_compute_post"}

ecra> kvmroce allocateComputeIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu3 shape=elastic number_of_nodes=2
* {"status": 200, "storageIps": [{"Node1": ["100.106.64.60", "100.106.64.61"]}, {"Node2": ["100.106.64.62", 
"100.106.64.63"]}], "clusterInterconnectIps": [{"Node1": ["100.107.0.34", "100.107.0.35"]}, {"Node2": 
["100.107.0.36", "100.107.0.37"]}], "status-detail": "success", 
"StorageGateway": "100.106.0.1", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "ComputeNetmask": "255.255.0.0", "op": "ipaddress_allocate_compute_post"}

ecra> kvmroce allocateComputeIP fabric_name=SEAFABRIC1 rackname=sea201109exd-d0-01-02-cl-01-03-clu07 shape=elastic number_of_nodes=2 ListOfNodes=sea201109exdd001,sea201109exdd002
* {"status": 200, "storageIps": [{"sea201109exdd001": ["100.106.64.4", "100.106.64.5"]}, {"sea201109exdd002": ["100.106.64.6", "100.106.64.7"]}], "clusterInterconnectIps": [{"sea201109exdd001": ["100.107.0.6", "100.107.0.7"]}, {"sea201109exdd002": ["100.107.0.8", "100.107.0.9"]}], "status-detail": "success", "op": "ipaddress_allocate_compute_post", "StorageGateway": "100.106.0.1", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "ComputeNetmask": "255.255.0.0"}

ecra> kvmroce allocateComputeIP fabric_name=SEA100051QFAB shape=elastic number_of_nodes=2 rackname=test exacompute=true
* {"clusterInterconnectIps": [{"Node1": ["100.107.0.20", "100.107.0.21"]}, {"Node2": ["100.107.0.22", "100.107.0.23"]}], "storageIps": [{"Node1": ["100.105.64.8", "100.105.64.9"]}, {"Node2": ["100.105.64.10", "100.105.64.11"]}], "ComputeNetmask": "255.255.0.0", "ComputeGateway": "100.107.0.1", "StorageNetmask": "255.255.0.0", "StorageGateway": "100.105.0.1", "status": 200, "op": "ipaddress_allocate_compute_post", "status-detail": "success"}
ecra> 

allocateStorageIP:
Usage: ./ecracli kvmroce allocateStorageIP <fabric_name=id> <rackname=name> <shape=<quarter|half|full|double|elastic>>[number_of_nodes=<no>][ListOfIps=<comma separated IPs>]
[ListOfNodes=<comma seperated list of hostnames>] [generateNodeNames=true/false]
Purpose:
     Allocate storage IPs for storage nodes for KVM RoCE

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    ListOfIps: Comma separated IPs that needs to be allocated if you want to allocate specific IPs.
    shape: Rack shape such as quarter, half or full or elastic shape
    number_of_nodes: If shape is elastic, you need to specify the number of nodes.
    ListOfNodes : Comma separated hostnames that can be used to group the IPs under different hosts
    generateNodeNames : Generate node names or not, true by default
    
Examples:
ecra> kvmroce allocateStorageIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu6 shape=quarter
* {"status": 200, "storageIps": [{"Node1": ["100.106.0.82", "100.106.0.83"]}, {"Node2": ["100.106.0.84",
"100.106.0.85"]}, {"Node3": ["100.106.0.86", "100.106.0.87"]}], "status-detail": "success", 
"op": "ipaddress_allocate_storage_post", "StorageGateway": "100.106.0.1", "StorageNetmask": "255.255.0.0"}

ecra> kvmroce allocateStorageIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu7 shape=half
* {"status": 200, "storageIps": [{"Node1": ["100.106.0.88", "100.106.0.89"]}, {"Node2": ["100.106.0.90",
"100.106.0.91"]}, {"Node3": ["100.106.0.92", "100.106.0.93"]}, {"Node4": ["100.106.0.94", "100.106.0.95"]},
{"Node5": ["100.106.0.96", "100.106.0.97"]}, {"Node6": ["100.106.0.98", "100.106.0.99"]}], 
"status-detail": "success", "op": "ipaddress_allocate_storage_post", "StorageGateway": "100.106.0.1", 
"StorageNetmask": "255.255.0.0"}

ecra> kvmroce allocateStorageIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu8 shape=full
* {"status": 200, "storageIps": [{"Node1": ["100.106.0.100", "100.106.0.101"]}, 
{"Node2": ["100.106.0.102", "100.106.0.103"]}, {"Node3": ["100.106.0.104", "100.106.0.105"]}, 
{"Node4": ["100.106.0.106", "100.106.0.107"]}, {"Node5": ["100.106.0.108", "100.106.0.109"]}, 
{"Node6": ["100.106.0.110", "100.106.0.111"]}, {"Node7": ["100.106.0.112", "100.106.0.113"]}, 
{"Node8": ["100.106.0.114", "100.106.0.115"]}, {"Node9": ["100.106.0.116", "100.106.0.117"]}, 
{"Node10": ["100.106.0.118", "100.106.0.119"]}, {"Node11": ["100.106.0.120", "100.106.0.121"]}, 
{"Node12": ["100.106.0.122", "100.106.0.123"]}], "status-detail": "success", 
"op": "ipaddress_allocate_storage_post", "StorageGateway": "100.106.0.1", "StorageNetmask": "255.255.0.0"}

ecra> kvmroce allocateStorageIP fabric_name=1 rackname=slcqab02adm0506clu2 shape=full
* Error: POST request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/roce/ipaddress/storage failed
* HTTP Error 500: Internal Server Error
* {"status":500,"message":"Requested number of IPs not available",
"status-detail":"Requested number of IPs not available","op":"ipaddress_allocate_storage_post"}

ecra> kvmroce allocateStorageIP fabric_name=1 rackname=slcqab02adm0506clu4 shape=elastic number_of_nodes=1 generateNodeNames=false
* {"status": 200, "storageIps": ["100.104.64.30", "100.104.64.31"], "status-detail": "success", 
"op": "ipaddress_allocate_storage_post", "StorageGateway": "100.106.0.1", "StorageNetmask": "255.255.0.0"}

ecra> kvmroce allocateStorageIP fabric_name=SEAFABRIC1 rackname=slcqab02adm0506clu4 shape=elastic number_of_nodes=2
* {"status": 200, "storageIps": [{"Node1": ["100.106.0.124", "100.106.0.125"]}, {"Node2": ["100.106.0.126",
"100.106.0.127"]}], "status-detail": "success", "op": "ipaddress_allocate_storage_post", 
"StorageGateway": "100.106.0.1", "StorageNetmask": "255.255.0.0"}

ecra> kvmroce allocateStorageIP fabric_name=SEAFABRIC1 rackname=sea201109exd-d0-01-02-cl-01-03-clu07 shape=elastic number_of_nodes=2 ListOfNodes=sea201109exdcl03,sea201109exdcl04
* {"status": 200, "storageIps": [{"sea201109exdcl03": ["100.106.0.82", "100.106.0.83"]}, {"sea201109exdcl04": ["100.106.0.84", "100.106.0.85"]}], "status-detail": "success", "op": "ipaddress_allocate_storage_post",
"StorageGateway": "100.106.0.1", "StorageNetmask": "255.255.0.0"}

allocateExascaleIP:
Usage: ./ecracli kvmroce allocateExascaleIP <fabric_name=id> <rackname=name> <shape=<elastic> <number_of_nodes=<no> [ListOfIps=<comma separated IPs>]
[ListOfNodes=<comma seperated list of hostnames>] [generateNodeNames=true/false]
Purpose:
     Allocate storage IPs for exascale nodes for KVM RoCE

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    ListOfIps: Comma separated IPs that needs to be allocated if you want to allocate specific IPs.
    shape: Rack shape which is elastic shape for exascale
    number_of_nodes: If shape is elastic, you need to specify the number of nodes.
    ListOfNodes : Comma separated hostnames that can be used to group the IPs under different hosts
    generateNodeNames : Generate node names or not, true by default
    
Examples:
ecra> kvmroce allocateExascaleIP fabric_name=SEA100051QFAB shape=elastic number_of_nodes=2 rackname=test
* {"storageIps": [{"Node1": ["100.105.64.8", "100.105.64.9"]}, {"Node2": ["100.105.64.10", "100.105.64.11"]}], "StorageNetmask": "255.255.0.0", "StorageGateway": "100.105.0.1", "status": 200, "op": "ipaddress_allocate_exascale_post", "status-detail": "success"}

getComputeIP:
Usage: ./ecracli kvmroce getComputeIP <rackname=name><fabric_name=id>

Purpose:
    Return the compute IP(s) associated with the rack.

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    fabric_name: fabric_name from the datacenter configuration

Examples:
ecra> kvmroce getComputeIP rackname=slcqab02adm0506clu3
* {"status": 200, "status-detail": "success", "ListOfIps": ["100.104.1.2", "100.104.1.9", "100.104.1.10", "100.104.1.11"], 
"op": "ipaddress_get_compute"}

getStorageIP:
Usage: ./ecracli kvmroce getStorageIP <rackname=name><fabric_name=id>

Purpose:
    Return the storage IPs associated with the rack.

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    fabric_name: fabric_name from the datacenter configuration

Examples:
ecra> kvmroce getStorageIP rackname=slcqab02adm0506clu3
* {"status": 200, "status-detail": "success", "ListOfIps": ["100.104.64.26", "100.104.64.27", "100.104.64.28", "100.104.64.29"], 
"op": "ipaddress_get_storage"}

getExascaleIP:
Usage: ./ecracli kvmroce getExascaleIP <rackname=name><fabric_name=id>

Purpose:
    Return the exascale IPs associated with the rack.

Arguments:
    rackname: rackname such as slcqab02adm0506clu5
    fabric_name: fabric_name from the datacenter configuration

Examples:
ecra> kvmroce getExascaleIP rackname=test
* {"ListOfIps": ["100.105.64.8", "100.105.64.9", "100.105.64.10", "100.105.64.11"], "status": 200, "op": "ipaddress_get_exascale", "status-detail": "success"}

freeComputeIP:
Usage: ./ecracli kvmroce freeComputeIP <fabric_name=id> [rackname=name][ListOfIps=<comma separated IPs]

Purpose: 
    Free the allocated compute IPs for a given rack or the given list of IP addresses.

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    ListOfIps: Comma separated IPs that needs to be freed if you want to free specific IPs.

Examples:
ecra> kvmroce freeComputeIP fabric_name=1
* Error: Delete request to http://den01gpy.us.oracle.com:9001/ecra/endpoint/roce/ipaddress/compute failed
* HTTP Error 500: Internal Server Error
* {"status":500,"message":"Provide either the rackname or a list of IPs to free","status-detail":"Provide either the rackname or a 
list of IPs to free","op":"ip_free_compute_delete"}

ecra> kvmroce freeComputeIP fabric_name=1 rackname=slcqab02adm0506clu8
* {"status": 200, "status-detail": "success", "op": "ip_free_compute_delete"}

ecra> kvmroce freeComputeIP fabric_name=1 ListOfIps=100.104.1.4,100.104.1.5
* {"status": 200, "status-detail": "success", "op": "ip_free_compute_delete"}

freeStorageIP:
Usage: ./ecracli kvmroce freeStorageIP <fabric_name=id> [rackname=name][ListOfIps=<comma separated IPs]

Purpose: 
    Free the allocated storage IPs

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    ListOfIps: Comma separated IPs that needs to be freed if you want to free specific IPs.

Examples:
ecra> kvmroce freeStorageIP fabric_name=1 rackname=slcqab02adm0506clu2
* {"status": 200, "status-detail": "success", "op": "vlan_free_storage_delete"}

ecra> kvmroce freeStorageIP fabric_name=1 ListOfIps=100.104.64.28,100.104.64.29
* {"status": 200, "status-detail": "success", "op": "vlan_free_storage_delete"}

freeExascaleIP:
Usage: ./ecracli kvmroce freeExascaleIP <fabric_name=id> [rackname=name][ListOfIps=<comma separated IPs]

Purpose: 
    Free the allocated exascale IPs

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    rackname: rackname such as slcqab02adm0506clu5
    ListOfIps: Comma separated IPs that needs to be freed if you want to free specific IPs.

Examples:
ecra> kvmroce freeExascaleIP fabric_name=SEA100051QFAB rackname=test
* {"status": 200, "op": "ip_free_exascale_delete", "status-detail": "success"}

addFabric:
Usage: ./ecracli kvmroce addFabric <fabric_name=id> [fabric_type=type]

Purpose:
     Add a fabric to the AD and also seed the IP pool and VLAN pool.

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    fabric_type : Type of the fabric.Currently defaults to a fabric that supports 910 VLANs
    
Examples:
ecra> kvmroce addFabric fabric_name=1
* {"status": 200, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/6cc97326-1503-46d8-8058-3610b77f3d0a", "op_start_time": "2020-03-04T14:56:35-0800", "message": "processing", "op": "fabric_addition_post"}

deleteFabric:
Usage: ./ecracli kvmroce deleteFabric <fabric_name=id>

Purpose:
     Delete a fabric in the AD and also clear the IP pool and VLAN pool for this fabric.

Arguments:
    fabric_name : fabric_name from the datacenter configuration
    
Examples:
ecra> kvmroce deleteFabric fabric_name=1
* {"status": 200, "status-detail": "success", "op": "fabric_deletion_delete"}

listFabric:
Usage: ./ecracli kvmroce listFabric [verbose=yes|no]

Purpose:
     List all the fabrics in the ECRA. It also lists the fault domains and cabinet names 
     associated with each of the fabrics.

Arguments:
    verbose - optional argument to get tenancy and more details
    
Examples:
ecra> kvmroce listFabric
ecra> kvmroce listFabric
* {"status": 200, "status-detail": "success", "op": "fabric_list_get", "Fabric details": [{"testfabric": 
{"Compute only racks": 0, "Utilization percentage": 0, "6:9 racks": 0, "Storage only racks": 0}}, 
{"internaldevqa": {"Compute only racks": 0, "Utilization percentage": 0, "6:9 racks": 0, "Storage only racks": 
0}}, {"1": {"Compute only racks": 0, "Utilization percentage": 0, "6:9 racks": 0, "Storage only racks": 0}}, 
{"SEAFABRIC1": {"SEAFD2": [{"Cabinet Name": "SEA201109", "Cabinet ID": 9}, {"Cabinet Name": "SEA203416", "Cabinet 
ID": 11}], "Utilization percentage": 6.25, "Storage only racks": 1, "6:9 racks": 1, "Compute only racks": 0}}, 
{"may14": {"Compute only racks": 0, "Utilization percentage": 0, "6:9 racks": 0, "Storage only racks": 0}}]}

ecra> kvmroce listFabric verbose=yes
* {
    "Fabric details": [
        {
            "SEAQFAB1": {
                "Utilization percentage": 0,
                "Compute only racks": 0,
                "Storage only racks": 0,
                "6:9 racks": 0
            }
        },
        {
            "SEAFABRIC1": {
                "SEAFD2": [
                    {
                        "Cabinet Name": "SEA203714",
                        "Cabinet ID": 2,
                        "Cabinet Type": "6:9",
                        "Clusters": [],
                        "Available Count": 0,
                        "Used Count": 0,
                        "Other Count": 3,
                        "Utilization percentage": 0,
                        "Free percentage": 0,
                        "Other percentage": 100,
                        "Details": []
                    },
                    {
                        "Cabinet Name": "SEA203706",
                        "Cabinet ID": 4,
                        "Cabinet Type": "STORAGE-ONLY",
                        "Clusters": [],
                        "Available Count": 10,
                        "Used Count": 5,
                        "Other Count": 0,
                        "Utilization percentage": 33.333333333333336,
                        "Free percentage": 66.66666666666667,
                        "Other percentage": 0,
                        "Details": [
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203706exdcl01",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203706exdcl02",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203706exdcl03",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203706exdcl04",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203706exdcl05",
                                "Node state": "RESERVED"
                            }
                        ]
                    },
                    {
                        "Cabinet Name": "SEA201109",
                        "Cabinet ID": 1,
                        "Cabinet Type": "6:9",
                        "Clusters": [
                            "sea201109exd-d0-03-04-cl-04-06-clu01",
                            "sea201109exd-d0-01-02-cl-01-03-clu01"
                        ],
                        "Available Count": 0,
                        "Used Count": 2,
                        "Other Count": 1,
                        "Utilization percentage": 66.66666666666667,
                        "Free percentage": 0,
                        "Other percentage": 33.333333333333336,
                        "Details": [
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "Cluster Status": "PROVISIONED",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-01-02-cl-01-03-clu01",
                                "Cluster Status": "PROVISIONED",
                                "ExaunitID": 24
                            }
                        ]
                    },
                    {
                        "Cabinet Name": "SEA203709",
                        "Cabinet ID": 5,
                        "Cabinet Type": "COMPUTE-ONLY",
                        "Clusters": [],
                        "Available Count": 13,
                        "Used Count": 5,
                        "Other Count": 0,
                        "Utilization percentage": 27.77777777777778,
                        "Free percentage": 72.22222222222223,
                        "Other percentage": 0,
                        "Details": [
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203709exdd001",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203709exdd002",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203709exdd003",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203709exdd004",
                                "Node state": "RESERVED"
                            },
                            {
                                "Cluster Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                                "ExaunitID": 27,
                                "DbsystemOCID": "dbsystemocid",
                                "TenancyOCID": "zdlra.oci1",
                                "Tenancy Name": "zdlra",
                                "Node name": "sea203709exdd005",
                                "Node state": "RESERVED"
                            }
                        ]
                    }
                ],
                "Utilization percentage": 12.5,
                "Compute only racks": 1,
                "Storage only racks": 1,
                "6:9 racks": 2,
                "Compute Vlan for Ingestion": "100",
                "Storage Vlan for Ingestion": "868"
            }
        }
    ],
    "status": 200,
    "op": "fabric_list_get",
    "status-detail": "success"
}

isexascalepoolcreated:
Usage: ./ecracli kvmroce isexascalepoolcreated <fabricname=name>

Purpose:
    Return if exacscale pool has already been created or not.

Arguments:
    fabricname: fabricname such as iad1xx4xx0301qf

Examples:
ecra>  kvmroce isexascalepoolcreated fabricname=iad1xx4xx0301qf
* {
    "exascalepoolcreated": true,
    "status": 200,
    "op": "ipaddress_get_exascalepool",
    "status-detail": "success"
}

getAllFabric:
Usage: ./ecracli kvmroce getAllFabric 

Purpose:
     List all the fabrics in the ECRA and provides high level details

Arguments:
    None
    
Examples:
ecra> kvmroce getAllFabric
* {
    "Fabric-details": [
        {
            "Fabric-Name": "SEA200041QFAB",
            "Compute-only-racks": 1,
            "Storage-only-racks": 1,
            "6:9-racks": 1,
            "Utilization percentage": 9.375
        }
    ],
    "status": 200,
    "op": "fabric_list_get_all",
    "status-detail": "success"
}

getCabinets:
Usage: ./ecracli kvmroce getCabinets fabric_name=<name> 

Purpose:
     List all the cabinets in a given fabric.

Arguments:
    fabric_name : Fabric_name for which cabinets info needs to be found.
    
Examples:
ecra> kvmroce getCabinets fabric_name=SEA200041QFAB
* {
    "Cabinet-details": [
        {
            "Cabinet-ID": 1,
            "Cabinet-Name": "SEA201109",
            "Model": "X8M-2 Elastic",
            "Cabinet-Type": "6:9",
            "Clusters": [
                "sea201109exd-d0-01-02-cl-01-03-clu01",
                "sea201109exd-d0-03-04-cl-04-06-clu01",
                "sea201109exd-d0-05-06-cl-07-09-clu01"
            ],
            "Available-Count": 2,
            "Used-Count": 1,
            "Other-Count": 0,
            "Utilization-percentage": 33.333333333333336,
            "Free-percentage": 66.66666666666667,
            "Other-percentage": 0
        },
        {
            "Cabinet-ID": 3,
            "Cabinet-Name": "SEA203706",
            "Model": "X8M15-2 Elastic",
            "Cabinet-Type": "STORAGE-ONLY",
            "Clusters": [],
            "Available-Count": 0,
            "Used-Count": 0,
            "Other-Count": 15,
            "Utilization-percentage": 0,
            "Free-percentage": 0,
            "Other-percentage": 100
        },
        {
            "Cabinet-ID": 4,
            "Cabinet-Name": "SEA203709",
            "Model": "X8M-2 Elastic",
            "Cabinet-Type": "COMPUTE-ONLY",
            "Clusters": [],
            "Available-Count": 0,
            "Used-Count": 0,
            "Other-Count": 18,
            "Utilization-percentage": 0,
            "Free-percentage": 0,
            "Other-percentage": 100
        }
    ],
    "status": 200,
    "op": "fabric_cabinet_list_get",
    "status-detail": "success"
}

getCabinetNodes:
Usage: ./ecracli kvmroce getCabinetNodes fabric_name=<name> cabinet_name=<cname>

Purpose:
     List all the nodes in a given cabinet.

Arguments:
    fabric_name : Fabric_name for which cabinets info needs to be found.
    cabinet_name : Name of the cabinet
    
Examples:
ecra> kvmroce getCabinetNodes fabric_name=SEA200041QFAB cabinet_name=SEA201109
* {
    "Node-details": [
        [
            {
                "Cluster-Name": "sea201109exd-d0-01-02-cl-01-03-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdd002",
                "Node-state": "ALLOCATED",
                "Node-type": "COMPUTE"
            },
            {
                "Cluster-Name": "sea201109exd-d0-01-02-cl-01-03-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdd001",
                "Node-state": "ALLOCATED",
                "Node-type": "COMPUTE"
            },
            {
                "Cluster-Name": "sea201109exd-d0-01-02-cl-01-03-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdcl03",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-01-02-cl-01-03-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdcl02",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-01-02-cl-01-03-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdcl01",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                "Cluster-Status": "PROVISIONED",
                "ExaunitID": 122,
                "Node-name": "sea201109exdd004",
                "Node-state": "ALLOCATED",
                "Node-type": "COMPUTE"
            },
            {
                "Cluster-Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                "Cluster-Status": "PROVISIONED",
                "ExaunitID": 122,
                "Node-name": "sea201109exdd003",
                "Node-state": "ALLOCATED",
                "Node-type": "COMPUTE"
            },
            {
                "Cluster-Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                "Cluster-Status": "PROVISIONED",
                "ExaunitID": 122,
                "Node-name": "sea201109exdcl06",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                "Cluster-Status": "PROVISIONED",
                "ExaunitID": 122,
                "Node-name": "sea201109exdcl05",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-03-04-cl-04-06-clu01",
                "Cluster-Status": "PROVISIONED",
                "ExaunitID": 122,
                "Node-name": "sea201109exdcl04",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-05-06-cl-07-09-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdd006",
                "Node-state": "ALLOCATED",
                "Node-type": "COMPUTE"
            },
            {
                "Cluster-Name": "sea201109exd-d0-05-06-cl-07-09-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdd005",
                "Node-state": "ALLOCATED",
                "Node-type": "COMPUTE"
            },
            {
                "Cluster-Name": "sea201109exd-d0-05-06-cl-07-09-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdcl09",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-05-06-cl-07-09-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdcl08",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            },
            {
                "Cluster-Name": "sea201109exd-d0-05-06-cl-07-09-clu01",
                "Cluster-Status": "READY",
                "ExaunitID": 0,
                "Node-name": "sea201109exdcl07",
                "Node-state": "ALLOCATED",
                "Node-type": "CELL"
            }
        ]
    ],
    "status": 200,
    "op": "cabinet_node_list_get",
    "status-detail": "success"
}

getAllCabinets:
Usage: ./ecracli kvmroce getAllCabinets

Purpose:
     List all the cabinets in the ECRA and provides high level details

Arguments:
    None
    
Examples:
ecra> kvmroce getAllCabinets
{
    "Cabinet-details": [
        {
            "Cabinet-ID": 1,
            "Cabinet-Name": "SEA201109",
            "Fabric-Name": "SEA200041QFAB",
            "Building-Name": "sea2",
            "Room-number": 10,
            "Block-number": 3,
            "Serial-number": "serial1",
            "Model": "X8M-2 Elastic",
            "Cabinet-Type": "6:9",
            "Clusters": [
                "sea201109exd-d0-01-02-cl-01-03-clu01",
                "sea201109exd-d0-03-04-cl-04-06-clu01",
                "sea201109exd-d0-05-06-cl-07-09-clu01"
            ],
            "Available-Count": 3,
            "Used-Count": 0,
            "Other-Count": 0,
            "Utilization-percentage": "0.00",
            "Free-percentage": "100.00",
            "Other-percentage": "0.00"
        },
        {
            "Cabinet-ID": 3,
            "Cabinet-Name": "SEA203709",
            "Fabric-Name": "SEA200041QFAB",
            "Room-number": 0,
            "Block-number": 0,
            "Model": "X8M-2 Elastic",
            "Cabinet-Type": "COMPUTE-ONLY",
            "Clusters": [],
            "Available-Count": 15,
            "Used-Count": 3,
            "Other-Count": 0,
            "Utilization-percentage": "16.67",
            "Free-percentage": "83.33",
            "Other-percentage": "0.00"
        }
    }
    "status": 200,
    "op": "fabric_cabinet_all_get",
    "status-detail": "success"
}

getAllNodes:
Usage: ./ecracli kvmroce getAllNodes

Purpose:
     List all the nodes in the ECRA and provides high level details

Arguments:
    None
    
Examples:
ecra> kvmroce getAllNodes
* {
    "Node-details": [
        {
            "Node-name": "sea203706exdcl15",
            "Node-state": "RESERVED",
            "Node-type": "CELL",
            "Image-version": "12.2.0.1.0_18032017",
            "Bonding": "N",
            "Clustertag": "ALL",
            "Cabinet-ID": 4,
            "Cabinet-Name": "SEA203706",
            "Fabric-Name": "SEA200041QFAB"
        },
        {
            "Node-name": "sea203706exdcl14",
            "Node-state": "RESERVED",
            "Node-type": "CELL",
            "Image-version": "12.2.0.1.0_18032017",
            "Bonding": "N",
            "Clustertag": "ALL",
            "Cabinet-ID": 4,
            "Cabinet-Name": "SEA203706",
            "Fabric-Name": "SEA200041QFAB"
        },
        {
            "Node-name": "sea203706exdcl13",
            "Node-state": "RESERVED",
            "Node-type": "CELL",
            "Image-version": "12.2.0.1.0_18032017",
            "Bonding": "N",
            "Clustertag": "ALL",
            "Cabinet-ID": 4,
            "Cabinet-Name": "SEA203706",
            "Fabric-Name": "SEA200041QFAB"
        }
    }
    "status": 200,
    "op": "cabinet_node_all_get",
    "status-detail": "success"
}

runsanitycheck
Usage: kvmroce runsanitycheck json_path=<payload path> | operationtype=<check type> rackname=<rackname> exadataInfrastructureId=<infra ocid> [elasticnodes=<commma separated hostnames>]

Purpose:
    Runs sanity check for X8M

Arguments:
    json_path: File containing nodes/rack information.
    operationtype: ADD_COMPUTE|ADD_CELL|CEI_PRECHECK|INVENTORY_RESERVE|CEI_RESERVE
    rackname: Rack name
    exadataInfrastructureId: Exadata Infrastrucutre OCID
    elasticnodes: List of elastic nodes separated by comma.
    serverscount: Number of servers to delete for delete cell operationtype

Example:
ecra> kvmroce runsanitycheck json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/tmpl/sanity_check.json
* Idemtoken used is: 2b498fdb-a02c-45e7-88d8-3a335372e763

ecra> kvmroce runsanitycheck exadataInfrastructureId=ocid1.cloudexadatainfrastructure.mvm.check_el.005 operationtype=ADD_COMPUTE rackname=iad1-d5-cl3-68f9850c-041e-4d59-b0d2-4d32de2764b6-clu02 elasticnodes=iad103709exdd007

* {"status": 202, "status_uri": "http://slc17ukd.us.oracle.com:9030/ecra/endpoint/statuses/4c5ef4ba-a08f-4c67-bc75-db65bbd1253c", 
"op": "sanity_check_post", "op_start_time": "2021-02-28T02:35:54+0000", "est_op_end_time": "", "message": "processing", 
"status-detail": "processing"}

ecra> kvmroce runsanitycheck exadataInfrastructureId=testinfra operationtype=DELETE_CELL rackname=iad1-d2-cl3-56c4816e-ddc5-4ce4-871d-b3c57ee8e92c-clu01 serverscount=3
* Idemtoken used is: de7b363d-9b13-4fec-89fb-8660730804f4
* {"status": 202, "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/9bb9f395-51fa-4f4d-929a-5160d806cc9d", "op": "sanity_check_post", "op_start_time": "2023-11-10T20:47:13+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 608}

ecra> status 9bb9f395-51fa-4f4d-929a-5160d806cc9d
* {"start_time": "2023-11-10T20:47:12+0000", "progress_percent": 0, "exaunit_id": 608, "end_time": "2023-11-10T20:48:10+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-11-10T20:47:12+0000", "wf_uuid": "c94b19c2-e78f-4635-bc58-f8d16c165060", "status": 200, "message": "Done", "op": "SANITY_CHECK", "resources": ["sea201507exdcl02.sea2xx2xx0051qf.adminsea2.oraclevcn.com", "sea201507exdcl03.sea2xx2xx0051qf.adminsea2.oraclevcn.com", "sea201507exdcl01.sea2xx2xx0051qf.adminsea2.oraclevcn.com"], "completion_percentage": 0, "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/9bb9f395-51fa-4f4d-929a-5160d806cc9d", "status-detail": "success"}

ecra> kvmroce runsanitycheck operationtype=DELETE_CELL  rackname=sea2-d4-cl3-1de3f06c-dfa7-4860-984b-15b5b84205c2-clu01 exadataInfrastructureId=flowtesterInfra serverscount=1
* Idemtoken used is: 305a2197-5996-4cea-bb37-3ab166b6f41e
* {"status": 202, "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/55895d26-16a9-494a-9f74-cff4961d8717", "op": "sanity_check", "op_start_time": "2024-08-05T19:45:22+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 2114}

ecra> status 55895d26-16a9-494a-9f74-cff4961d8717
* {"progress_percent": 0, "exaunit_id": 2114, "start_time_ts": "2024-08-05 19:45:22.0", "end_time": "2024-08-05T19:45:29+0000", "ecra_server": "EcraServer1", "wf_uuid": "3395aa02-db3b-480b-ba54-d2134d699fc3", "start_time": "2024-08-05T19:45:22+0000", "last_heartbeat_update": "2024-08-05T19:45:22+0000", "status": 200, "message": "Done", "op": "SANITY_CHECK", "resources": [{"type": "cell", "name": "sea201507exdcl01.sea2xx2xx0051qf.adminsea2.oraclevcn.com", "success": true}], "completion_percentage": 0, "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/55895d26-16a9-494a-9f74-cff4961d8717", "status-detail": "success"}


getsanityresults
Usage: kvmroce getsanityresults idemtoken=<token>

Purpose:
    Gets the result for sanity check run.

Arguments:
    Idemtoken: Idemtoken used to run sanity check.

Example:
ecra> kvmroce getsanityresults idemtoken=2b498fdb-a02c-45e7-88d8-3a335372e763
* {"quarter-rack-faulty-servers": [{"domainname": "sea201109exd.adminsea2.oraclevcn.com", "hostname": "sea201109exdd002", 
"hw_type": "COMPUTE", "preprov": true, "error_list": [{"error code 1": "Error msg1"}, {"error code 2": "Error msg2"}]}], 
"elastic-faulty-servers": [{"domainname": "iad103709exd.adminiad1.oraclevcn.com", "hostname": "sea203709exdd018", "hw_type": 
"COMPUTE", "preprov": false, "error_list": [{"error code 1": "Error msg1"}, {"error code 2": "Error msg2"}]}], "status": 200, "op": 
"sanity_check_get", "status-detail": "success"}

listfaultdomains:
Usage: ./ecracli kvmroce listfaultdomains

Purpose:
    Gets all fault domains and fabrics within them

Arguments:
    None

Examples: 
ecra> kvmroce listfaultdomains
* {
    "Fault-Domains": [
        "IADFD1", "SEAFD2"
    ],
    "op": "fault_domain_all_get",
    "status": 200,
    "status-detail": "success"
}

updatefaultdomain:
Usage: ./ecracli kvmroce updatefaultdomain

Purpose:
    Updates fault domain of given fabric

Arguments:
    fabric_name: Fabric name
    fault_domain: New fault domain to change for fabric

Examples: 
ecra> kvmroce updatefaultdomain fabricname=IAD1FABRIC1 faultdomain=2
* {
    "op": "update_fabric_fault_domain_put",
    "status": 200,
    "status-detail": "success"
}

get_elastic_reservation_threshold:
Usage: kvmroce get_elastic_reservation_threshold fabric_name=<name>

Purpose:
    Get QFAB utilization threshold above which the fabric will be reserved exclusively for elastic expansion

Arguments:
    fabric_name: Fabric name

Examples:
        ecra> kvmroce get_elastic_reservation_threshold fabric_name=IAD1FABRIC1
        * {
            "X8M-CELL-QFAB-Reservation-Threshold": 90,
            "X8M-COMPUTE-QFAB-Reservation-Threshold": 90,
            "X9M-CELL-QFAB-Reservation-Threshold": -1,
            "X9M-COMPUTE-QFAB-Reservation-Threshold": 90,
            "fabricName": "IAD1FABRIC1",
            "op": "fabricElasticReservationThreshold_GET",
            "status": 200,
            "status-detail": "success"
        }

set_elastic_reservation_threshold_abs:
Usage: kvmroce set_elastic_reservation_threshold_abs fabric_name=<name> model=<X8M|X9M|X11M> type=<COMPUTE|CELL> model_subtype=<subtype> threshold_abs=<utilization percentage threshold>

Purpose:
    Set QFAB utilization threshold Absolute value for which the fabric will be reserved exclusively for elastic expansion

Arguments:
    fabric_name: Fabric name
    type: COMPUTE or CELL
    model: X8M or X9M or X11M

Examples:
        ecra> kvmroce set_elastic_reservation_threshold_abs fabric_name=IAD1FABRIC1 type=CELL model=X8M model_subtype=STANDARD threshold_abs=5
        * {
            "op": "fabricElasticReservationThreshold_PUT",
            "response": "SUCCESS",
            "status": 200,
            "status-detail": "success"
        }

set_elastic_reservation_threshold:
Usage: kvmroce set_elastic_reservation_threshold fabric_name=<name> model=<X8M|X9M|X11M> type=<COMPUTE|CELL> model_subtype=<subtype> threshold=<utilization percentage threshold absolute>

Purpose:
    Set QFAB utilization threshold abosolute value for which the fabric will be reserved exclusively for elastic expansion

Arguments:
    fabric_name: Fabric name
    type: COMPUTE or CELL
    model: X8M or X9M or X11M
Examples:
        ecra> kvmroce set_elastic_reservation_threshold fabric_name=IAD1FABRIC1 type=CELL model=X8M model_subtype=STANDARD threshold=91
        * {
            "op": "fabricElasticReservationThreshold_PUT",
            "response": "SUCCESS",
            "status": 200,
            "status-detail": "success"
        }

get_elastic_reservation_setting:
Usage: kvmroce get_elastic_reservation_setting fabric_name=<name>

Purpose:
    Get qfab elastic reservation setting (enabled/disabled). Prints separate settings for each model(X8M/X9M).

Arguments:
    fabric_name: Fabric name

Examples:
        ecra> kvmroce get_elastic_reservation_setting fabric_name=IAD1FABRIC1
        * {
            "QFAB Elastic Reservation Setting for X8M": "Disabled",
            "QFAB Elastic Reservation Setting for X9M": "Disabled",
            "fabricName": "IAD1FABRIC1",
            "op": "fabricElasticReservationSetting_GET",
            "status": 200,
            "status-detail": "success"
        }

enable_utilization_based_elastic_reservation:
Usage: kvmroce enable_utilization_based_elastic_reservation fabric_name=<name>  model=<X8M|X9M|X11M>

Purpose:
    Enable qfab elastic reservation for high utilization fabric based on utilization threshold. The threshold is specified in ECS_PROPERTIES table for AD level control and can be overridden by ECS_ROCEFABRIC_TABLE setting for each QFAB.

Arguments:
    fabric_name: Fabric name
    model: model can be X8M or X9M or X11M
    
Examples:
        ecra> kvmroce enable_utilization_based_elastic_reservation fabric_name=IAD1FABRIC1  model=X9M
        * {
            "op": "fabricElasticReservationSetting_PUT",
            "response": "SUCCESS",
            "status": 200,
            "status-detail": "success"
        }

disable_utilization_based_elastic_reservation:
Usage: kvmroce disable_utilization_based_elastic_reservation fabric_name=<name>  model=<X8M|X9M|X11M>

Purpose:
    Disable qfab elastic reservation for high utilization fabric based on utilization threshold. The threshol
d is specified in ECS_PROPERTIES table for AD level control and can be overridden by ECS_ROCEFABRIC_TABLE se
tting for each QFAB.

Arguments:
    fabric_name: Fabric name
    model: model can be X8M or X9M or X11M
    
Examples:
        ecra> kvmroce disable_utilization_based_elastic_reservation fabric_name=IAD1FABRIC1  model=X9M
        * {
            "op": "fabricElasticReservationSetting_PUT",
            "response": "SUCCESS",
            "status": 200,
            "status-detail": "success"
        }
    
Service
create
Usage: service create <rack_name> env=<gen1|gen2|nosdi> [gen2PayloadPath=<path to gen2 payload>] [subtype=<rack size>] [isRackReserved=<true|false>] [infra=<ocimvm>]

Purpose:
  Creates a single-vm service.

Arguments:
  rack_name        : The rackname such as slcqab02adm0506clu5 
  env              : The env value, gen1, gen2, nosdi.
  gen2PayloadPath  : The path to the gen2 payload file.
  subtype          : Provide this value to provision a OCI base system service. The only supported value is base.
  isRackReserved   : Optional flag which allow that  cracli can explicitly take an already reserved rack, without 
                     breaking normal functionality, only useful on gen2 service Op.
  infra            : Infra will be 'ocimvm' for OCIExacc MVM service 

Examples:

ecra> service create  slcqab02adm0506clu6 env=gen2 gen2PayloadPath=tmpl/gen2_payload.json subtype=base
http://slc11cac.us.oracle.com:9001/ecra/endpoint/statuses/dcd6e20d-3316-4739-abef-082c7f7c0408
ecra>

ecra> create_service slcqab02adm0506clu6 env=gen2 gen2PayloadPath=/scratch/jvaldovi/ecra_installs/env1/ecracli/tmpl/gen2_payload.json isRackReserved=true infra=ocimvm



Capacity
move
Usage:  capacity move <racksize=size> <destinationPool=exacs/atp> [model=<model>] [numberOfRacks=<count>][rackname=name] [clustertag=tagname] 

Purpose:
  Move the capacity between exacs and atp pools.

Arguments:
  racksize        : The size of the rack
  destinationPool : exacs/atp
  model           : exadata model such as X7-2/X8-2. Default is X7-2
  numberOfRacks   : Number of racks to move. Implemented in v2.
  rackname        : Rackname if the operation needs to be performed on a
  specific rack
  clustertag      : Clustertag if needed, defaults to ALL

Examples:
) ecra> capacity move racksize=quarter destinationPool=atp
* Move capacity with parameters:
* numberOfRacks : 1
* model : X7-2
* destinationPool : atp
* racksize : quarter
* {"status": 202, "est_op_end_time": "", "status-detail": "processing",
* "status_uri":
* "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9047/ecra/endpoint/statuses/6d870917-91e5-4287-b9d2-a6ef143f54ac",
* "op_start_time": "2019-04-04T17:01:51+0000", "message": "processing", "op":
* "capacity_move"}
ecra> status 6d870917-91e5-4287-b9d2-a6ef143f54ac
* GET
* http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9047/ecra/endpoint/statuses/6d870917-91e5-4287-b9d2-a6ef143f54ac
* {"status": 200, "status-detail": "success", "start_time":
* "2019-04-04T17:01:51+00", "status_uri":
* "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9047/ecra/endpoint/statuses/6d870917-91e5-4287-b9d2-a6ef143f54ac",
* "end_time": "2019-04-04T17:01:56+", "message": "Done", "op":
* "capacity-move"}

ra> capacity move racksize=quarter destinationPool=exacs
* Move capacity with parameters:
* numberOfRacks : 1
* model : X7-2
* destinationPool : exacs
* racksize : quarter
* {"status": 202, "est_op_end_time": "", "status-detail": "processing",
* "status_uri":
* "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9047/ecra/endpoint/statuses/c64b29bc-6929-45a4-988a-c83dbd75a3a7",
* "op_start_time": "2019-04-04T17:07:31+0000", "message": "processing", "op":
* "capacity_move"}
ecra> status c64b29bc-6929-45a4-988a-c83dbd75a3a7
* GET
* http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9047/ecra/endpoint/statuses/c64b29bc-6929-45a4-988a-c83dbd75a3a7
* {"status": 200, "status-detail": "success", "start_time":
* "2019-04-04T17:07:31+00", "status_uri":
* "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9047/ecra/endpoint/statuses/c64b29bc-6929-45a4-988a-c83dbd75a3a7",
* "end_time": "2019-04-04T17:07:36+", "message": "Done", "op":
* "capacity-move"}

ecra> capacity move racksize=quarter destinationPool=atp rackname=slcqab02adm0506clu6
* Move capacity with parameters:
* rackname : slcqab02adm0506clu6
* numberOfRacks : 1
* model : X7-2
* destinationPool : atp
* racksize : quarter
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/2cd86e02-39fe-4c70-a9ee-3b3688e6f5dd", "op_start_time": "2019-09-20T15:23:15-0700", "message": "processing", "op": "capacity_move"}
ecra> 
ecra> 
ecra> status 2cd86e02-39fe-4c70-a9ee-3b3688e6f5dd
* {"status": 200, "status-detail": "success", "start_time": "2019-09-20T15:23:15-07", "status_uri": "http://den01gpy.us.oracle.com:9001/ecra/endpoint/statuses/2cd86e02-39fe-4c70-a9ee-3b3688e6f5dd", "end_time": "2019-09-20T15:23:40-", "message": "Done", "op": "capacity-move"}

ecra> capacity move racksize=quarter destinationPool=exacs rackname=sea201207exd-d0-05-06-cl-07-09-clu01
* Move capacity with parameters:
* rackname : sea201207exd-d0-05-06-cl-07-09-clu01
* numberOfRacks : 1
* model : X7-2
* destinationPool : exacs
* racksize : quarter
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9054/ecra/endpoint/statuses/be529504-b07e-4e7c-ba65-b72654cc3902", "op_start_time": "2019-09-24T03:13:35+0000", "message": "processing", "op": "capacity_move"}
 
 
ecra> status be529504-b07e-4e7c-ba65-b72654cc3902
* {"status": 200, "status-detail": "success", "start_time": "2019-09-24T03:13:35+00", "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9054/ecra/endpoint/statuses/be529504-b07e-4e7c-ba65-b72654cc3902", "end_time": "2019-09-24T03:34:57+", "message": "Done", "op": "capacity-move"}

ecra> rack get name=sea201207exd-d0-05-06-cl-07-09-clu01
* {"status": 200, "status-detail": "success", "racks": [{"status": "READY", "clustertag": "ALL", "name": "sea201207exd-d0-05-06-cl-07-09-clu01", "racksize": "quarter", "auto_maintenance": "Y", "opstate": "ONLINE", "disabled": 0, "cabinet_id": 1, "exa_ocid": "EXISTING.PUBLIC.CLOUD.EXADATA", "cluster_status": "ACTIVE", "atp": "N", "dom0": "sea201207exdd005sea201207exdd006", "model": "X7-2", "previous_status": "PRE_PROVISIONED_ORCL_ATP_DB", "domu": "sea201207_cluster_name_3_pk", "cnsenabled": 1}], "op": "racks_get"}

ecra> capacity move racksize=quarter destinationPool=atp model=X8M-2 clustertag=ZDLRA
* Move capacity with parameters:
* racksize : quarter
* destinationPool : atp
* model : X8M-2
* clustertag : ZDLRA
* numberOfRacks : 1
* {"status": 202, "status_uri": "http://atpecra.ecramgmt.adminsea2.oraclevcn.com:9079/ecra/endpoint/
statuses/2345aff7-afca-48eb-8fa8-3cf0a7336016", "op": "capacity_move", "op_start_time": "2021-04-21T21:51:50+0000", 
"est_op_end_time": "", "message": "processing", "status-detail": "processing"}
ecra> 

Exaservice sync rack slots for elastic
Usage: ./ecracli exaservice syncrackslots exadata_id=<exadata_id>

Purpose:
     Sync rack_slots missing in racks table with current elastic inventory

Arguments:
    exadata_id: Exadata id

Examples:
ecra> exaservice syncrackslots exadata_id=123
* {"status": 200, "status-detail": "Racklots sync was successfull", "message": "Racklots sync was successfull", "op": "syncrackslots_exaservice"}

Use ECRACLI with 3 sup operations examples

In order to use commands with  3 sub operation Ecracli.py script should contains below data

sub_ops JSON should have 3rd subcommand in like in below example:
...
{
	?
	"vm":{
	            "start"  :"start_vm",
	            "stop"   :"stop_vm",
	            "restart":"restart_vm",
	            "testSubOp":{
	                "test3rdOp":"Method",
	                 "test3rdOp2":"Method2"
	            }
	         },

	?
}
...
and in the same way have a method for each 3rd sub commands within the Ecracli
class , in order to be able to execute it

i.e.
def do_<3rdCOMMAND> (self, line):
        #Do Something
        
In the ./ecracli/tmpl/help.json file, information should be added to in below way
...
"vm":{
        "start":"<exaunit_id> <vm_name> [env=gen1|gen2]\nStart the given vm on the given exaunit.",
        "stop":"<exaunit_id> <vm_name> [env=gqn1|gen2]\nStop the given vm on the given exaunit.",
        "restart":"<exaunit_id> <vm_name> [env=gen1|gen2]\nRestart the given vm on the given exaunit.",
        "testSubOp" : {
            "test3rdOp" : "<Command help>",
            "test3rdOp2" : "<Command help>"
        }
    },
...

And in the same way on ./ecracli/tmpl/parameters.json file add the optional and mandatory parameters

...
"vm" : {
    "testSubOp": {
        "test3rdOp": {
	    "mandatory": [<Mandatory parameters>],
	    "optional": [<Optional parameters>]
        },
        "test3rdOp2": {
	    "mandatory": [<Mandatory parameters>],
	    "optional": [<Optional parameters>]
        }
     }
  },
...

when validating parameters is called, parameter subop should be a list containing sub operations from 2nd and 3rd level

Example with dummy functions which prints parameters given

ecra> vm testSubOp test3rdOp parameter=test1 parameter2=test2
Parameters given: parameter=test1 parameter2=test2


OCI ExaCC

Create
Usage: 
    ecra> exacc createNetwork idemtoken=<idemtoken> json_path=<file path>

Purpose: 
    Create a new network

Arguments:
    idemtoken: An idemtoken is a must
    json_path: Path to the file containing the json input payload

Examples:
ecra> exacc createNetwork idemtoken=ede396ec-ddb6-4c15-a9c4-02a88b11dfb1 json_path=/scratch/llmartin/ecra_installs/ecra070119/ecracli/network_test.json
* {"status": 200, "status-detail": "success", "op": "network-post"}


List
Usage: 
    ecra> exacc listNetworks exa_ocid=<exadata ocid> [status=<status>]

Purpose:
     List all the networks of the specified exadata ocid, if the status parameter is provided the list if filtered by the status.

Arguments:
    exa_ocid:  the Exadata ocid
    status  :  If provided, the list is filtered by the provided status.

Examples:
ecra> exacc listNetworks  exa_ocid=client1
* {
    "status": 200,
    "status-detail": "success",
    "networks": [
        {
            "status": "VALIDATED",
            "network_name": "Net",
            "exa_ocid": "exa_ocid1",
            "network_ocid": "network_ocid1"
        },
        {
            "status": "PREVALIDATION",
            "network_name": "Net2",
            "exa_ocid": "exa_ocid1",
            "network_ocid": "network_ocid2"
        }
    ],
    "op": "network-get"
}


Update
Usage:  
    ecra> exacc updateNetwork idemtoken=<idemtoken> json_path=<file path>

Purpose:
    Update the network specified on the payload.

Arguments:
    idemtoken: An idemtoken is a must
    json_path: Path to the file containing the json input payload

Examples:
ecra> exacc updateNetwork idemtoken=331b53cf-971c-40aa-8721-dfa5fc1ba3a6 json_path=/scratch/llmartin/ecra_installs/ecra070119/ecracli/network_test.json
* {"status": 200, "status-detail": "success", "op": "network-put"}


Get
Usage: 
    ecra> exacc getNetwork network_ocid=<networkocid>

Purpose:
     Get all the information about the specified network

Arguments:
    network_ocid:  the network ocid

Examples:
ecra> exacc getNetwork  network_ocid=network0001
* {
    "status": 200,
    "status-detail": "success",
    "network": {
        "status": "PREVALIDATION",
        "network_ocid": "network0001",
        "backup": {
            "domain": "my.3.backup.domain",
            "netmask": "255.255.255.0",
            "prefix": "B1",
            "vlan_id": 2,
            "ip": [
                {
                    "ip": "1.1.2.1",
                    "node_id": 24,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server client access interface"
                },
                {
                    "ip": "1.1.2.2",
                    "node_id": 24,
                    "hostname": "host002",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server client access interface"
                },
                {
                    "ip": "1.1.2.3",
                    "node_id": 24,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server VIP"
                },
                {
                    "ip": "1.1.2.4",
                    "node_id": 24,
                    "hostname": "host002",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server VIP"
                },
                {
                    "ip": "1.1.2.5",
                    "node_id": 24,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "SCAN Address"
                },
                {
                    "ip": "1.1.2.6",
                    "node_id": 24,
                    "hostname": "host002",
                    "fqdn": "host001.domain.com",
                    "ip_type": "SCAN Address"
                },
                {
                    "ip": "1.1.2.7",
                    "node_id": 24,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "SCAN Address"
                }
            ]
        },
        "exa_ocid": "client1",
        "client": {
            "domain": "my.3.domain",
            "netmask": "255.255.255.0",
            "prefix": "prefixUpdateTest",
            "vlan_id": 1,
            "ip": [
                {
                    "ip": "1.1.1.1",
                    "node_id": 23,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server client access interface"
                },
                {
                    "ip": "1.1.1.2",
                    "node_id": 23,
                    "hostname": "host002",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server client access interface"
                },
                {
                    "ip": "1.1.1.3",
                    "node_id": 23,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server VIP"
                },
                {
                    "ip": "1.1.1.4",
                    "node_id": 23,
                    "hostname": "host002",
                    "fqdn": "host001.domain.com",
                    "ip_type": "Database server VIP"
                },
                {
                    "ip": "1.1.1.5",
                    "node_id": 23,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "SCAN Address"
                },
                {
                    "ip": "1.1.1.6",
                    "node_id": 23,
                    "hostname": "host002",
                    "fqdn": "host001.domain.com",
                    "ip_type": "SCAN Address"
                },
                {
                    "ip": "1.1.1.7",
                    "node_id": 23,
                    "hostname": "host001",
                    "fqdn": "host001.domain.com",
                    "ip_type": "SCAN Address"
                }
            ]
        },
        "network_name": "cli network"
    },
    "op": "network-get"
}


Delete
Usage: 
    ecra> exacc deleteNetwork network_ocid=<network ocid>

Purpose:
     Delte the specified network

Arguments:
      network_ocid:  the network ocid

Examples:
ecra> exacc deleteNetwork network_ocid=network3
* {
    "status": 200,
    "status-detail": "success",
    "op": "network-delete"
}

Validate
Usage: 
    ecra> exacc validateNetwork network_ocid=<network ocid>

Purpose:
     Execute the network validation process.

Arguments:
      idemtoken: An idemtoken is a must
      network_ocid:  the network ocid
  
Examples:
ecra> exacc validateNetwork idemtoken=e52897a3-37fe-4b19-86c6-a419a8d6281f network_ocid=clitest
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://slc11cac.us.oracle.com:9001/ecra/endpoint/statuses/38e68342-2708-4388-8901-40213892cfb0", "op_start_time": "2019-04-15T11:42:47-0700", "message": "processing", "op": "network-validate"}

certificateRotation
Usage:
    ecra>exacc certificateRotation rotationType=<[CLIENT, VPN]>

Purpose:
    Execute the certificateRotation depending on the rotationType. 

Arguments:
    rotationType= Specify the type of certificate to rotate
    exaOcid: OCID of the specific Exadata. Required in case of rotationType=CLIENT

Examples:
    ecra> exacc certificateRotation rotationType=CLIENT exaOcid=ocid1.exadatainfrastructure.oc1.sea.abzwkljrz2maizd6s73dws4ifrjdcrwvox3aszxnproh6z5nmcniahe423za
* POST http://ecra-vm9.ecra.ociexacc.oraclevcn.com:9001/ecra/endpoint/certificate/rotation
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://ecra-vm9.ecra.ociexacc.oraclevcn.com:9001/ecra/endpoint/statuses/e280bb81-3e2d-43cc-9665-6bebb3e17430", "op_start_time": "2020-01-21T18:50:17+0000", "message": "processing", "op": "notset"}

secretServiceCompartment
Usage:
    ecra>exacc secretServiceCompartment

Purpose:
    Get the secret service compartment ID and the vault ID for the DBCS Agent clients. It depends on the credentials of the user used in the ecracli log in.

Arguments:
    NONE

Examples:
    ecra> exacc secretServiceCompartment
* {
    "status": 200, 
    "status-detail": "success", 
    "compartmentId": "ocid1.compartment.oc1..aaaaaaaan5trxobh7aduhdznr4leq5cp6nigkolhbwwybbspo5d6llpaulba", 
    "vaultId": "ocid1.vault.oc1.iad.bbph2zjoaaeuk.abuwcljt7qpwmnkpk2grehy3x3jexpuhhdlttyri5xjbnjmyhj43drh7ktfa", 
    "op": "notset"
}
secretServiceRotation
Usage:
    ecra>exacc secretServiceRotation rotationType=<rotationType> exaOcid=<exaOcid>

Purpose:
    Generate a new password, update the secret service and rotate the password in the respecting agent such us DBCS agent, CPS Agent or  WSS Admin.

Arguments:
    exaOcid: OCID of the specific Exadata.
    username: Username of the DBCS agent client.

Examples:
ecra> exacc secretServiceRotacion rotationType=DBCS exaOcid=ocid-scaqae08adm0304clu5
* POST http://ecra-vm10.ecra.ociexacc.oraclevcn.com:9071/ecra/endpoint/secretservice/rotate/password
* {"status": 202, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://ecra-vm10.ecra.ociexacc.oraclevcn.com:9071/ecra/endpoint/statuses/6d3a1d7e-4a41-41f2-856a-3d4fb913cad0", "op_start_time": "2020-04-02T17:34:15+0000", "message": "processing", "op": "notset"}

----------------------
Delete-service gen2
Usage:
    ecra>delete_service <exaunitid> env=<gen2> infra=<ocimvm> exaOcid=<exaOcid>

Purpose:
    delete service for the given exaunitid

Arguments:
    exaunitid: Exaunit id of the cluster
    env: gen2
    infra: ocimvm
    exaOcid: OCID of the specific Exadata.
    
Examples:
ecra> delete_service 6 env=gen2 infra=ocimvm exaOcid=ocid1.exa.mvm.infrastructure.oc1.sea.dummy

{
"op": "delete-pod",
"status": 200,
"status-detail": "success",
"status_uri": "http://den02teo.us.oracle.com:9079/ecra/endpoint/statuses/71606012-7691-48b0-aa04-03a816b90c4d"
}
ecra> status 71606012-7691-48b0-aa04-03a816b90c4d
{"atp_enabled": "N", "status": 202, "remote_user": "ops", "exaunit_id": 6, "target_uri": "http://den02teo.us.oracle.com:9079/ecra/endpoint/exaunit/6", "est_op_end_time": "", "wf_uuid": "4bd92562-9262-4cc2-b1d2-4680152cc0d3", "start_time": "2020-08-12T09:28:38+0000", "status_uri": "http://den02teo.us.oracle.com:9079/ecra/endpoint/statuses/71606012-7691-48b0-aa04-03a816b90c4d", "exa_ocid": "ocid1.exa.mvm.infrastructure.oc1.sea.dummy", "op_start_time": "2020-08-12T09:28:52+0000", "progress": 1, "message": "Pending", "ecra_server": "EcraServer1", "last_heartbeat_update": "2020-08-12T09:28:38+0000", "op": "delete-pod"}
ecra>
-----------------------

OCI Pre-activation APIs
-----------------------
ocitenants:
list:
Usage: ./ecracli ocitenants list 

Purpose:
     Provide list of tenants registered with ECRA and basic information for each of them

Arguments:
     NONE
    
Examples:
ecra> ocitenants list
* Getting list of tenants registered with this ECRA
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/tenants
* {
    "message": "Operation to get tenants list is successful", 
    "op": "tenant_list", 
    "status": 200, 
    "status-detail": "success", 
    "tenants": [
        {
            "tenant_ocid": "NEW-OCI-TENANT-001"
        }
    ]
}

capacity:
Usage: ./ecracli ocitenants capacity tenantOcid=<tenantOcid> 

Purpose:
     Provide list of exadata for a given Tenant identified by <tenantOcid>

Arguments:
     tenantOcid: OCID of the specific Tenant
    
Examples:
ecra> ocitenants capacity tenantOcid=NEW-OCI-TENANT-001
* Get OCI tenant Exadata capacity with parameters:
* tenantOcid : NEW-OCI-TENANT-001
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata?tenantOcid=NEW-OCI-TENANT-001
* {
    "capacity": [
        {
            "exa_name": "T001EXA001", 
            "exa_ocid": "NEW-OCI-TENANT-001-EXADATA-001", 
            "model": "X7-2", 
            "racksize": "quarter", 
            "status": "PRE_ACTIVATION"
        }, 
        {
            "exa_name": "T001EXA002", 
            "exa_ocid": "NEW-OCI-TENANT-001-EXADATA-002", 
            "model": "X7-2", 
            "racksize": "quarter", 
            "status": "PRE_ACTIVATION"
        }, 
        {
            "exa_name": "T001EXA003", 
            "exa_ocid": "NEW-OCI-TENANT-001-EXADATA-003", 
            "model": "X7-2", 
            "racksize": "quarter", 
            "status": "PRE_ACTIVATION"
        }
    ], 
    "message": "Operation to get capacity list for the tenant is successful", 
    "op": "capacity_tenant_exalist", 
    "status": 200, 
    "status-detail": "success"
}


ocicapacity:
register:
Usage: ./ecracli ocicapacity register jsonconf=<PATH_TO_INPUT_JSON_FILE> idemtoken=<idemtoken>

Purpose:
     Register/Ingest a new Exadata in OCI

Arguments:
     jsonconf :   Absolute path of the file containing input JSON
     idemtoken:   Unique and distinct Idemtoken generated by "ecracli idemtoken new" command
     
     Sample JSON Content:
     {
	    "tenantOcid": "NEW-OCI-TENANT-001",
	    "exaOcid": "NEW-OCI-TENANT-001-EXADATA-001",
	    "exaName": "T001EXA001",
	    "racksize": "quarter",
	    "dns": ["8.8.8.8"],
	    "ntp": ["10.1.1.1"],
	    "timezone": "US-PT",
	    "multiVM": 0,
	    "model": "X7-2",
	    "env": "ociExaCC",
	    "adminNwCidr": "192.168.0.1/21",
	    "ibNwCidr": "160.0.0.1/21",
	    "controlPlaneServerAttribs": {
	        "ip1": "20.0.0.1",
	        "ip2": "20.0.0.2",
	        "gateway": "11.8.8.1",
	        "netmask": "255.255.255.0",
	        "proxy": "t001exa001-proxy.us.oracle.com",
	        "dhcp": "true"
	    }
	}

    
Examples:
ecra> ocicapacity register jsonconf=/scratch/pverma/ecra_installs/preactivation-sample.json idemtoken=bdea32d2-8612-4525-ab84-fa3acb6a34dc
* POST http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata
* Registering OCI Exadata capacity with details: {
    "adminNwCidr": "192.168.0.1/21", 
    "controlPlaneServerAttribs": {
        "dhcp": "true", 
        "gateway": "11.8.8.1", 
        "ip1": "20.0.0.1", 
        "ip2": "20.0.0.2", 
        "netmask": "255.255.255.0", 
        "proxy": "t003exa004-proxy.us.oracle.com"
    }, 
    "dns": [
        "8.8.8.8"
    ], 
    "env": "ociExaCC", 
    "exaName": "T003EXA004", 
    "exaOcid": "NEW-OCI-TENANT-003-EXADATA-004", 
    "ibNwCidr": "160.0.0.1/21", 
    "idemtoken": "e20da320-5475-4402-b674-cae92d5c44d8", 
    "model": "X7-2", 
    "multiVM": 0, 
    "ntp": [
        "10.1.1.1"
    ], 
    "racksize": "quarter", 
    "tenantName": "TE004", 
    "tenantOcid": "NEW-OCI-TENANT-004", 
    "timezone": "US-PT"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/3d3b2e9b-6760-4dad-891f-255083e06a2f

-bash-4.2$ curl -u sdi:<PWD> http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/3d3b2e9b-6760-4dad-891f-255083e06a2f
    "start_time": "2019-05-16T11:09:49-07",
    "end_time": "2019-05-16T11:10:00-",
    "status": 200,
    "message": "Done",
    "op": "NEWEXADATA",
    "status_uri": "http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/3d3b2e9b-6760-4dad-891f-255083e06a2f",
    "status-detail": "success"
}


details:
Usage: ./ecracli ocicapacity details exaOcid=<exaOcid>

Purpose:
     Basic details of OCI exadata identified by given <exaOcid>

Arguments:
     exaOcid :   OCID of the specific Exadata
     
Examples:
ecra> ocicapacity details exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* Get OCI Exadata details with parameters:
* exaOcid : NEW-OCI-TENANT-001-EXADATA-002
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002
* {
    "capacity": [
        {
            "exa_name": "T001EXA002", 
            "exa_ocid": "NEW-OCI-TENANT-001-EXADATA-002", 
            "model": "X7-2", 
            "racksize": "quarter", 
            "status": "PRE_ACTIVATION"
        }
    ], 
    "message": "Operation to get exadata details for the given exaOcid is successful", 
    "op": "capacity_tenant_exadata", 
    "status": 200, 
    "status-detail": "success"
}


udpate:
Usage: ./ecracli ocicapacity update exaOcid=<exaOcid> jsonconf=<PATH_TO_INPUT_JSON_FILE> idemtoken=<idemtoken>

Purpose:
     Update some modifiable details of OCI exadata identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     jsonconf :   Absolute path of the file containing input JSON
     idemtoken:   Unique and distinct Idemtoken generated by "ecracli idemtoken new" command
     
Examples:
ecra> ./ecracli update exaOcid=NEW-OCI-TENANT-001-EXADATA-002 jsonconf=/scratch/pverma/ecra_installs/update-sample.json idemtoken=6e70853f-444c-427f-8d89-8293dc5f7077
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-003-EXADATA-004
* Update Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004 details : {
    "adminNwCidr": "190.168.0.1/21", 
    "controlPlaneServerAttribs": {
        "dhcp": "true", 
        "gateway": "11.8.8.2", 
        "ip1": "20.2.0.1", 
        "ip2": "20.2.0.2", 
        "netmask": "255.255.254.0", 
        "proxy": "t001exa0031-proxy.us.oracle.com"
    }, 
    "dns": [
        "8.7.7.8"
    ], 
    "ibNwCidr": "168.0.0.1/21", 
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077", 
    "ntp": [
        "10.1.2.1"
    ]
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra> status 93263e68-d3a3-45f9-b47f-03be2bedfd70
* {"status": 200, "status-detail": "success", "start_time":
"2019-06-13T13:45:25-07", "status_uri":
"http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70",
"end_time": "2019-06-13T13:45:30-", "message": "Done", "op":
"capacity_tenant_modify"}

Add new cells payload sample:

{
  "cellServerCount": 5
}


delete:
Usage: ./ecracli ocicapacity delete exaOcid=<exaOcid>

Purpose:
     Delete OCI exadata in 'PRE-ACTIVATION' state identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     
Examples:
ecra> ocicapacity delete exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* DELETE http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002
* Delete OCI Exadata with parameters:
* exaOcid : NEW-OCI-TENANT-001-EXADATA-002
* Response data
* status : 200
* status-detail : success
* message : Capacity deleted successfully
* exaOcid : NEW-OCI-TENANT-001-EXADATA-002
* op : capacity_tenant_delete
ecra> 


reserve:
Usage: ./ecracli ocicapacity reserve exaOcid=<exaOcid> idemtoken=<idemtoken>

Purpose:
     Reserve OCI exadata in 'ACTIVATION' state identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     idemtoken:   Unique and distinct Idemtoken generated by "ecracli idemtoken new" command
     
Examples:
ecra> ocicapacity reserve exaOcid=NEW-OCI-TENANT-001-EXADATA-002 idemtoken=d11fd3e1-5d79-4262-b496-cdadcc33c218
* Reserve Exadata with OCID: NEW-OCI-TENANT-001-EXADATA-002
* Error: PUT request to http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/reserve failed
* HTTP Error 400: Bad Request
* {"status":400,"message":"Invalid rack status (PRE_ACTIVATION) for reserve operation. Should be ACTIVATION","status-detail":"Invalid rack status (PRE_ACTIVATION) for reserve operation. Should be ACTIVATION","op":"capacity_tenant_reserve"}


ecra> ocicapacity reserve exaOcid=NEW-OCI-TENANT-003-EXADATA-004 idemtoken=6409cff5-2fae-4f87-b1c4-a43fd4b72b33
* Reserve Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-003-EXADATA-004/reserve
* Response data
* status : 200
* status-detail : success
* message : Capacity reserved successfully
* exaOcid : NEW-OCI-TENANT-003-EXADATA-004
* op : capacity_tenant_reserve
ecra>


getconfigbundle:
Usage: ./ecracli ocicapacity getconfigbundle exaOcid=<exaOcid> saveloc=<PATH_TO_DOWNLOAD_BUNDLE>

Purpose:
     Get config bundle SHA-256 checksum for OCI exadata identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     saveloc  :   Absolute path with filename to save the latest config bundle
     
Examples:
ecra> ocicapacity getconfigbundle exaOcid=NEW-OCI-TENANT-003-EXADATA-004 saveloc=/tmp/NEW-OCI-TENANT-003-EXADATA-004.cfgbundle.zip
* Get OCI Exadata config bundle with parameters:
* saveloc : /tmp/NEW-OCI-TENANT-003-EXADATA-004.cfgbundle.zip
* exaOcid : NEW-OCI-TENANT-003-EXADATA-004
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-003-EXADATA-004/config-bundle
* Download Complete
ecra>


getcfgbundlecksum:
Usage: ./ecracli ocicapacity getcfgbundlecksum exaOcid=<exaOcid>

Purpose:
     Get config bundle SHA-256 checksum for OCI exadata identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     
Examples:
ecra> ocicapacity getcfgbundlecksum exaOcid=NEW-OCI-TENANT-001-EXADATA-003
* Get OCI Exadata SHA-256 checksum of the config bundle with parameters:
* exaOcid : NEW-OCI-TENANT-001-EXADATA-003
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-003/config-bundle-cksum
* Response data
* status : 200
* checksum : 27B7A1E295CCC63FCC768A215FF6A0B4D5CA11175277A8BFF9A51083C5B056DC
* message : Operation to get SHA-256 checksum of config bundle of the given exaOcid is successful
* status-detail : success
* op : capacity_cfgbundle_cksum


getprivkey:
Usage: ./ecracli ocicapacity getprivkey exaOcid=<exaOcid> saveloc=</tmp/test.key>

Purpose:
     Get OCI exadata SSH private key for Bastion->OCPS communication identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     saveloc  :   File path to store the keys

     
Examples:
ecra> ocicapacity getprivkey exaOcid=NEW-OCI-TENANT-001-EXADATA-003 saveloc=/tmp/test.key
* Get OCI Exadata SSH private key for Bastion->OCPS comm with parameters:
* exaOcid : NEW-OCI-TENANT-001-EXADATA-003
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-003/ocps-ssh-priv-key
* Response data
* status : 200
* status-detail : success
* controlServerPrivKey : TUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFDZElLc1o1TlA0NmQxSVl4QzNqZFRBUEJpalI1VUVZNHJyODR3RGlIa0JCZDAwejlKN2FmYXFBd2NEWGwwbXdMRmtTdzNvQmRCRjlXTVRhT21Mby82M3lTeFJvc2NpZ0NUN3Zxajh3RFJNVlhEM1lZSm1jN2hLODZnUzlPRUhWSE1MNEZzZ2tuMUgzQW1meEYyQmR0a2xhVVJxVW1Rd0FQR0lhUHo0b1VMNU9iQlIva1lxZ1NJczBHTlluRXo3ektWVHhDUDBRdnhHZUowT1Byc21kZWJudHRtbkdiVXo4ODlNZXUxUDZTQUVBbTdPdWdCMmg1L25OdEhMM2Y4bTNtZ0NYNllOYzZJelBzdEhQcFg2K3M1TW1JSTJoQ2lDWEpFWlVmdncrNGxTMW1wMFQ4SXJGMDZvTjkvTE1MQzZwMkxzSVIwV3U1SjV6Z2FTakorRDVCOFBBZ01CQUFFQ2dnRUFkcU15N1hNc1paWFd3WkFqRUNTanpaM1NrSDQ4MHJxQ0t4T1IxUjBYR0NHZ1d2N0xrdWw0Ri9mL05KanNScFZabXp0Y1BhTWVGYVJvOFQvV2p0djlPREZLS0QxNms5OGpqWHp3eFI0dW5yQW9nbkI2Yi9iUjRLM0dhc0hBb3JNdHhuclk4MmdIOWRqNjMwbjV2QVhMZ1FiUlpHSGZTYXQ4c3gxcVhDUU9tSE8xVVRvYUtWTmJ0WkR4bU9pYVB2TFJTdklIbGhkbFZPdTE5eHB2VjFna1FvNkhLbC9uQmZ0MnllUTliUVRTTklBbUt3M2hhbjFkTUFOeVplcXZRcnFGWUpzZGVPdFA0RVRkZUxGYUhMK1NDYWtxTWtMbXJZZi9GL00vV1UwblI3QnNZTVBDazF5ZTFDREVRd0J5bnJydkZVVTFnbzZxRDhYQmtXUFppd2tSRVFLQmdRRHhUUGJ6RVFiV29WU2puc3hhN1FnNUVCd3dVMVRBU2xKUllWb3RyTFRONW9KbVFTbDhlYUw5YkR5SUx5bHRWNThTTzl5ckdTeVdUU04rZGVXZWdkR1lFaDA3Wm5jc2hkV043N090ZzRMT21IakxjR3JxWlN0NkpSY3JjRnRXbytyQmdkT2FPczVzcnlsbkV4WXdEWWs0ajBFcVBkNFFpVkJndlRTdmFIY3d5UUtCZ1FDbXN3ckYrRFdmT0ttb1hQUEVHVU9UWnlwT01mZzNpMkg2UlhwTll6TlY3SldkbC8zWFlrbEROYmhWSi9CT2t6RCtnMnFSUVp4K2hWZU9maXIzMjlBSFFMc0g4bkFCYTdsK0FLanMram1yY1JSYjM1S0h4RTdCcExUSjAyZDlBYXE4eUFwNklSaDVMTG52UlY0R0hDMzJEQ0FaNEk2dVYxeUx4MllXZUJ4VkZ3S0JnUUNPTEVEY21rMmpMRTlJVUlvcmtMbGxsYjVtSXRNdXNSdXJZMmJVdm91UlBaM2JUYzE1ejlsZTQrVU9nR3N5UjR3c0hDVTZrb3lZeWo1OWhrMlNoUDdQVU96MFVMMHErSGdKTnhCd3phbkd2RU4vNm02MFNJUERaaE11dnZheUo4WnIyV2lwMkxoRGhUa3B5QzhzaE8weTdBVUROSXlneGFjY09KN1FNd2IzTVFLQmdIalYvQTg1TnhWdHEzM0JzMm9JcmpWaGFRYzVyYVlGd1VYN3F3WUJ6S3FTVG5ub1BUY3RwZEcwVlNSVlNScU1FODNLVVN0dUZoU1liN2w0dDRqbnE4bzJIOTFJM2V3SnZISWI1RmV6b3E0bDBBNHc2RFRHRmhqRVhkQ1hEOE5MdkFvUUw1Z0wrWU9NNmxNSlEzakdZSUtrazNodWtMN0wwT2Y1NklTTkdHeU5Bb0dCQU5Yc2hieDlsSWF5SnNkRjlRd1B5eStRS2ZDN25kcmNoS1Bxc3VDZFZTR2p3L0xEMW8vT0h3ZWFIQnBMOVU2enMzN1A0S0VkVE9wYm0zWmFJYVM3dGlCN2Z0M2FoRmpBYTdRbUpuUVUxQVltV1poZVQrQS9WNDdOYndVKyt3Vk5MN1lXaVJRYVFoK0ZYSDZTV0hLUmZjQnJydTk1K093VTVqYWo2bFpFbXF0bw==
* message : Operation to get SSH private key for control plane server(s) of the given exaOcid is successful
* op : capacity_ssh_priv_key
ecra> 


migrateToMvm:
Usage: ./ecracli ocicapacity migrateToMvm exaOcid=<exaOcid>

Purpose:
     Migrate given OCI exadata identified by given <exaOcid> from Single VM mode to Multi VM mode

Arguments:
     exaOcid  :   OCID of the specific Exadata

Examples:
ecra> ./ecracli migrateToMvm exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/migrateToMvm
* Migrate Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004 details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

enableNs:
Usage: ./ecracli ocicapacity enableNs exaOcid=<exaOcid> [rackname=<rackname>]

Purpose:
     Migrate given OCI exadata identified by given <exaOcid> from Single VM mode to Multi VM mode

Arguments:
     exaOcid  :   OCID of the specific Exadata
     rackname :   specific rackname

Examples:
ecra> ./ecracli enableNs exaOcid=NEW-OCI-TENANT-001-EXADATA-002 rackname=iad1-d2-cl3-c4d1e583-3f52-4f0e-8211-9bad63e93761-clu01
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/enableNodeSubset
* Enable NS feature on Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004 with details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

enableElasticCell:
Usage: ./ecracli ocicapacity enableElasticCell exaOcid=<exaOcid>

Purpose:
     Migrate given OCI exadata identified by given <exaOcid> from Single VM mode to Multi VM mode

Arguments:
     exaOcid  :   OCID of the specific Exadata

Examples:
ecra> ./ecracli enableElasticCell exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/migrateToElasticCell
* Migrate Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004 to Elastic Storage with details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

enableElasticCompute:
Usage: ./ecracli ocicapacity enableElasticCompute exaOcid=<exaOcid>

Purpose:
     Migrate given OCI exadata identified by given <exaOcid> from Single VM mode to Multi VM mode

Arguments:
     exaOcid  :   OCID of the specific Exadata

Examples:
ecra> ./ecracli enableElasticCompute exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/migrateToElasticCompute
* Migrate Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004 to Elastic Compute with details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

activateCellServers:
Usage: ./ecracli ocicapacity activateCellServers exaOcid=<exaOcid>

Purpose:
     Activate and validates the new cells are recheable

Arguments:
     exaOcid  :   OCID of the specific Exadata

Examples:
ecra> ./ecracli activateCellServers exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/activateCellServers
* Acitvate cell servers with the  OCID: NEW-OCI-TENANT-003-EXADATA-004 details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

attachCellServers:
Usage: ./ecracli ocicapacity attachCellServers exaOcid=<exaOcid>

Purpose:
     Attach new cells to an existing infra
     
Arguments:
     exaOcid  :   OCID of the specific Exadata

Examples:
ecra> ./ecracli attachCellServers exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/attachCellServers
* Attach new cell servers with the  OCID: NEW-OCI-TENANT-003-EXADATA-004 details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

migrateToElasticCell:
Usage: ./ecracli ocicapacity migrateToElasticCell exaOcid=<exaOcid>

Purpose:
     Attach new cells to an existing infra
     
Arguments:
     exaOcid  :   OCID of the specific Exadata

Examples:
ecra> ./ecracli migrateToElasticCell exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/migrateToElasticCell
* Attach new cell servers with the  OCID: NEW-OCI-TENANT-003-EXADATA-004 details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>


markCellsToDelete:
Usage ./ecracli ocicapacity markCellsToDelete exaOcid=<exaOcid> cellList=<cells>

Purpose:
     Mark a list of cells to be deleted

Arguments:
     exaOcid  :   OCID of the specific Exadata
     cellList :   Comma separated list of cells

Examples:
ecra> ocicapacity markCellsToDelete exaOcid= cellList=


release:
Usage: ./ecracli ocicapacity release exaOcid=<exaOcid> rackSlot=<rackName>

Purpose:
     Release the specified rack (MVM rackSlot) with name <rackName> in 'RESERVED' state of given OCI exadata identified by given <exaOcid>

Arguments:
     exaOcid  :   OCID of the specific Exadata
     rackSlot :   Name of the rack to be released

Examples:
ecra> ./ecracli release exaOcid=NEW-OCI-TENANT-001-EXADATA-002 rackSlot=iad126792exd-sujat-scaqak01XXX-clu01
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/
* Migrate Exadata with OCID: NEW-OCI-TENANT-003-EXADATA-004 details : {
    "idemtoken": "6e70853f-444c-427f-8d89-8293dc5f7077",
    "rackSlot" : "iad126792exd-sujat-scaqak01XXX-clu01"
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

restoreAllocations:
Usage: ./ecracli ocicapacity restoreAllocations exaOcid=<exaOcid> exaUnitId=<exaunitId>

Purpose:
     Restore reserved allocations for any operation against given exaunitId of the specified exaOcid

Arguments:
     exaOcid  :   OCID of the specific Exadata
     exaunitId:   Exaunit Id of the cluster

Examples:
ecra> ./ecracli restoreAllocations exaOcid=NEW-OCI-TENANT-001-EXADATA-002 exaunitId=1
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/exadata/NEW-OCI-TENANT-003-EXADATA-002/exaunit/1
* Restore allocations for OCID: NEW-OCI-TENANT-003-EXADATA-002 with details : {
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

fixXmlActionTag:
Usage: ./ecracli ocicapacity fixXmlActionTag exaOcid=<exaOcid>

Purpose:
     Fix updated XMLs to save value of deployed attr as true for PROVISIONED clusters of the exaOcid

Arguments:
     exaOcid  :  OCID of the specific Exadata

Examples:
ecra> ./ecracli fixXmlActionTag exaOcid=NEW-OCI-TENANT-001-EXADATA-002 exaunitId=1
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/exadata/NEW-OCI-TENANT-003-EXADATA-002/markActionsDeployedInUpdatedXmls
* Fixing XMLs for OCID: NEW-OCI-TENANT-003-EXADATA-002 with details : {
}
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70

ecra>

releaseInfra:
Usage: ./ecracli ocicapacity releaseInfra exaOcid=<exaOcid>

Purpose:
    Release OCI Exadata infra with parameters identified by given <exaOcid>

Arguments:
     exaOcid :   OCID of the specific Exadata
     
Examples:
ecra> ocicapacity releaseInfra exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* Release OCI Exadata infra with parameters:
* exaOcid : NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/releaseInfra
* {
    "message": "Successfully marked infra as READY", 
    "op": "capacity_exadata_release", 
    "status": 200, 
    "status-detail": "success"
}

reserveInfra:
Usage: ./ecracli ocicapacity reserveInfra exaOcid=<exaOcid>

Purpose:
    Reserve OCI Exadata infra with parameters identified by given <exaOcid>

Arguments:
     exaOcid :   OCID of the specific Exadata
     
Examples:
ecra> ocicapacity details exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* Reserve OCI Exadata infra with parameters:
* exaOcid : NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/reserveInfra
* {
    "message": "Successfully marked infra as RESERVED", 
    "op": "capacity_exadata_reserve", 
    "status": 200, 
    "status-detail": "success"
}

getnatmap:
Usage: ./ecracli ocicapacity getnatmap exaOcid=<exaOcid> vmClusterOcid=<vmClusterOcid (optional param)>
*Get nat hostname and domu hostname mapping
Example:
ecra> ocicapacity getnatmap exaOcid=ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qavdpfcjjxyipcg26mvntbfoqprbzv3zprlgwk4mhxrreq vmClusterOcid=ocid1.vmcluster.region1.sea.anzwkljs3vfwx6qa2vhq2q4wmq3p6qw4iztsadxmbk42z6wdho4xu7x2htuq
* Get OCI Exadata details with parameters:
* exaOcid : ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qavdpfcjjxyipcg26mvntbfoqprbzv3zprlgwk4mhxrreq
* vmClusterOcid : ocid1.vmcluster.region1.sea.anzwkljs3vfwx6qa2vhq2q4wmq3p6qw4iztsadxmbk42z6wdho4xu7x2htuq
* GET http://ecra-vm6.ecra.ociexacc.oraclevcn.com:9026/ecra/endpoint/capacity/exadata/ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qavdpfcjjxyipcg26mvntbfoqprbzv3zprlgwk4mhxrreq
* [
    {
        "dom0domUDetails": [
            {
                "dom0Hostname": "scaqar01adm01.us.oracle.com",
                "domuCustomerHostname": "scaqar01dv0108.us.oracle.com",
                "domuNatHostname": "scaqar01dv0108m.us.oracle.com"
            },
            {
                "dom0Hostname": "scaqar01adm02.us.oracle.com",
                "domuCustomerHostname": "scaqar01dv0208.us.oracle.com",
                "domuNatHostname": "scaqar01dv0208m.us.oracle.com"
            }
        ],
        "vmClusterOcid": "ocid1.vmcluster.region1.sea.anzwkljs3vfwx6qa2vhq2q4wmq3p6qw4iztsadxmbk42z6wdho4xu7x2htuq"
    }
]

OCI VPN Server config APIs
--------------------------
ocicpinfra:
savevpnserverdetails:
Usage: ./ecracli ocicpinfra savevpnserverdetails jsonconf=<PATH_TO_INPUT_JSON_FILE>
Purpose:
     Save the VPN server details for an AD in the region into ECRA DB

Arguments:
     jsonconf  :   Absolute path of the file containing input JSON




getvpnserverdetails:
Usage: ./ecracli ocicpinfra getvpnserverdetails ad=<ad>
Purpose:
     Fetch the VPN server details for the given AD in the region from ECRA DB

Arguments:
     ad  :   AD in the region for which VPN config details are required (ALWAYS '1' for OCI-EXACC) 
     
     
     

updatevpnserverdetails:
Usage: ./ecracli ocicpinfra updatevpnserverdetails jsonconf=<PATH_TO_INPUT_JSON_FILE>
Purpose:
     Update the VPN server details for an AD in the region in ECRA DB
     Restricted to 'ops' user only.

Arguments:
     jsonconf  :   Absolute path of the file containing input JSON
     
     

rotatecipherpasswd:
Usage: ./ecracli ocicpinfra rotatecipherpasswd
Purpose:
     Rotate ECRA cipher password. Can be run as 'ops' user ONLY

Arguments:
     jsonconf  :   NONE
     
Examples:
-bash-4.2$ ./ecracli/ecracli
Enter 'username': 
Enter 'password': 
* Ecracli -19.213
* host              : http://slc15rvy.us.oracle.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
* Connecting to endpoint and getting version info...
* status : 200
* exacloud_version : 19.2.1(19.213)
* status-detail : success
* label : ECS_MAIN_LINUX.X64_190801.0700
* oeda_version : 190522
* dbaas_version : dbaastools_exa-1.0-1+19.2.1.0.0_190801.0300
* dbcs_agent_ol6 : dbcs-2.7OL6-19.2.1.0.0_190801.1725
* dbcs_agent_ol7 : dbcs-2.7OL7-19.2.1.0.0_190801.1725
* op : version_get
* dborch_version : 19.212
ecra> ocicpinfra rotatecipherpasswd
* POST http://slc15rvy.us.oracle.com:9001/ecra/endpoint/ocicpinfra/rotate-cipher-passwd
* Response data
* status : 200
* status-detail : success
* message : Update Successful
* op : rotate_cipher_passwd
ecra>



getecracipherpasswd:
Usage: ./ecracli ocicpinfra getecracipherpasswd saveloc=<absolute_file_path>
Purpose:
     Get the current and active Cipher Password for this ECRA instance
     Restricted to 'ops' user only.

Arguments:
   	 saveloc: Absolute path of the file where the command saves output. NO DISPLAY on screen as that's a security issue.

Examples:
ecra> ocicpinfra getecracipherpasswd saveloc=/tmp/cipher
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/ocicpinfra/ecra-cipher-passwd
* Saved requested file
ecra>
bash-4.2$ cat /tmp/cipher 
{
    "cipher_passwd": "DCAAB301C48D9713", 
    "message": "ECRA Cipher password fetched successfully", 
    "op": "active_cipher_passwd", 
    "status": 200, 
    "status-detail": "success"
}



geteallcipherpasswds:
Usage: ./ecracli ocicpinfra geteallcipherpasswds saveloc=<absolute_file_path>
Purpose:
     Get the all Cipher Passwords used till date for this ECRA instance
     Restricted to 'ops' user only.

Arguments:
   	 saveloc: Absolute path of the file where the command saves output. NO DISPLAY on screen as that's a security issue.
   	 
Examples:
ecra> ocicpinfra geteallcipherpasswds saveloc=/tmp/ciphers
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/ocicpinfra/ecra-all-cipher-passwds
* Saved requested file
ecra>
bash-4.2$ cat /tmp/ciphers
{
    "CIPHER_PASSWORDS": {
        "0123456789ABCDEF": "{timestamp=2019-08-02 11:11:48.083822, status=EXPIRED}", 
        "5F99C2B7E42D7951": "{timestamp=2019-08-02 01:49:28.485, status=EXPIRED}", 
        "95893187E2FA679D": "{timestamp=2019-08-01 22:45:21.314, status=EXPIRED}", 
        "DCAAB301C48D9713": "{timestamp=2019-08-02 01:49:55.433, status=ACTIVE}"
    }, 
    "message": "ECRA Cipher passwords fetched successfully", 
    "op": "all_cipher_passwd", 
    "status": 200, 
    "status-detail": "success"
}


registervpnhe:
Usage: ./ecracli ocicpinfra registervpnhe jsonconf=<absolute_file_path>
Purpose:
     Register a new VPN HE with this ECRA instance

Arguments:
   	 jsonconf: Absolute path of the file containing JSON listing attributes of the VPN HE
   	 
Examples:
ecra> ocicpinfra registervpnhe jsonconf=/scratch/pverma/ecra_installs/upload_he_info.json
* POST http://slc15rvy.us.oracle.com:9001/ecra/endpoint/ocicpinfra/vpn-he
* Inserting VPN HE record with details: {
    "BASE64_sshkey": "c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFDN0k4U3VzaGNpbHcyNHR1UEh4cFR2YjZYeVorWHlxM0NkRitPUE1wdTlDRXE5UDN2ekh1SG1HN1lJZFQ1ejM4d01NcUhicEdiTTBuMktTU2F5MjdScmdSUFBSam9mWXpHMHEzcTFPbktkYTcrN29BSmdBS1BzZDE3dGdrYWJRbGdTL3JJUE96Z2JIaWRjTCt0QUQ3dVNNY3QxUW1JUytCeXByeEhVNnFIeWFBOGwzUUNOSmZzSjRxYlFRTW91cUx6ZGYza2MxSy9kdjIrSWNCeGJpS3BFRDNqYm4rRlFneEcrWTZEcVZsUldvNUpZYkY3RjlTL1UxeXNxUU8yWWJZWEF4cFlrbjJOU1NMeXFLU1NWY09aQzlRZzNONGdhN0hUSzZlTjIrK2I2MVByVTNCMmR6MnFQNmcrYm5ibHc3NFN0VTVXWUo4SVB1N3NNYW5JeVFwakQgcHZlcm1hQHB2ZXJtYS1tYWMK", 
    "ad": "1", 
    "he_ip": "10.100.109.21", 
    "he_name": "pvermaHE1", 
    "status": "ACTIVE", 
    "user_id": "pverma"
}
* Response data
* status : 200
* status-detail : success
* message : VPN HE record created successfully
* op : vpn_he_register
ecra>



getvpnhedetails
Usage: ./ecracli ocicpinfra getvpnhedetails ip=<ip_address_of_VPN_HE>
Purpose:
     Get details of a registered VPN HE with this ECRA instance

Arguments:
   	 ip: IP Address of the VPN HE for which details is sought
   	 
Examples:
ecra> ocicpinfra getvpnhedetails ip=10.100.109.21
* Get OCI VPN HE details with parameter(s):
* ip : 10.100.109.21
* GET http://slc15rvy.us.oracle.com:9001/ecra/endpoint/ocicpinfra/vpn-he/10.100.109.21
* Response data
* status : 200
* status-detail : success
* message : VPN HE details fetched successfully
* op : vpn_he_getdetails
* VPN_HE_DETAILS : {u'status': u'ACTIVE', u'user_id': u'pverma', u'sshkey': u'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC7I8Sushcilw24tuPHxpTvb6XyZ+Xyq3CdF+OPMpu9CEq9P3vzHuHmG7YIdT5z38wMMqHbpGbM0n2KSSay27RrgRPPRjofYzG0q3q1OnKda7+7oAJgAKPsd17tgkabQlgS/rIPOzgbHidcL+tAD7uSMct1QmIS+ByprxHU6qHyaA8l3QCNJfsJ4qbQQMouqLzdf3kc1K/dv2+IcBxbiKpED3jbn+FQgxG+Y6DqVlRWo5JYbF7F9S/U1ysqQO2YbYXAxpYkn2NSSLyqKSSVcOZC9Qg3N4ga7HTK6eN2++b61PrU3B2dz2qP6g+bnblw74StU5WYJ8IPu7sManIyQpjD pverma@pverma-mac\n', u'he_ip': u'10.100.109.21', u'he_name': u'pvermaHE1', u'ad': u'1'}
ecra>

cleanupEcraMetadata:
Usage: ./ecracli ocicapacity cleanupEcraMetadata exaOcid=<exaOcid> idemtoken<idemtoken>

Purpose:
     To trigger forced deletion of infrastructure from ECRA as part of decommissioning if <exaOcid> is disconnected.

Arguments:
     exaOcid  :   OCID of the specific infra
     idemtoken: New idemtoken

Examples:
    1 - ecra> ocicapacity cleanupEcraMetadata exaOcid=ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102 idemtoken=6970311e-df9c-4aa4-9398-e5c291703554
        * DELETE http://phoenix266156.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/capacity/ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102/6970311e-df9c-4aa4-9398-e5c291703554/ecraMetaDataCleanup
        * {
            "status": 202,
            "status_uri": "http://phoenix266156.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/6970311e-df9c-4aa4-9398-e5c291703554",
            "op": "ecra_meta_data_cleanup",
            "op_start_time": "2025-10-25T04:31:01+0000",
            "est_op_end_time": "",
            "message": "processing",
            "status-detail": "processing"
        }
    2- ecra> status 6970311e-df9c-4aa4-9398-e5c291703554
       * {
            "start_time": "2025-10-25T04:31:01+0000",
            "details": "ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102",
            "ecra_server": "EcraServer1",
            "last_heartbeat_update": "2025-10-25T04:31:01+0000",
            "status": 202,
            "message": "Pending",
            "op": "ecra-metadata-cleanup",
            "status_uri": "http://phoenix266156.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/6970311e-df9c-4aa4-9398-e5c291703554",
            "op_start_time": "2025-10-25T04:31:11+0000",
            "est_op_end_time": "",
            "start_time_ts": "2025-10-25 04:31:01.0"
        }
    3- ecra> status 6970311e-df9c-4aa4-9398-e5c291703554
       * {
            "start_time": "2025-10-25T04:31:01+0000",
            "end_time": "2025-10-25T04:31:21+0000",
            "details": {
                "EXAUNIT": {
                    "1": {
                        "StatusUUID": "b35ca235-06ad-4dd8-b850-e80f857ad7a0",
                        "Status": "Terminated"
                    }
                },
                "RACK": {
                    "Status": "Terminated"
                },
                "NETWORK": {
                    "scaqae01adm0102_nw_ocid_clu01": "Terminated",
                    "scaqae01adm0102_nw_ocid_clu02": "Terminated"
                },
                "TENANT": {
                    "exaOcid": "ocid1.exa.mvm.infrastructure.oc1.sea.scaqae01adm0102",
                    "message": "Capacity deleted successfully"
                }
            },
            "ecra_server": "EcraServer1",
            "last_heartbeat_update": "2025-10-25T04:31:01+0000",
            "status": 200,
            "message": "Done",
            "op": "ecra-metadata-cleanup",
            "status_uri": "http://phoenix266156.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/6970311e-df9c-4aa4-9398-e5c291703554",
            "status-detail": "success",
            "start_time_ts": "2025-10-25 04:31:01.0"
        }

____________________________________________
workflows:

1)list:
Usage: 
   ecra> workflows list [workflowStatus=<status>] [pageSize=<pageSize>] [pageIndex=<pageIndex>] [exaunitId=<exaunitId>] [workflowId=<workflowId>]

Purpose:
   Returns workflows list. Optional filter criteria field are workflowStatus, pageSize, pageIndex, exaunitId. It returns all workflows when no input filter criteria is given.

Arguments:
   Mandatory - NONE
   Optional - workflowStatus - Possible values for workflowStatus are Initialized, Ready, Processing, Failed, Completed
	    - pageSize, pageIndex
            - exaunitId - Returns all the workflow associated with exaunitId
            - workflowId - Returns all the tasks info corresponding to the workflowId
Examples:
ecra> workflows list
*  <workflowId>                         : <wfName>           :<wfStatus>:<wfRollbk>:<exaOCID>: <lTask>        : <LTStatus> : <LTNodeType> :<LTLOpId> : <LTLOp> : <LTLOpStatus>
*  681f9550-aa2f-46d6-9176-44ed1c147ae3 : create-service-wfd :Processing:false     :exaoci1  : PostVMInstall  : Processing   : TASK         :          :         : 
*  fc738783-7c33-4855-b19b-4cbe82946ad5 : create-service-wfd :Completed :false     :exaoci2  : PostDBInstall  : Completed    : TASK         :          :         : 
*  a4ece18a-b46f-44f8-8b4f-753cd37da7bc : create-service-wfd :Failed    :false     :exaoci3  : PreVMSetup     : Failed       : TASK         :          :         : 
*  58abbcf0-60f6-446d-9c17-01e62056347a : create-service-wfd :Processing:false     :exapco4  : PostGINID      : Processing   : TASK         :          :         : 

ecra> workflows list exaunitId=1
* {
    "exaunitId": "1",
    "Workflows": [
        {
            "wf_uuid": "27e84cd7-b4e7-4062-a70e-e31391228cac",
            "requestId": "d480350c-e322-46c6-bdd9-51452f8ed9f6",
            "resource_id": "db858d7b",
            "operation": "create-starter-db",
            "status": "200",
            "start_time": "2020-09-17T11:35:03+0000",
            "end_time": "2020-09-17T11:35:58+0000",
            "parent_request_id": "",
            "exa_ocid": ""
        },
        {
            "wf_uuid": "556e9e11-85b5-4c22-bf0b-7be2b39451e4",
            "requestId": "969d31bf-a0a9-43b4-908a-8a880869929b",
            "resource_id": "slcs09adm0508",
            "operation": "create-service",
            "status": "200",
            "start_time": "2020-09-16T14:35:33+0000",
            "end_time": "2020-09-17T11:12:58+0000",
            "parent_request_id": "",
            "exa_ocid": "EXISTING.PUBLIC.CLOUD.EXADATA"
        }
    ],
    "status": 200,
    "op": "wfs_get",
    "status-detail": "success"
}

ecra> workflows list workflowId=56f44d05-e315-4cbe-b0f3-517109f0f38e
* {
    "workflowId": "56f44d05-e315-4cbe-b0f3-517109f0f38e",
    "tasks": [
        {
            "operation_id": "3c74371f-cdbc-406a-a258-d7c62852c5fc",
            "task_name": "CreateVM",
            "status": "202",
            "status_uuid": "cc6e71cc-0017-4247-81b1-26bc3e4d9f63",
            "start_time": "2020-09-28T12:42:27+0000",
            "end_time": "",
            "remote_component": "",
            "action": "RETRY"
        },
        {
            "operation_id": "c70306fe-7133-481d-b124-eee5d419bb97",
            "task_name": "CreateVM",
            "status": "500",
            "status_uuid": "827ac3de-c620-4bb2-842e-f83001da73cb",
            "start_time": "2020-09-28T12:41:07+0000",
            "end_time": "2020-09-28T12:41:51+0000",
            "remote_component": "",
            "action": "UNDO"
        },
        {
            "operation_id": "1bd49544-1725-475e-ba5a-d57ea9cd9446",
            "task_name": "CreateVM",
            "status": "500",
            "status_uuid": "5c7c4a3b-edb4-49cb-8813-c1484ae71864",
            "start_time": "2020-09-28T12:35:51+0000",
            "end_time": "2020-09-28T12:36:51+0000",
            "remote_component": "",
            "action": "EXECUTE"
        },
        {
            "operation_id": "102e32bc-e9ce-4de2-8a2a-96096d02a025",
            "task_name": "PreVMSetup",
            "status": "200",
            "status_uuid": "92ec80e2-b881-46ae-ae69-39c7c369f974",
            "start_time": "2020-09-28T12:34:51+0000",
            "end_time": "2020-09-28T12:35:51+0000",
            "remote_component": "",
            "action": "EXECUTE"
        },
        {
            "operation_id": "66c9df4d-2892-41f7-b5e1-885ce87d8f6f",
            "task_name": "PreVMChecks",
            "status": "200",
            "status_uuid": "400d576f-2c59-47d1-8214-80837ae9766a",
            "start_time": "2020-09-28T12:34:47+0000",
            "end_time": "2020-09-28T12:34:51+0000",
            "remote_component": "",
            "action": "EXECUTE"
        }
    ],
    "status": 200,
    "op": "wfs_get",
    "status-detail": "success"
}

2)describe

Usage: 
   ecra> workflows describe workflowId=<workflow's UUID>

Purpose:
   Returns the detailed workflow information associated to given workflow id.

Arguments:

   Mandatory - workflowId
   Optional - NONE

Examples:
ecra> workflows describe workflowId=3f31c175-8ef0-4509-9b08-017e2f31fc35
* {
    "workflowName": "mvm-exacs-rack-reserve-wfd",
    "workflowId": "3f31c175-8ef0-4509-9b08-017e2f31fc35",
    "workflowStatus": "Completed",
    "workflowStartTime": "14 Dec 2022 21:49:31 UTC",
    "workflowEndTime": "14 Dec 2022 21:49:31 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "CreateRack",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Wed Dec 14 21:49:31 UTC 2022",
            "taskEndTime": "Wed Dec 14 21:49:31 UTC 2022",
            "taskErrorMessage": "",
            "taskElapsed": "0:00:00"
        },
        {
            "taskName": "UpdateMetadata",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Wed Dec 14 21:49:31 UTC 2022",
            "taskEndTime": "Wed Dec 14 21:49:31 UTC 2022",
            "taskErrorMessage": "",
            "taskElapsed": "0:00:00"
        },
        {
            "lastTaskName": "UpdateMetadata",
            "lastOperationDetails": {
                "lastTaskLastOperationId": "6523ab6f-4e25-4314-b130-397677d7fd81",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "14 Dec 2022 21:49:31 UTC",
                "lastTaskLastOperationEndTime": "14 Dec 2022 21:49:31 UTC"
            }
        }
    ],
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success",
    "workflowElapsed": "0:00:00"
}

3) undo 
Usage:
  ecra> workflows undo workflowId=<workflow's uuid> taskName=<taskName> 

Purpose:
  Submits a 'undo' operation for the given task. It returns undo operation's uuid for submitted request to monitor the status using 'workflows operation' command.

Arguments:
  Mandatory - workflowId
	    - taskName (Possible task names can be found with 'workflows describe' command.)

Examples: 
  ecra> workflows undo workflowId=2b08558b-2622-4769-b597-829e3b991997 taskName=CreateStorage
  * {"Status": "undo WorkFlow task submitted successfully", "status": 200, "operationId": "3bf4dc3d-f767-4353-aaaa-0d9524b321be", "status-detail": "success", "op": "wf_task_undo_post"}

4)retry
Usage:
  ecra> workflows retry workflowId=<workflow's uuid> taskName=<taskName>

Purpose:
  Submits a 'retry' operation for the given task. It returns undo operation's uuid for submitted request to monitor the status using 'workflows operation' command.

Arguments:
  Mandatory - workflowId
            - taskName (Possible task names can be found with 'workflows describe' command.)
  Optional - None

Examples: 
  ecra> workflows retry workflowId=2b08558b-2622-4769-b597-829e3b991997 taskName=CreateStorage
  * {"Status": "retry WorkFlow task submitted successfully", "status": 200, "operationId": "3bf4dc3d-f767-4353-aaaa-0d9524b321be", "status-detail": "success", "op": "wf_task_undo_post"} 

5)rollback_mode_on
Usage:
  ecra>workflows rollback_mode_on workflowId=<<workflow's uuid>>

Purpose:
  Enables rollback mode for a given workflow. Workflow instance tasks won't be executed automatically. Manual undo and retry operations can be performed in this mode. Workflow need to be set back with rollback_mode_off in order to get the workflow completed.

Arguments:
  Mandatory - workflowId
  optional - None 

Examples:
  ecra>workflows rollback_mode_on workflowId=cf8023e2-9677-4bf9-b979-eaff71fad724
   * {"Status": "enableWorkFlowRollbackModeOn is set", "status": 200, "status-detail": "success", "op": "wf_rollbackmodeon_post"}

6)rollback_mode_off
Usage:
  ecra>workflows rollback_mode_off workflowId=<<workflow's uuid>>

Purpose:
  Disables rollback mode for a given workflow. Enables workflow instance tasks to be auto executed.

Arguments:
  Mandatory - workflowId
  optional - None

Examples:
  ecra>workflows rollback_mode_off workflowId=cf8023e2-9677-4bf9-b979-eaff71fad724
   * {"Status": "enableWorkFlowRollbackModeOff is set", "status": 200, "status-detail": "success", "op": "wf_rollbackmodeoff_post"}

7)rollback
Usage:
  ecra>workflows rollback workflowId=<<workflow's uuid>>

Purpose:
  Moves undo pointer to previous task of current undo task pointer.\n  This command works for a workflow when its rollback mode is on. When rollback_mode_on is set, the undo pointer points to last task by default.

Arguments:
  Mandatory - workflowId
  optional - None

Examples:
  ecra>workflows rollback workflowId=cf8023e2-9677-4bf9-b979-eaff71fad724
  * {"Status": "rollback successful", "status": 200, "status-detail": "success", "op": "wf_rollback_post"}


8)operation
Usage:
  ecra>workflows operation operationId=<<workflow's uuid>>

Purpose:
  Returns the operation (undo, retry) status details.

Arguments:
  Mandatory - operationId
  optional - None

Examples:
  workflows operation operationId=a36acb36-63fe-4587-abc5-d9e364bbebdb
  * {"Status": "Completed", "status": 200, "status-detail": "success", "op": "wf_operation_get"}
  
9)abort
Usage:
  ecra>workflows abort workflowId=<<workflow's uuid>>

Purpose:
  Aborts the failed workflow.\n Once the abort is submitted, passed workflow will be removed from further processing. Manual cleanup will be required.

Arguments:
  Mandatory - workflowId (Use only failed workflow from workflows describe command.)
  Optional - None

Examples:
  ecra> workflows abort workflowId=f3c11b4e-71fc-40ac-84ad-e0c9376f247b

 
10)cancel_task
Usage:
  ecra>workflows cancel_task workflowId=<<workflow's uuid>> taskName=<Task Name>

Purpose:
  Cancel the current running workflow task.\n

Arguments:
  Mandatory - workflowId (Use only InProgress workflow from workflows describe command.)
	    - taskName (Possible task names can be found with 'workflows describe' command.)
  Optional - None

Examples:
  ecra> workflows cancel_task workflowId=f3c11b4e-71fc-40ac-84ad-e0c9376f247b taskName=PreVMChecks

11) fail_task
Usage:
  ecra>workflows fail_task workflowId=<<workflow's uuid>> taskName=<Task Name> operationId=<OperationId>

Purpose:
  Fail the current running or Undo Success workflow task.\n

Arguments:
  Mandatory - workflowId (Use only InProgress workflow from workflows describe command.)
	    - taskName (Possible task names can be found with 'workflows describe' command.)
	    - operationId (Possible operationId can be found with 'workflows describe' command.)
  Optional - None

Examples:
ecra> workflows fail_task workflowId=556e9e11-85b5-4c22-bf0b-7be2b39451e4 taskName=PreVMChecks operationId=4b6b8e44-9a0f-41b8-8943-d7146f6c5d3a

12) pause
Usage:
  ecra>workflows pause

Purpose:
  Pause the Workflow Engine so that it will not Execute next task.\n

Arguments:
  Mandatory - value (Value set to true and false)
  Optional - None

Examples:
ecra> workflows pause value=true
* {"message": "Workflow Paused status changed successfully", "status": 200,
"op": "wf_task_fail_post", "status-detail": "success"}
ecra> workflows pause value=false
* {"message": "Workflow Paused status changed successfully", "status": 200,
"op": "wf_task_fail_post", "status-detail": "success"}

13) server_staus
Usage:
  ecra>workflows server_status

Purpose:
  Get name and status of servers in wf_server table.\n

Arguments:
  Mandatory - None
  Optional - None

Examples:
ecra> workflows server_status
* {"wf_server": [{"name": "EcraServer1", "status": "RUNNING"}, {"name": "EcraServer2", "status": "FAILING_OVER"}], "status": 200, "op": "wf_server_status_get", "status-detail": "success"}

13) reload
Usage:
  ecra>workflows reload

Purpose:
  Reload the running workflow from old ecra server to new ecra server\n

Arguments:
  Mandatory - oldserver (oldserver set to EcraServer1 and EcraServer2)
  Optional -  wfuuid (Specific wfuuid to be reloaded into new server)

Examples:
ecra> workflows reload oldserver=EcraServer1
* {"message": "Workflow reloaded successfully", "status": 200,
"op": "wf_task_fail_post", "status-detail": "success"}
ecra> workflows reload oldserver=EcraServer1 wfuuid=34fdfdffdf-dsdsdsdsd-dvdbfvbf2123vd
* {"message": "Workflow reloaded successfully", "status": 200,
"op": "wf_task_fail_post", "status-detail": "success"}

15) janitor_restart
Usage:
  ecra>workflows janitor_restart

Purpose:
  Restart the WF janitor on current ecra server\n

Arguments:
  Mandatory - NONE
  Optional -  NONE

Examples:
ecra> workflows janitor_restart
* {"message": "WF janitor instance restarted successfully", "status": 200,
"op": "wf_task_fail_post", "status-detail": "success"}

16) getinput
Usage:
  ecra>workflows getinput workflowId=<workflowid> taskname=<taskname>

Purpose:
  Fetch the input payload a task on the workflow received and save it on the filesystem

Arguments:
  Mandatory - workflowId, taskname
  Optional -  NONE

Examples:
ecra> workflows getinput workflowId=2c1fa3c3-c00d-4e0e-a8b9-d82bd1846a38
taskname=ConfigCell
* {"jsoninput":
"../PodRepo/2c1fa3c3-c00d-4e0e-a8b9-d82bd1846a38_ConfigCell_taskinputpayload.json",
"status": 200, "op": "wf_fetch_json_input_get", "status-detail": "success"}

ecra> workflows getinput workflowId=c8c415d1-3759-46aa-a725-6e4fc355e2a9
* {"jsoninput": "../PodRepo/c8c415d1-3759-46aa-a725-6e4fc355e2a9_inputpayload.json",
 "status": 200, "op": "wf_fetch_json_input_get", "status-detail": "success"}

17) updateinput
Usage:
  ecra>workflows updateinput workflowId=<workflowid> taskname=<taskname> jsonpath=<path>

Purpose:
  Update the input payload a task on the workflow uses.

Arguments:
  Mandatory - workflowId, taskname, jsonpath
  Optional -  NONE

Examples:
ecra> workflows updateinput workflowId=2c1fa3c3-c00d-4e0e-a8b9-d82bd1846a38
taskname=ConfigCell
jsonpath=/scratch/gvalderr/ecra_installs/myecra/mw_home/user_projects/domains/PodRepo/updatedworkflowpayload2.json
* {"status": 200, "op": "wf_update_json_input_post", "status-detail": "success"}

ecra> workflows updateinput workflowId=c8c415d1-3759-46aa-a725-6e4fc355e2a9 jsonpath=../PodRepo/c8c415d1-3759-46aa-a725-6e4fc355e2a9_inputpayload.json
* {"status": 200, "op": "wf_update_json_input_post", "status-detail": "success"}

ECRA-CPS Hearbeat API
-----------------------
Purpose : To get the status of heartbeat from ECRA to CPS
Usage : ./ecracli heartbeat <argument>

Argument:
1) get
   Purpose :  List all heartbeat data for the current OCI Exadatas on ECRA
   Usage   : ./ecracli heartbeat get
   Examples: 
           ecra> heartbeat get
 	 GET http://den00sdv.us.oracle.com:7741/ecra/endpoint/heartbeat
 	{
    	"heartbeats": [
        	{
            "exadataName": "ExadataTestName010",
            "exadataOcid": "ocid1.compartment.oc1..aaaaaaaacmcj2mjp3p2jdgsi3zsbcy3girytlgdba3jsei7gflpj27e2nycb",
            "lastHeartbeat": "24/06/2019 05:32:42.0",
            "lastHeartbeatJobs": [
                {
                    "end_time": "2019-06-24 17:32:42.540214",
                    "exit_status": "FAIL",
                    "id": 34425,
                    .
                    .
                    .
                }
                .
                .
                .
             ]
           }
         ]
       }
       
 2) exadata
     Purpose : Retrieve heartbeat data for a given OCI Exadata
     Usage   : ./ecracli heartbeat exadata <tenant_ocid> <exadata_ocid>
     Examples:   
     		ecra> heartbeat exadata ocid1.compartment.oc1..aaaaaaaacmcj2mjp3p2jdgsi3zsbcy3girytlgdba3jsei7gflpj27e2nyba ocid1.compartment.oc1..aaaaaaaacmcj2mjp3p2jdgsi3zsbcy3girytlgdba3jsei7gflpj27e2nyca
	       GET http://den00sdv.us.oracle.com:7741/ecra/endpoint/heartbeat/ocid1.compartment.oc1..aaaaaaaacmcj2mjp3p2jdgsi3zsbcy3girytlgdba3jsei7gflpj27e2nyba/ocid1.compartment.oc1..aaaaaaaacmcj2mjp3p2jdgsi3zsbcy3girytlgdba3jsei7gflpj27e2nyca
          {
    		"exadataName": "ExadataTestName000",
    		"exadataOcid": "ocid1.compartment.oc1..aaaaaaaacmcj2mjp3p2jdgsi3zsbcy3girytlgdba3jsei7gflpj27e2nyca",
    		"lastHeartbeat": "24/06/2019 05:32:42.0",
    		"lastHeartbeatJobs": [
        			{
            			"end_time": "2019-06-24 17:32:42.548478",
            			"exit_status": "FAIL",
            			"id": 34426,
     		        	.
                    	.
                    	.
                	}
                	.
                	.
                	.
             	]
          	 }
         	]
       	  } 
       
 3) enableScheduler
     Purpose : Enable/Disable heartbeat job scheduler so pings can be stopped without stopping ECRA.
     Usage   : ./ecracli heartbeat enableScheduler <heartbeatEnabled>=[true|false]
     Examples:   
     		ecra> heartbeat exadata heartbeatEnabled=false 
		{
		    "hearbeatRunning": false,
		    "propertyUpdated": true
		}

#PROFILING
report
--------------

Usage:
    profiling report [start_date=<YYYY-MM-DD>] [end_date=<YYYY-MM-DD>] [interval=<DAYSINTERVAL>] [rackname=<RACKNAME>]
    -This parameters are excluyent so if start/end date are provided interval should not be provided and vice versa"
    -If start-end dates provided are non valid will use default values for corresponding value
    
    Default values:
        Interval    : if non value is provided profiling will retrieve information since 365 days in the past from current date
        Start_date  : Start date default value is 365 days in past from current date
        End_date    : Default value will be current date
        alloperations: this parameter is for display only operations included in a white list. The Default value is false and show the operation in white list.
        
        
    Examples:
        ecra> profiling report interval=300
        {
            "interval": "300"
        }
        * {"status": 200, "StartDate": "2018-12-04", "EndDate": "2019-09-30", "status-detail": "success", "ATP_TERMINATION": {"DeletePod": {"Max": 22, "Avg": 5, "StdDeviation": 5.83, "Min": 0}}, "ATP_PREPROV": {"DBCP": {"KeyRotationAndAgentUpdate": {"Max": 109, "Avg": 67, "StdDeviation": 24.28, "Min": 51}, "AttachVNICs": {"Max": 13309, "Avg": 5339, "StdDeviation": 4998.25, "Min": 628}}, "EXACLOUD": {"CreateService": {"Max": 438, "Avg": 108, "StdDeviation": 140.68, "Min": 0}, "CreateStarterDb": {"Max": 69, "Avg": 14, "StdDeviation": 27.3, "Min": 0}, "DeleteStarterDb": {"Max": 0, "Avg": 0, "StdDeviation": 0, "Min": 0}}, "OVERALL_TIME": {"Max": 19, "Avg": 14, "StdDeviation": 4.78, "Min": 8}, "ECRA": {"CreateDBSystem": {"Max": 19, "Avg": 14, "StdDeviation": 4.78, "Min": 8}, "CreateMgmtNetwork": {"Max": 60, "Avg": 36, "StdDeviation": 16.11, "Min": 17}, "RegisterVNIC": {"Max": 40, "Avg": 30, "StdDeviation": 10, "Min": 20}}}, "UsedTimeUnit": "Minutes", "ATP_RECONFIG": {"DBCP": {"AttachVNICs": {"Max": 68063, "Avg": 68063, "StdDeviation": 0, "Min": 68063}}, "EXACLOUD": {"Info": {"Max": 1318, "Avg": 367, "StdDeviation": 549.2, "Min": 31}, "ReconfigService": {"Max": 27, "Avg": 22, "StdDeviation": 2.58, "Min": 19}, "VmRollback": {"Max": 6, "Avg": 6, "StdDeviation": 0, "Min": 6}}, "OVERALL_TIME": {"Max": 109, "Avg": 67, "StdDeviation": 24.28, "Min": 51}, "ECRA": {"RegisterVNIC": {"Max": 40, "Avg": 30, "StdDeviation": 10, "Min": 20}}}, "Racks": [{"slcs08adm0506clu1": {"Exaunits": [{"24": {"Status": "Failed", "ATPFlow": "PREPROV"}, "25": {"Status": "Failed", "ATPFlow": "PREPROV"}, "26": {"Status": "Failed", "ATPFlow": "PREPROV"}, "27": {"Status": "Failed", "ATPFlow": "PREPROV"}, "22": {"Status": "Failed", "ATPFlow": "PREPROV"}, "23": {"Status": "Failed", "ATPFlow": "PREPROV"}, "1": {"Status": "Failed", "ATPFlow": "PREPROV"}, "4": {"Status": "Failed", "ATPFlow": "PREPROV"}}], "N_Reconfig": 0, "N_Preprov": 8, "N_SuccesfullPreprov": 0, "N_SuccesfullReconfig": 0}, "sea201207exd-d0-05-06-cl-07-09-clu01": {"Exaunits": [{"649": {"Status": "Success", "start_time": "2019-09-18T02:43:24", "end_time": "2019-09-18T03:37:24", "ATPFlow": "RECONFIG"}, "21": {"Status": "Success", "start_time": "2019-09-03T16:07:55", "end_time": "2019-09-03T16:58:55", "ATPFlow": "RECONFIG"}, "646": {"Status": "Success", "start_time": "2019-09-13T03:00:52", "end_time": "2019-09-13T03:54:52", "ATPFlow": "RECONFIG"}}], "N_Reconfig": 3, "N_Preprov": 0, "N_SuccesfullPreprov": 0, "N_SuccesfullReconfig": 3}, "sea201205exd-d0-03-04-cl-04-06-clu01": {"Exaunits": [{"42": {"Status": "Success", "start_time": "2019-09-09T15:39:41", "end_time": "2019-09-09T17:28:41", "ATPFlow": "RECONFIG"}}], "N_Reconfig": 1, "N_Preprov": 0, "N_SuccesfullPreprov": 0, "N_SuccesfullReconfig": 1}, "0fb03b09-7748-4054-8e8c-ceed647e7d3f": {"Exaunits": [{"42": {"Status": "Failed", "ATPFlow": "PREPROV"}}], "N_Reconfig": 0, "N_Preprov": 1, "N_SuccesfullPreprov": 0, "N_SuccesfullReconfig": 0}, "scas07adm0304clu4": {"Exaunits": [{"3": {"Status": "Failed", "start_time": "2019-07-11T16:53:04+00", "end_time": "2019-07-11T17:10:09+", "ATPFlow": "PREPROV"}, "2": {"Status": "Success", "start_time": "2019-08-01T17:19:56-", "end_time": "2019-08-01T17:28:33", "ATPFlow": "PREPROV"}, "5": {"Status": "Success", "ATPFlow": "RECONFIG"}, "43": {"Status": "Failed", "ATPFlow": "PREPROV"}}], "N_Reconfig": 1, "N_Preprov": 3, "N_SuccesfullPreprov": 1, "N_SuccesfullReconfig": 1}}], "op": "profiling_put"}
            
        
        ecra> profiling report interval=15 start_date=2019-03-15
        * Error: PUT request to http://den00ucw.us.oracle.com:9001/ecra/endpoint/profiling failed
        * HTTP Error 500: Internal Server Error
        * {"status":500,"message":"Input payload can not have both interval and <start|end>_time values, please use only one of them","status-detail":"Input payload can not have both interval and <start|end>_time values, please use only one of them","op":"profiling_put"}
        ecra> 

OPERATION

Usage:
    ./ecracli profiling operation taskId=<Operation_ID> [start_date=<YYYY-MM-DD>] [end_date=<YYYY-MM-DD>] [interval=<DAYSINTERVAL>] [subtask=<True>]

Purpose:
    It will give a report for specific given operations. For example, timmings for create-starter-db on ecs_request table. 
    
    -The parameters are mutually exclusive - if start/end date are provided interval should not be provided and vice versa
    -If start-end dates provided are non valid will use default values for corresponding value
    
Arguments:
        Interval    : if non value is provided profiling will retrieve information since 365 days in the past from current date
        Start_date  : Start date default value is 365 days in past from current date
        End_date    : Default value will be current date
        TaskID      : Specific task to profile
        subtask     : if subtask is true the result show the sub-task of the operation given 
        
Examples:
bash-4.2$ ecracli profiling operation taskId=create-starter-db
{
    "Max": 50,
    "Min": 50,
    "Avg": 50,
    "StdDeviation": 0,
    "StartDate": "2020-12-12",
    "EndDate": "2021-01-11",
    "UsedTimeUnit": "Minutes",
    "operationId": "create-starter-db",
    "status": 200,
    "op": "profiling_operation_put",
    "status-detail": "success"
}
bash-4.2$ 
bash-4.2$ ecracli profiling operation taskId=stop-starter-db
Error: PUT request to http://den00ucw.us.oracle.com:9001/ecra/endpoint/profiling/operation/stop-starter-db failed
HTTP Error 500: Internal Server Error
b'{"status":500,"message":"Operation  stop-starter-db does not exist","status-detail":"Operation  stop-starter-db does not exist","op":"profiling_operation_put"}'
bash-4.2$ 
bash-4.2$ 
bash-4.2$ ecracli profiling operation taskId=delete-starter-db
{
    "Info": "No info is available for delete-starter-db",
    "StartDate": "2020-12-12",
    "EndDate": "2021-01-11",
    "UsedTimeUnit": "Minutes",
    "operationId": "delete-starter-db",
    "status": 200,
    "op": "profiling_operation_put",
    "status-detail": "success"
}
bash-4.2$ 


INFRASTRUCTURE

Usage:
    ./ecracli profiling infrastructure ceiocid=<ceiocid> [start_date=<YYYY-MM-DD>] [end_date=<YYYY-MM-DD>] [interval=<DAYSINTERVAL>] 

Purpose:
    It will give a report for specific given infrastructure. For example, timmings for create-starter-db on ecs_wf_request table. 
    
    -The parameters are mutually exclusive - if start/end date are provided interval should not be provided and vice versa
    -If start-end dates provided are non valid will use default values for corresponding value
    
Arguments:
        Interval    : if non value is provided profiling will retrieve information since 365 days in the past from current date
        Start_date  : Start date default value is 365 days in past from current date
        End_date    : Default value will be current date
        ceiocid     : Specific the ceiocid to show information
        
        
Examples:
bash-4.2$ ecracli profiling infrastructure ceiocid=testdbsystem2mvm
{
    "Max": 50,
    "Min": 50,
    "Avg": 50,
    "StdDeviation": 0,
    "StartDate": "2020-12-12",
    "EndDate": "2021-01-11",
    "UsedTimeUnit": "Minutes",
    "operationId": "create-starter-db",
    "status": 200,
    "op": "profiling_operation_put",
    "status-detail": "success"
}
bash-4.2$ 
bash-4.2$ ecracli profiling infrastructure ceiocid=testdbsystem2mvm
Error: PUT request to http://den00ucw.us.oracle.com:9001/ecra/endpoint/profiling/infrastructure/stop-starter-db failed
HTTP Error 500: Internal Server Error
b'{"status":500,"message":"infrastructyre does not exist","status-detail":"infrastructure does not exist","op":"profiling_operation_put"}'

________________________________________________________________________________
compliance:
1) scan
Usage:
    ./ecracli compliance scan (show|enable|disable) [host=(all|hostname)] [rack=rackname] [host_type=(dom0|domu|cell)]
Purpose:
    Enable or disable AEP/CM scan for the host, or show current scan setting
Examples:
    ecra> compliance scan enable host=all
    * PUT http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/aepcm_scan_config
    * {
      "op": "cmpl_scan_cfg_put",
      "status": 200,
      "status-detail": "success"
    }
    ecra> compliance scan show rack=scas07adm0304clu1 host_type=cell,dom0
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/aepcm_scan_config?host=all&host_type=cell%2Cdom0
    * {
      "op": "cmpl_scan_cfg_get",
      "scas07adm03.us.oracle.com": {
        "enabled": true
      },
        ...
      "scas07celadm06.us.oracle.com": {
        "enabled": true
      },
      "status": 200,
      "status-detail": "success"
    }

2) default_scan
Usage:
    ./ecracli compliance default_scan (show|enable|disable)
Purpose:
    Set default scan status.
    If the default is enabled, when a new rack is registered, AEP/CM scan will be automatically enabled
Examples:
    ecra> compliance default_scan show
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/properties/COMPLIANCE_AEP_CM
    * {
      "op": "property_get",
      "property_value": "enabled",
      "status": 200,
      "status-detail": "success"
    }

3) base_cfg
Usage:
    ./ecracli compliance base_cfg update justification=justification [host=(all|hostname)] [rack=rackname] [host_type=(dom0|domu|cell)]
Purpose:
    Set baseline configuration from current system configuration
Examples:
    ecra> compliance base_cfg update justification="https://oraclecorp.com/jira/browse/CFGM-12345" host=all host_type=dom0,domu
    * PUT http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/baseline_config
    * {
      "baseline changed": [
        "scas07adm03.us.oracle.com",
        "scas07adm04.us.oracle.com"
      ],
      "baseline update failed": {
        "scas07adm03vm01.us.oracle.com": "AEP/CM is not enabled in scas07adm03vm01.us.oracle.com",
        "scas07adm04vm01.us.oracle.com": "AEP/CM is not enabled in scas07adm04vm01.us.oracle.com"
      },
      "op": "cmpl_base_cfg_put",
      "status": 200,
      "status-detail": "success"
    }

4) cfg_status
Usage:
    ./ecracli compliance cfg_status show host=hostname cfg_type=(all|config types)
Purpose:
    Show current configuration status of a host
Examples:
    ecra> compliance cfg_status show host=scas07adm03vm01.us.oracle.com cfg_type=aide_config
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/host_config_status/scas07adm03vm01.us.oracle.com/host_access_control
    * {
      "op": "cmpl_host_cfg_get",
      "scas07adm03vm01.us.oracle.com": {
        "host_access_control": {
          "baseline_config": {
            "banner": {
              "status": "not set"
            },
            "idle-timeout": {
              "shell": "14400",
              "ssh": "600"
            },
            "pam-auth": {
              "deny": "5",
              "lock-time": "600"
            }
          },
          "current_config": "same with baseline"
        }
      },
      "status": 200,
      "status-detail": "success"
    }

5) cfg_history
Usage:
    ./ecracli compliance cfg_history list host=(all|hostname) [search_from=from_time] [search_to=to_time]
    ./ecracli compliance cfg_history show change_id=id
Purpose:
    Result of list command will have the brief metadata of the changes
        host id
        config type
        change type (baseline change or actual config change)
        timestamp (This is not the exact change timestamp, but the time when CM detected the change)
        change id (show command will use this)
        description
    Result of show command will show further information of a change
        old configuration data
        new configuration data
Examples:
    ecra> compliance cfg_history list host=scas07adm04.us.oracle.com search_to=2019-08-01T07:14:00+09:00
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/config_change_history?search_to=2019-08-01T07%3A14%3A00%2B09%3A00&host=scas07adm04.us.oracle.com
    * {
      "changes": [
        {
          "change_id": 49,
          "change_type": "baseline_change",
          "config_type": "ntp_config",
          "description": "Baseline update: https://oraclecorp.com/jira/browse/CFGM-12345",
          "host_id": "scas07adm04.us.oracle.com_2019-08-01-064346",
          "timestamp": "2019-08-01 07:13:23.473"
        },
        ......
        {
          "change_id": 54,
          "change_type": "config_change",
          "config_type": "installed_sw",
          "description": "Baseline update: https://oraclecorp.com/jira/browse/CFGM-12345",
          "host_id": "scas07adm04.us.oracle.com_2019-08-01-064346",
          "timestamp": "2019-08-01 07:13:23.473"
        }
      ],
      "op": "cmpl_cfg_chg_history_get",
      "status": 200,
      "status-detail": "success"
    }

    ecra> compliance cfg_history show change_id=49
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/config_change_history/49
    * {
      "change_id": 49,
      "change_type": "baseline_change",
      "config_type": "ntp_config",
      "description": "Baseline update: https://oraclecorp.com/jira/browse/CFGM-12345",
      "host_id": "scas07adm04.us.oracle.com_2019-08-01-064346",
      "new_config": {
        "/etc/ntp.conf": {
          "checksum": "ea4dc12e0248a8b72cf7311900624a295389c3dea0a2e610d757e1a413081768",
          "content": "# For more information about this file, see the man pages\n# ntp.conf(5), ntp_acc(5), ntp_auth(5), ntp_clock(5), ntp_misc(5), ntp_mon(5).\n\ndriftfile /var/lib/ntp/drift\n\n# Permit time synchronization with our time source, but do not\n# permit the source to query or modify the service on this system.\nrestrict default kod nomodify notrap nopeer noquery\nrestrict -6 default kod nomodify notrap nopeer noquery\n\n# Permit all access over the loopback interface.  This could\n# be tightened as well, but to do so would effect some of\n# the administrative functions.\nrestrict 127.0.0.1\nrestrict -6 ::1\n\n# Hosts on local network are less restricted.\n#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap\n\n# Use public servers from the pool.ntp.org project.\n# Please consider joining the pool (http://www.pool.ntp.org/join.html).\n\n#broadcast 192.168.1.255 autokey\t# broadcast server\n#broadcastclient\t\t\t# broadcast client\n#broadcast 224.0.1.1 autokey\t\t# multicast server\n#multicastclient 224.0.1.1\t\t# multicast client\n#manycastserver 239.255.254.254\t\t# manycast server\n#manycastclient 239.255.254.254 autokey # manycast client\n\n# Enable public key cryptography.\n#crypto\n\nincludefile /etc/ntp/crypto/pw\n\n# Key file containing the keys and key identifiers used when operating\n# with symmetric key cryptography.\nkeys /etc/ntp/keys\n\n# Specify the key identifiers which are trusted.\n#trustedkey 4 8 42\n\n# Specify the key identifier to use with the ntpdc utility.\n#requestkey 8\n\n# Specify the key identifier to use with the ntpq utility.\n#controlkey 8\n\n# Enable writing of statistics records.\n#statistics clockstats cryptostats loopstats peerstats\n\n# Disable the monitoring facility to prevent amplification attacks using ntpdc\n# monlist command when default restrict does not include the noquery flag. See\n# CVE-2013-5211 for more details.\n# Note: Monitoring will not be disabled with the limited restriction flag.\ndisable monitor\n#### BEGIN Generated by Exadata. DO NOT MODIFY ####\n# 12650539 20014574\nrestrict default kod noquery nomodify notrap nopeer\nrestrict 10.68.0.41 mask 255.255.255.255 nomodify notrap noquery\nserver 10.68.0.41 prefer iburst burst minpoll 4 maxpoll 4\nrestrict 10.68.0.42 mask 255.255.255.255 nomodify notrap noquery\nserver 10.68.0.42 iburst burst minpoll 4 maxpoll 4\n#restrict 10.132.0.121 mask 255.255.255.255 nomodify notrap noquery\n#server 10.132.0.121 prefer iburst burst minpoll 4 maxpoll 4\n#restrict 10.132.0.122 mask 255.255.255.255 nomodify notrap noquery\n#server 10.132.0.122 iburst burst minpoll 4 maxpoll 4\n#### END Generated by Exadata ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ###
#\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n#### BEGIN Generated for OCI Compilance. DO NOT MODIFY ####\nstatsdir /var/log/ntpstats\nstatistics loopstats\nfilegen loopstats file loopstats type day enable\n#### END Generated for OCI Compliance ####\n",
          "gid": 0,
          "permission": "0640",
          "uid": 0
        }
      },
      "op": "cmpl_cfg_chg_history_id_get",
      "status": 200,
      "status-detail": "success",
      "timestamp": "2019-08-01 07:13:23.473"
    }

6) report_oss_namespace
Usage:
    ecracli compliance report_oss_namespace (show|set) [value=NAMESPACE]
Purpose:
    Show or set Object Storage namespace for AEP/CM reporting
Examples:
    ecra> compliance report_oss_namespace show
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/properties/COMPLIANCE_SCAN_REPORT_OSS_NAMESPACE
    * {
      "op": "property_get",
      "property_value": "intexadatateam",
      "status": 200,
      "status-detail": "success"
    }

7) auto_revert
Usage:
    ./ecracli compliance auto_revert (show|enable|disable)
Purpose:
    Enable or disable auto-revert
Examples:
    ecra> compliance auto_revert show
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/auto_revert_config
    * {
      "enable": true,
      "op": "cmpl_auto_revert_get",
      "status": 200,
      "status-detail": "success"
    }

8) status
Usage:
    ./ecracli compliance status show
Purpose:
    Show all non-compliant statuses
Examples:
    ecra> compliance status show
    * GET http://den02dal.us.oracle.com:9001/ecra/endpoint/compliance/status
    * {
      "aep_cm_disabled": [
        "scas07adm04"
      ],
      "aep_cm_paused": [
        "scas07celadm04",
        "scas07celadm05",
        "scas07celadm06"
      ],
      "aep_issues": [
        {
          "asset_id": "1438NM103U",
          "component": "AV",
          "error_detail": "Last modified time of /var/log/clamav/clamav.log in scas07adm03.us.oracle.com is not within a run interval (12240minutes)",
          "hostname": "scas07adm03",
          "last_check_time": "2019-08-29 01:38:35.311",
          "last_status_change_time": "2019-08-29 01:38:35.311",
          "status": "false"
        },
        {
          "asset_id": "1438NM103U",
          "component": "FIM",
          "error_detail": "Failed to read contents of /var/log/aide/aide.log from scas07adm03.us.oracle.com",
          "hostname": "scas07adm03",
          "last_check_time": "2019-08-29 01:38:35.559",
          "last_status_change_time": "2019-08-29 01:38:35.559",
          "status": "false"
        }
      ],
      "asset_id_not_initialized": [],
      "cm_issues": [
        {
          "asset_id": "1438NM103U",
          "changed_configs": [
            "sshd_config"
          ],
          "hostname": "scas07adm03"
        }
      ],
      "op": "cmpl_host_cfg_get",
      "status": 200,
      "status-detail": "success"
    }

8) avfim
Usage:
    ./ecracli compliance avfim run [host=(all|hostname)] [rack=(all|rackname)] [component=(all|av|fim)]
Purpose:
    Run AV/FIM on specific host or rack
Examples:
    ecra> compliance avfim run host=scas07adm03.us.oracle.com
    * params: {'host': 'scas07adm03.us.oracle.com'}
    * PUT http://slc14rsa.us.oracle.com:9001/ecra/endpoint/compliance/avfim
    * {
      "op": "cmpl_avfim_put",
            "status": 200,
            "status-detail": "success"
    }
________________________________________________________________________________
##########
#Metadata# 
##########
This feature will allow the users to select and update values of the allowed tables using ecracli.

    1)tables
        Ussage:
            ./ecracli metadata tables
        Purpose:
            Show the list of allowed tables
        Examples:
            ecra> metadata tables
            * request
            * pod
            * atpscheduledrack
            * atpobservermapping
            * exaunitdetail
            * database
            * asyncalls
            * atpresourceterraform
            * atpcustomertenancy
            * atpjoblock
            * atpsubnetdslmap
            * atpnetworkterraform
            * atpsubnetpool
            * atpobservervminfo
            * registry
            * rack
            * atpconfigproperties
            * atpjobmetadata
            * atpwhitelistrule
            * exaunitinfo
            * atppreprovdetails
            * atpsubnetocid
            * atpjobgroup
            * atpvnicinfo
            * atpnetworkpayload
            * service
            * pluggabledatabase
            * atptenantsubnet

    2)select
        Ussage:
            ./ecracli metadata select table=<TABLE> select=<COLUMS> where=<CONDITION> values=<VALUES>
            TABLE:     Table of the list present in metadata tables(1)
            COLUMNS:   Valid columns for the table selected
            CONDITION: Condition that the values should have in order to be selected
            VALUES:    Values for every condition
        Purpose:
            Select the values given in the select argument for the table specified for the conditions in the where argument.
        Examples:
            Single condition:
                ecra> metadata select table=rack select="DOM0,DOMU,exaunitid,status,name" where="model=?" values='X8M-2'
                * 1
                * DOM0            : iad103709exdd013iad103709exdd012
                * DOMU            : exacompute-iad1-d2-5c76a491-2758-4b16-803d-8796b14ce0a1-clu01-d2-cl_cluster_name
                * exaunitid       : 6      
                * status          : PROVISIONED
                * name            : exacompute-iad1-d2-5c76a491-2758-4b16-803d-8796b14ce0a1-clu01
                * 2
                * DOM0            : iad103714exdd001iad103714exdd002
                * DOMU            : iad103714_cluster_name_14_pk
                * status          : NEW    
                * name            : iad103714exd-d0-01-02-cl-01-03-clu01    
            Multiple conditions:
                ecra> metadata select table=rack select="DOM0,DOMU,exaunitid,status" where="model=? and status=?" values='X8M-2','PROVISIONED'
                * 1
                * DOM0            : iad103709exdd013iad103709exdd012
                * DOMU            : exacompute-iad1-d2-5c76a491-2758-4b16-803d-8796b14ce0a1-clu01-d2-cl_cluster_name
                * exaunitid       : 6      
                * status          : PROVISIONED

    3)update
        Ussage:
            ./ecracli metadata update table=<TABLE> set=<CONDITIONS> pk=<PK>
            TABLE:      Table of the list present in metadata tables(1)
            CONDITIONS: Conditions that the value should have in order to be updated. Also have to provided the PK, that's the value that is used to select the row, and the other conditions will be updated, based on the PK provided.
            PK:         Values that are the primary key of the table
        Purpose:
            Update the values given in the set argument for the table and PK specified.
        Examples:
            ecra> metadata update table=rack set="status='NEW'" pk="name='iad103714exd-d0-01-02-cl-01-03-clu01'"
            * {"status": 200, "op": "ecra_sql", "status-detail": "success"}
________________________________________________________________________________

OperatorControl:
CLI is only for testing purpose

create_user:
Usage : ecra> opctl create_user <json_path>

Purpose:
    Create an access restricted user

Arguments:
    json_path : Path to the JSON file with containing create user parameters

Examples:
bash-4.2$ cat /tmp/ecracli_json/create_user.json
{
    "idemtoken": "921a9e83-860b-4cf4-9226-d784a9cecb4c",
    "accessRequestId":"100",
    "auditType":"command-audit",
    "exaOcid":"EXISTING.PUBLIC.CLOUD.EXADATA",
    "acpRequestList":["DOM0_ACP_BASIC_DEFINITION.txt"],
    "sshKey":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCw",
    "motd": "just another string",
    "parURL":"http://localhost"
}

ecra> opctl create_user json_path=/tmp/ecracli_json/create_user.json
* {"status": 202, "exaunit_id": 1, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://slc14rgt.us.oracle.com:9001/ecra/endpoint/statuses/921a9e83-860b-4cf4-9226-d784a9cecb4c", "op_start_time": "2020-05-19T14:38:47+0000", "message": "processing", "op": "opctl_adduser"}
ecra> status 921a9e83-860b-4cf4-9226-d784a9cecb4c
* {"status": 200, "remote_user": "ops", "exaunit_id": 1, "status-detail": "success", "start_time": "2020-05-19T14:38:47+0000", "status_uri": "http://slc14rgt.us.oracle.com:9001/ecra/endpoint/statuses/921a9e83-860b-4cf4-9226-d784a9cecb4c", "exa_ocid": "EXISTING.PUBLIC.CLOUD.EXADATA", "statusinfo": "user created", "end_time": "2020-05-19T14:39:08+0000", "error": "0", "ec_details": "{\"username\": \"72f7db3299de11eaadc8fa163e1fd4e5\", \"status\": 200, \"createDate\": \"2020-05-19 07:39:00,2020-05-19 07:39:01\", \"accessRequestId\": \"100\"}", "message": "Done", "op": "CREATE", "ecra_server": "EcraServer1", "last_heartbeat_update": "2020-05-19T14:38:47+0000", "error_str": "No Errors"}

delete_user:
Usage : opctl delete_user <json_path>

Purpose:
    Delete an access restricted user

Arguments:
    json_path : Path to the JSON file with containing delete user parameters

Examples:
bash-4.2$ cat /tmp/ecracli_json/delete_user.json
{
    "idemtoken": "9e7c3ddf-835d-414e-a3e1-9ece999483a4",
    "accessRequestId": "100",
    "exaOcid":"EXISTING.PUBLIC.CLOUD.EXADATA",
    "username": "72f7db3299de11eaadc8fa163e1fd4e5",
    "reason":"timeout"
}

ecra> opctl delete_user json_path=/tmp/ecracli_json/delete_user.json
* DELETE http://slc14rgt.us.oracle.com:9001/ecra/endpoint/exadata/EXISTING.PUBLIC.CLOUD.EXADATA/opctl/user/100
* {"status": 202, "exaunit_id": 2, "est_op_end_time": "", "status-detail": "processing", "status_uri": "http://slc14rgt.us.oracle.com:9001/ecra/endpoint/statuses/9e7c3ddf-835d-414e-a3e1-9ece999483a4", "op_start_time": "2020-05-15T17:47:32+0000", "message": "processing", "op": "opctl_removeuser"}
ecra> status 9e7c3ddf-835d-414e-a3e1-9ece999483a4
* {"status": 202, "atp_enabled": "N", "remote_user": "ops", "exaunit_id": 2, "est_op_end_time": "", "start_time": "2020-05-15T17:47:32+0000", "status_uri": "http://slc14rgt.us.oracle.com:9001/ecra/endpoint/statuses/9e7c3ddf-835d-414e-a3e1-9ece999483a4", "exa_ocid": "EXISTING.PUBLIC.CLOUD.EXADATA", "op_start_time": "2020-05-15T17:47:42+0000", "message": "Pending", "ecra_server": "EcraServer1", "last_heartbeat_update": "2020-05-15T17:47:32+0000", "op": "DELETE"}
ecra> status 9e7c3ddf-835d-414e-a3e1-9ece999483a4
* {"status": 200, "atp_enabled": "N", "remote_user": "ops", "exaunit_id": 2, "status-detail": "success", "start_time": "2020-05-15T17:47:32+0000", "status_uri": "http://slc14rgt.us.oracle.com:9001/ecra/endpoint/statuses/9e7c3ddf-835d-414e-a3e1-9ece999483a4", "exa_ocid": "EXISTING.PUBLIC.CLOUD.EXADATA", "statusinfo": "user deleted", "end_time": "2020-05-15T17:47:47+0000", "error": "0", "ec_details": "{\"username\": \"72f7db3299de11eaadc8fa163e1fd4e5\", \"status\": 200, \"accessRequestId\": \"100\", \"deleteDate\": \"2020-05-15 10:47:43,2020-05-15 10:47:45\"}", "message": "Done", "op": "DELETE", "ecra_server": "EcraServer1", "last_heartbeat_update": "2020-05-15T17:47:32+0000", "error_str": "No Errors"}

________________________________________________________________________________
###########
#Analytics#
###########
The purpose of this feature is get some analysis for some operation in ECRA and also analyze some of the element like Racks.

1) Analyze 
    Ussage:
         analytics analyze operation=<OPERATION> [interval=<MINUTES>] [raw=<TRUE|FALSE>]
         Values:
            OPERATION   : The name of the operation that you want to fetch the information
            MINUTES     : Minutes to fetch the registries in this range of time, default: 60 minutes
            *For raw, value is by default FALSE
    Purpose:
        This endpoint will return the quantity of success/failed requests of an operation for the given time.   
    Examples:
        ecra> analytics analyze operation=capacity_reserve interval=60000
        * {
            "success": "2",
            "failed": "1",
            "status": 200,
            "op": "analytics_post",
            "status-detail": "success"
        }
        ecra> analytics analyze operation=capacity_reserve interval=60000 raw=true
        * {"success": "2", "failed": "1", "status": 200, "op": "analytics_post", "status-detail": "success"}

        ecra> analytics analyze operation=capacity_reserve
        * {
            "success": "0",
            "failed": "0",
            "status": 200,
            "op": "analytics_post",
            "status-detail": "success"
        }

2) History 
    Ussage:
        analytics history [rackname=<RACKNAME>] [inventoryid=<INVENTORYID>] [exadatainfrastructure=<EXADATAINFRASTRUCTURE>] [start_date=<YYYY-MM-DD>] [end_date=<YYYY-MM-DD>] [interval=<DAYSINTERVAL>]
            Values:
                RACKNAME    : The name of the rack that will be used for the report
                INVENTORYID : The id of the inventory that wll be used for the report
                EXADATAINFRASTRUCTURE : The exadatainfrastructure that wll be used for the report
                The user should provide just one of the previous values, and always provide at least one of them.
                Interval    : if non value is provided profiling will retrieve information since 365 days in the past from current date
                Start_date  : Start date default value is 365 days in past from current date
                End_date    : Default value will be current date
    Purpose:
        Based on the rack name or inventory id will show the history of the rack based on async_calls and ecs_request   
    Examples:
       ecra> analytics history rackname=slcqab02adm0506clu6 start_date=2019-11-20 end_date=2020-04-27 raw=true
* {"result": [{"start_time": "2019-11-20T19:11:50+0000", "end_time": "2019-11-20T19:15:02+0000", "operation": "create-service", "id": "c32cfccf-fdd3-426c-8c53-76916d1e86c6", "status": "200", "exaunit_id": 3, "resource_id": "slcqab02adm0506clu6"}, {"start_time": "2019-11-20T21:23:10+0000", "end_time": "2019-11-20T21:24:02+0000", "operation": "create-starter-db", "id": "a5f593ca-de19-4605-b2e0-f48f6abd8cd9", "status": "200", "exaunit_id": 3, "resource_id": "db5235f2"}, {"start_time": "2019-11-20T22:04:54+0000", "end_time": "2019-11-20T22:06:02+0000", "operation": "delete-addi-db", "id": "4f9819ed-ad20-4d72-a6a0-c996925d2f8c", "status": "200", "exaunit_id": 3, "resource_id": "db5235f2"}, {"start_time": "2019-11-20T22:06:29+0000", "end_time": "2019-11-20T22:07:02+0000", "operation": "create-starter-db", "id": "7082c6fe-1eac-40c4-8245-006a16bd08df", "status": "200", "exaunit_id": 3, "resource_id": "db2ce65f"}, {"start_time": "2019-11-20T22:08:34+0000", "end_time": "2019-11-20T22:09:02+0000", "operation": "delete-addi-db", "id": "0ec7b0c9-1376-4662-8ad9-40a29a70e706", "status": "200", "exaunit_id": 3, "resource_id": "db2ce65f"}, {"start_time": "2019-11-21T16:08:20+0000", "end_time": "2019-11-21T16:09:02+0000", "operation": "create-starter-db", "id": "84100474-d413-47b4-82a9-105f02758cbf", "status": "200", "exaunit_id": 3, "resource_id": "db411a75"}, ........... 

        ecra> analytics history rackname=slcqab02adm0506clu6 start_date=2019-11-20 end_date=2020-04-27
        * 1
        * start_time      : 2019-11-20T19:11:50+0000
        * end_time        : 2019-11-20T19:15:02+0000
        * operation       : create-service
        * id              : c32cfccf-fdd3-426c-8c53-76916d1e86c6
        * status          : 200     
        * exaunit_id      : 3       
        * resource_id     : slcqab02adm0506clu6
        * 2
        * start_time      : 2019-11-20T21:23:10+0000
        * end_time        : 2019-11-20T21:24:02+0000
        * operation       : create-starter-db
        * id              : a5f593ca-de19-4605-b2e0-f48f6abd8cd9
        * status          : 200     
        * exaunit_id      : 3       
        * resource_id     : db5235f2
        * 3
        * start_time      : 2019-11-20T22:04:54+0000
        * end_time        : 2019-11-20T22:06:02+0000
        * operation       : delete-addi-db
        * id              : 4f9819ed-ad20-4d72-a6a0-c996925d2f8c
        * status          : 200     
        * exaunit_id      : 3       
        * resource_id     : db5235f2
        * 4
        * start_time      : 2019-11-20T22:06:29+0000
        * end_time        : 2019-11-20T22:07:02+0000
        * operation       : create-starter-db
        * id              : 7082c6fe-1eac-40c4-8245-006a16bd08df
        * status          : 200     
        * exaunit_id      : 3       
        * resource_id     : db2ce65f
        ......

        ecra> analytics history inventoryid=slcqab02adm0506clu6 start_date=2019-11-20 end_date=2020-04-27 raw=true
* {"result": [{"start_time": "2019-11-20T19:11:50+0000", "end_time": "2019-11-20T19:15:02+0000", "operation": "create-service", "id": "c32cfccf-fdd3-426c-8c53-76916d1e86c6", "status": "200", "exaunit_id": 3, "resource_id": "slcqab02adm0506clu6", "state": "DELETED"}, {"start_time": "2020-03-18T22:50:03+0000", "end_time": "2020-03-18T22:58:15+0000", "operation": "create-service", "id": "446f9b3a-7be3-4562-91df-899a7dccbe73", "status": "500", "exaunit_id": 81, "resource_id": "slcqab02adm0506clu6", "state": "DELETED"}, {"start_time": "2020-04-27T21:09:45+0000", "end_time": "2020-04-27T21:17:40+0000", "operation": "delete-pod", "id": "6d574aef-bec5-49de-a130-f89f61f3c282", "status": "200", "exaunit_id": 81, "resource_id": "slcqab02adm0506clu6", "state": "DELETED"}, {"start_time": "2020-04-27T21:24:12+0000", "end_time": "2020-04-27T21:24:34+0000", "operation": "create-service", "id": "c821a0f2-b21c-456f-9a42-baad2b965ed1", "status": "500", "exaunit_id": 122, "resource_id": "slcqab02adm0506clu6", "state": "DELETED"}], "status": 200, "op": "analytics_history_post", "status-detail": "success"}

        ecra> analytics history inventoryid=slcqab02adm0506clu6 start_date=2019-11-20 end_date=2020-04-27
        * 1
        * start_time      : 2019-11-20T19:11:50+0000
        * end_time        : 2019-11-20T19:15:02+0000
        * operation       : create-service
        * id              : c32cfccf-fdd3-426c-8c53-76916d1e86c6
        * status          : 200     
        * exaunit_id      : 3       
        * resource_id     : slcqab02adm0506clu6
        * state           : DELETED 
        * 2
        * start_time      : 2020-03-18T22:50:03+0000
        * end_time        : 2020-03-18T22:58:15+0000
        * operation       : create-service
        * id              : 446f9b3a-7be3-4562-91df-899a7dccbe73
        * status          : 500     
        * exaunit_id      : 81      
        * resource_id     : slcqab02adm0506clu6
        * state           : DELETED 
        * 3
        * start_time      : 2020-04-27T21:09:45+0000
        * end_time        : 2020-04-27T21:17:40+0000
        * operation       : delete-pod
        * id              : 6d574aef-bec5-49de-a130-f89f61f3c282
        * status          : 200     
        * exaunit_id      : 81      
        * resource_id     : slcqab02adm0506clu6
        * state           : DELETED 
        * 4
        * start_time      : 2020-04-27T21:24:12+0000
        * end_time        : 2020-04-27T21:24:34+0000
        * operation       : create-service
        * id              : c821a0f2-b21c-456f-9a42-baad2b965ed1
        * status          : 500     
        * exaunit_id      : 122     
        * resource_id     : slcqab02adm0506clu6
        * state           : DELETED 
        ......

        ecra> analytics history exadatainfrastructure=testdbsystem3
        * 1
        * operation       : elastic_cei_delete
        * start_time      : 2022-07-04T21:37:21+0000
        * end_time        : 2022-07-04T21:37:21+0000
        * 2
        * operation       : elastic_cei_delete
        * start_time      : 2022-07-04T22:31:30+0000
        * end_time        : 2022-07-04T22:31:30+0000
        * 3
        * operation       : elastic_cei_delete
        * start_time      : 2022-07-04T22:43:51+0000
        * end_time        : 2022-07-04T22:43:52+0000
        * 4
        * operation       : elastic_cei_post
        * start_time      : 2022-07-04T22:45:07+0000
        * end_time        : 2022-07-04T22:45:07+0000
        * idemtoken       : a1b78c2d-f679-4395-b1a6-4ddd6abe529f
        * 5
        * operation       : elastic_rack_reserve
        * start_time      : 2022-07-05T00:16:28+0000
        * end_time        : 2022-07-05T00:16:29+0000
        [...]
        * 22
        * rackname        : iad1-d4-cl4-6e227239-83d6-45ed-bbcb-bfaf68792462-clu01
        * operation       : elastic_cei_put
        * start_time      : 2022-07-06T19:14:19+0000
        * end_time        : 2022-07-06T19:14:20+0000
        * idemtoken       : accdcbc1-8ff0-4f28-a0b2-6b5462453072
        * 23
        * operation       : cei_storage_post
        * start_time      : 2022-07-06T20:05:42+0000
        * end_time        : 2022-07-06T20:05:42+0000
        * idemtoken       : a2ceaf0f-ec57-472d-8040-d8b390b4b7f7
        * 24
        * exaunitid       : 284     
        * operation       : reshape-service
        * start_time      : 2022-07-07T01:04:06+0000
        * end_time        : 2022-07-07T01:04:06+0000
        * idemtoken       : 901830f3-8121-4821-85a6-ea039ae6ec61

3) Stats 
    Ussage:
        analytics stats operation=<OPERATION> [start_date=<YYYY-MM-DD>] [end_date=<YYYY-MM-DD>] [interval=<DAYSINTERVAL>]
            Values:
                OPERATION   : The name of the operation that you want to fetch the information. (Use all, to get all possible operations,see example)
                Interval    : if non value is provided profiling will retrieve information since 365 days in the past from current date
                Start_date  : Start date default value is 365 days in past from current date
                End_date    : Default value will be current date
    Purpose:
        This endpoint will show you some statistics similar to profiling    
    Examples:
        ecra> analytics stats operation=analytics_post
        * {
            "Max": 2,
            "Min": 0,
            "Avg": 0,
            "StdDeviation": 0.57,
            "status": 200,
            "op": "analytics_stats_post",
            "status-detail": "success"
        }
        ecra> analytics stats operation=analytics_post raw=true
        * {"Max": 2, "Min": 0, "Avg": 0, "StdDeviation": 0.57, "status": 200, "op": "analytics_stats_post", "status-detail": "success"}

        ecra> analytics stats operation=analytics_post interval=8
        * {
            "Max": 2,
            "Min": 0,
            "Avg": 0,
            "StdDeviation": 0.61,
            "status": 200,
            "op": "analytics_stats_post",
            "status-detail": "success"
        }

        ecra> analytics stats operation=all
        * {
            "result": [
                {
                    "operation": "statuses_get"
                },
                {
                    "operation": "delete-pod"
                },
                {
                    "operation": "exaunit_list"
                },
                {
                    "operation": "property_put"
                },
                {
                    "operation": "idem_token_new"
                },
                {
                    "operation": "rack_update"
                },
                {
                    "operation": "preprov_scheduled_racks_list"
                }
                ...
4) CS Config Check
    Usage:
        analytics csconfigcheck exaunitid=<EXAUNITID> [mandatory=<MANDATORY> result=<RESULT>]
            Values:
                EXAUNITID   : ID that belongs to existing exaunit
                MANDATORY   : Filter in case check is mandatory or not. Valid values (true or false)
                RESULT      : Filter checks result. Valid values (pass or error)
    Purpose:
        This endpoint provides information about validations in some components
    Example:
	    ecra> analytics csconfigcheck exaunitid=-1
		* {
		    "result": {
		        "domU_checks": {
		            "scaqab10adm01vm03.us.oracle.com": {
		                "filesystem": [
		                    {
		                        "expected": "1.1T",
		                        "name": "/acfs01",
		                        "metric": "T"
		                    },
		                    {
		                        "expected": "71G",
		                        "name": "/run/user/2000",
		                        "metric": "G"
		                    }
		               	]
		                "command": [
		                	{
		                        "arguments": "/sys/class/net/bondeth1/mtu",
		                        "command": "/bin/cat",
		                        "expected": "<REPLACE_0>",
		                        "expected_return_code": "0",
		                        "name": "cat_bondeth1"
		                    },
		                    {
		                        "arguments": "/sys/class/net/bondeth2/mtu",
		                        "command": "/bin/cat",
		                        "expected": "<REPLACE_0>",
		                        "expected_return_code": "0",
		                        "name": "cat_bondeth2"
		                    }
		                ]
		            }
		        }
		    }
		}
        #Checks that are mandatory (pass or error)
         ecra> analytics csconfigcheck exaunitid=999 mandatory=true
        * {
            "result": {
                "domU_checks": {
                    "c31602c-uxi4c1.subnet5.x8vcndev.oraclevcn.com": {
                        "filesystem": [
                            {
                                "current_value": "15G",
                                "expected": "15G",
                                "name": "/",
                                "result": "pass",
                                "metric": "G"
                            },
                            {
                                "current_value": "250G",
                                "expected": "250G",
                                "name": "/u01",
                                "result": "pass",
                                "metric": "G"
                            },
                            {
                                "current_value": "763G",
                                "expected": "763G",
                                "name": "/u02",
                                "result": "pass",
                                "metric": "G"
                            },
                            {
                                "current_value": "509M",
                                "expected": "509M",
                                "name": "/boot",
                                "result": "pass",
                                "metric": "M"
                            },
                            {
                                "current_value": "50G",
                                "expected": "50G",
                                "name": "$GRID_HOME",
                                "result": "pass",
                                "metric": "G"
                            },
            ...
            ... 
        mandatory=true and result=error
        ecra> analytics csconfigcheck exaunitid=999 mandatory=true result=error
        * {
            "result": {
                "domU_checks": {
                    "c31602c-uxi4c1.subnet5.x8vcndev.oraclevcn.com": {
                        "command": [
                            {
                                "arguments": "getenv nodeapps -envs ORA_NET_DEEP_CHECK -viponly",
                                "command": "/u01/app/19.0.0.0/grid/bin/srvctl",
                                "current_return_code": "0",
                                "expected": "ORA_NET_DEEP_CHECK=1",
                                "current_value": "['VIP environment variables:\\n', 'c31602c-uxi4c1-vip.subnet5.x8vcndev.oraclevcn.com:\\n', 'ORA_NET_DEEP_CHECK=10\\n', 'c31602c-uxi4c2-vip.subnet5.x8vcndev.oraclevcn.com:\\n', 'ORA_NET_DEEP_CHECK=10\\n']",
                                "expected_return_code": "0",
                                "name": "srvctl_ORA_NET_DEEP_CHECK",
                                "result": "fail"
                            },
                            {
                                "arguments": "getenv nodeapps -envs ORA_NET_PING_RETRIES -viponly",
                                "command": "/u01/app/19.0.0.0/grid/bin/srvctl",
                                "current_return_code": "1",
                                "expected": "ORA_NET_PING_RETRIES=8",
                                "current_value": "['VIP environment variables:\\n', 'c31602c-uxi4c1-vip.subnet5.x8vcndev.oraclevcn.com:\\n', 'PRKF-1128 : Environment variable ORA_NET_PING_RETRIES is not defined.\\n']",
                                "expected_return_code": "0",
                                "name": "srvctl_ORA_NET_PING_RETRIES",
                                "result": "fail"
                            }
                        ]
                    },
                    "c31602c-uxi4c2.subnet5.x8vcndev.oraclevcn.com": {
                        "command": [
                            {
                                "arguments": "getenv nodeapps -envs ORA_NET_DEEP_CHECK -viponly",
                                "command": "/u01/app/19.0.0.0/grid/bin/srvctl",
                                "current_return_code": "0",
                                "expected": "ORA_NET_DEEP_CHECK=1",
                                "current_value": "['VIP environment variables:\\n', 'c31602c-uxi4c1-vip.subnet5.x8vcndev.oraclevcn.com:\\n', 'ORA_NET_DEEP_CHECK=10\\n', 'c31602c-uxi4c2-vip.subnet5.x8vcndev.oraclevcn.com:\\n', 'ORA_NET_DEEP_CHECK=10\\n']",
                                "expected_return_code": "0",
                                "name": "srvctl_ORA_NET_DEEP_CHECK",
                                "result": "fail"
                            },
                            {
                                "arguments": "getenv nodeapps -envs ORA_NET_PING_RETRIES -viponly",
                                "command": "/u01/app/19.0.0.0/grid/bin/srvctl",
                                "current_return_code": "1",
                                "expected": "ORA_NET_PING_RETRIES=8",
                                "current_value": "['VIP environment variables:\\n', 'c31602c-uxi4c1-vip.subnet5.x8vcndev.oraclevcn.com:\\n', 'PRKF-1128 : Environment variable ORA_NET_PING_RETRIES is not defined.\\n']",
                                "expected_return_code": "0",
                                "name": "srvctl_ORA_NET_PING_RETRIES",
                                "result": "fail"
                            }
                        ]
                    }
                }
            },
            "status": 200,
            "op": "analytics_cs_config_get",
            "status-detail": "success"
        }

5) Rack 
    Ussage:
        analytics rack rackname=<RACKNAME> operation=[OPERATION]
            Values:
                RACKNAME    : The name of the rack that you want to get the operations
                OPERATION   : The name of the operation that you want to fetch the information. In case this parameter is not provided, default value is get all the operations that are associated with this rack
    Purpose:
        If the user doesn't provide an operation, the purpose is to get all the operations associated with the provided rackname. In case the operation is provided, the intention is to return a list of dates of where this operation was performed in the rack, the first value in the array response will be the latest time that operation was performed in the rack.          
    Examples: 
        ecra> analytics rack rackname=slcqab02adm0506clu6
        * {
            "result": [
                {
                    "operation": "rack_reserverack"
                },
                {
                    "operation": "rack_xml_get"
                },...

        ecra> analytics rack rackname=slcqab02adm0506clu6 operation=rack_reserverack
        * {
            "result": [
                {
                    "start_time": "2021-06-03T17:42:02+0000"
                },
                {
                    "start_time": "2021-06-03T01:04:47+0000"
                },
                {
                    "start_time": "2021-06-02T23:14:47+0000"
                }....

6) CS config template
    Ussage:
        analytics csconfigtemplate rackname=<RACKNAME>
            Values:
                RACKNAME    : The name of the rack that you want to get the template
    Purpose:
        Get the postcheck template for the provided rackname
    Examples:
        ecra> analytics csconfigtemplate rackname=iad1-d4-cl4-dd43210d-0c6c-46d9-a7fe-9dc28dc42f5e-clu01
        * {
            "result": {
                "typeSystem": "exacsmvm",
                "networkCommunication": "kvm",
                "rackName": "iad1-d4-cl4-dd43210d-0c6c-46d9-a7fe-9dc28dc42f5e-clu01",
                "template": {
                    "domU": {
                        "cat_bondeth0": {
                            "type": "command",
                            "mandatory": "true",
                            "command": "/bin/cat",
                            "argument": "/sys/class/net/bondeth0/mtu",
                            "expected": "1500",
                            "expected_return_code": "0"
                        },
                        "cat_bondeth1": {
                            "type": "command",
                            "mandatory": "true",
                            "command": "/bin/cat",
                            "argument": "/sys/class/net/bondeth1/mtu",
                            "expected": "1500",
                            "expected_return_code": "0"
                        },
                        "sestatus_selinux_domu": {
                            "type": "command",
                            "mandatory": "false",
                            "command": "/usr/sbin/sestatus",
                            "argument": "| /bin/grep status",
                            "expected": "INFO",
                            "expected_return_code": "0"
                        },
                        ...
                        ...
                        ...

7) Operation details
    Usage: 
        analytics getoperationdetails operation=<operation_name> start_date=<start_date> end_date=<end_date>
            Values:
                operation_name    : The name of the operation for the records to match
                start_date        : The date to start the query from.
                end_date          : The date to stop the query at.
    Purpose:
        Get the details of all the instances of a specific operation.
    Examples:
        ecra> analytics getoperationdetails operation=delete-pod
        * 0
	* id         : 329
	* exaunitid  : 2
	* operation  : delete-pod
	* status     : 400
	* start_time : 2022-08-30T18:13:09+0000
	* end_time   : 2022-08-30T18:13:09+0000
	* payload    : {"exaunitId":2}
	* 1
	* id         : 330
	* exaunitid  : 2
	* operation  : delete-pod
	* status     : 400
	* start_time : 2022-08-30T18:13:54+0000
	* end_time   : 2022-08-30T18:13:54+0000
	* payload    : {"exaunitId":2}
        ...
        ...
        ...

8) Info 
    Ussage:
        analytics info [rackname=<RACKNAME>] [exaunitid=<EXAUNITID>] [exadatainfrastructure=<EXADATAINFRASTRUCTURE>] [start_date=<YYYY-MM-DD>] [end_date=<YYYY-MM-DD>] [interval=<DAYSINTERVAL>]
            Values:
                RACKNAME    : The name of the rack that will be used for the report
                EXAUNITID : The id of the exaunit that will be used for the report
                EXADATAINFRASTRUCTURE : The exadatainfrastructure that will be used for the report
                The user should provide just one of the previous values, and always provide at least one of them.
                Interval    : if no value is provided profiling will retrieve information since 365 days in the past from current date
                Start_date  : Start date default value is 365 days in past from current date
                End_date    : Default value will be current date
    Purpose:
        Based on the rackname, exaunitid or exadatainfrastructure, the command will show the operations stored in ecs_analytics table   
    Examples:
        ecra> analytics info rackname=iad103714exd-d0-01-02-cl-01-03-clu01
        * {
            "op": "analytics_info_post",
            "results": [
                {
                    "ceiocid": "flowtesterInfra",
                    "end_time": "2023-08-17T16:08:31+0000",
                    "exaunitid": 123,
                    "id": 33,
                    "idemtoken": "815badf2-3623-4cbd-8147-0a9abd19112b",
                    "operation": "elastic_cei_post",
                    "rackname": "iad103714exd-d0-01-02-cl-01-03-clu01",
                    "start_time": "2023-08-17T16:08:31+0000"
                }
            ],
            "status": 200,
            "status-detail": "success"
        }

        ecra> analytics info exaunitid=123
        * {
            "op": "analytics_info_post",
            "results": [
                {
                    "ceiocid": "flowtesterInfra",
                    "end_time": "2023-08-17T16:08:31+0000",
                    "exaunitid": 123,
                    "id": 33,
                    "idemtoken": "815badf2-3623-4cbd-8147-0a9abd19112b",
                    "operation": "elastic_cei_post",
                    "rackname": "iad103714exd-d0-01-02-cl-01-03-clu01",
                    "start_time": "2023-08-17T16:08:31+0000"
                }
            ],
            "status": 200,
            "status-detail": "success"
        }

        ecra> analytics info exadatainfrastructure=flowtesterInfra
        * {
            "op": "analytics_info_post",
            "results": [
                {
                    "ceiocid": "flowtesterInfra",
                    "end_time": "2023-08-17T16:07:16+0000",
                    "id": 32,
                    "idemtoken": "b8c51505-9185-415f-92df-56af4ba91db3",
                    "operation": "elastic_cei_post",
                    "start_time": "2023-08-17T16:07:16+0000"
                },
                {
                    "ceiocid": "flowtesterInfra",
                    "end_time": "2023-08-17T16:08:31+0000",
                    "exaunitid": 123,
                    "id": 33,
                    "idemtoken": "815badf2-3623-4cbd-8147-0a9abd19112b",
                    "operation": "elastic_cei_post",
                    "rackname": "iad103714exd-d0-01-02-cl-01-03-clu01",
                    "start_time": "2023-08-17T16:08:31+0000"
                },
                {
                    "ceiocid": "flowtesterInfra",
                    "end_time": "2023-08-17T16:09:06+0000",
                    "id": 34,
                    "idemtoken": "30cb7365-fdb8-43ef-a152-1b4d48fa1e92",
                    "operation": "elastic_cei_post",
                    "start_time": "2023-08-17T16:09:06+0000"
                },
                {
                    "ceiocid": "flowtesterInfra",
                    "end_time": "2023-08-17T16:10:36+0000",
                    "id": 35,
                    "idemtoken": "4231a361-a91d-49ea-b4e1-c8ba67cc9784",
                    "operation": "elastic_cei_post",
                    "start_time": "2023-08-17T16:10:36+0000"
                }
            ],
            "status": 200,
            "status-detail": "success"
        }

9) Get payload 
    Ussage:
        analytics getpayload [id=<ANALYTICS_ID>]
            Values:
                ID : The id of the operation in ecs_analytics
    Purpose:
        Based on the id the command will show the payload stored in ecs_analytics table 
    Examples:
        ecra> analytics getpayload id=35
        * {
            "op": "analytics_get_payload_post",
            "payload": {
                "exadataInfrastructureId": "flowtesterInfra",
                "fabricname": null,
                "faultdomain": null,
                "idemtoken": "4231a361-a91d-49ea-b4e1-c8ba67cc9784",
                "multiVM": true,
                "provisionType": null,
                "servers": [
                    {
                        "hw_type": "CELL",
                        "model": "X8M-2",
                        "quantity": 3
                    },
                    {
                        "dom0_bonding": true,
                        "hw_type": "COMPUTE",
                        "model": "X8M-2",
                        "quantity": 4
                    }
                ],
                "tenantName": "dbaasnm",
                "tenantOcid": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaaep2yyhfkxoyejr4ijamds2oidrdu7untvshgpcmcvbla"
            },
            "status": 200,
            "status-detail": "success"
        }

________________________________________________________________________________


Exaversion report patches
-----------------------
Purpose : To get exaversion report patches
Usage : ./ecracli exaversion <argument>

Argument:  
 1) patchesreport
    Purpose :  
        Get exaversion patches report
    Usage   : 
        ./ecracli exaversion patchesreport status=[FAILED | SUCCESS] [rackName=<rackName>] | [cabinetName=<cabinetName>] [imageVersion] | [operation=<operationType>] | [patchType=<patchType>]
         Values:
            Required:
                status      : [FAILED | SUCCESS] 
            Optionals:
                rackName    : The name of the rack that will be used for the report
                cabinetName : The name of the cabinet that will be used for the report
                imageVersion: For SUCCESS status image version applied
                              For FAILED status attempted  version
                operation   : The type of the infra operation that will be used for the report
                patchType   : The patch type that will be used for the report
    Examples:   
            ecra> exaversion patchesreport status=SUCCESS rackName=Rack2
            * {
                "infraPatchReport": [
                    {
                        "exaOcid": "ocid3456",
                        "exaunitId": 2,
                        "imageVersion": "20.1.0.0.0.201001",
                        "patchType": "MONTHLY",
                        "patchingTime": "2020-09-07 10:00:00.0",
                        "rackName": "Rack2",
                        "status": "SUCCESS",
                        "targetFqdn": "slcs17cel02.us.oracle.com",
                        "targetType": "CELL"
                    },
                    {
                        "exaOcid": "ocid3456",
                        "exaunitId": 2,
                        "imageVersion": "20.1.0.0.0.201007",
                        "patchType": "QUARTERLY",
                        "patchingTime": "2020-09-08 10:00:00.0",
                        "rackName": "Rack2",
                        "status": "SUCCESS",
                        "targetFqdn": "slcs17cel01.us.oracle.com",
                        "targetType": "CELL"
                    }
                ],
                "message": "Operation to get patches report is successful",
                "op": "exaversion_patch_report_get",
                "status": 200,
                "status-detail": "success"
            }
 
 2) get
    Purpose :  Get the list of registered exaversions.
    Arguments:
        <targetType>          : Filter properties based on targetType like DOM0 or CELL.
    Usage   :
        ./ecracli exaversion get
        ./ecracli exaversion get targetType=DOM0
        ./ecracli exaversion get targetType=DOM0 exasplice=yes serviceType=EXACS
        ./ecracli exaversion get serviceType=ADBD
        ./ecracli exaversion get exasplice=yes

    Examples:
          ecra> exaversion get
        * {"ExaVersions": [{"serviceType": "FA", "patchType": "QUARTERLY", "targetType": "DOM0", "imageVersion": "19.3.6.0.0.200317"}, {"serviceType": "FA", "patchType": "QUARTERLY", "targetType": "CELL", "imageVersion": "19.3.6.0.0.200317"}, {"serviceType": "FA", "patchType": "MONTHLY", "targetType": "DOM0", "imageVersion": "19.3.6.0.0.200317"}, {"serviceType": "FA", "patchType": "MONTHLY", "targetType": "CELL", "imageVersion": "19.3.6.0.0.200317"}], "status": 200, "op": "exa_version_list", "status-detail": "success"}

        ecra> exaversion get targetType=DOM0
        * {"ExaVersions": [{"serviceType": "FA", "patchType": "QUARTERLY", "targetType": "DOM0", "imageVersion": "19.3.6.0.0.200317"}, {"serviceType": "FA", "patchType": "MONTHLY", "targetType": "DOM0", "imageVersion": "19.3.6.0.0.200317"}], "status": 200, "op": "exa_version_list", "status-detail": "success"}

        ecra> exaversion get targetType=DOM0 exasplice=yes serviceType=EXACS
        * {"ExaVersions": [{"serviceType": "EXACS", "patchType": "MONTHLY", "targetType": "DOM0", "imageVersion": "210415"}], "status": 200, "op": "exa_version_list", "status-detail": "success"}

 3) register:
    Purpose: Register exaversion with ECRA

    Arguments:
        serviceType: To see all the valid service types please use the command in ecracli: properties get SERVICE_TYPE
        exasplice : Yes or No values to indicate monthlyo or quarterly patching
        imageVersion: version of the exadata bundle to be registered
        rackModel: Rack Model if applicable. Sample values = X6-2, X7-2, X8-2, X8M-2, X9M-2, X10M-2, X10M-2L, X10M-2XL
        comments : Any additional comments as appropriate
        targetTypes: dom0 and cell or both dom0 and cell can be specified together for exasplice=yes.ibswitch and domu are applicable for exasplice=no

    Usage: 
       ./ecracli exaversion register serviceType=<EXACS|FA|ADBD|ADBS|EXACC|PREPROD|GBU|IDCS|OMCS|TEST> [exasplice=<yes>] [rackModel=<rackModel>] targetTypes=<dom0|dom0+cell> imageVersion=<version> [comments=<comments>]
       ./ecracli exaversion register serviceType=<EXACS|FA|ADBD|ADBS|EXACC|PREPROD|GBU|IDCS|OMCS|TEST> [exasplice=<no>]  [rackModel=<rackModel>] targetTypes=<dom0|cell|ibswitch|domu|dom0+cell> imageVersion=<version> [comments=<comments>]
    
    Examples:
    ecra> exaversion register serviceType=FA exasplice=yes targetTypes=dom0 imageVersion=20.3.6.0.0.200317

    * {"message": "Target Type dom0 registered successfully.;", "status": 200, "op": "exa_version_post", "status-detail": "success"}

    ecra> exaversion register rackModel=X8-2 serviceType=FA targetTypes=dom0 imageVersion=22.2.11.0.0.230516
    * {"message": "Exaversion for Target Type dom0 registered and updated successfully.;", "status": 200, "op": "exa_version_post", "status-detail": "success"}

 4) listpatches
    Purpose :  Display and Validate the physical location of the exadata patches in the payloads directory.
    Optionals:
        <patchId>          : version of the Image to search for like 20.1.3.0.0.201023
    Usage   :
        ./ecracli exaversion listpatches
        ./ecracli exaversion listpatches patchId=20.1.3.0.0.201023
        ./ecracli exaversion listpatches exaocid=ocid3456
        ./ecracli exaversion listpatches exaocid=ocid3456 targetTypes=cps

    Examples:
          ecra> exaversion listpatches
        * {"patchlist": ["20.1.3.0.0.201023", "201027"], "status": 200, "op": "exa_version_list_patch_from_path", "status-detail": "success"}

          ecra> exaversion listpatches patchId=201027
        * {"patchlist": ["201027"], "status": 200, "op": "exa_version_list_patch_from_path", "status-detail": "success"}

          ecra> exaversion listpatches exaocid=ocid3456
        * {"patchlist": ["20.1.3.0.0.201023", "201027"], "status": 200, "op": "exa_version_list_patch_from_path", "status-detail": "success"}

          ecra> exaversion listpatches exaocid=EXISTING.PUBLIC.CLOUD.EXADATA patchId=19.2.16.0.0.200724 targetTypes=cps
        * {"details": ["DBPatchFile", "DomuYumRepository"], "patchlist": ["19.2.16.0.0.200724"],
        "status": 200, "op": "exa_version_list_patch_from_path", "status-detail": "success"}

          ecra> exaversion listpatches exaocid=ocid3456 targetTypes=cps
        * {"patchlist": ["20.1.3.0.0.201023", "19.2.16.0.0.200724"], "status": 200, "op": "exa_version_list_patch_from_path", "status-detail": "success"}

 5) purge
    Purpose :  Deletes unwanted patches in Payloads directory to clean up disk space. Either patchVersion or retention can be specified as parameter.
    Optionals:
        <patchVersion>       : Patch Version to be deleted
        <retention>          : Retention parameter specifies the number of patches to retain across each category of patches - Quarterly, Dom0                               Exasplice and Cell Exasplice
    Usage   :
        ./ecracli exaversion purge patchVersion=20.1.13.0.0.210909
        ./ecracli exaversion purge retention=2

    Examples:
          ecra> exaversion purge patchVersion=20.1.13.0.0.210909
        * {"purgedPayloads":"20.1.13.0.0.210909","status":200,"op":"exa_version_purge","status-detail":"success"}

          ecra> exaversion listpatches retention=2
        * {"purgedPayloads":"20.1.13.0.0.210909, 20.1.12.0.0.210909","status":200,"op":"exa_version_purge","status-detail":"success"}

 6) listpatchesmetadata
    Purpose :  Display metadata of all exadata patches in the payloads directory.
    Usage   :
        ./ecracli exaversion listpatchesmetadata exaocid=ocid3456 targetTypes=dom0 serviceType=EXACC patchType=QUARTERLY
        ./ecracli exaversion listpatchesmetadata exaocid=ocid3456 targetTypes=dom0+cell serviceType=EXACC patchType=QUARTERLY

    Examples:
          ecra> exaversion listpatchesmetadata exaocid=ocid3456 targetTypes=dom0 serviceType=EXACC patchType=QUARTERLY
        * {"patchlist":[{"imageVersion":"21.2.6.0.0.211112","patchType":"QUARTERLY","targetType":"dom0","serviceType":"EXACC","bpDate":"211112","bpName":"21.2.6.0.0"},
          {"imageVersion":"21.2.8.0.0.211012","patchType":"QUARTERLY","targetType":"dom0","serviceType":"EXACC","bpDate":"211012","bpName":"21.2.8.0.0"}],
          "status": 200, "op": "exa_version_list_patch_from_metadata", "status-detail": "success"}

 7) registerimageseries:
    Purpose: Register exaversion max image versions with respect to a specific label series like 23.1x with ECRA

    Arguments:
        serviceType: To see all the valid service types please use the command in ecracli: properties get SERVICE_TYPE
        exasplice : Yes or No values to indicate monthly or quarterly patching
        maxVersion: maximum image version in that series like 23.3.6.0.0.200317 for 23.x series
        comments : Any additional comments as appropriate
        targetTypes: dom0 and cell or both dom0 and cell can be specified together for exasplice=yes

    Usage:
       ./ecracli exaversion registerimageseries serviceType=<EXACS|FA|ADBD|ADBS|PREPROD|GBU|IDCS|OMCS|TEST> [exasplice=<yes>] targetTypes=cell seriesLabel=<23.x> maxVersion=<version> [comments=<comments>]


    Examples:
    ecra> exaversion registerimageseries serviceType=EXACS exasplice=yes targetTypes=cell seriesLabel=23.x maxVersion=23.3.6.0.0.200317

    * {"message": "ExaVersionSeries for Target Type cell registered successfully.;", "status": 200, "op": "exa_version_series_post", "status-detail": "success"}

    ecra> exaversion registerimageseries serviceType=EXACS exasplice=yes targetTypes=cell seriesLabel=24.x maxVersion=24.3.6.0.0.200317
    * {"message": "ExaVersionSeries for Target Type cell registered successfully.;", "status": 200, "op": "exa_version_series_post", "status-detail": "success"}

 8) getimageseries
    Purpose :  Get the imageVersion registered for a series like 23.x.
    Arguments:
        <targetType>          : Filter properties based on targetType like CELL.
    Usage   :
        ./ecracli exaversion getimageseries
        ./ecracli exaversion getimageseries targetType=CELL seriesLabel=24.x serviceType=EXACS

    Examples:
          ecra> exaversion getimageseries targetType=CELL seriesLabel=24.x serviceType=EXACS
        * {"InfraPatchImagesSeries": [{"serviceType": "FA", "patchType": "QUARTERLY", "targetType": "CELL", "series":"24.x", "maxVersion": "24.3.6.0.0.200317"}], "status": 200, "op": "patch_imageseries_get", "status-detail": "success"}

 9) deregisterexaversion:
    Purpose: Deregister exaversion for infra patching for a specific rackModel

    Arguments:
        serviceType(Mandatory): To see all the valid service types please use the command in ecracli: properties get SERVICE_TYPE
        targetType(Mandatory): TargetType for which  imageversion is registered. Possible values are dom0 or ibswitch
        rackModel(Mandatory): Rack Model if applicable. Sample values = X6-2, X7-2, X8-2, X8M-2, X9M-2, X10M-2, X10M-2L, X10M-2XL
        exasplice(Optional): Rebootless exadata bundle for monthly infrapaching. Default value is no

    Usage:
       ./ecracli deregisterexaversion serviceType=<EXACS|FA|ADBD|ADBS|EXACC|PREPROD|GBU|IDCS|OMCS|TEST>  targetType=<dom0|cell|ibswitch> [exasplice=<yes|no>] [rackModel=<rackModel name>]  

    Examples:
    ecra> exaversion deregisterexaversion serviceType=TEST targetType=dom0 rackModel=x11m

    * {"message": "ExaVersion for TargetType dom0 is deregistered successfully.;", "status": 200, "op": "exa_version_delete", "status-detail": "success"}

    ecra> exaversion deregisterexaversion serviceType=TEST targetType=cell rackModel=x11m

    * {"message": "ExaVersion for TargetType cell is deregistered successfully.;", "status": 200, "op": "exa_version_delete", "status-detail": "success"}

________________________________________________________________________________
############
# Security #
############
The purpose of this feature is to store the SE Linux policies for the different components [dom0,domu and cells]

1) Add policy
    Ussage:
         security add_selinuxpolicy component=<COMPONENT> policy_name=<NAME> policy_file=<PATHTOFILE> network_communication=<NETWORKCOMMUNICATION> [service=<SERVICE>]
         Values:
            COMPONENT   : Could be dom0,cell or domu
            NAME        : Policy name
            PATHTOFILE  : Full path of the .pp file
            SERVICE     : Could be exacs/adbd/etc
            NETWORKCOMMUNICATION : Network communication could be ib or kvm
    Purpose:      
        Stores the policy in the ecra Database
    Examples:
       ecra> security  add_selinuxpolicy component=domu policy_name=test policy_file=/u01/ecra_preprov/oracle/ecra_installs/ecramain/exacs_dibtest.pp network_communication=kvm
        * {
            "status": 200,
            "op": "security_addselinux_post",
            "status-detail": "success"
        }

2) Store policy in file system
     Ussage:
         security dump_selinuxpolicy component=<COMPONENT> policy_name=<NAME> policy_file=<PATHTOFILE>
         Values:
            COMPONENT   : Could be dom0,cell or domu
            NAME        : Policy name
            PATHTOFILE  : Full path of the .pp file
    Purpose:      
        Get the policy from ECRA and place it in the provided path
    Examples:
        ecra> security dump_selinuxpolicy component=domu policy_name=2021.05.07_00.02.49_test policy_file=/u01/ecra_preprov/oracle/ecra_installs/ecramain/dump.pp
        * {
            "policy Name": "2021.05.07_00.02.49_test",
            "policy File stored in": "/u01/ecra_preprov/oracle/ecra_installs/ecramain/dump.pp",
            "status": 200,
            "op": "security_putselinux_list",
            "status-detail": "success"
        }

3) List policies
     Ussage:
         security list_selinuxpolicy component=<COMPONENT>
         Values:
            COMPONENT   : Could be dom0,cell or domu
    Purpose:      
        List all the policies for the given component
    Examples:
        ecra> security list_selinuxpolicy component=domu
        * {
            "domu": [
                {
                    "component": "domu",
                    "policy_name": "2021.05.07_00.02.49_test",
                    "policy_data": "weblogic.jdbc.wrapper.Blob_oracle_sql_BLOB@4ea15c",
                    "service_type": "exacs"
                }
            ]
        }


4) Add filesystem encryption:

    Usage:
      security add_fsencryption  customer_tenancy_id=<customer_tenancy_id> infra_component=<infra_component> encryption_mode=<encryption_mode> key_source=<key_source> secret_compartment_id=<secret_compartment_id> vault_id=<vault_id> kms=<kms_id123>

      Values:
         kms_id
         customer_tenancy_id
         bucket_id
         bucket_name
         bucket_namespace
         kms_key_endpoint
         infra_component
         target_filesystems
         key_source
         encryption_mode
         customer_tenancy_name
         secret_compartment_id
         vault_id
    Purpose:
        Add new record in ecs_fs_encryption table to include info in Create Service Flow.
    Examples:
        ecra> security add_fsencryption customer_tenancy_id=tenancy.ocid infra_component=dom0 key_source=SiV encryption_mode=enabled secret_compartment_id=compartment.id vault_id=vault.id kms_id=kms_id.123
        * {
             "status": 200,
             "op": "filesystem_encryption_PUT",
             "status-detail": "success"
          }

        ecra> security add_fsencryption infra_component=dom0 key_source=SiV encryption_mode=enabled secret_compartment_id=compartment.id vault_id=vault.id kms_id=kms_id.123
        * {
             "status": 200,
             "op": "filesystem_encryption_PUT",
             "status-detail": "success"
          }


5) Remove filesystem encryption:

    Usage:
      security remove_fsencryption customer_tenancy_id=<customer_tenancy_id>
         Values:
         customer_tenancy_id
    Purpose:
        Remove record from ecs_fs_encryption table.
    Examples:
        ecra> security remove_fsencryption customerTenancyId=tenancy.ocid1
        * {
             "status": 200,
             "op": "filesystem_encryption_delete",
             "status-detail": "success"
          }

6) List filesystem encryption:

    Usage:
       security list_fsencryption rackname=<rackname>
       Values:
         rackname
    Purpose:
        List records from ecs_fs_encryption table.
    Examples:
        ecra> security list_fsencryption rackname=iad105413_cluster_name_14
        * {
	    "kms_id": "kms_id.123",
	    "kms_key_endpoint": "https://",
            "bucket_name": "bucket1",
            "bucket_id": "kms_bucket_id.234",
            "customer_tenancy_id": "tenancy.ocid",
            "bucket_namespace": "exadata",
            "infraComponent": [
            {
                "encryption_mode": "enabled",
                "infra_component": "dom0",
                "target_filesystems": "all",
                "key_source": "KMS"
            },
            {
                "encryption_mode": "enabled",
                "infra_component": "domu",
                "target_filesystems": "all",
                "key_source": "KMS"
            },
            {
                "encryption_mode": "enabled",
                "infra_component": "cell",
                "target_filesystems": "all",
                "key_source": "KMS"
            }
         ],
            "status": 200,
            "op": "filesystem_encryption_get",
            "status-detail": "success"
         }

________________________________________________________________________________
##############
# Exacompute #
##############
This feature will help with the integration of Exascale project

1) ports
  Usage:
    exacompute ports [hostname=<HOSTNAME>|hwid=<HW_ID>|smartnicid=<SMARTNIC_ID>]
      Values:
        <HOSTNAME>  : The oracle hostname
        <HW_ID>     : The ID value related to the oracle hostname
        <SMARTNIC_ID> : The value should be the smartnic id you are looking for
      Purpose:
        Get the smartnic information associated to the given oracle hostname or hw_id or smartnic_id
      Examples:
        ecra> exacompute ports hostname=sea201109exdd002
          * {
              "ports": [
                  {
                      "caviumId": "4.0G1943-GBC002299",
                      "caviumIp": "10.9.150.13",
                      "dom0OracleName": "sea201109exdd002",
                      "domUOracleName": "sea201109exddu0201",
                      "etherface": "eth1",
                      "etherfaceType": "client",
                      "mac": "00:10:5e:33:03:b2"
                  },
                  {
                      "caviumId": "4.0G1943-GBC002299",
                      "caviumIp": "10.9.150.14",
                      "dom0OracleName": "sea201109exdd002",
                      "domUOracleName": "sea201109exddu0201",
                      "etherface": "eth1",
                      "etherfaceType": "backup",
                      "mac": "02:00:17:01:ba:18"
                  },
                  {
                      "caviumId": "4.0G1943-GBC002262",
                      "caviumIp": "10.9.150.15",
                      "dom0OracleName": "sea201109exdd002",
                      "domUOracleName": "sea201109exddu0201",
                      "etherface": "eth2",
                      "etherfaceType": "client",
                      "mac": "00:10:5d:93:d0:a1"
                  },
                  {
                      "caviumId": "4.0G1943-GBC002262",
                      "caviumIp": "10.9.150.16",
                      "dom0OracleName": "sea201109exdd002",
                      "domUOracleName": "sea201109exddu0201",
                      "etherface": "eth2",
                      "etherfaceType": "backup",
                      "mac": "02:00:17:01:86:65"
                  }
              ],
              "status": 200,
              "op": "exacompute_oracle_hostname_ports_get",
              "status-detail": "success"
          }

2) getfleetstatelock
  Usage:
    exacompute getfleetstatelock [stateid=id]
      Arguments:
        stateid: If stateid is found, no lock is obtained, previous statehandle is returned
      Purpose:
        Get the fleet state handle and lock handle
      Examples:
      ecra> exacompute getfleetstatelock
    * {
        "fleetLockHandle": 9,
        "fleetStateHandle": 100006,
        "status": 200,
        "op": "chaine_state_lock_get",
        "status-detail": "success"
      }

3) updatefleetstate
   Usage:
    exacompute updatefleetstate json_path=<path> fleetstatehandle=<handle> [plan=placement plan] [stateid=id]
      Arguments:
        json_path: A file containing the fleetStateHandle, fleetLockHandle and fleetInfrastructure for updation
        fleetstatehandle: State handle to use and update the fleet state
        plan: Placement plan which is optional
        stateid: optional stateid to be stored
      Purpose:
         Update the fleet state with new information from placement
      Examples:
      ecra>  exacompute updatefleetstate fleetstatehandle=100010 json_path=/scratch/rgmurali/ecra_installs/fabric1/ecracli/tmpl/test.json
        *  {"fleetStateHandle": 100010}

4) getfleetstate
    Usage:
      exacompute getfleetstate fleetstatehandle=<handle>
      Arguments:
         fleetstatehandle: State handle to use and update the fleet state
      Purpose:
         Gets the fleet state corresponding to the state handle
      Example:
      ecra> exacompute getfleetstate fleetstatehandle=100010
* {
    "fleetInfrastructure": {
        "className": "AvailabilityDomain",
        "faultDomains": [
            {
                "className": "FaultDomain",
                "fabrics": [
                    {
                        "className": "Fabric",
                        "fabricType": "Fully connected",
                        "id": "SEAFABRIC1",
                        "nodes": [
                            {
                                "className": "ComputeNode",
                                "dom0": {
                                    "className": "Dom0",
                                    "name": "sea201111exdd003",
                                    "resources": {
                                        "cpu": {
                                            "className": "CpuResource",
                                            "used": null,
                                            "value": 2
                                        },
                                        "memory": {
                                            "className": "MemoryResource",
                                            "used": null,
                                            "value": 128849018880.0
                                        },
                                        "network": null,
                                        "storageLocal": {
                                            "className": "StorageLocalResource",
                                            "used": null,
                                            "value": 128849018880.0
                                        }
                                    }
                                },
                                "id": "sea201111exdd003",
                                "imageVersion": "19.2.15.0.0.200601",
                                "model": "X8M-2",
                                "nodeType": "COMPUTE",
                                "resources": {
                                    "cpu": {
                                        "className": "CpuResource",
                                        "used": null,
                                        "value": 52
                                    },
                                    "memory": {
                                        "className": "MemoryResource",
                                        "used": null,
                                        "value": 1621469691904
                                    },
                                    "network": null,
                                    "storageLocal": {
                                        "className": "StorageLocalResource",
                                        "used": null,
                                        "value": 8356288371097.6
                                    }
                                },
                                "vms": [
                                    {
                                        "className": "Vm",
                                        "exaService": "exacompute",
                                        "id": "x8-211109-a514f1.x8mclient.x8mvcn.oraclevcn.com",
                                        "resources": {
                                            "cpu": {
                                                "className": "CpuResource",
                                                "used": null,
                                                "value": 6
                                            },
                                            "memory": {
                                                "className": "MemoryResource",
                                                "used": null,
                                                "value": 53687091200.0
                                            },
                                            "network": {
                                                "backupNetwork": null,
                                                "clientNetwork": null,
                                                "vipNetwork": null
                                            },
                                            "storageLocal": {
                                                "className": "StorageLocalResource",
                                                "used": null,
                                                "value": 536870912000.0
                                            }
                                        },
                                        "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljs4mtgwpia3ck2lietsebunxxhjaebhksh6dlkcwl5fjd3klt5w5vq",
                                        "vmClusterInternalId": 3
                                    },
                                    {
                                        "className": "Vm",
                                        "exaService": "exacompute",
                                        "id": "x8-v0b7u1.x8mclient.x8mvcn.oraclevcn.com",
                                        "resources": {
                                            "cpu": {
                                                "className": "CpuResource",
                                                "used": null,
                                                "value": 8
                                            },
                                            "memory": {
                                                "className": "MemoryResource",
                                                "used": null,
                                                "value": 107374182400.0
                                            },
                                            "network": {
                                                "backupNetwork": null,
                                                "clientNetwork": null,
                                                "vipNetwork": null
                                            },
                                            "storageLocal": {
                                                "className": "StorageLocalResource",
                                                "used": null,
                                                "value": 214748364800.0
                                            }
                                        },
                                        "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljs4mtgwpiafxvuqncjf2iayn2qpxtk232vnllvlfjs2gmf665wdyra",
                                        "vmClusterInternalId": 4
                                    },
                                    {
                                        "className": "Vm",
                                        "exaService": "exacompute",
                                        "id": "ocid1.vm.region1.sea.ahjkilopttyshsgafsg",
                                        "resources": {
                                            "cpu": {
                                                "className": "CpuResource",
                                                "used": null,
                                                "value": 4
                                            },
                                            "memory": {
                                                "className": "MemoryResource",
                                                "used": null,
                                                "value": 8796093022208
                                            },
                                            "network": {
                                                "backupNetwork": null,
                                                "clientNetwork": null,
                                                "vipNetwork": null
                                            },
                                            "storageLocal": {
                                                "className": "StorageLocalResource",
                                                "used": null,
                                                "value": 87960930222080
                                            }
                                        },
                                        "vmClusterId": "ocid1.cloudvmcluster.region1.sea.abnhtyujsklalhjdtjkefghjkilopppsghtrewsq",
                                        "vmClusterInternalId": 0
                                    }
                                ]
                            },
                            {
                                "className": "ComputeNode",
                                "dom0": {
                                    "className": "Dom0",
                                    "name": "sea201111exdd004",
                                    "resources": {
                                        "cpu": {
                                            "className": "CpuResource",
                                            "used": null,
                                            "value": 2
                                        },
                                        "memory": {
                                            "className": "MemoryResource",
                                            "used": null,
                                            "value": 128849018880.0
                                        },
                                        "network": null,
                                        "storageLocal": {
                                            "className": "StorageLocalResource",
                                            "used": null,
                                            "value": 128849018880.0
                                        }
                                    }
                                },
                                "id": "sea201111exdd004",
                                "imageVersion": "19.2.15.0.0.200601",
                                "model": "X8M-2",
                                "nodeType": "COMPUTE",
                                "resources": {
                                    "cpu": {
                                        "className": "CpuResource",
                                        "used": null,
                                        "value": 52
                                    },
                                    "memory": {
                                        "className": "MemoryResource",
                                        "used": null,
                                        "value": 1621469691904
                                    },
                                    "network": null,
                                    "storageLocal": {
                                        "className": "StorageLocalResource",
                                        "used": null,
                                        "value": 8356288371097.6
                                    }
                                },
                                "vms": [
                                    {
                                        "className": "Vm",
                                        "exaService": "exacompute",
                                        "id": "x8-211109-a514f2.x8mclient.x8mvcn.oraclevcn.com",
                                        "resources": {
                                            "cpu": {
                                                "className": "CpuResource",
                                                "used": null,
                                                "value": 6
                                            },
                                            "memory": {
                                                "className": "MemoryResource",
                                                "used": null,
                                                "value": 53687091200.0
                                            },
                                            "network": {
                                                "backupNetwork": null,
                                                "clientNetwork": null,
                                                "vipNetwork": null
                                            },
                                            "storageLocal": {
                                                "className": "StorageLocalResource",
                                                "used": null,
                                                "value": 536870912000.0
                                            }
                                        },
                                        "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljs4mtgwpia3ck2lietsebunxxhjaebhksh6dlkcwl5fjd3klt5w5vq",
                                        "vmClusterInternalId": 3
                                    },
                                    {
                                        "className": "Vm",
                                        "exaService": "exacompute",
                                        "id": "x8-v0b7u2.x8mclient.x8mvcn.oraclevcn.com",
                                        "resources": {
                                            "cpu": {
                                                "className": "CpuResource",
                                                "used": null,
                                                "value": 8
                                            },
                                            "memory": {
                                                "className": "MemoryResource",
                                                "used": null,
                                                "value": 107374182400.0
                                            },
                                            "network": {
                                                "backupNetwork": null,
                                                "clientNetwork": null,
                                                "vipNetwork": null
                                            },
                                            "storageLocal": {
                                                "className": "StorageLocalResource",
                                                "used": null,
                                                "value": 214748364800.0
                                            }
                                        },
                                        "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljs4mtgwpiafxvuqncjf2iayn2qpxtk232vnllvlfjs2gmf665wdyra",
                                        "vmClusterInternalId": 4
                                    },
                                    {
                                        "className": "Vm",
                                        "exaService": "exacompute",
                                        "id": "ocid1.vm.region1.sea.ghjkiloperfsvctygdghsj",
                                        "resources": {
                                            "cpu": {
                                                "className": "CpuResource",
                                                "used": null,
                                                "value": 4
                                            },
                                            "memory": {
                                                "className": "MemoryResource",
                                                "used": null,
                                                "value": 8796093022208
                                            },
                                            "network": {
                                                "backupNetwork": null,
                                                "clientNetwork": null,
                                                "vipNetwork": null
                                            },
                                            "storageLocal": {
                                                "className": "StorageLocalResource",
                                                "used": null,
                                                "value": 87960930222080
                                            }
                                        },
                                        "vmClusterId": "ocid1.cloudvmcluster.region1.sea.abnhtyujsklalhjdtjkefghjkilopppsghtrewsq",
                                        "vmClusterInternalId": 0
                                    }
                                ]
                            }
                        ],
                        "racks": [
                            {
                                "id": "SEA201111",
                                "nodes": [
                                    "sea201111exdd001",
                                    "sea201111exdd002",
                                    "sea201111exdd003",
                                    "sea201111exdd004"
                                ]
                            }
                        ],
                        "version": "1.0",
                        "vmClusters": [
                            {
                                "className": "VmCluster",
                                "id": "ocid1.cloudvmcluster.region1.sea.anzwkljs4mtgwpia3ck2lietsebunxxhjaebhksh6dlkcwl5fjd3klt5w5vq",
                                "vmClusterInternalId": 3,
                                "vmIds": [
                                    "x8-211109-a514f1.x8mclient.x8mvcn.oraclevcn.com",
                                    "x8-211109-a514f2.x8mclient.x8mvcn.oraclevcn.com"
                                ]
                            },
                            {
                                "className": "VmCluster",
                                "id": "ocid1.cloudvmcluster.region1.sea.anzwkljs4mtgwpiafxvuqncjf2iayn2qpxtk232vnllvlfjs2gmf665wdyra",
                                "vmClusterInternalId": 4,
                                "vmIds": [
                                    "x8-v0b7u1.x8mclient.x8mvcn.oraclevcn.com",
                                    "x8-v0b7u2.x8mclient.x8mvcn.oraclevcn.com"
                                ]
                            }
                        ]
                    }
                ],
                "id": "FD1"
            }
        ],
        "id": "AD1",
        "version": "1.0"
    },
    "status": 200,
    "op": "chaine_state_data_get",
    "status-detail": "success"
}

5) addcluster
  Usage:
    exacompute addcluster json_path=<PATH> hostnames=<HOSTNAMES>
      Values:
        <PATH>  : Path for the add cluster
        <HOSTNAMES> : Hostnames comma separated
      Purpose:
        Creates an exacompute rack based on the provided information
      Examples:
        ecra> exacompute addcluster json_path=/scratch/illamas/ecra_installs/irving1/exacompute_add_cluster_2computes.json
        * {"status": 202, "status_uri": "http://slc16lme.us.oracle.com:9001/ecra/endpoint/statuses/4f30b73d-65f2-4c2f-8529-52c2a716628e", "op": "exacompute_addcluster_put", "op_start_time": "2021-12-10T21:05:53+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 999, "target_uri": "http://slc16lme.us.oracle.com:9001/ecra/endpoint/exaunit/999"}

        ecra> exacompute addcluster json_path=/ade/illamas_ECS_MAIN_LINUX.X64_new/ecs/ecra/test/scenarios/exacompute/payloads/addcluster.json hostnames=iad103709exdd008,iad103709exdd007

6) deletecluster
  Usage:
    exacompute deletecluster vmclusterid=<VMCLUSTERID>
      Values:
        <VMCLUSTERID>  : OCID from CP that points to the rack
      Purpose:
        Deletes an exacompute rack based on the provided information
      Examples:
        ecra> exacompute deletecluster vmclusterid=123455653
        * {
            "est_op_end_time": "",
            "exaunit_id": 1005,
            "message": "processing",
            "op": "delete-pod",
            "op_start_time": "2021-12-16T01:29:26+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "internal-request-uri-not-set/ecra/endpoint/statuses/f169f579-1813-43ac-bcb2-4162c47602e2", 
            "target_uri": "internal-request-uri-not-set/ecra/endpoint/exaunit/1005" 
        }

7) listcluster
  Usage:
    exacompute listcluster [vmclusterid=<VMCLUSTERID> type=<TYPE> verbose=<true/false>]
      Values:
        <VMCLUSTERID>  : OCID from CP that points to the rack
        <TYPE>         : If the flag is provided Microservice JSON will be returned.
        <VERBOSE>      : If the flag is provided a more detailed report per cluster will be provided
      Purpose:
        if the parameter is not provided, the command will show a list with all the exacompute racks.
        In the case parameter is provided, the API will return the JSON that was used to provision the cluster.i
        if the type parameter is provided and equals to microservice, the JSON from the microservice will be returned
      Examples:
        ecra> exacompute listcluster
        * {
            "clusters": [ 
                {    
                    "rack_name": "exacomputetest_098093",                                          
                    "vmclusterid": "12345565367"          
                },             
                {        
                    "rack_name": "exacompute-iad1-d2-eeebafba-4547-4375-a34d-09ddb44e5e66-clu01",          
                    "vmclusterid": "123455653"                                                              
                }                                                                                  
            ],       
            ...

        ecra> exacompute listcluster vmclusterid=123455653
        * {
            "atp":{                                                                                                                 
                "AutonomousDb": "N"             
            },                                                                                    
            "cells": "iad103712exdcl01,iad103712exdcl02,iad103712exdcl03",      
            "clusterId": "123455653",                                                                                          
            "clusterVault": "XYZ",                                                                                          
            "clustername": "MVM-C1",                                                                                  
            "customer_network": {                                                                                  
                "network_services": {                                                             
                    "dns": [                                                  
                        "169.254.169.254"                                                                                   
                    ],                                                                                                                                 
                    "ntp": [                                                                                                                
                        "169.254.169.254"                                                                     
                    ]                                                                       
                },                                                                                 
                "nodes": [                                                                 
                    {                                    
                        "backup": {                            
                            "compute_node_alias": null,                                            
                            "domainname": "backupsubnet.devx8melastic.oraclevcn.com",                         
                            "gateway": "10.0.32.1",             
                            "hostname": "iad3709exd14b",     
                            ...      
        ecra> exacompute listcluster vmclusterid=123455653 type=microservice
        * {
            "op": "exacompute_listvmcluster_get", 
            "status": 200,                                                                                                      
            "status-detail": "success",                    
            "vms": [                                                                                                                           
                {                                                                                                                             
                    "className": "Vm",                                                                            
                    "exaService": "exacompute",                                          
                    "id": "iad103709exddu1301.iad103709mvm.adminiad1.oraclevcn.com",                 
                    "resources": {                                                                                                            
                        "cpu": {                       
                            "className": "CpuResource",                    
                            "used": 25,                                                                                             
                            "value": 52                                   
                        },          
                        "memory": {                                                                                                
                            "className": "MemoryResource",         
                            "used": 157286400,                                                                                                 
                            "value": 1621469691904           
                        },                                                                                                        
                        "network": {                                                       
                            "backupNetwork": {                  
                                "dom0OracleName": "iad103709exdd013",         
                                "domUOracleName": "",                                                                                 
                                "domainName": "data.customer2.oraclevcn.com",     
                                "gateway": "10.0.1.1",                                                                                     
                                "hostName": "ed2db01-vip",                  
                                "ip": "10.0.1.2",      
        }

        ecra> exacompute listcluster verbose=true
        * {
            "clusters": [
                {
                    "clustername": "testVmclusterDemo010285",
                    "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d58",
                    "enabledecpu": 60,
                    "exaunitid": 2274,
                    "instancecount": 3,
                    "rackname": "exacompute-sea2-d2-aa2c5f6a-530d-4c38-92b9-fb2e8d6d4889-clu01",
                    "status": "PROVISIONED",
                    "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
                    "totalecpu": 108,
                    "vmclusterid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d58",
                    "vmcount": 3,
                    "vmids": [
                        "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525abc1",
                        "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525a219",
                        "Exacomp-vm-instance-00098470a9964abe9a6609fd8a9042c4113"
                    ]
                }
            ],
            "op": "exacompute_listcluster_get",
            "status": 200,
            "status-detail": "success"
        }


8) activecard
  Usage:
    exacompute activecard oraclehostname=<ORACLEHOSTNAME>
      Values:
        <ORACLEHOSTNAME>  : Oracle hostname
      Purpose:
        The API will return the active cavium for the provided oracle hostname
      Examples:
        ecra> exacompute activecard oraclehostname=iad103709exdd013
        * {
            "caviumId": "4.0G1950-GBC001922",
            "etherface": "eth1"
        }

9) vm
  Usage:
    exacompute vm [action='moveSanityCheck|movePrepare|move' exaUnitId=<VM's Cluster ExaUnitId> vmName=<VM's internal name> sourceDom0=<source DOM0> targetDom0=<target DOM0>]
      Values:
        action      :   'moveSanityCheck|movePrepare|move'
        exaUnitId   :   VM's Cluster ExaUnitId
        vmName      :   VM's internal name
        sourceDom0  :   Source DOM0's name
        targetDom0  :   Target DOM0's name
      Purpose:
        This API will execute ExaCompute VM actions on a particular VM
      Examples:
        ecra> exacompute vm action=moveSanityCheck exaUnitId=2 vmName=sea301112exddu0101 sourceDom0=sea301112exdd001 targetDom0=sea301112exdd002
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exacompute_vm_operation_post",
            "op_start_time": "2022-09-16T02:49:10+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/79b5e84b-26fb-4e1e-84e8-d988eb942496"
        }

        ecra> exacompute vm action=movePrepare exaUnitId=2301 vmName=iad103709exddu0901 sourceDom0=iad103709exdd009 targetDom0=iad103709exdd007
	* {
	    "est_op_end_time": "",
	    "exaunit_id": 2301,
	    "message": "processing",
	    "op": "exacompute_vm_operation_post",
	    "op_start_time": "2023-07-27T18:26:42+0000",
	    "status": 202,
	    "status-detail": "processing",
	    "status_uri":
	    "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/4c15bba7-c4f4-41e0-b1fc-7ee0be89dd6b"
	}

        ecra> exacompute vm action=move exaUnitId=2 vmName=sea301112exddu0101 sourceDom0=sea301112exdd001 targetDom0=sea301112exdd002
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exacompute_vm_operation_post",
            "op_start_time": "2022-09-16T02:49:10+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/79b5e84b-26fb-4e1e-84e8-e899fc053507",
            "xml": "/scratch/rmavilla/ecra_installs/ecra/mw_home/user_projects/domains/PODREPO/XMLTransientStorage__1234.xml"
        }
        ecra>

10) createmaintenancedomain
  Usage:
    exacompute createmaintenancedomain json_path=<payload path>
      Values:
        <json_path>  : File path containing the payload
      Purpose:
        Creates a maintenance domain in ECRA
      Examples:
        ecra> exacompute createmaintenancedomain json_path=/scratch/rgmurali/ecra_installs/ecrastack/ecracli/tmpl/createmd.json
            * {
                 "est_op_end_time": "",
                 "message": "processing",
                 "op": "md_create",
                 "op_start_time": "2022-10-15T17:10:20+0000",
                 "status": 202,
                 "status-detail": "processing",
                 "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/0a294a0d-bae4-4303-a754-38eb8783f99d"
              }
      Notes:
      [rgmurali@slc10xfq tmpl]$ cat createmd.json
      {
        "fabricname": "SEA200041QFAB",
        "id": 6 ,
        "startDay": 200,
        "endDay": 214
      }

11) listmaintenancedomain
  Usage:
    exacompute listmaintenancedomain <fabricname=<QFABNAME>>
      Values:
        <fabricname> : Name of the QFAB
      Purpose:
        Lists all the Maintenance domains in the QFAB
      Examples:
        ecra>  exacompute listmaintenancedomain fabricname=SEA200041QFAB
		* {
		    "items": [
		        {
		            "fabricName": "SEA200041QFAB",
		            "maintenanceDomain": [
		                {
		                    "endDay": 214,
		                    "id": 6,
		                    "nodeIds": [],
		                    "startDay": 200,
		                    "totalResources": []
		                },
		                {
		                    "endDay": 214,
		                    "id": 5,
		                    "nodeIds": [],
		                    "startDay": 200,
		                    "totalResources": []
		                },
		                {
		                    "endDay": 214,
		                    "id": 1,
		                    "nodeIds": [],
		                    "startDay": 200,
		                    "totalResources": [
		                        {
		                            "hwModel": "X8M-2",
		                            "resources": {
		                                "cpu": {
		                                    "className": "CpuResource",
		                                    "used": 0,
		                                    "value": 52
		                                },
		                                "memory": {
		                                    "className": "MemoryResource",
		                                    "used": null,
		                                    "value": 1621469691904
		                                },
		                                "network": null,
		                                "storageLocal": {
		                                    "className": "StorageLocalResource",
		                                    "used": null,
		                                    "value": 8356288371097
		                                }
		                            }
		                        }
		                    ]
		                },
		                {
		                    "endDay": 128,
		                    "id": 2,
		                    "nodeIds": [],
		                    "startDay": 115,
		                    "totalResources": [
		                        {
		                            "hwModel": "X8M-2",
		                            "resources": {
		                                "cpu": {
		                                    "className": "CpuResource",
		                                    "used": 0,
		                                    "value": 52
		                                },
		                                "memory": {
		                                    "className": "MemoryResource",
		                                    "used": null,
		                                    "value": 1621469691904
		                                },
		                                "network": null,
		                                "storageLocal": {
		                                    "className": "StorageLocalResource",
		                                    "used": null,
		                                    "value": 8356288371097
		                                }
		                            }
		                        }
		                    ]
		                },
		                {
		                    "endDay": 214,
		                    "id": 3,
		                    "nodeIds": [],
		                    "startDay": 200,
		                    "totalResources": []
		                },
		                {
		                    "endDay": 113,
		                    "id": 0,
		                    "nodeIds": [],
		                    "startDay": 99,
		                    "totalResources": []
		                }
		            ]
		        }
		    ]
		}
        
12) getmaintenancedomain
  Usage:
    exacompute getmaintenancedomain <fabricname=QFABNAME> <maintenancedomainid=mdid>
      Values:
        <fabricname>  : Name of the QFAB
        <maintenancedomainid> : Maintenance Domain ID
      Purpose:
        Gets the details of a particular maintenance domain in a QFAB
      Examples:
        ecra> exacompute getmaintenancedomain fabricname=SEA200041QFAB maintenancedomainid=2
		* {
		    "endDay": 128,
		    "id": 2,
		    "nodeIds": [],
		    "startDay": 115,
		    "totalResources": [
		        {
		            "hwModel": "X8M-2",
		            "resources": {
		                "cpu": {
		                    "className": "CpuResource",
		                    "used": 0,
		                    "value": 52
		                },
		                "memory": {
		                    "className": "MemoryResource",
		                    "used": null,
		                    "value": 1621469691904
		                },
		                "network": null,
		                "storageLocal": {
		                    "className": "StorageLocalResource",
		                    "used": null,
		                    "value": 8356288371097
		                }
		            }
		        }
		    ]
		}

13) updatemaintenancedomain
  Usage:
    exacompute updatemaintenancedomain <fabricname=QFABNAME> <maintenancedomainid=mdid> <json_path=<payload path>>
      Values:
        <fabricname>  : Name of the QFAB
        <maintenancedomainid> : Maintenance Domain ID
        <json_path>  : File path containing the payload
      Purpose:
        Updates the attributes of a maintenance domain in ECRA
      Examples:
        ecra> exacompute updatemaintenancedomain fabricname=SEA200041QFAB maintenancedomainid=1 json_path=/scratch/rgmurali/ecra_installs/ecrastack/ecracli/tmpl/updatemd.json
			* {
			    "est_op_end_time": "",
			    "message": "processing",
			    "op": "md_put",
			    "op_start_time": "2022-10-15T20:34:45+0000",
			    "status": 202,
			    "status-detail": "processing",
			    "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/f12c870b-0b0b-45d2-8aae-c1ddbf1b9077"
			}
	  Notes:
	  [rgmurali@slc10xfq tmpl]$ cat updatemd.json 
		{
		    "startDay": 2,
		    "endDay": 16,
		    "action" : "start"
		}

14) deletemaintenancedomain
  Usage:
    exacompute deletemaintenancedomain <fabricname=QFABNAME> <maintenancedomainid=mdid>
      Values:
        <fabricname>  : Name of the QFAB
        <maintenancedomainid> : Maintenance Domain ID
      Purpose:
        Deletes a maintenance domain in ECRA
      Examples:
        ecra> exacompute deletemaintenancedomain fabricname=SEA200041QFAB maintenancedomainid=6
		* {
		    "est_op_end_time": "",
		    "message": "processing",
		    "op": "md_delete",
		    "op_start_time": "2022-10-15T17:16:43+0000",
		    "status": 202,
		    "status-detail": "processing",
		    "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/2501cf1b-184e-4453-8dd9-587f18fd2493"
		}

15) getmdnodes
  Usage:
    exacompute getmdnodes <fabricname=QFABNAME> <maintenancedomainid=mdid>
      Values:
        <fabricname>  : Name of the QFAB
        <maintenancedomainid> : Maintenance Domain ID
      Purpose:
        Gets all the nodes of a maintenance domain in ECRA
      Examples:
        ecra> exacompute getmdnodes fabricname=SEA200041QFAB maintenancedomainid=1 
		* {
		    "items": [
		        {
		            "imageVersion": "19.2.6.0.0.190911.1",
		            "nodeId": "sea303716exdd017.iad103716exd.adminiad1.oraclevcn.com",
		            "nodeState": "INNOTIFICATION"
		        }
		    ]
		}

16) createmdcontext
  Usage:
    exacompute createmdcontext json_path=<payload path>
      Values:
        <json_path>  : File path containing the payload
      Purpose:
        Creates a maintenance domain context in ECRA
      Examples:
        ecra> exacompute createmdcontext json_path=/scratch/rgmurali/ecra_installs/ecrastack/ecracli/tmpl/createmdcontext.json
		* {
		    "est_op_end_time": "",
		    "message": "processing",
		    "op": "mdcontext_post",
		    "op_start_time": "2022-10-17T04:29:34+0000",
		    "status": 202,
		    "status-detail": "processing",
		    "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/355137ca-d0bb-4678-9b44-80926b28e7ca"
		}
      Notes:
      [rgmurali@slc10xfq tmpl]$ cat createmdcontext.json 
		{
		    "fabricname": "SEA200041QFAB",
		    "totalDuration": 45,
		    "notificationDuration" : 14,
		    "currentMdId": -1,
		    "mdResourceThreshold": [
		        {
		            "hwmodel": "X8M-2",
		            "resources": {
		                "cpu": {
		                    "value": 500
		                },
		                "memory": {
		                    "value": 16214696919040
		                },
		                "storageLocal": {
		                    "value": 83562883710976
		                }
		            }
		        },
		        {
		            "hwmodel": "X9M-2",
		            "resources": {
		                "cpu": {
		                    "value": 500
		                },
		                "memory": {
		                    "value": 16214696919040
		                },
		                "storageLocal": {
		                    "value": 83562883710976
		                }
		            }
		        }
		    ]
		}

17) updatemdcontext
  Usage:
    exacompute updatemdcontext <fabricname=QFABNAME> json_path=<payload path>
      Values:
        <fabricname> : Name of the QFAB
        <json_path>  : File path containing the payload
      Purpose:
        Updates a maintenance domain context in ECRA
      Examples:
        ecra> exacompute updatemdcontext fabricname=SEA200041QFAB json_path=/scratch/rgmurali/ecra_installs/ecrastack/ecracli/tmpl/updatemdcontext.json
		* {
		    "est_op_end_time": "",
		    "message": "processing",
		    "op": "mdcontext_put",
		    "op_start_time": "2022-10-17T17:24:27+0000",
		    "status": 202,
		    "status-detail": "processing",
		    "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/f5135622-8514-4643-b8e5-9d888e2a3560"
		}
	  Notes:
		{
		    "totalDuration": 90,
		    "notificationDuration" : 28,
		    "currentMdId": 0,
		    "mdResourceThreshold": [
		        {
		            "hwmodel": "X10M-2",
		            "resources": {
		                "cpu": {
		                    "value": 500
		                },
		                "memory": {
		                    "value": 16214696919040
		                },
		                "storageLocal": {
		                    "value": 83562883710976
		                }
		            }
		        }
		    ]
		}

18) deletemdcontext
  Usage:
    exacompute deletemdcontext <fabricname=QFABNAME>
      Values:
        <fabricname>  : Name of the QFAB
      Purpose:
        Deletes a maintenance domain context in ECRA
      Examples:
        ecra> exacompute deletemdcontext fabricname=SEA200041QFAB
		* {
		    "est_op_end_time": "",
		    "message": "processing",
		    "op": "mdcontext_delete",
		    "op_start_time": "2022-10-17T17:33:44+0000",
		    "status": 202,
		    "status-detail": "processing",
		    "status_uri": "http://slc10xfq.us.oracle.com:9001/ecra/endpoint/statuses/0b43537c-f3e4-4aac-8823-428f61529854"
		}

19) getmdcontext
  Usage:
    exacompute getmdcontext <fabricname=QFABNAME>
      Values:
        <fabricname>  : Name of the QFAB
      Purpose:
        Gets the details of a maintenance domain context in ECRA
      Examples:
        ecra> exacompute getmdcontext fabricname=SEA200041QFAB
		* {
		    "currentMdId": 0,
		    "mdResourceThreshold": [
		        {
		            "hwModel": "X8M-2",
		            "resources": {
		                "cpu": {
		                    "className": "CpuResource",
		                    "used": 0,
		                    "value": 500
		                },
		                "memory": {
		                    "className": "MemoryResource",
		                    "used": 0,
		                    "value": 1195376640
		                },
		                "network": {
		                    "backupNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    },
		                    "clientNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    },
		                    "vipNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    }
		                },
		                "storageLocal": {
		                    "className": "StorageLocalResource",
		                    "used": 0,
		                    "value": 0
		                }
		            }
		        },
		        {
		            "hwModel": "X9M-2",
		            "resources": {
		                "cpu": {
		                    "className": "CpuResource",
		                    "used": 0,
		                    "value": 500
		                },
		                "memory": {
		                    "className": "MemoryResource",
		                    "used": 0,
		                    "value": 1195376640
		                },
		                "network": {
		                    "backupNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    },
		                    "clientNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    },
		                    "vipNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    }
		                },
		                "storageLocal": {
		                    "className": "StorageLocalResource",
		                    "used": 0,
		                    "value": 0
		                }
		            }
		        },
		        {
		            "hwModel": "X10M-2",
		            "resources": {
		                "cpu": {
		                    "className": "CpuResource",
		                    "used": 0,
		                    "value": 1000
		                },
		                "memory": {
		                    "className": "MemoryResource",
		                    "used": 0,
		                    "value": 1195376640
		                },
		                "network": {
		                    "backupNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    },
		                    "clientNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    },
		                    "vipNetwork": {
		                        "dom0OracleName": null,
		                        "domUOracleName": null,
		                        "domainName": "",
		                        "gateway": null,
		                        "hostName": "",
		                        "ip": "",
		                        "macAddress": null,
		                        "netmask": null,
		                        "standbyVnicMac": null,
		                        "vlantag": 0
		                    }
		                },
		                "storageLocal": {
		                    "className": "StorageLocalResource",
		                    "used": 0,
		                    "value": 15000
		                }
		            }
		        }
		    ],
		    "mds": [],
		    "notificationDuration": 30,
		    "totalDuration": 90,
		    "totalMds": 0
		}

20) fleetstateunlock
  Usage:
    ecra> exacompute fleetstateunlock fleetstatehandle=<statehandle> fleetlockhandle=<lockhandle>
  Purpose:
    Release the lock in the state lock data
  Examples:
    ecra> exacompute fleetstateunlock
    * {"fleetStateHandle": 100088, "lockstatus": 1}


21) computedetail
  Usage:
    ecra> exacompute computedetail hostname=<HOSTNAME>
    Values:
        <HOSTNAME>  : An oracle hostname or smartnicid
  Purpose:
    Returns the list of racks associated with the provided parameter, this could be an oracle hostname or a smartnicid
  Examples:
    ecra> exacompute computedetail hostname=iad103709exdd004
    * {
        "op": "exacompute_listracks_get",
        "racks": [
            {
                "atp": "N",
                "clustermodel": "X8M-2",
                "clustername": "MvM-c1",
                "clusterstatus": "PROVISIONED",
                "compartmentid": "ocid1.compartment.region1..aaaaaaaarwmgoyrgulkmkjhwivx5ww3vtmxfuiuitgqoaiyh5dps7xyk5lpq ",
                "exaocid": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa653avxwdmuczr75j3ufk5w5hy5rqtavjm4cywvny37bq",
                "exaunitid": "1921",
                "rackname": "iad103714exd-d0-01-02-cl-01-03-clu01",
                "tenancyname": "dbaasnm",
                "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq"
            }
        ],
        "status": 200,
        "status-detail": "success"
    }

    ecra> exacompute computedetail hostname=4.0G1950-GBC001018
    * {
        "op": "exacompute_listracks_get",
        "racks": [
            {
                "atp": "N",
                "clustermodel": "X8M-2",
                "clustername": "MvM-c1",
                "clusterstatus": "PROVISIONED",
                "compartmentid": "ocid1.compartment.region1..aaaaaaaarwmgoyrgulkmkjhwivx5ww3vtmxfuiuitgqoaiyh5dps7xyk5lpq ",
                "exaocid": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa653avxwdmuczr75j3ufk5w5hy5rqtavjm4cywvny37bq",
                "exaunitid": "1921",
                "rackname": "iad103714exd-d0-01-02-cl-01-03-clu01",
                "tenancyname": "dbaasnm",
                "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq"
            }
        ],
        "status": 200,
        "status-detail": "success"
    }

22) updatenodemdmapping
  Usage:
    exacompute updatenodemdmapping json_path=<filepath>
      Values:
        <json_path>  : File path having the payload
      Purpose:
        The API will update the MD ID for the given node name, for a given list of these mappings
      Examples:
        ecra> exacompute updatenodemdmapping json_path=/scratch/rgmurali/ecra_installs/activeecra/ecracli/tmpl/nodemapping.json
        * {"status": 200, "status-detail": "success", "op": "exacompute_node_to_md_mapping_put"}
       

23) reshapecluster
    Usage:
         ecra> exacompute reshapecluster vmclusterid=<VMCLUSTERID> [cores=<CORES> memoryGb=<MEMORY> ohomeSizeGb=<OHSIZE> filesystem=<montpoint:size, etc> volumes=<montpoint:size, etc>]]
         Values:
            VMCLUSTERID    : VM cluster ocid of the rack
            CORES          : #of Cores
            MEMORY         : Memory in GB
            OHSIZE         : Oracle home in GB
            FILESYSTEM     :A comma separated array of [name of the mountpoint: size in GB]. e.g. filesystem=/u01:50,/var:15
            VOLUMES        : For filesystem reshape in exacompute is also required a required a comma separated array of [name of the volume type: size in GB]. e.g. volumes=u01:50,system:15
    Note:
        The command should be used just with one of the following options at a time:
            CORES,MEMORY,OHSIZE,FILESYSTEM
    Purpose:
        Performs the reshapecluster operation over the provided vmclusterid.
    Examples:
    ecra> exacompute reshapecluster vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d48 memoryGb=100
    * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d155c878-a3c5-4727-bc0c-aa752aaf6634", "op": "exacompute_updatecluster_put", "op_start_time": "2023-03-11T18:14:46+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "exaunit_id": 1544}


24) addclusterprecheck
  Usage:
    exacompute addclusterprecheck json_path=<PATH> hostnames=<HOSTNAMES>
      Values:
        <PATH>  : Path for the add cluster
        <HOSTNAMES> : Hostnames comma separated
      Purpose:
        Precheck for provisioning exacompute rack based on the provided information
      Examples:
        ecra> exacompute addclusterprecheck json_path=/scratch/illamas/ecra_installs/irving1/exacompute_add_cluster_2computes.json
        * {"error":"There is already a cluster with the same clusterId","status":200,"op":"exacompute_addcluster_precheck_post","status-detail":"success"}

        ecra> exacompute addclusterprecheck json_path=/ade/illamas_ECS_MAIN_LINUX.X64_new/ecs/ecra/test/scenarios/exacompute/payloads/addcluster.json hostnames=iad103709exdd008,iad103709exdd007

25) initiator
  Usage:
    exacompute initiator nodefqdn=<HOSTNAME>
      Values:
        <HOSTNAME> : This value could be the hostname with or without the domain.
      Purpose:
        Request initiator to Exacloud for the given node
      Examples:
        ecra> exacompute initiator nodefqdn=iad103716exdd008
        * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d95879c8-0252-4881-8621-e7234154ba94", "op": "exacompute_initialingestion_post", "op_start_time": "2023-05-15T18:37:53+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

        ecra> status d95879c8-0252-4881-8621-e7234154ba94
        * {"start_time": "2023-05-15T18:37:53+0000", "end_time": "2023-05-15T18:37:58+0000", "resource_id": "iad103716exdd008", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-05-15T18:37:53+0000", "status": 200, "message": "Done", "op": "exacompute-init", "atp_enabled": "Y", "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d95879c8-0252-4881-8621-e7234154ba94", "status-detail": "success"}

26) updateocid
  Usage:
    exacompute updateocid nodefqdn=<HOSTNAME> nodeocid=<OCID>
      Values:
        <HOSTNAME>  : This value could be the hostname with or without the domain.
        <OCID>      : ocid of the hostname
      Purpose:
        Updates the node ocid for the provided hostname
      Examples:
        ecra> exacompute updateocid nodefqdn=iad103716exdd008 nodeocid=ocid.dom0.abc1
        * {"status": 200, "op": "exacompute_initialingestion_put", "status-detail": "success"} 
        ecra> exacompute addclusterprecheck json_path=/ade/illamas_ECS_MAIN_LINUX.X64_new/ecs/ecra/test/scenarios/exacompute/payloads/addcluster.json hostnames=iad103709exdd008,iad103709exdd007 

27) gettemplate
  Usage:
    exacompute gettemplate type=<TYPE> [vmclusterocid=<VMCLUSTEROCID>] 
      Values:
        <TYPE>  : Type of the system, for example: exacsexacompute
        <VMCLUSTEROCID> : vm cluster ocid of the rack that you want to get the template
      Purpose:
        Based on the provided parameters, command will return a template.
      Examples:
        ecra> exacompute gettemplate type=exacsexacompute
        * {
            "platformtype": "exacsexacompute",
            "values": [
                {
                    "volumesizegb": "50",
                    "volumetype": "gi"
                },
                {
                    "volumesizegb": "32",
                    "volumetype": "gcv"
                },
                {
                    "volumesizegb": "900",
                    "volumetype": "u02"
                },
                {
                    "volumesizegb": "3500",
                    "volumetype": "system"
                }
            ]
        }

28) postvolumes
  Usage:
    exacompute postvolumes jsonpath=<JSONPATH>
      Values:
        <JSONPATH> : Path to the json that contains all the volumes information
      Purpose:
        Stores volumes information in ecra DB
      Examples:
        ecra> exacompute postvolumes jsonpath=/scratch/illamas/payloads/exacompute/postvolumes.json
        * {"status": 200, "op": "exacompute_volumes_post", "status-detail": "success"}

29) getvolumes
  Usage:
    exacompute getvolumes rackname=<RACKNAME>
      Values:
        <RACKNAME> the rackname could be the name of the rack or the ocid of the rack
      Purpose:
        This API returns the volumes associated with the provided parameter
      Examples:
        ecra> exacompute getvolumes rackname=exacompute-iad1-d2-a863a3a8-691a-43f2-8472-2f8caaf90757-clu01
        * {
            "vaultid": "oracle-vault",
            "nodes": [
                {
                    "oraclehostname": "iad103709exdd008",
                    "clienthostname": "testVmclusterDemo009client1-vip166.exacomputecusto.jboduvcn.oraclevcn.com",
                    "volumes": [
                        {
                            "volumeid": "1ghi",
                            "volumetype": "gcv",
                            "volumename": "CPGCV1",
                            "volumedevicepath": "system_xyz1",
                            "volumesizegb": "32"
                        },
                        {
                            "volumeid": "1def",
                            "volumetype": "gi",
                            "volumename": "cpGi1",
                            "volumedevicepath": "system_xyz1",
                            "volumesizegb": "50"
                        },
                        {
                            "volumeid": "1abc",
                            "volumetype": "system",
                            "volumename": "cpSystem1",
                            "volumedevicepath": "system_xyz1",
                            "volumesizegb": "3420"
                        },
                        {
                            "volumeid": "1jkl",
                            "volumetype": "u02",
                            "volumename": "CPu021",
                            "volumedevicepath": "system_xyz1",
                            "volumesizegb": "900"
                        }
                    ]
                },
                {
                    "oraclehostname": "iad103709exdd007",
                    "clienthostname": "testVmclusterDemo009client2-vip283.exacomputecusto.jboduvcn.oraclevcn.com",
                    "volumes": [
                        {
                            "volumeid": "2ghi",
                            "volumetype": "gcv",
                            "volumename": "CPGCV2",
                            "volumedevicepath": "system_xyz2",
                            "volumesizegb": "32G"
                        },
                        {
                            "volumeid": "2def",
                            "volumetype": "gi",
                            "volumename": "cpGi2",
                            "volumedevicepath": "system_xyz2",
                            "volumesizegb": "50G"
                        },
                        {
                            "volumeid": "2abc",
                            "volumetype": "system",
                            "volumename": "cpSystem2",
                            "volumedevicepath": "system_xyz2",
                            "volumesizegb": "3.42T"
                        },
                        {
                            "volumeid": "2jkl",
                            "volumetype": "u02",
                            "volumename": "CPu022",
                            "volumedevicepath": "system_xyz2",
                            "volumesizegb": "900G"
                        }
                    ]
                }
            ],
            "status": 200,
            "op": "exacompute_volumes_get",
            "status-detail": "success"
        }

30) validatevolumes

Description:
*This will call the validate volumes API and the GET result API, Volume Validation calls exacloud to check on attached volumes*

Usages:
exacompute validatevolumes rackname=<RACKNAME> hostname=<hostname> [guestname=<guestname> edvvolume=<edvvolume>]

Values:
- <RACKNAME> the rackname could be the name of the rack or the ocid of the rack
- <hostname> oracle hostname, this can't be used with rackname, use either one
- <guestname> client hostname for domu filter
- <edvvolume> edvvolume (device path) filter, can use comma to send multiple volumes

Examples:
```json
ecra> exacompute validatevolumes
rackname=exacompute-iad1-d2-595b8f27-a42f-46bb-93b4-68c2767ceef0-clu01 wait
* {"status": 202, "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/43ab601c-f968-482d-9653-8b6e729051d1",
"op": "exacompute_volumes_val_post", "op_start_time":
"2025-08-14T21:20:57+0000", "est_op_end_time": "", "message": "processing",
"status-detail": "processing"}
* Status UUID: 43ab601c-f968-482d-9653-8b6e729051d1
* {
    "attached_volumes": [],
    "unattached_volumes": [],
    "stale_volumes": [],
    "status": 200,
    "op": "exacompute_volumes_val_get",
    "status-detail": "success"
}

ecra> exacompute validatevolumes
rackname=exacompute-iad1-d2-595b8f27-a42f-46bb-93b4-68c2767ceef0-clu01
* {"status": 202, "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/fb463def-cf2c-4331-9e3d-0f0fcf1bb68b",
"op": "exacompute_volumes_val_post", "op_start_time":
"2025-08-14T21:20:12+0000", "est_op_end_time": "", "message": "processing",
"status-detail": "processing"}
ecra> status fb463def-cf2c-4331-9e3d-0f0fcf1bb68b
* {"progress_percent": 0, "start_time_ts": "2025-08-14 21:20:12.0", "end_time":
"2025-08-14T21:20:22+0000", "ecra_server": "EcraServer1", "wf_uuid":
"c2a631e2-7778-4cec-b132-c4099384c4a1", "start_time":
"2025-08-14T21:20:12+0000", "last_heartbeat_update": "2025-08-14T21:20:12+0000",
"status": 200, "message": "Done", "op": "EXACOMPUTE_PRECHECKS", "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/fb463def-cf2c-4331-9e3d-0f0fcf1bb68b",
"status-detail": "success"}
ecra> workflows describe workflowId=c2a631e2-7778-4cec-b132-c4099384c4a1
* {
    "workflowName": "exacompute-volume-validation-wfd",
    "workflowId": "c2a631e2-7778-4cec-b132-c4099384c4a1",
    "workflowStatus": "Completed",
    "workflowStartTime": "14 Aug 2025 21:20:12 UTC",
    "workflowEndTime": "14 Aug 2025 21:20:22 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "VolumeValidationTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Aug 14 21:20:12 UTC 2025",
            "taskEndTime": "Thu Aug 14 21:20:22 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:10"
        },
        {
            "taskName": "EndWf",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu Aug 14 21:20:22 UTC 2025",
            "taskEndTime": "Thu Aug 14 21:20:22 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "EndWf",
            "lastOperationDetails": {
                "lastTaskLastOperationId":
"031a6d62-76be-43db-a5cd-1ab57e7b4804",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "14 Aug 2025 21:20:22 UTC",
                "lastTaskLastOperationEndTime": "14 Aug 2025 21:20:22 UTC"
            }
        }
    ],
    "workflowElapsed": "00:00:10",
    "workflowRuntime": "00:00:10",
    "exaOCID": "",
    "requestId": "fb463def-cf2c-4331-9e3d-0f0fcf1bb68b",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}
```

31) generatesshkeys
  Usage:
    exacompute generatesshkeys hostname=<HOSTNAME>
      Values:
        <HOSTNAME> : Name of the node
      Purpose:
        Generate an SSH key pair for the indicated node and store it.
      Examples:
        ecra> exacompute generatesshkeys hostname=iad103709exdd011
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exacompute_generate_ssh_keys",
            "op_start_time": "2023-05-12T21:47:36+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d2950bc8-985a-418a-b7da-eb1515bcce1a"
        }
        ecra> status d2950bc8-985a-418a-b7da-eb1515bcce1a
        * {"start_time": "2023-05-12T21:47:36+0000", "end_time": "2023-05-12T21:47:41+0000", "resource_id": "iad103709exdd011", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-05-12T21:47:36+0000", "status": 200, "message": "Done", "op": "exacompute-generatesshkeys", "atp_enabled": "Y", "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d2950bc8-985a-418a-b7da-eb1515bcce1a", "status-detail": "success"}


32) getpublickey
  Usage:
    exacompute getpublickey hostnames=<HOSTNAME>
      Values:
        <HOSTNAME> : Name of the node
      Purpose:
        Retreive the stored public key of the indicated node
      Examples:
        ecra>  exacompute getpublickey hostname=iad103709exdd011
        * {
            "oracle_hostname": "iad103709exdd011",
            "sshkey": "initiator.xyz.123",
            "status": "200"
        }

33) updatevaultaccessdetals
  Usage:
    exacompute updatevaultaccessdetails hostname=<HOSTNAME> exarootuser=<USERNAME> exarooturl=<URL> vaultaccess=<VAULT ACCESS> vaultid=<VAULT ID> trustcertificates=<CERT1, CERT2>
      Values:
        <SSHKEY>  : Key generated of the node used.
        <USERNAME> : Value of the exaroot username.
        <URL>: Value of the exaroot url.
        <VAULT ACCESS>: String that of the vault access.
        <VAULT ID>: Identificator of the vault.
        <TRUST CERTIFICATES>: Path of json file where the JSONArray of certificates are stored.
      Purpose:
        Retreive and store the vault acces details.
      Examples:
ecra> exacompute updatevaultaccessdetails hostname=iad103709exdd013 exarootuser=user1 exarooturl=user1.com vaultaccess=access1 vaultid=id1 trustcertificates=cert1,cert2,cert3
* {
    "est_op_end_time": "",
    "message": "processing",
    "op": "exacompute_update_access_vault_details",
    "op_start_time": "2023-05-17T16:21:31+0000",
    "status": 202,
    "status-detail": "processing",
    "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/0dd3f609-cf7c-4fdc-ae26-80000dfa04b8"
}
ecra> status 0dd3f609-cf7c-4fdc-ae26-80000dfa04b8
* {"start_time": "2023-05-17T16:21:31+0000", "end_time": "2023-05-17T16:21:36+0000", "resource_id": "user1", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-05-17T16:21:31+0000", "status": 200, "message": "Done", "op": "exacompute-getvaultaccessdetails", "atp_enabled": "Y", "status_uri": "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/0dd3f609-cf7c-4fdc-ae26-80000dfa04b8", "status-detail": "success"}

34) precheckedvvolumes
  Usage:
    exacompute precheckedvvolumes jsonpath=<JSONPATH>
      Values:
        <JSONPATH> : Path to the json that contains all the volumeMountNames information
      Purpose:
        Performs EDV volumeMountNames Precheck
      Example:
        ecra> exacompute precheckedvvolumes jsonpath=/home/ybansod/Documents/edv_precheck_input_payload.json
        * {"status":500,"message":"Exacloud response do not have uuid requestId:0f69560c-95a2-41a2-8f2e-b6517c89a756 exacloud_response: {\"wf_uuid\":\"3e523fc1-a1aa-4d59-98fb-018d3f3c5ccd\",\"status\":\"Pending\",\"success\":\"True\"}","status-detail":"Exacloud response do not have uuid requestId:0f69560c-95a2-41a2-8f2e-b6517c89a756 exacloud_response: {\"wf_uuid\":\"3e523fc1-a1aa-4d59-98fb-018d3f3c5ccd\",\"status\":\"Pending\",\"success\":\"True\"}","op":"edv_volume_mount_names_precheck_post"}
    
35) snapshotmount
  Usage:
    exacompute snapshotmount jsonpath=<JSONPATH> idemtoken=<IDEMTOKEN> vminstanceid=<VMINSTANCEID>
      Values:
        <JSONPATH>  : Path to the JSON file that contains all the parameters for vm snapshot mount operation
        <IDEMTOKEN> : Idemtoken for the operation, this can be provided also inside of the input payload
        <VMINSTANCEID> :  Ocid of the domu where snapshot will be mounted
      Purpose:
        Sends information to exacloud for vm snapshot mount operation
      Example:
        ecra> exacompute snapshotmount jsonpath=/ade/illamas_ECS_MAIN_LINUX.X64_new/ecs/ecra/test/scenarios/exacompute/payloads/vmrestore.json
        * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/767d29d4-05ad-472e-95bd-7eee63de2379", "op": "exacomputemsnapshot_post", "op_start_time": "2023-07-04T21:57:26+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}    

36) reshapeclusterPrecheck
    Usage:
         ecra> exacompute reshapecluster_precheck vmclusterid=<VMCLUSTERID> [cores=<CORES> memoryGb=<MEMORY> ohomeSizeGb=<OHSIZE>]
         Values:
            VMCLUSTERID    : VM cluster ocid of the rack
            CORES          : #of Cores
            MEMORY         : Memory in GB
            OHSIZE         : Oracle home in GB
    Note:
        The command should be used just with one of the following options at a time:
            CORES,MEMORY,OHSIZE
    Purpose:
        Performs the reshapecluster_precheck operation over the provided vmclusterid.
    Examples:       
        ecra> exacompute reshapecluster_precheck
             vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d294
             cores=8
            * {"idemToken": "b1af0eb9-c6ef-41c8-a26b-e349874c393f", "vmClusterOcid":
            "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d294",
           "status": 200, "op": "exacompute_updateclusterPrecheck_post", "status-detail":"success"} 

37) listsystemvault
  Usage:
    exacompute listsystemvault vaultid=<VAULT_ID>
      Arguments:
        vaultid : [Optional] List system vault info for matching vaultId
      Purpose:
        List system vaults
      Example:
        ecra> exacompute listsystemvault
          * {
              "system_vaults": [
                  {
                      "vaultId": "yashp",
                      "fabricId": "IAD1FABRIC1",
                      "referenceIdentifier": "cad",
                      "vaultName": "vaultabc",
                      "vaultCompartmentId": "cs",
                      "lifecycleState": "running",
                      "isSystemGenerated": true,
                      "infrastructureType": "typeA",
                      "extremeFlashSizeInGBs": "234",
                      "highCapacitySizeInGBs": "666",
                      "extremeFlashIops": "786",
                      "highCapacityIops": "200"
                  },
                  {
                      "vaultId": "yashs",
                      "fabricId": "IAD1FABRIC1",
                      "referenceIdentifier": "abc",
                      "vaultName": "yashvaultabc",
                      "vaultCompartmentId": "cstest",
                      "lifecycleState": "running",
                      "isSystemGenerated": true,
                      "infrastructureType": "typeA",
                      "extremeFlashSizeInGBs": "234",
                      "highCapacitySizeInGBs": "234",
                      "extremeFlashIops": "123",
                      "highCapacityIops": "123"
                  }
              ],
              "status": 200,
              "op": "system_vault_get",
              "status-detail": "success"
          }

38) updatesystemvault
  Usage:
    exacompute updatesystemvault vaultid=<VAULT_ID> jsonpath=<JSONPATH>
      Values:
        <VAULT_ID> : VaultId of system vault to be updated
        <JSONPATH> : Payload containing values to be updated
      Purpose:
        Updated system vault associated with given vaultId with values from given payload
      Example:
        ecra> exacompute updatesystemvault vaultid=yashp jsonpath=/home/ybansod/Documents/updatesystemvault_payload.json
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "system_vault_update_put",
            "op_start_time": "2023-07-25T09:11:24+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://phoenix121588.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d10259ad-801e-4739-97b4-1100b94836e5"
        }

39) deletesystemvault
  Usage:
    exacompute deletesystemvault vaultid=<VAULT_ID>
      Values:
        <VAULT_ID> : VaultId of system vault to be deleted
      Purpose:
        Delete system vault associated with given vaultId
      Example:
        ecra> exacompute deletesystemvault vaultid=yashp
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "system_vault_delete",
            "op_start_time": "2023-07-25T10:16:39+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://phoenix121588.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/7149dcea-c81e-4aca-9ff8-f8005a59e268"
        }
        ecra> status 7149dcea-c81e-4aca-9ff8-f8005a59e268
        * {"remote_user": "ops", "start_time": "2023-07-25T10:16:39+0000", "progress_percent": 0, "end_time": "2023-07-25T10:16:52+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-07-25T10:16:39+0000", "wf_uuid": "6419f046-7b9e-4e84-a907-98bf5bac844d", "status": 200, "message": "Done", "op": "systemvault-deletion", "completion_percentage": 0, "atp_enabled": "N", "status_uri": "http://phoenix121588.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/7149dcea-c81e-4aca-9ff8-f8005a59e268", "status-detail": "success"}

40) createsystemvault
  Usage:
    exacompute createsystemvault jsonpath=<JSONPATH>
      Values:
        <JSONPATH> : Payload path containing registration info for system vault
      Purpose:
        Register System vault given details in payload
      Example:
        ecra> exacompute createsystemvault jsonpath=/home/ybansod/Documents/createsystemvault_payload.json
        * {"status": 202, "status_uri": "http://phoenix121588.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/9e5dc1c5-c4e6-4bd2-bea7-3274e2128f43", "op": "system_vault_create_post", "op_start_time": "2023-07-25T09:55:59+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}

41) getnathostnames
  Usage:
    ecra> exacompute getnathostnames hostname=<HOSTNAME>
    Values:
        <HOSTNAME>  : An oracle hostname or smartnicid
  Purpose:
    Returns the list of nat ips associated with the provided parameter, this could be an oracle hostname or a smartnicid.
  Examples:
    ecra> exacompute getnathostnames hostname=iad103709exdd014
    * {
        "nat_hostnames": [
            {
                "admin_nat_host_name": "iad103709exddu1401",
                "admin_nat_ip": "10.0.6.60",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1402",
                "admin_nat_ip": "10.1.1.232",
                "admin_vlan_tag": "100",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1403",
                "admin_nat_ip": "10.1.1.251",
                "admin_vlan_tag": "101",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1404",
                "admin_nat_ip": "10.1.2.14",
                "admin_vlan_tag": "102",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1405",
                "admin_nat_ip": "10.1.2.33",
                "admin_vlan_tag": "103",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1406",
                "admin_nat_ip": "10.1.2.52",
                "admin_vlan_tag": "104",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1407",
                "admin_nat_ip": "10.1.2.71",
                "admin_vlan_tag": "105",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1408",
                "admin_nat_ip": "10.1.2.90",
                "admin_vlan_tag": "106",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1409",
                "admin_nat_ip": "10.1.2.109",
                "admin_vlan_tag": "107",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1410",
                "admin_nat_ip": "10.1.2.128",
                "admin_vlan_tag": "108",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1411",
                "admin_nat_ip": "10.1.2.147",
                "admin_vlan_tag": "109",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1412",
                "admin_nat_ip": "10.1.2.166",
                "admin_vlan_tag": "110",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            }
        ],
        "op": "exacompute_getnathostnames_get",
        "status": 200,
        "status-detail": "success"
    }

    ecra> exacompute getnathostnames hostname=4.0G2001-GBC001453
    * {
        "nat_hostnames": [
            {
                "admin_nat_host_name": "iad103709exddu1401",
                "admin_nat_ip": "10.0.6.60",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1402",
                "admin_nat_ip": "10.1.1.232",
                "admin_vlan_tag": "100",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1403",
                "admin_nat_ip": "10.1.1.251",
                "admin_vlan_tag": "101",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1404",
                "admin_nat_ip": "10.1.2.14",
                "admin_vlan_tag": "102",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1405",
                "admin_nat_ip": "10.1.2.33",
                "admin_vlan_tag": "103",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1406",
                "admin_nat_ip": "10.1.2.52",
                "admin_vlan_tag": "104",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1407",
                "admin_nat_ip": "10.1.2.71",
                "admin_vlan_tag": "105",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1408",
                "admin_nat_ip": "10.1.2.90",
                "admin_vlan_tag": "106",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1409",
                "admin_nat_ip": "10.1.2.109",
                "admin_vlan_tag": "107",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1410",
                "admin_nat_ip": "10.1.2.128",
                "admin_vlan_tag": "108",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1411",
                "admin_nat_ip": "10.1.2.147",
                "admin_vlan_tag": "109",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            },
            {
                "admin_nat_host_name": "iad103709exddu1412",
                "admin_nat_ip": "10.1.2.166",
                "admin_vlan_tag": "110",
                "db_backup_mac": "02:00:17:01:de:be",
                "db_client_mac": "00:10:21:fc:51:6f"
            }
        ],
        "op": "exacompute_getnathostnames_get",
        "status": 200,
        "status-detail": "success"
    }

42) deletevaultaccessdetails:
  Usage:
    exacompute deletevaultaccessdetails [hostname=<HOSTNAME>| vaultaccessid=<OCID>]
      Values:
        <HOSTNAME> : Name of the node
        <OCID> : Identifier ocid of the vault access
      Purpose:
        Deletes the VaultAccess details for the indicated dom0
      Examples:
        ecra> exacompute deletevaultaccessdetails hostname=iad103709exdd011
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exacompute_update_access_vault_details",
            "op_start_time": "2023-09-07T23:38:23+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri":
        "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/5d4936cc-cb67-41b2-a4b3-bcdec268d0c1"
        }

        ecra> status 5d4936cc-cb67-41b2-a4b3-bcdec268d0c1
        * {"start_time": "2023-09-07T23:38:23+0000", "progress_percent": 0,
        "ecra_server": "EcraServer1", "last_heartbeat_update":
        "2023-09-07T23:38:23+0000", "wf_uuid": "71d3e311-a959-4ee3-b0e2-afb9fc96e29a",
        "status": 202, "message": "Pending", "op": "exacompute-deletedetails",
        "completion_percentage": 0, "status_uri":
        "http://phoenix131877.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/5d4936cc-cb67-41b2-a4b3-bcdec268d0c1",
        "op_start_time": "2023-09-07T23:38:34+0000", "est_op_end_time": ""}

        ecra> workflows describe workflowId=71d3e311-a959-4ee3-b0e2-afb9fc96e29a
        * {
            "workflowName": "exacompute-vaultaccessdelete-wfd",
            "workflowId": "71d3e311-a959-4ee3-b0e2-afb9fc96e29a",
            "workflowStatus": "Completed",
            "workflowStartTime": "07 Sep 2023 23:38:23 UTC",
            "workflowEndTime": "07 Sep 2023 23:39:32 UTC",
            "wfRollbackMode": false,
            "wfErrorMessage": "",
            "tasks": [
                {
                    "taskName": "DeleteVaultAccessDetails",
                    "taskStatus": "COMPLETE",
                    "taskStartTime": "Thu Sep 07 23:38:23 UTC 2023",
                    "taskEndTime": "Thu Sep 07 23:39:31 UTC 2023",
                    "taskErrorMessage": "",
                    "taskElapsed": "00:01:08"
                },
                {
                    "taskName": "PostDeleteVaultAccessDetails",
                    "taskStatus": "COMPLETE",
                    "taskStartTime": "Thu Sep 07 23:39:32 UTC 2023",
                    "taskEndTime": "Thu Sep 07 23:39:32 UTC 2023",
                    "taskErrorMessage": "",
                    "taskElapsed": "00:00:00"
                },
                {
                    "lastTaskName": "PostDeleteVaultAccessDetails",
                    "lastOperationDetails": {
                        "lastTaskLastOperationId":
        "0c20fbf5-e144-4396-83fc-99b9d9d807f5",
                        "lastTaskLastOperationName": "EXECUTE",
                        "lastTaskLastOperationStatus": "SUCCESS",
                        "lastTaskLastOperationStartTime": "07 Sep 2023 23:39:32 UTC",
                        "lastTaskLastOperationEndTime": "07 Sep 2023 23:39:32 UTC"
                    }
                }
            ],
            "exaOCID": "",
            "requestId": "5d4936cc-cb67-41b2-a4b3-bcdec268d0c1",
            "isWorkflowsPaused": false,
            "WFServerOwner": "EcraServer1",
            "status": 200,
            "op": "wf_describe",
            "status-detail": "success"
        }

43) getvaultaccess
  Usage:
    exacompute getvaultaccess vaultaccessid=<VAULTACCESSID>
      Values:
        <VAULTACCESSID> : OCID of the vault access registry
      Purpose:
        Retreive the stored vault access information of the indicated OCID
      Examples:
        ecra>  exacompute getvaultaccess vaultaccessid=ThisIsAnExample
        * {
            "driverversion": "Example20.5.2",
            "exarootaddress": "AddressHere",
            "exarootusername": "UserHere",
            "issystemgenerated": "true",
            "lifecyclestate": "Starting",
            "node_id": "Examplenode",
            "nodeaccessid": "ExampleId",
            "op": "exacompute_get_vault_access",
            "publickkey": "ThisIsAkEy123.ABC",
            "status": 200,
            "status-detail": "success",
            "vaultaccesscompartmentid": "ExampleComp",
            "vaultaccessid": "ThisIsAnExample",
            "vaultaccessname": "ExampleName",
            "vaultaccesstype": "ExampleType",
            "vaultid": "no_vault_ID",
            "vaultreferenceidentifier": "ExampleRef"
        }

44) updatefleetnode
  Usage:
    exacompute updatefleetnode hostname=<ORACLE_HOSTNAME> jsonpath=<JSONPATH>
      Values:
        <ORACLE_HOSTNAME> : oracle_hostname of node from ecs_hw_nodes to be updated
        <JSONPATH> : Payload containing values to be updated
      Purpose:
        Update metadata in ecs_hw_nodes table of corresponding hostname with values from payload and update fleet state-store
      Example:
        ecra> exacompute updatefleetnode hostname=sea201108exdd005 jsonpath=/home/ybansod/Documents/nodeaddition_payload.json
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "fleet_hardware_node_put",
            "op_start_time": "2023-10-23T11:59:37+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://phoenix121588.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d6cf2254-1130-498a-9e84-ddc1c0ef12f0"
        }
        ecra> status d6cf2254-1130-498a-9e84-ddc1c0ef12f0
        * {"remote_user": "ops", "start_time": "2023-10-23T11:59:37+0000", "progress_percent": 0, "end_time": "2023-10-23T11:59:51+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-10-23T11:59:37+0000", "wf_uuid": "aa58effe-5316-4539-8a1a-5a03fa274b68", "status": 200, "message": "Done", "op": "node-update-fleet-add", "completion_percentage": 0, "status_uri": "http://phoenix121588.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/d6cf2254-1130-498a-9e84-ddc1c0ef12f0", "status-detail": "success"}
        ecra> workflows describe workflowId=aa58effe-5316-4539-8a1a-5a03fa274b68
        * {
            "workflowName": "hardware-nodes-mgmt-wfd",
            "workflowId": "aa58effe-5316-4539-8a1a-5a03fa274b68",
            "workflowStatus": "Completed",
            "workflowStartTime": "23 Oct 2023 11:59:37 UTC",
            "workflowEndTime": "23 Oct 2023 11:59:37 UTC",
            "wfRollbackMode": false,
            "wfErrorMessage": "",
            "tasks": [
                {
                    "taskName": "HardwareNodesEcraUpdate",
                    "taskStatus": "COMPLETE",
                    "taskStartTime": "Mon Oct 23 11:59:37 UTC 2023",
                    "taskEndTime": "Mon Oct 23 11:59:37 UTC 2023",
                    "taskErrorMessage": "",
                    "taskElapsed": "00:00:00"
                },
                {
                    "taskName": "HardwareNodesStateStoreUpdate",
                    "taskStatus": "COMPLETE",
                    "taskStartTime": "Mon Oct 23 11:59:37 UTC 2023",
                    "taskEndTime": "Mon Oct 23 11:59:37 UTC 2023",
                    "taskErrorMessage": "",
                    "taskElapsed": "00:00:00"
                },
                {
                    "lastTaskName": "HardwareNodesStateStoreUpdate",
                    "lastOperationDetails": {
                        "lastTaskLastOperationId": "256f552a-40d9-4f62-b66e-a991bf028a39",
                        "lastTaskLastOperationName": "EXECUTE",
                        "lastTaskLastOperationStatus": "SUCCESS",
                        "lastTaskLastOperationStartTime": "23 Oct 2023 11:59:37 UTC",
                        "lastTaskLastOperationEndTime": "23 Oct 2023 11:59:37 UTC"
                    }
                }
            ],
            "exaOCID": "",
            "requestId": "d6cf2254-1130-498a-9e84-ddc1c0ef12f0",
            "isWorkflowsPaused": false,
            "WFServerOwner": "EcraServer1",
            "status": 200,
            "op": "wf_describe",
            "status-detail": "success"
        }

45) clusterdetail
  Usage:
    exacompute clusterdetail vmclusterid=<VMCLUSTERID>
      Values:
        <VMCLUSTERID>  : OCID from CP that points to the rack
      Purpose:
        Returns the detailed information about vm instances in the cluster
        
      Examples:
        ecra> exacompute clusterdetail vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d235
        * {
            "op": "exacompute_detail_vmclusters_get",
            "status": 200,
            "status-detail": "success",
            "vms": [
                {
                    "cpu": {
                        "className": "CpuResource",
                        "reservedCores": 6,
                        "used": 5,
                        "value": 50
                    },
                    "extremeFlashStorage": {
                        "className": "ExtremeFlashStorageResource",
                        "used": 0,
                        "value": 0
                    },
                    "highCapacityStorage": {
                        "className": "HighCapacityStorageResource",
                        "used": 4402,
                        "value": 0
                    },
                    "id": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525a199",
                    "memory": {
                        "className": "MemoryResource",
                        "reservedMemory": 17000000000,
                        "used": 16000000000,
                        "value": 1390000000000
                    },
                    "network": {
                        "backupNetwork": {
                            "dom0OracleName": "iad103709exdd018",
                            "domUOracleName": "iad103709exddu1802.sea2mvm01roce.adminsea2.oraclevcn.com",
                            "domainName": "exacomputebacku.jboduvcn.oraclevcn.com",
                            "gateway": "10.0.11.1",
                            "hostName": "testVmclusterDemo009backup1-vip145",
                            "ip": "10.0.11.85",
                            "macAddress": "00:00:17:01:55:1C",
                            "netmask": "255.255.255.0",
                            "standbyVnicMac": "00:00:17:01:04:4A",
                            "vlantag": 2
                        },
                        "clientNetwork": {
                            "dom0OracleName": "iad103709exdd018",
                            "domUOracleName": "iad103709exddu1802.sea2mvm01roce.adminsea2.oraclevcn.com",
                            "domainName": "exacomputecusto.jboduvcn.oraclevcn.com",
                            "gateway": "10.0.10.1",
                            "hostName": "testVmclusterDemo009client1-vip145",
                            "ip": "10.0.10.85",
                            "macAddress": "00:00:17:01:6F:C4",
                            "netmask": "255.255.255.0",
                            "standbyVnicMac": "02:00:17:01:10:9A",
                            "vlantag": 1
                        },
                        "vipNetwork": {
                            "dom0OracleName": null,
                            "domUOracleName": null,
                            "domainName": "exacomputecusto.jboduvcn.oraclevcn.com",
                            "gateway": null,
                            "hostName": "testVmclusterDemo0091-vip",
                            "ip": "10.0.10.83",
                            "macAddress": null,
                            "netmask": null,
                            "standbyVnicMac": null,
                            "vlantag": 0
                        }
                    },
                    "state": "RUNNING",
                    "storageLocal": {
                        "className": "StorageLocalResource",
                        "used": 10000000000,
                        "value": 2340000000000
                    },
                    "vmClusterId": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d235",
                    "volumes": [
                        {
                            "volumedevicepath": "system_xyz1",
                            "volumeid": "1ghi",
                            "volumename": "CPGCV1",
                            "volumesizegb": "32",
                            "volumetype": "gcv"
                        },
                        {
                            "volumedevicepath": "system_xyz1",
                            "volumeid": "1def",
                            "volumename": "cpGi1",
                            "volumesizegb": "50",
                            "volumetype": "gi"
                        },
                        {
                            "volumedevicepath": "system_xyz1",
                            "volumeid": "1abc",
                            "volumename": "cpSystem1",
                            "volumesizegb": "3420",
                            "volumetype": "system"
                        },
                        {
                            "volumedevicepath": "system_xyz1",
                            "volumeid": "1jkl",
                            "volumename": "CPu021",
                            "volumesizegb": "900",
                            "volumetype": "u02"
                        }
                    ]
                },
                {
                    "cpu": {
                        "className": "CpuResource",
                        "reservedCores": 6,
                        "used": 5,
                        "value": 50
                    },
                    "extremeFlashStorage": {
                        "className": "ExtremeFlashStorageResource",
                        "used": 0,
                        "value": 0
                    },
                    "highCapacityStorage": {
                        "className": "HighCapacityStorageResource",
                        "used": 4407,
                        "value": 0
                    },
                    "id": "Exacomp-vm-instance-00098470a9964abe9a6609fd8a9042c4135",
                    "memory": {
                        "className": "MemoryResource",
                        "reservedMemory": 17000000000,
                        "used": 16000000000,
                        "value": 1390000000000
                    },
                    "network": {
                        "backupNetwork": {
                            "dom0OracleName": "iad103709exdd013",
                            "domUOracleName": "iad103709exddu1302.sea2mvm01roce.adminsea2.oraclevcn.com",
                            "domainName": "exacomputebacku.jboduvcn.oraclevcn.com",
                            "gateway": "10.0.11.1",
                            "hostName": "testVmclusterDemo009backup2-vip116",
                            "ip": "10.0.11.45",
                            "macAddress": "00:00:17:01:F2:71",
                            "netmask": "255.255.255.0",
                            "standbyVnicMac": "00:00:17:01:BE:9B",
                            "vlantag": 2
                        },
                        "clientNetwork": {
                            "dom0OracleName": "iad103709exdd013",
                            "domUOracleName": "iad103709exddu1302.sea2mvm01roce.adminsea2.oraclevcn.com",
                            "domainName": "exacomputecusto.jboduvcn.oraclevcn.com",
                            "gateway": "10.0.10.1",
                            "hostName": "testVmclusterDemo009client2-vip116",
                            "ip": "10.0.10.215",
                            "macAddress": "00:00:17:01:89:05",
                            "netmask": "255.255.255.0",
                            "standbyVnicMac": "00:00:17:01:F9:7F",
                            "vlantag": 1
                        },
                        "vipNetwork": {
                            "dom0OracleName": null,
                            "domUOracleName": null,
                            "domainName": "exacomputecusto.jboduvcn.oraclevcn.com",
                            "gateway": null,
                            "hostName": "testVmclusterDemo0092-vip",
                            "ip": "10.0.10.154",
                            "macAddress": null,
                            "netmask": null,
                            "standbyVnicMac": null,
                            "vlantag": 0
                        }
                    },
                    "state": "RUNNING",
                    "storageLocal": {
                        "className": "StorageLocalResource",
                        "used": 10000000000,
                        "value": 2340000000000
                    },
                    "vmClusterId": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d235",
                    "volumes": [
                        {
                            "volumedevicepath": "system_xyz2",
                            "volumeid": "2ghi",
                            "volumename": "CPGCV2",
                            "volumesizegb": "32",
                            "volumetype": "gcv"
                        },
                        {
                            "volumedevicepath": "system_xyz2",
                            "volumeid": "2def",
                            "volumename": "cpGi2",
                            "volumesizegb": "50",
                            "volumetype": "gi"
                        },
                        {
                            "volumedevicepath": "system_xyz2",
                            "volumeid": "2abc",
                            "volumename": "cpSystem2",
                            "volumesizegb": "3425",
                            "volumetype": "system"
                        },
                        {
                            "volumedevicepath": "system_xyz2",
                            "volumeid": "2jkl",
                            "volumename": "CPu022",
                            "volumesizegb": "900",
                            "volumetype": "u02"
                        }
                    ]
                }
            ]
        }

46) securevms
  Usage:
    exacompute securevms vmclusterid=<VMCLUSTERID>
      Values:
        <VMCLUSTERID>  : OCID from CP that points to the rack
        payload : payload path
        idemtoken  : idemtoken
      Purpose:
        Remove access keys for provided vm
        
      Examples:
        ecra> exacompute securevms vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d185
        * {
            "est_op_end_time": "",
            "exaunit_id": 37,
            "message": "processing",
            "op": "exacompute_securevms_post",
            "op_start_time": "2024-02-14T16:26:42+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/2229893d-d290-4fa1-8945-caecf1c57f78"
        }

        ecra> status 2229893d-d290-4fa1-8945-caecf1c57f78
        * {"start_time": "2024-02-14T16:26:42+0000", "progress_percent": 0, "exaunit_id": 37, "start_time_ts": "2024-02-14 16:26:42.0",
        "ecra_server": "EcraServer1", "last_heartbeat_update": "2024-02-14T16:26:42+0000", "wf_uuid": "a90ea8a3-4c3e-4140-b326-f72ec225a5ee",
        "status": 202, "message": "Pending", "op": "SecureVMs", "completion_percentage": 0,
        "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/2229893d-d290-4fa1-8945-caecf1c57f78",
        "op_start_time": "2024-02-14T16:26:59+0000", "est_op_end_time": ""}

        ecra> exacompute securevms vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d185 payload=/ade/zpallare_ztest_2/ecs/ecra/test/scenarios/mvm/create_infra.json
        * {
            "est_op_end_time": "",
            "exaunit_id": 37,
            "message": "processing",
            "op": "exacompute_securevms_post",
            "op_start_time": "2024-02-14T20:14:46+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/c4a81d9d-3b96-4ed3-9b74-cb8f0cc1a88e"
        }

47) getfleetstateid
  Usage:
    exacompute getfleetstateid 
      Arguments:
        None
      Purpose:
        Get the latest fleet state handle and lock handle
      Examples:
      ecra> exacompute getfleetstateid
      * {
        "fleetStateHandle": 100080,
        "fleetLockHandle": 80,
        "status": 200,
        "op": "chaine_fleetstateid_latest_get",
        "status-detail": "success"
      }

48) snapshotunmount
  Usage:
    exacompute snapshotunmount jsonpath=<JSONPATH> idemtoken=<IDEMTOKEN> vminstanceid=<VMINSTANCEID>
      Values:
        <JSONPATH>  : Path to the JSON file that contains all the parameters for vm snapshot unmount operation
        <IDEMTOKEN> : Idemtoken for the operation, this can be provided also inside of the input payload
        <VMINSTANCEID> :  Ocid of the domu where snapshot will be unmounted
      Purpose:
        Sends information to exacloud for vm snapshot unmount operation
      Example:
        ecra> exacompute snapshotmount jsonpath=/ade/illamas_ECS_MAIN_LINUX.X64_new/ecs/ecra/test/scenarios/exacompute/payloads/vmrestore.json
        * {"status": 202, "status_uri": "http://phoenix94089.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/767d29d4-05ad-472e-95bd-7eee63de2379", "op": "exacomputeusnapshot_put", "op_start_time": "2023-07-04T21:57:26+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}    

49) removenodexml
  Usage:
    exacompute removenodexml rackname=<RACKNAME> dom0=<Dom0> 
      Values:
        <RACKNAME>  : Name of the rack that you want to remove the dom0 information 
        <Dom0>      : oracle_hostname of the dom0 that you want to remove from the XML 
      Purpose:
        Removes information in the rack updated XML, related to the provided dom0. 
      Example:
        ecra> exacompute removenodexml rackname=exacompute-sea2-d2-33cdb0c4-6c49-4a75-a653-c7a5e6c98fac-clu01 dom0=sea201610exdd009 
        * {"status":202,"status_uri":"http:\/\/atp-ecra6.emmgmt.adminsea2.oraclevcn.com:9080\/ecra\/endpoint\/statuses\/bb27c009-71a2-4a80-8ff2-5ac6fe7ca746","op":"exacomputeremovexml_put","op_start_time":"2024-07-19T19:02:32+0000","est_op_end_time":"","message":"processing","status-detail":"processing"}

50) configureroceips
  Usage:
    exacompute configureroceips hostname=<HOSTNAME> [idemtoken=token]
      Values:
        <HOSTNAME> : Name of the node
        [idemtoken]: Optional idemtoken value
      Purpose:
        Configure RoCE IPs on the KVM host
      Examples:
        ecra> exacompute configureroceips hostname=iad103496exdd012
       * {
          "est_op_end_time": "",
          "message": "processing",
          "op": "exascale_roceip_configure_post",
          "op_start_time": "2024-08-05T23:30:10+0000",
          "status": 202,
          "status-detail": "processing",
          "status_uri": "http://iad1pprdedcsecra1.ecramgmt.adminiad1.oraclevcn.com:9149/ecra/endpoint/statuses/9af7a0cb-8c4a-41d1-88db-1bfae37919e1"
         }    

51) deconfigureroceips
  Usage:
    exacompute deconfigureroceips hostname=<HOSTNAME> [idemtoken=<IDEMTOKEN>]
      Values:
        <HOSTNAME> : Name of the node
        <IDEMTOKEN>: Optional idemtoken value
      Purpose:
        Deconfigure RoCE IPs on the KVM host
      Example:
        ecra> exacompute deconfigureroceips hostname=iad103709exdd007
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exa_roceip_deconf_post",
            "op_start_time": "2024-08-07T23:28:11+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://localhost:9067/ecra/endpoint/statuses/a5503e3c-3476-4ca9-8d7e-4fcff8ef1f12"
        }

52) nodedetail
  Usage:
    exacompute nodedetail [page=<page> pagesize=<page size> servicetype=<exacompute>]
      Values:
        <page> : number of page for pagination, 0 disables the pagination
        <pagesize>: number of dom0 in the page
        <servicetype>: dom0 service type
      Purpose:
        Display all information about the kvm host on exacompute fleet 
      Example:
        ecra> exacompute nodedetail
        * {
          "computes": [
            {
              "hostname": "iad103709exdd018",
              "imageversion": "19.2.6.0.0.190911.1",
              "maintenancedomainid": 1,
              "clustertag": "ALL",
              "nodemodel": "X8M-2",
              "fabricname": "SEAFABRIC1",
              "totalecpu": 60,
              "allocatedecpu": 48,
              "activevmslots": 1,
              "vms": [
                {
                  "clustername": "testVmclusterDemo01014",
                  "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d207",
                  "rackname": "exacompute-iad1-d2-7381df85-d9d6-4057-a165-e134106d2a04-clu01",
                  "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
                  "domuversion": "3.1.9.0.0.231214.2",
                  "totalecpu": 60,
                  "enabledecpu": 48,
                  "vminstanceocid": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525a300",
                  "gcv": 2,
                  "system": 114,
                  "u01": 42,
                  "u02": 62
                }
              ]
            },
            {
              "hostname": "iad103709exdd017",
              "imageversion": "19.2.6.0.0.190911.1",
              "maintenancedomainid": 1,
              "clustertag": "ALL",
              "nodemodel": "X8M-2",
              "fabricname": "SEAFABRIC1",
              "totalecpu": 60,
              "allocatedecpu": 48,
              "activevmslots": 1,
              "vms": [
                {
                  "clustername": "testVmclusterDemo01014",
                  "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d207",
                  "rackname": "exacompute-iad1-d2-7381df85-d9d6-4057-a165-e134106d2a04-clu01",
                  "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
                  "domuversion": "3.1.9.0.0.231214.2",
                  "totalecpu": 60,
                  "enabledecpu": 48,
                  "vminstanceocid": "Exacomp-vm-instance-00098470a9964abe9a6609fd8a9042c488",
                  "gcv": 2,
                  "system": 114,
                  "u01": 42,
                  "u02": 62
                }
              ]
            },
            {
              "hostname": "iad103709exdd016",
              "imageversion": "19.2.6.0.0.190911.1",
              "maintenancedomainid": 1,
              "clustertag": "ALL",
              "nodemodel": "X8M-2",
              "fabricname": "SEAFABRIC1",
              "totalecpu": 60,
              "allocatedecpu": 48,
              "activevmslots": 1,
              "vms": [
                {
                  "clustername": "testVmclusterDemo01014",
                  "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d207",
                  "rackname": "exacompute-iad1-d2-7381df85-d9d6-4057-a165-e134106d2a04-clu01",
                  "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
                  "domuversion": "3.1.9.0.0.231214.2",
                  "totalecpu": 60,
                  "enabledecpu": 48,
                  "vminstanceocid": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525abc1",
                  "gcv": 2,
                  "system": 114,
                  "u01": 42,
                  "u02": 62
                }
              ]
            }
          ],
          "status": 200,
          "op": "exacomputenodedetail_get",
          "status-detail": "success"
        }
53) precheck
  Usage:
    exacompute precheck hostname=<HOSTNAME>
      Values:
        <HOSTNAME> : Hostname (dom0)
      Purpose:
        Precheck which can be used by ops and also by Fleet manager and orchestrator microservice when a node gets moved from ExaCS to ExaDB-XS. This is to ensure things are good for the node to be ingested into ExaDB-XS service.
      Examples:
        ecra> exacompute precheck hostname=iad103709exdd008

54) updatefabricfleet
  Usage:
    exacompute updatefabricfleet fabricname=<FABRICID> operation=<OPERATION> [cloudvendor=<name> cloudproviderregion=<region> cloudproviderbuilding=<building> cloudprovideraz=<az> sitegroup=<sitegroup>]
      Values:
        <HOSTNAME> : Name of the fabric
        <IDEMTOKEN>: add or delete
        cloudvendor: name of vendor
        cloudproviderregion: region 
        cloudproviderbuilding: building 
        cloudprovideraz: az
        sitegroup: sitegroup name
      Purpose:
        Updates fabrics in fleet JSON. This command helps you to add or delete a fabric in the fleet JSON. 
      Example:
        ecra> exacompute updatefabricfleet fabricname=IAD1FABRIC3 operation=add
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exacomputeupdatesfabric_post",
            "op_start_time": "2024-11-06T16:52:30+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://localhost:9067/ecra/endpoint/statuses/b512ade3-316e-4d0f-85ad-f2134be9c7f6"
        }
        ecra> exacompute updatefabricfleet fabricname=IAD1FABRIC3 operation=delete
        * {
            "est_op_end_time": "",
            "message": "processing",
            "op": "exacomputeupdatesfabric_post",
            "op_start_time": "2024-11-06T17:01:34+0000",
            "status": 202,
            "status-detail": "processing",
            "status_uri": "http://localhost:9067/ecra/endpoint/statuses/10cc9454-e981-44e8-97b8-347fb787a145"
        }

55) clusterhistory
Usage: 
    exacompute clusterhistory rackname=<RACKNAME>
Values:
- rackname: name of the rack already deleted
Purpose:
 Analytics and recovery of important information
Example:
ecra> exacompute clusterhistory rackname=exacompute-iad1-d2-1bf82b80-bb67-4d74-ad3a-781b1964e989-clu01
* {
  "computes": [
    {
      "hostname": "iad103709exdd018",
      "imageversion": "19.2.6.0.0.190911.1",
      "maintenancedomainid": 1,
      "clustertag": "ALL",
      "nodemodel": "X8M-2",
      "fabricname": "SEAFABRIC1",
      "totalecpu": 60,
      "allocatedecpu": 48,
      "activevmslots": 1,
      "vms": [
        {
          "clustername": "testVmclusterDemo010150",
          "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d18",
          "rackname": "exacompute-iad1-d2-1bf82b80-bb67-4d74-ad3a-781b1964e989-clu01",
          "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
          "domuversion": "3.1.9.0.0.231214.2",
          "totalecpu": 60,
          "enabledecpu": 48,
          "vminstanceocid": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525a226",
          "gcv": 2,
          "system": 114,
          "u01": 42,
          "u02": 62
        }
      ]
    },
    {
      "hostname": "iad103709exdd017",
      "imageversion": "19.2.6.0.0.190911.1",
      "maintenancedomainid": 1,
      "clustertag": "ALL",
      "nodemodel": "X8M-2",
      "fabricname": "SEAFABRIC1",
      "totalecpu": 60,
      "allocatedecpu": 48,
      "activevmslots": 1,
      "vms": [
        {
          "clustername": "testVmclusterDemo010150",
          "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d18",
          "rackname": "exacompute-iad1-d2-1bf82b80-bb67-4d74-ad3a-781b1964e989-clu01",
          "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
          "domuversion": "3.1.9.0.0.231214.2",
          "totalecpu": 60,
          "enabledecpu": 48,
          "vminstanceocid": "Exacomp-vm-instance-00098470a9964abe9a6609fd8a9042c4149",
          "gcv": 2,
          "system": 114,
          "u01": 42,
          "u02": 62
        }
      ]
    },
    {
      "hostname": "iad103709exdd016",
      "imageversion": "19.2.6.0.0.190911.1",
      "maintenancedomainid": 1,
      "clustertag": "ALL",
      "nodemodel": "X8M-2",
      "fabricname": "SEAFABRIC1",
      "totalecpu": 60,
      "allocatedecpu": 48,
      "activevmslots": 1,
      "vms": [
        {
          "clustername": "testVmclusterDemo010150",
          "clusterocid": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d18",
          "rackname": "exacompute-iad1-d2-1bf82b80-bb67-4d74-ad3a-781b1964e989-clu01",
          "tenancyocid": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
          "domuversion": "3.1.9.0.0.231214.2",
          "totalecpu": 60,
          "enabledecpu": 48,
          "vminstanceocid": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525abc1",
          "gcv": 2,
          "system": 114,
          "u01": 42,
          "u02": 62
        }
      ]
    }
  ],
  "status": 200,
  "op": "exacomputeclusterhistory_get",
  "status-detail": "success"
}


56) computecleanup
Usage: 
    exacompute computecleanup hostname=<compute hostname>
Values:
- hostname: dom0 admin hostname
Purpose:
Clean up all related data left by exacloud on the compute
Example:
ecra> exacompute computecleanup hostname=iad103709exdd010
* {"status": 202, "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/2d59586f-4de7-4bce-bef0-18eddfa10062",
"op": "exacomputecomputecleanup", "op_start_time": "2025-03-04T18:32:05+0000",
"est_op_end_time": "", "message": "processing", "status-detail": "processing"}
ecra> status 2d59586f-4de7-4bce-bef0-18eddfa10062
* {"progress_percent": 0, "start_time": "2025-03-04T18:32:05+0000",
"start_time_ts": "2025-03-04 18:32:05.0", "end_time":
"2025-03-04T18:32:06+0000", "ecra_server": "EcraServer1",
"last_heartbeat_update": "2025-03-04T18:32:05+0000", "wf_uuid":
"ce739303-cee1-4036-9968-4939fa2fc958", "status": 200, "message": "Done", "op":
"exacomputecomputecleanup", "completion_percentage": 0, "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/2d59586f-4de7-4bce-bef0-18eddfa10062",
"status-detail": "success"}
ecra> workflows describe workflowId=ce739303-cee1-4036-9968-4939fa2fc958
* {
    "workflowName": "exacompute-compute-cleanup-wfd",
    "workflowId": "ce739303-cee1-4036-9968-4939fa2fc958",
    "workflowStatus": "Completed",
    "workflowStartTime": "04 Mar 2025 18:32:06 UTC",
    "workflowEndTime": "04 Mar 2025 18:32:06 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "LoadComputeToCleanupTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Tue Mar 04 18:32:06 UTC 2025",
            "taskEndTime": "Tue Mar 04 18:32:06 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "ComputeCleanupTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Tue Mar 04 18:32:06 UTC 2025",
            "taskEndTime": "Tue Mar 04 18:32:06 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "EndWf",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Tue Mar 04 18:32:06 UTC 2025",
            "taskEndTime": "Tue Mar 04 18:32:06 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "EndWf",
            "lastOperationDetails": {
                "lastTaskLastOperationId":
"b27d4e53-8741-4823-8301-61fc87e30551",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "04 Mar 2025 18:32:06 UTC",
                "lastTaskLastOperationEndTime": "04 Mar 2025 18:32:06 UTC"
            }
        }
    ],
    "workflowElapsed": "00:00:00",
    "workflowRuntime": "00:00:00",
    "exaOCID": "",
    "requestId": "2d59586f-4de7-4bce-bef0-18eddfa10062",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}

55) dbvolumes
Usage:
    exacompute dbvolumes vmclusterocid=<vm cluster ocid> operation=<attach|detach|resize> jsonpath=<Path to payload>
Values:
- vmclusterocid: vm cluster ocid
- operation: operations on the dbvolumes, attach, detach, resize
- jsonpath: payload for the operation
Purpose:
Execute dbvolume operations on the vm cluster
Example:
ecra> exacompute dbvolumes operation=attach
jsonpath=/scratch/jzandate/scripts/exacompute/attachdb.json
vmclusterocid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d67
* {"status": 202, "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/7ba5f3cf-a7aa-40a2-bb8f-ba93a8ea2a09",
"op": "exacompute_volume_post", "op_start_time": "2025-05-15T18:08:00+0000",
"est_op_end_time": "", "message": "processing", "status-detail": "processing",
"exaunit_id": 1796}
ecra> status 7ba5f3cf-a7aa-40a2-bb8f-ba93a8ea2a09
* {"progress_percent": 0, "exaunit_id": 1796, "start_time_ts": "2025-05-15
18:08:00.0", "end_time": "2025-05-15T18:08:06+0000", "ecra_server":
"EcraServer1", "wf_uuid": "5a4dacba-3a70-4344-ae64-3175c822e056", "start_time":
"2025-05-15T18:08:00+0000", "last_heartbeat_update": "2025-05-15T18:08:00+0000",
"status": 200, "message": "Done", "op": "exacompute_volume_post",
"completion_percentage": 0, "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/7ba5f3cf-a7aa-40a2-bb8f-ba93a8ea2a09",
"status-detail": "success"}
ecra> workflows describe workflowId=5a4dacba-3a70-4344-ae64-3175c822e056
* {
    "workflowName": "dbvol-attach-dettach-resize-wdf",
    "workflowId": "5a4dacba-3a70-4344-ae64-3175c822e056",
    "workflowStatus": "Completed",
    "workflowStartTime": "15 May 2025 18:08:00 UTC",
    "workflowEndTime": "15 May 2025 18:08:06 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "InitDBVolume",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu May 15 18:08:00 UTC 2025",
            "taskEndTime": "Thu May 15 18:08:00 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "ATTACH",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu May 15 18:08:00 UTC 2025",
            "taskEndTime": "Thu May 15 18:08:06 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:06"
        },
        {
            "taskName": "EndWf",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Thu May 15 18:08:06 UTC 2025",
            "taskEndTime": "Thu May 15 18:08:06 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "EndWf",
            "lastOperationDetails": {
                "lastTaskLastOperationId":
"c1450dd9-5daa-45d1-a975-7eae28bd80a6",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "15 May 2025 18:08:06 UTC",
                "lastTaskLastOperationEndTime": "15 May 2025 18:08:06 UTC"
            }
        }
    ],
    "workflowElapsed": "00:00:06",
    "workflowRuntime": "00:00:06",
    "exaOCID": "",
    "requestId": "7ba5f3cf-a7aa-40a2-bb8f-ba93a8ea2a09",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}
ecra> exacompute getvolumes
rackname=exacompute-iad1-d2-0071c367-35be-47ce-8a79-981d0e2f6db2-clu01
* {
    "nodes": [
        {
            "oraclehostname": "iad103709exdd018",
            "clienthostname":
"testVmclusterDemo009client1-vip227.exacomputecusto.jboduvcn.oraclevcn.com",
            "volumes": [
                {
                    "volumeid": "1mno",
                    "volumetype": "DBVOLUME",
                    "volumename": "givol",
                    "volumedevicepath": "system_xyz1",
                    "guestdevicename": "dbvolume_system_xyz1-givol",
                    "volumesizegb": "104"
                },
                {
                    "volumeid": "1ghi",
                    "volumetype": "GCV",
                    "volumename": "gcv",
                    "volumedevicepath": "system_xyz1",
                    "volumesizegb": "2"
                },
                {
                    "volumeid": "1abc",
                    "volumetype": "SYSTEM",
                    "volumename": "system",
                    "volumedevicepath": "system_xyz1",
                    "volumesizegb": "114"
                },
                {
                    "volumeid": "1def",
                    "volumetype": "U01",
                    "volumename": "u01",
                    "volumedevicepath": "system_xyz1",
                    "volumesizegb": "42"
                },
                {
                    "volumeid": "1jkl",
                    "volumetype": "U02",
                    "volumename": "u02",
                    "volumedevicepath": "system_xyz1",
                    "volumesizegb": "124"
                },
                {
                    "volumetype": "dbvolume",
                    "volumename": "dbvolume-DB0425-kaommq-datavol",
                    "volumedevicepath":
"dbvolume-DB0425-kaommq-datavol_Vmfoyxy_1",
                    "guestdevicename": "dbvolume-DB0425-kaommq-datavol",
                    "volumesizegb": "400"
                }
            ]
        },
        {
            "oraclehostname": "iad103716exdd017",
            "clienthostname":
"testVmclusterDemo009client2-vip127.exacomputecusto.jboduvcn.oraclevcn.com",
            "volumes": [
                {
                    "volumeid": "2ghi",
                    "volumetype": "GCV",
                    "volumename": "gcv",
                    "volumedevicepath": "system_xyz2",
                    "volumesizegb": "2"
                },
                {
                    "volumeid": "2abc",
                    "volumetype": "SYSTEM",
                    "volumename": "system",
                    "volumedevicepath": "system_xyz2",
                    "volumesizegb": "114"
                },
                {
                    "volumeid": "2def",
                    "volumetype": "U01",
                    "volumename": "u01",
                    "volumedevicepath": "system_xyz2",
                    "volumesizegb": "42"
                },
                {
                    "volumeid": "2jkl",
                    "volumetype": "U02",
                    "volumename": "u02",
                    "volumedevicepath": "system_xyz2",
                    "volumesizegb": "124"
                },
                {
                    "volumetype": "dbvolume",
                    "volumename": "dbvolume-DB0425-kaommq-datavol",
                    "volumedevicepath":
"dbvolume-DB0425-kaommq-datavol_Vmfoyxy_2",
                    "guestdevicename": "dbvolume-DB0425-kaommq-datavol",
                    "volumesizegb": "400"
                }
            ]
        }
    ],
    "status": 200,
    "op": "exacompute_volumes_get",
    "status-detail": "success"
}

57) runfleetjsoncheck
Usage:
    exacompute runfleetjsoncheck
Values:
Purpose:
Execute a sanity check on the latest fleet json state
Example:
ecra> exacompute runfleetjsoncheck
* {"status": 200, "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/1e4b1b84-15de-45dd-9ce9-51799a01a463", "op": "fleetstate_sanitycheck", "op_start_time": "2025-06-27T16:11:21+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}
ecra> status 1e4b1b84-15de-45dd-9ce9-51799a01a463
* {"progress_percent": 0, "start_time": "2025-06-27T16:11:21+0000", "start_time_ts": "2025-06-27 16:11:21.0", "end_time": "2025-06-27T16:11:39+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2025-06-27T16:11:21+0000", "wf_uuid": "bdafc384-ee28-435e-bdca-c49b89f69548", "status": 200, "message": "Done", "op": "fleetstate_sanitycheck", "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/1e4b1b84-15de-45dd-9ce9-51799a01a463", "status-detail": "success", "progress": 0, "progress_details": {"job_id": "1e4b1b84-15de-45dd-9ce9-51799a01a463", "wf_details": {"total_tasks": 2, "completed_tasks": 1, "current_task": "EndWf", "current_task_completion_percentage": 0, "current_task_state": "DONE", "last_updated": "2025-06-27 16:11:39"}}}
ecra> workflows describe workflowId=bdafc384-ee28-435e-bdca-c49b89f69548
* {
    "workflowName": "fleet-state-sanity-check-wfd",
    "workflowId": "bdafc384-ee28-435e-bdca-c49b89f69548",
    "workflowStatus": "Completed",
    "workflowStartTime": "27 Jun 2025 16:11:21 UTC",
    "workflowEndTime": "27 Jun 2025 16:11:39 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "FleetStateSanityCheckTask",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Fri Jun 27 16:11:21 UTC 2025",
            "taskEndTime": "Fri Jun 27 16:11:39 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:18"
        },
        {
            "taskName": "EndWf",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Fri Jun 27 16:11:39 UTC 2025",
            "taskEndTime": "Fri Jun 27 16:11:39 UTC 2025",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "EndWf",
            "lastOperationDetails": {
                "lastTaskLastOperationId": "20e0342b-ba70-4c28-ab9f-9aa921f36249",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "27 Jun 2025 16:11:39 UTC",
                "lastTaskLastOperationEndTime": "27 Jun 2025 16:11:39 UTC"
            }
        }
    ],
    "workflowElapsed": "00:00:18",
    "workflowRuntime": "00:00:18",
    "exaOCID": "",
    "requestId": "1e4b1b84-15de-45dd-9ce9-51799a01a463",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}

56) getdomus
Usage:
    exacompute getdomus hostname=<HOSTNAME>
Values:
Purpose:
    Be able to get a report for each DomU that is on a exacompoute Dom0 and which type they are.
Example:
ecra> exacompute getdomus hostname=iad103709exdd004
* {
    "total": 2,
    "total19c": 1,
    "total23ai": 1,
    "totalggcs": 0,
    "totalbasedb": 0,
    "guests": [
        {
            "clienthostname": "testVmclusterDemo009client2-vip172",
            "nathostname": "iad103709exddu0402",
            "adminvlan": "100"
        },
        {
            "clienthostname": "testVmclusterDemo009client2-vip287",
            "nathostname": "iad103709exddu0401"
        }
    ],
    "status": 200,
    "op": "exacomputenodecomposition_get",
    "status-detail": "success"
}

57) getvmclusterdetails
Usage:
    exacompute getvmclusterdetails vmclusterocid=<VMCLUSTEROCID>
Values:
Purpose:
    Be able to get the details from a exacompute vmcluster, like the filesystem file
Example:
ecra> exacompute getvmclusterdetails vmclusterocid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d99
* {
    "vms": [
        {
            "id": "Exacomp-vm-instance-8922a56af033464ca9ff952649a9525a121",
            "vmClusterId": "ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d99",
            "volumes": [
                {
                    "volumetype": "u01",
                    "volumesizegb": "42",
                    "filesystems": [
                        {
                            "fstype": "/u01",
                            "currfsgb": "40"
                        }
                    ]
                },
                {
                    "volumetype": "gcv",
                    "volumesizegb": "2"
                },
                {
                    "volumetype": "u02",
                    "volumesizegb": "62",
                    "filesystems": [
                        {
                            "fstype": "/u02",
                            "currfsgb": "60"
                        }
                    ]
                },
                {
                    "volumetype": "system",
                    "volumesizegb": "114",
                    "filesystems": [
                        {
                            "fstype": "/",
                            "currfsgb": "15"
                        },
                        {
                            "fstype": "/home",
                            "currfsgb": "4"
                        },
                        {
                            "fstype": "/tmp",
                            "currfsgb": "10"
                        },
                        {
                            "fstype": "/var",
                            "currfsgb": "5"
                        },
                        {
                            "fstype": "/var/log",
                            "currfsgb": "18"
                        },
                        {
                            "fstype": "/var/log/audit",
                            "currfsgb": "2"
                        }
                    ]
                }
            ]
        },
...
}

58) rackreserve
Usage:
    exacompute rackreserve vmclusterid=<VMCLUSTEROCID> hostnames=<comma separated dom0 hostnames>
Values:
    vmclusterid: the vm cluster ocid
    hostnames: comma separated dom0 hostnames
Purpose:
    Reserve a rack for exacompute cluster
Example:

ecra> exacompute rackreserve hostnames=iad103709exdd015,iad103709exdd014 vmclusterid=cluster_rack_reserve
* {
    "status": 202,
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/e27b6b6e-3684-45a1-876a-c7571a24d5d8",
    "op": "exacompute_rackreserve",
    "op_start_time": "2025-10-17T19:54:46+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing",
    "target_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/racks?vm_cluster_ocid=cluster_rack_reserve"
}
ecra> status e27b6b6e-3684-45a1-876a-c7571a24d5d8
* {"progress_percent": 0, "end_time": "2025-10-17T19:54:46+0000", "ecra_server": "EcraServer1",
 "wf_uuid": "32f84893-73f9-4c65-988f-04f69eea2028", "start_time": "2025-10-17T19:54:46+0000",
  "target_uri": "exacompute-iad1-d2-d43f6625-3b5f-4b54-a827-f75b7b8d6d83-clu01",
   "last_heartbeat_update": "2025-10-17T19:54:46+0000", "status": 200, "message": "Done",
    "op": "exacompute_rackreserve",
    "status_uri": "http://phoenix310481.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/e27b6b6e-3684-45a1-876a-c7571a24d5d8",
    "status-detail": "success", "start_time_ts": "2025-10-17 19:54:46.0"}

59) guestreserve
Usage:
    exacompute guestreserve vmclusterid=<VMCLUSTEROCID> hostnames=<comma separated dom0 hostnames>
Values:
    vmclusterid: the vm cluster ocid
    hostnames: comma separated dom0 hostnames
Purpose:
    Reserve a guest for the provided vmclusterocid
Example:
ecra> exacompute guestreserve vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d169 hostnames=iad103709exdd008
* {
    "status": 202,
    "status_uri": "http://localhost:9067/ecra/endpoint/statuses/0a1f7c41-f371-4bd2-bb22-b3e5c0ad89c8",
    "op": "exacompute_guestreserve",
    "op_start_time": "2025-10-30T20:30:25+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}
ecra> status 0a1f7c41-f371-4bd2-bb22-b3e5c0ad89c8
* {
    "progress_percent": 0,
    "end_time": "2025-10-30T23:02:13+0000",
    "ecra_server": "EcraServer2",
    "wf_uuid": "36a84c4f-1f44-40d4-9af3-32527560bfca",
    "start_time": "2025-10-30T20:30:25+0000",
    "last_heartbeat_update": "2025-10-30T20:30:25+0000",
    "status": 200,
    "message": "Done",
    "op": "exacompute_guestreserve",
    "status_uri": "http://localhost:9067/ecra/endpoint/statuses/0a1f7c41-f371-4bd2-bb22-b3e5c0ad89c8",
    "status-detail": "success",
    "start_time_ts": "2025-10-30 20:30:25.0"
}

60) guestrelease
Usage:
   exacompute guestrelease vmclusterid=<VMCLUSTEROCID> hostnames=<comma separated dom0 hostnames>
Values:
    vmclusterid: the vm cluster ocid
    hostnames: comma separated dom0 hostnames
Purpose:
    Release a guest for the provided vmclusterocid
Example:
ecra>  exacompute guestrelease vmclusterid=ocid1.exacomputevmcluster.oc1.iad.0frdr58lry8qeb20o709vhnnqyrfmoruzb93aurtkuxjytoc4wreone2ch0d169 hostnames=sea202123exdd014
* {
    "status": 202,
    "status_uri": "http://localhost:9067/ecra/endpoint/statuses/42908fdd-c01d-4e93-9447-197709dc22cd",
    "op": "exacompute_guestrelease",
    "op_start_time": "2025-11-04T22:05:20+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

ecra> status 42908fdd-c01d-4e93-9447-197709dc22cd
* {
    "progress_percent": 0,
    "end_time": "2025-11-04T22:05:20+0000",
    "ecra_server": "EcraServer2",
    "wf_uuid": "76798dbf-47bb-40c5-925a-4c2d89a938df",
    "start_time": "2025-11-04T22:05:20+0000",
    "last_heartbeat_update": "2025-11-04T22:05:20+0000",
    "status": 200,
    "message": "Done",
    "op": "exacompute_guestrelease",
    "status_uri": "http://localhost:9067/ecra/endpoint/statuses/42908fdd-c01d-4e93-9447-197709dc22cd",
    "status-detail": "success",
    "start_time_ts": "2025-11-04 22:05:20.0"
}

############################
# Elastic Compute Activate #
###########################
This is the API to activate new computes

ecra>

activateComputes:
Usage: ./ecracli ocicapacity activateComputes exaOcid=<exaOcid>

Purpose:
	Activates new Elastic Computes and validates if computes are reachable.

Example:
ecra> ./ecracli activateComputes exaOcid=NEW-OCI-TENANT-001-EXADATA-002
* PUT http://slc15rvy.us.oracle.com:9001/ecra/endpoint/capacity/exadata/NEW-OCI-TENANT-001-EXADATA-002/activateComputes
* Acitvate computes with the  OCID: NEW-OCI-TENANT-003-EXADATA-004 details :
  {
	"idemtoken" : "6e70853f-444c-427f-8d89-8293dc5f7077"
  }
http://slc15rvy.us.oracle.com:9001/ecra/endpoint/statuses/93263e68-d3a3-45f9-b47f-03be2bedfd70


############################
# Undo Exascale Configuration #
###########################
This is the API to revert the exascale configuration. This operation is only allow if there isn't any clusters based on Exascale.

ecra>

undoExascale:
Usage: ./ecracli ocicapacity undoExascale exaOcid=<exaOcid>

Purpose:
	This operation reverts the xmls, ECRA metadata and Exascale configuration in Exacloud.

Example:
ecra> ./ecracli ocicapacity undoExascale exaOcid=ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qa44zswqaimnac5wqcssmoi2gia7j2ql5xc5td4h3tiihq
PUThttp://ecra-vm6.ecra.ociexacc.oraclevcn.com:9026/ecra/endpoint/capacity/exadata/ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qa44zswqaimnac5wqcssmoi2gia7j2ql5xc5td4h3tiihq/xsconfig {
    "exascale": "true",
    "idemtoken": "2ddac39c-7fae-475c-81f6-b9d1cd7f935b",
    "storagexsGb": 0,
    "undo": "true"
}
{"status": 202, "status_uri": "http://ecra-vm6.ecra.ociexacc.oraclevcn.com:9026/ecra/endpoint/statuses/2ddac39c-7fae-475c-81f6-b9d1cd7f935b", "op": "ConfigureExascale_POST", "op_start_time": "2024-08-14T20:22:22+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing", "target_uri": "http://ecra-vm6.ecra.ociexacc.oraclevcn.com:9026/ecra/endpoint/capacity/exadata/ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qa44zswqaimnac5wqcssmoi2gia7j2ql5xc5td4h3tiihq"}




##############
####Agent#####
##############

Provide support to communicate with ExaAgent.

1)request
   General request to agent.
      Usage:
         agent request [method=METHOD> url=<URL> domu=<DOMU> exaunit=<EXAUNIT> payload=<PAYLOAD> token=<TOKEN>]    
      Values:
        <METHOD> : HTTP method. Allowed methods: get,post,put
        <URL> : Agent REST endpoint
        <DOMU> : Possible values: one/all
        <EXAUNIT> : ID from existing exaunit
        <PAYLOAD> : Agent REST payload path file
        <TOKEN> : Unique string for each agent job
      Purpose:
        All parameters are mandatory except payload since "get" method does not require payload.
      Examples:


ecra> agent request method=get url=ping exaunit=384 domu=one  token=123456
* {
    "agent-responses": [
        {
            "agent-response": "{\"version\":\"2.24.0.0.0_220319.0200\",\"buildNumber\":\"1.0-SNAPSHOT\",\"gitNumber\":\"2016-07-13_00-00-00\",\"buildTime\":\"\",\"imageLabel\":\"Exadata_OCI_DBCS_Agent_Linux\"}",
            "agent-status": 200,
            "host": "10.0.4.86"
        }
    ],
    "status": 200,
    "op": "dbcs_agent_get",
    "status-detail": "success"
}


ecra> agent request method=post url=databases exaunit=384 domu=one payload=temp.json token=1233
* {
    "agent-responses": [
        {
            "agent-response": "{\"updatedTime\":1649296320970,\"jobId\":\"767f9e7c-4227-4796-9653-171f512d81a8\",\"status\":\"Created\",\"message\":\"Database job: InProgress. \",\"logFile\":\"/var/opt/oracle/log/cg1222/dbaasapi/db/createdb/dbaasapi_2022-04-07_01:51:55.393697_382609.log\",\"reports\":[],\"appMessages\":null,\"exceptionErrorCodes\":[],\"createTimestamp\":1649296320969,\"resourceList\":[],\"pct_complete\":\"0\",\"description\":\"dbaasapi createdb job\",\"infofile\":null,\"jobSpecificDetailsJson\":\"\"}",
            "agent-status": 200,
            "opc-idempotency-token": "1233",
            "host": "10.0.4.86"
        }
    ],
    "status": 200,
    "op": "dbcs_agent_post",
    "status-detail": "success"
}



ecra> agent request method=post url=databases exaunit=384 domu=all payload=temp.json token=123455
* {
    "agent-responses": [
        {
            "agent-response": "{\"updatedTime\":1649296388303,\"jobId\":\"0acf7a88-7c35-4e8e-a1d5-1e070d66e907\",\"status\":\"Created\",\"message\":\"Database job: InProgress. \",\"logFile\":\"/var/opt/oracle/log/cg1222/dbaasapi/db/createdb/dbaasapi_2022-04-07_01:53:04.120093_396666.log\",\"reports\":[],\"appMessages\":null,\"exceptionErrorCodes\":[],\"createTimestamp\":1649296388302,\"resourceList\":[],\"pct_complete\":\"0\",\"description\":\"dbaasapi createdb job\",\"infofile\":null,\"jobSpecificDetailsJson\":\"\"}",
            "agent-status": 200,
            "opc-idempotency-token": "123455",
            "host": "10.0.4.86"
        },
        {
            "agent-response": {
                "error": "Connection refused"
            },
            "agent-status": 500,
            "opc-idempotency-token": "123455",
            "host": "10.0.4.52"
        }
    ],
    "status": 200,
    "op": "dbcs_agent_post",
    "status-detail": "success"
}

2)dataplanesettings
      V2 Customer Opt-in for dataplane diagnostics (events, metrics, logs)      
      Usage:
         agent dataplanesettings payload=<PAYLOAD>    
      Values:
        <PAYLOAD> : Dataplane diagnostics request json path containing the following attributes
                    <exaunitId>
                    <vmClusterCompartmentOcid>
                    <infraCompartmentOcid>
                    <enableDiagnosticsNotifications>
                    <enableHealthMonitoring>
                    <enableAutoLogCollection>
}
      Purpose:
        The fields in request body correspond to the UI buttons      
 
      Examples:

dataplanediagnostics.json
{
    "exaunitId":"42",
    "vmClusterCompartmentOcid":"vmClusterCompartmentOcid_123",
    "infraCompartmentOcid":"infraCompartmentOcid_1234",
    "enableDiagnosticsNotifications":"TRUE",
    "enableHealthMonitoring":"FALSE",
    "enableAutoLogCollection":"FALSE"
}

ecra> agent dataplanesettings payload=dataplanediagnostics.json
* {
    "status": 202,
    "status_uri": "http://phoenix94573.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/707244cb-764d-41d1-be74-56706ff8e3b1",
    "op": "dataPlaneDiagnostics_POST",
    "op_start_time": "2022-04-29T19:08:52+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

________________________________________________________________________________
#########
# Cache #
#########
This command will allow you to force the refresh of some in-memory objects that have some preprocessed values and are not automatically purged until you bounce wls. With this command, you could clean these in-memory objects.
1) purge
  Usage:
    cache purge type=<TYPE>
      Values:
        <TYPE> : Object to purge, available options ( csfilesystem | cspostchecks | ecsproperties)
      Purpose:
        Purges the cache associated with the provided type. Available types [cspostchecks,csfilesystem]
      Examples:
        ecra> cache purge type=csfilesystem
        * {
            "msg": "FileSystemHandler singleton has been purged",
            "status": 200,
            "op": "infra_filesystemcs_delete",
            "status-detail": "success"
        }
        ecra> cache purge type=cspostchecks
        * {
            "msg": "ConfigCSHandler singleton has been purged",
            "status": 200,
            "op": "analytics_cs_config_delete",
            "status-detail": "success"
        }
________________________________________________________________________________
#######
# SLA #
#######
Purpose: to get the SLA status of clusters

1) Get all average SLA
  Usage:
    sla get_average_all [measure_from=<FROM_TIME>] [measure_to=<TO_TIME>]
  Values:
    <FROM_TIME>: The beginning of the period (default: 30 days)
    <TO_TIME>: The end of the period (default: now)
  Purpose:
    Get the average SLA of all racks for the given time range
  Examples:
    ecra> sla get_average_all measure_from=2022-01-25T00:00:00Z measure_to=2022-02-03T23:59:59Z
    * {
      "measure_from": "2022-01-25T00:00:00Z",
      "measure_to": "2022-02-08T00:20:45.070150Z",
      "sla_info": [
         {
           "rackname": "sea201112exd-d0-01-02-cl-01-03-clu01",
           "average_sla": 1
         },
         {
           "rackname": "sea200214exd-d0-07-08-cl-10-12-clu01",
           "average_sla": 0.3333719
         },
         {
           "rackname": "sea201111exd-d0-01-02-cl-01-03-clu01",
           "average_sla": 0
         }
       ],
       "status": 200,
       "op": "sla_average_all_get",
       "status-detail": "success"
    }

2) Get average SLA
  Usage:
    sla get_average rackname=<RACKNAME> [measure_from=<FROM_TIME>] [measure_to=<TO_TIME>]
  Values:
    <RACKNAME>: Rack name
    <FROM_TIME>: The beginning of the period (default: 30 days)
    <TO_TIME>: The end of the period (default: now)
  Purpose:
    Get the average SLA of the rack for the given time range
  Examples:
    ecra> sla get_average rackname=sea201112exd-d0-01-02-cl-01-03-clu01 measure_from=2022-01-25T00:00:00Z measure_to=2022-02-03T23:59:59Z
    * {
      "measure_from": "2022-01-25T00:00:00Z",
      "measure_to": "2022-02-03T23:59:59Z",
      "average_sla": 0.3333719074726105,
      "status": 200,
      "op": "sla_average_get",
      "status-detail": "success"
    }
    ecra> sla get_average rackname=sea201112exd-d0-01-02-cl-01-03-clu01
    * {
      "measure_from": "2022-01-09T00:20:45.070150Z",
      "measure_to": "2022-02-08T00:20:45.070150Z",,
      "average_sla": 0.4990740740740740,
      "status": 200,
      "op": "sla_average_get",
      "status-detail": "success"
    }

3) Get average SLA of tenancy
  Usage:
    sla get_average tenancy_ocid=<TENANCY_OCID> [measure_from=<FROM_TIME>] [measure_to=<TO_TIME>]
  Values:
    <TENANCY_OCID>: Tenancy OCID
    <FROM_TIME>: The beginning of the period (default: 30 days)
    <TO_TIME>: The end of the period (default: now)
  Purpose:
    Get the average SLA of the rack for the given time range
  Examples:
    ecra> sla get_average tenancy_ocid=ocid1.tenancy.oc1..aaaaaaaajl3p2iquu45w7kfydtigbkmwcoshrlyxjjv5yn3deux3fa6cyxda measure_from=2022-01-25T00:00:00Z measure_to=2022-02-03T23:59:59Z
    * {
      "measure_from": "2022-01-25T00:00:00Z",
      "measure_to": "2022-02-03T23:59:59Z",
      "average_sla": 0.3333719074726105,
      "status": 200,
      "op": "sla_average_tenancy_get",
      "status-detail": "success"
    }
    ecra> sla get_average tenancy_ocid=ocid1.tenancy.oc1..aaaaaaaajl3p2iquu45w7kfydtigbkmwcoshrlyxjjv5yn3deux3fa6cyxda
    * {
      "measure_from": "2022-01-09T00:20:45.070150Z",
      "measure_to": "2022-02-08T00:20:45.070150Z",,
      "average_sla": 0.4990740740740740,
      "status": 200,
      "op": "sla_average_tenancy_get",
      "status-detail": "success"
    }

4) Get SLA details
  Usage:
    sla get_details rackname=<RACKNAME> measure_from=<FROM_TIME> measure_to=<TO_TIME>
  Values:
    <RACKNAME>: Rack name
    <FROM_TIME>: The beginning of the period
    <TO_TIME>: The end of the period
  Purpose:
    Get raw SLA data records
  Examples:
    ecra> sla get_details rackname=sea201112exd-d0-01-02-cl-01-03-clu01 measure_from=2022-01-28T23:25:00Z measure_to=2022-01-29T01:25:00Z
    * {
      "average_sla": 0.4583333432674408,
      "details": [
        {
          "measure_time": "2022-01-28T23:25:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-28T23:30:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-28T23:35:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-28T23:40:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-28T23:45:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-28T23:50:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-28T23:55:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-29T00:00:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-29T00:05:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-29T00:10:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-29T00:15:36.066Z",
          "interval_seconds": 300000,
          "sla": 1
        },
        {
          "measure_time": "2022-01-29T00:20:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:25:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:30:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:35:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:40:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:45:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:50:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T00:55:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T01:00:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T01:05:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T01:10:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T01:15:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        },
        {
          "measure_time": "2022-01-29T01:20:36.066Z",
          "interval_seconds": 300000,
          "sla": 0
        }
      ],
      "status": 200,
      "op": "sla_details_get",
      "status-detail": "success"
    }

5) Get SLA details based on infraOcid (CEI)
  Usage:
    sla get_details_infra infraOcid=<CEI> measure_from=<FROM_TIME> measure_to=<TO_TIME>
  Values:
    <CEI>: The CEI for certain infrastructure
    <FROM_TIME>: The beginning of the period
    <TO_TIME>: The end of the period
  Purpose:
    Get the SLA for all the vm clustesr (racks) belongs to this CEI
  Examples:
* {
  "infra_ocid": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q",
  "details_for_all_racks": [
    {
      "rack_name": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu02",
      "details_for_rack": [
        {
          "measure_time": "2022-10-17T16:53:04Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T16:58:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:03:04Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:08:04Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:13:01Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:18:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:23:02Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:28:02Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:33:01Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:38:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:43:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:48:02Z",
          "interval_seconds": 300,
          "sla": 1
        }
      ],
      "average_sla_rack": 1
    },
    {
      "rack_name": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu01",
      "details_for_rack": [
        {
          "measure_time": "2022-10-17T16:53:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T16:58:02Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:03:02Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:08:02Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:13:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:18:01Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:23:01Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:28:04Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:33:03Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:38:01Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:43:01Z",
          "interval_seconds": 300,
          "sla": 1
        },
        {
          "measure_time": "2022-10-17T17:48:04Z",
          "interval_seconds": 300,
          "sla": 1
        }
      ],
      "average_sla_rack": 1
    }
  ],
  "status": 200,
  "op": "sla_details_infra_get",
  "status-detail": "success"
}

6) Turn on SLA feature for specific tenancy 
  Usage: 
    sla tenancy_turnon tenancy_ocid=<TENANCYOCID>
  Values: 
    <TENANCYOCID>: tenancy ocid that the SLA feature will be enabled 
  Purpose:
    Enable the SLA feature for a specific tenancy
  Examples: 
    ecra> sla tenancy_turnon tenancy_ocid=exampleocid
    * {
      "tenancyOcid": "exampleocid",
      "status": 200,
      "op": "sla_tenancy_turnon_put",
      "status-detail": "success"
    }

7) Turn off SLA feature for specific tenancy 
  Usage: 
    sla tenancy_turnoff tenancy_ocid=<TENANCYOCID> 
  Values: 
    <TENANCYOCID>: tenancy ocid that the SLA feature will be disabeld
  Purpose: 
    Disable the SLA feature for a specific tenancy 
  Examples: 
    ecra> sla tenancy_turnoff tenancy_ocid=exampleocid 
    * { 
      "tenancyOcid": "exampleocid", 
      "status": 200, 
      "op": "sla_tenancy_turnoff_put", 
      "status-detail": "success" 
    }

8) List all the tenancies with SLA feature turned on
  Usage:
    sla get_turnedon_tenancy
  Values:
    None
  Purpose:
    List all tenancies with SLA feature turned on
  Examples:
    ecra> sla get_turnedon_tenancy
    *{
      "Tenancies with SLA feature Turn On": [
        "tenancy1",
        "tenancy2"
      ],
      "status": 200,
      "op": "sla_tenancy_turnedon_get",
      "status-detail": "success"
    }

9) Ge the SLA report for input tenancy
  Usage:
    sla get_tenant_report tenancyOcid=<TENANTID> measureFrom=<MEASUREFROM> measureTo=<MEASURETO>
  Values:
    <TENANTID>: The tenant id (tenancy ocid) , Required
    <MEASUREFROM>: The beginning timestamp of the SLA report, Optional, if empty, will be default
                 to 30 days from today.
    <MEASURETO>: The end timestamp of the SLA report, Optional, if emtpy, will be the timestamp now.
  Purpose:
    Get the SLA report based on tenancies.
  Examples:
ecra> sla get_tenant_report tenancyOcid=ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq measureFrom=2024-03-31T20:36:44.478351602Z measureTo=2024-04-02T23:36:44.478351602Z
http://ecraha2.emmgmt.adminsea2.oraclevcn.com:9601/ecra/endpoint/sla/v1/tenant/ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq
* {
  "measureFrom": "2024-03-31T20:36:44.478351602Z",
  "measureTo": "2024-04-02T23:36:44.478351602Z",
  "slaInfoByTenant": [
    {
      "tenantName": "dbaasnm",
      "tenantId": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
      "slaInfoByCei": [
        {
          "ceiId": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q",
          "slaInfoByVmCluster": [
            {
              "vmClusterName": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu01",
              "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaajpa4yazoyg5efzbzw7dkvjbpr2wttlxajuvktucbtqca",
              "vmClusterDisplayName": "diagvmcl",
              "compartmentId": "ocid1.compartment.region1..aaaaaaaaxixscjv3iiwc3owufqxb6te7eqbtzcsh3vgr2osl4wl6geyy7knq",
              "vmClusterAverageSla": "1.0",
              "incidents": []
            },
            {
              "vmClusterName": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu02",
              "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaab4yenme3w2gjkvaydldvjxtiglfbwqojdlzqdhaz4o7a",
              "vmClusterDisplayName": "diagvmcl12",
              "compartmentId": "ocid1.compartment.region1..aaaaaaaaxixscjv3iiwc3owufqxb6te7eqbtzcsh3vgr2osl4wl6geyy7knq",
              "vmClusterAverageSla": "1.0",
              "incidents": []
            }
          ]
        },
        {
          "ceiId": "MISSING",
          "slaInfoByVmCluster": [
            {
              "vmClusterName": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu02",
              "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaab4yenme3w2gjkvaydldvjxtiglfbwqojdlzqdhaz4o7a",
              "vmClusterDisplayName": "diagvmcl12",
              "compartmentId": "ocid1.compartment.region1..aaaaaaaaxixscjv3iiwc3owufqxb6te7eqbtzcsh3vgr2osl4wl6geyy7knq",
              "vmClusterAverageSla": "1.0",
              "incidents": []
            }
          ]
        }
      ]
    }
  ],
  "status": 200,
  "op": "sla_tenant_get",
  "status-detail": "success"
}

10) Ge the SLA report for input cei (infrastructure ocid)
  Usage:
    sla get_tenant_report cei=<CEI> measureFrom=<MEASUREFROM> measureTo=<MEASURETO>
  Values:
    <CEI>: The cei id (infrastructure ocid) , Required
    <MEASUREFROM>: The beginning timestamp of the SLA report, Optional, if empty, will be default
                 to 30 days from today.
    <MEASURETO>: The end timestamp of the SLA report, Optional, if emtpy, will be the timestamp now.
  Purpose:
    Get the SLA report based on cei.
  Examples:
ecra> sla get_cei_report cei=ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q measureFrom=2024-03-31T01:49:39.020273286Z measureTo=2024-04-02T01:49:39.020273286Z
http://ecraha2.emmgmt.adminsea2.oraclevcn.com:9601/ecra/endpoint/sla/v1/cei/ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q
* {
  "measureFrom": "2024-03-31T01:49:39.020273286Z",
  "measureTo": "2024-04-02T01:49:39.020273286Z",
  "slaInfoByTenant": [
    {
      "tenantName": "dbaasnm",
      "tenantId": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
      "slaInfoByCei": [
        {
          "ceiId": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q",
          "slaInfoByVmCluster": [
            {
              "vmClusterName": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu01",
              "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaajpa4yazoyg5efzbzw7dkvjbpr2wttlxajuvktucbtqca",
              "vmClusterDisplayName": "diagvmcl",
              "compartmentId": "ocid1.compartment.region1..aaaaaaaaxixscjv3iiwc3owufqxb6te7eqbtzcsh3vgr2osl4wl6geyy7knq",
              "vmClusterAverageSla": "1.0",
              "incidents": []
            },
            {
              "vmClusterName": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu02",
              "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaab4yenme3w2gjkvaydldvjxtiglfbwqojdlzqdhaz4o7a",
              "vmClusterDisplayName": "diagvmcl12",
              "compartmentId": "ocid1.compartment.region1..aaaaaaaaxixscjv3iiwc3owufqxb6te7eqbtzcsh3vgr2osl4wl6geyy7knq",
              "vmClusterAverageSla": "1.0",
              "incidents": []
            }
          ]
        }
      ]
    }
  ],
  "status": 200,
  "op": "sla_cei_get",
  "status-detail": "success"
}

11) Ge the SLA report for input vm cluster id (ocid)
  Usage:
    sla get_tenant_report vm=<VM> measureFrom=<MEASUREFROM> measureTo=<MEASURETO>
  Values:
    <VM>: The vmcluster id (vm cluster ocid) , Required
    <MEASUREFROM>: The beginning timestamp of the SLA report, Optional, if empty, will be default
                 to 30 days from today.
    <MEASURETO>: The end timestamp of the SLA report, Optional, if emtpy, will be the timestamp now.
  Purpose:
    Get the SLA report based on vm cluster ocid.
  Examples:
ecra> sla get_vm_report vm=ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaajpa4yazoyg5efzbzw7dkvjbpr2wttlxajuvktucbtqca measureFrom=2024-03-02T01:49:39.020273286Z measureTo=2024-03-04T01:49:39.020273286Z
http://ecraha2.emmgmt.adminsea2.oraclevcn.com:9601/ecra/endpoint/sla/v1/vm/ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaajpa4yazoyg5efzbzw7dkvjbpr2wttlxajuvktucbtqca
* {
  "measureFrom": "2024-03-02T01:49:39.020273286Z",
  "measureTo": "2024-03-04T01:49:39.020273286Z",
  "slaInfoByTenant": [
    {
      "tenantName": "dbaasnm",
      "tenantId": "ocid1.tenancy.oc1..aaaaaaaa5wztl2qlgueiumbtn52zx5lzgwur2ixkmpjdmib2o6nuhj6kfksq",
      "slaInfoByCei": [
        {
          "ceiId": "ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q",
          "slaInfoByVmCluster": [
            {
              "vmClusterName": "sea2-d2-cl3-10b9f327-91fe-4ad2-aac4-91ed3b60c22c-clu01",
              "vmClusterId": "ocid1.cloudvmcluster.region1.sea.anzwkljsinjoekaajpa4yazoyg5efzbzw7dkvjbpr2wttlxajuvktucbtqca",
              "vmClusterDisplayName": "diagvmcl",
              "compartmentId": "ocid1.compartment.region1..aaaaaaaaxixscjv3iiwc3owufqxb6te7eqbtzcsh3vgr2osl4wl6geyy7knq",
              "vmClusterAverageSla": "1.0",
              "incidents": []
            }
          ]
        }
      ]
    }
  ],
  "status": 200,
  "op": "sla_vm_get",
  "status-detail": "success"
}

________________________________________________________________________________

#############
# errorcode #
#############
This command will give you all the information related to the error codes.
1) get
  Usage:
    errorcode get code=<CODE>
      Values:
        <CODE> : Error code
      Purpose:
        Returns all the information for the given code.
      Examples:
        ecra> errorcode get code=0x0201000F
        * {
            "errorCode": "0x0201000F",
            "errorName": "ERROR_USAGE_SIZE_MORE",
            "description": "Failed to resize as available space is smaller than current
        utilisation",
            "errorAction": "RETRY_WITH_SAME_TOKEN",
            "resolution": "Run exadatainfrastructure restorecluster command and once it
        finishes successfully, perform workflows abort for the failed workflow.",
            "status": 200,
            "op": "error_codes_get",
            "status-detail": "success"
        }
        ecra> errorcode get code=0x02010010
        * {
            "errorCode": "0x02010010",
            "errorName": "ERROR_LESS_FREE_SPACE",
            "description": "Failed to modify as minimum free space requirement is not
        met",
            "errorAction": "RETRY_WITH_SAME_TOKEN",
            "resolution": "",
            "status": 200,
            "op": "error_codes_get",
            "status-detail": "success"
        }
2) category
  Usage:
    errorcode category code=<CODE>
      Values:
        <CODE> : Error code
      Purpose:
        Returns the category description for the given code.
      Examples:
        ecra> errorcode category code=0x0201000F
        * {
            "name": "Exacloud - HealthCheck",
            "code": "0x0201",
            "status": 200,
            "op": "error_codes_category_get",
            "status-detail": "success"
        }
3) endpoint
  Usage:
    errorcode endpoint name=<NAME>
      Values:
        <NAME> : Name of the endpoint (To get all endpoints use _all_)
      Purpose:
        Returns all the errors that a particular endpoint could have, in case you want to list all, use _all_ as value.
      Examples:
        ecra> errorcode endpoint name=getTenancySlaAverage
        * {
            "result": [
                {
                    "getTenancySlaAverage": "[0x01001,0x02003]"
                }
            ],
            "status": 200,
            "op": "error_codes_endpoint_get",
            "status-detail": "success"
        }
        ecra> errorcode endpoint name=_all_
        * {
            "result": [
                {
                    "getComplianceConfigChangeHistoryDetail": "[0x01001,0x02003]"
                },
                {
                    "createAssociation": "[0x01001,0x02003]"
                },
                {
                    "submitFleetPatchingRequest": "[0x01001,0x02003]"
                },
                {
                    "getDiagStatMetricInfo": "[0x01001,0x02003]"
        [...]
        [...]
        [...]
________________________________________________________________________________
########
# DOMU #
########
Purpose: to get all details from a given domu name

1) Get DOMU
  Usage:
    domu get name=<ADMIN_HOST_NAME> resumelevel=<RESUME_LEVEL>
  Values:
    <ADMIN_HOST_NAME>: The value to identify a given domu
    <RESUME_LEVEL>: Indicates how many fields will be returned 0 is for all fields 2 for minimum
  Purpose:
    Get all information from a single domu
  Examples:
    ecra> domu get name=iad103709exddu0401
    * {
        "status": 200,
        "message": "Successful DomU fetch",
        "status-detail": "Successful DomU fetch",
        "op": "domu_name_data",
        "domu": {
            "ecs_racks_name": "iad1-d4-cl3-fcdb8f7d-362d-45be-9c51-fb858901362d-clu01",
            "hw_node_id": "439",
            "db_client_mac": "00:10:45:15:ba:d5",
            "db_backup_mac": "02:00:17:01:af:fe",
            "gateway_adapter": "CLIENT",
            "hostname_adapter": "CLIENT",
            "admin_ip": "10.0.6.50",
            "admin_host_name": "iad103709exddu0401",
            "admin_netmask": "255.255.255.128",
            "admin_domianname": "iad103709exd.adminiad1.oraclevcn.com",
            "admin_vlan_tag": "",
            "admin_gateway": "10.0.6.1",
            "admin_network_type": "NAT",
            ...
            "customer_client_mac": "",
            "customer_client_vlantag": "",
            "customer_client_mtu": "",
            "customer_client_standby_vnic_mac": "",
            "customer_backup_mac": "",
            "customer_backup_vlantag": "",
            "customer_backup_mtu": "",
            "customer_backup_standby_vnic_mac": ""
        }
    }
2) Search DOMU
  Usage:
    domu search cabinetid=<CABINET_ID> exaunitid=<EXAUNIT_ID> rackname=<RACKNAME> hwid=<HW_ID> computehostname=<COMPUTE_HOSTNAME> vmid=<VMID> nathostname=<NAT_HOSTNAME> clienthostname=<CLIENT_HOSTNAME> adminip=<ADMIN_IP> dbclientvlantag=<DB_CLIENT_VLAN_TAG> resumelevel=<RESUME_LEVEL>
  Values:
    <CABINET_ID>: Indicates a search for all domus from a given cebinet id
    <EXAUNIT_ID>: Indicates a search for all domus from a given exaunit id
    <RACKNAME>: Indicates a search for all domus from a given exaunit id
    <HW_ID>: Indicates a search for all domus from a given hardware node id
    <VMID>: Indicates a search for all domus from a given hardware node id
    <COMPUTE_HOSTNAME>: Indicates a search for all domus from a given compute hostname
    <NAT_HOSTNAME>: Indicates a search for all domus from a given nat/admin hostname. Will also print the exaunit detain info form the exaunit eh domu blengs to.
    <CLIENT_HOSTNAME> : Indicates a search for all domus from a given client hostname Will also print the exaunit detain info form the exaunit eh domu blengs to.
    <ADMIN_IP> : Indicates a search for all domus from a given admin ip
    <DB_CLIENT_VLAN_TAG>: Indicates a search for all domus from a given client vlan tag
    <RESUME_LEVEL>: Indicates how many fields will be returned 0 is for all fields 2 for minimum
  Purpose:
    Search for a domu by the given parameters. Using the nathostname or the clienthostname as parameter will also print the exaunit detail info the domu belongs to.
  Examples:
    ecra> domu search cabinetid=32 hwid=439 exaunitid=603 computehostname=iad103709exdd004 resumelevel=2
     * {
         "status": 200,
         "message": "Successful DomU fetch",
         "status-detail": "Successful DomU fetch",
         "op": "domu_name_composed_data",
         "domus": [
             {
                 "ecs_racks_name": "iad1-d4-cl3-fcdb8f7d-362d-45be-9c51-fb858901362d-clu01",
                 "hw_node_id": "439",
                 "gateway_adapter": "CLIENT",
                 "hostname_adapter": "CLIENT",
                 "admin_ip": "10.0.6.50",
                 "admin_host_name": "iad103709exddu0401",
                 "admin_domianname": "iad103709exd.adminiad1.oraclevcn.com",
                 "db_client_mac": "00:10:45:15:ba:d5",
                 "db_client_ip": "10.0.0.2",
                 "db_client_host_name": "iad103709exdd004-client",
                 "db_client_domianname": "backup.customer2.oraclevcn.com",
                 "db_backup_mac": "02:00:17:01:af:fe",
                 "db_backup_ip": "10.0.1.2",
                 "db_backup_host_name": "iad103709exdd004-backup",
                 "db_backup_domianname": "data.customer2.oraclevcn.com"
             }
         ]
     }

3) delete badhostname
  Usage:
    domu deletebadhostname nathostname=<NATHOSTNAME>
  Values:
    <NATHOSTNAME>: Nat hostname that is associated with the badhostname rack
  Purpose:
    Deletes the domu record associated with the provided nathostname and the badnathostname rack
  Examples:
  ecra> domu deletebadhostname nathostname=iad103709exddu1701
    * {
        "status": 200,
        "message": "Successful deletion",
        "status-detail": "Successful deletion",
        "op": "domu_delete_badnathostname",
        "result": "Successful deletion of badnathostname with nathostname[iad103709exddu1701]"
    }
_______________________________________________________________________________
#########
#PREPROV#
#########

Performs pre-provisioning commands.

jobs get:
Usage: ./ecracli preprov jobs get <job>

Purpose:
	Retrieves a list containing all pre-prov jobs or the metadata of a specific job.

Arguments:
	job: the job to display metadata from. If this argument is left empty, a list of pre-prov jobs will be displayed instead.

Example:
Empty job argument
ecra> preprov jobs get
* {
    "jobs": [
        {
            "job_class": "oracle.exadata.ecra.preprovision.jobs.SetupOracleNetworkJob",
            "job_category": "PREPROV"
        }
    ]
}

Job specified
ecra> preprov jobs get oracle.exadata.ecra.preprovision.jobs.SetupOracleNetworkJob
* {
    "vcn": {
        "cidr": "10.0.0.0/16",
        "label": "preprovvcn"
    },
    "subnets": [
        {
            "type": "client",
            "cidr": "10.0.0.0/18"
        },
        {
            "type": "backup",
            "cidr": "10.0.64.0/18"
        }
    ],
    "securityRules": {
        "ingress": [
            {
                "protocol": "TCP",
                "stateless": false,
                "destinationMinPort": -1,
                "destinationMaxPort": -1,
                "sourceMinPort": -1,
                "sourceMaxPort": -1,
                "allOpen": true
            },
            {
                "protocol": "ICMP",
                "stateless": false,
                "icmpCode": -1,
                "icmpType": -1,
                "allOpen": true
            }
        ],
        "egress": [
            {
                "protocol": "ALL",
                "stateless": false,
                "destinationMinPort": -1,
                "destinationMaxPort": -1,
                "sourceMinPort": -1,
                "sourceMaxPort": -1,
                "allOpen": true
            }
        ]
    },
    "timeout": 86400
}

jobs update:
Usage: ./ecracli preprov jobs update <job> configuration=<config_path>

Purpose:
	Retrieves a particular pre-prov job and changes it's metadata content to the one passed as a JSON file in the configuration argument.

Arguments:
	job: the job to update
	configuration: the path to the desired metadata info as a JSON file.

Example:
Valid JSON file:
ecra> preprov jobs update oracle.exadata.ecra.preprovision.jobs.SetupOracleNetworkJob configuration=/scratch/ririgoye/scripts/testConfig.json
* {
    "status": 200,
    "op": "preprov_job_put",
    "status-detail": "success"
}

Invalid JSON file:
ecra> preprov jobs update oracle.exadata.ecra.preprovision.jobs.SetupOracleNetworkJob configuration=/scratch/ririgoye/scripts/testConfig.json
* Error: Couldn't decode JSON file due to the following error: Expecting ',' delimiter

scheduler:
Usage: ./ecracli preprov scheduler <start|stop|get>

Purpose:
	Manipulates the pre-prov jobs scheduler and retrieves the currently running schedulers.

Arguments:
	operation: the action that the scheduler should perform.

Example:
Scheduler start
ecra> preprov scheduler start
* {
    "message": "Succesfully started pre provisioning scheduler.",
    "status": 200,
    "op": "preprov_scheduler_start",
    "status-detail": "success"
}

Scheduler stop
ecra> preprov scheduler stop
* {
    "message": "Successfully shut down pre provisioning scheduler.",
    "status": 200,
    "op": "preprov_scheduler_shutdown",
    "status-detail": "success"
}

Scheduler get
ecra> preprov scheduler get
* {
    "schedulers": [],
    "status": 200,
    "op": "preprov_scheduler_get",
    "status-detail": "success"
}

deleterackresources:
Usage ./ecracli preprov deleterackresources rackname=<rackname>
Purpose:
	Performs async delete operation in a rack and removes related resources

Arguments:
	rackname: rack where the operation is to be performed
	keepvnic: true or false. Either keep or delete vnic
	keepcompute: true or false. Either keep or delete compute
	keepdns: true or false. Either keep or delete dns records

Example:
ecra> preprov deleterackresources iad1-d4-cl4-07bb6908-d078-4b8a-a989-190f6aa9b6f5-clu01
* {
    "status": 202,
    "status_uri": "http://phoenix94112.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/2a647f7f-49a8-4c3c-affc-ef8be9412f60",
    "op": "rack_preprov_resources_delete",
    "op_start_time": "2023-02-24T16:23:02+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

vcn get:
Usage: ./ecracli preprov vcn get

Purpose:
	Retrieves a list with all the VCNs.

Arguments:

Example:

ecra> preprov vcn get
* {
    "vcn": [
        {
            "vcn_id": "ocid1.vcn.region1.sea.5a7a628e32454c819253bafd3c8dd3b8",
            "vcn_fsm": "CREATED",
            "compartmentocid": "ocid1.compartment.oc1..aaaaaaaa6ogkvtvysivo3wnipdfvtptukofwlkcuztdkifzurhe7r3itymha",
            "cidrblock": "10.0.0.0/16"
        }
    ],
    "status": 200,
    "op": "preprov_vcn_get",
    "status-detail": "success"
}

subnet get:
Usage: ./ecracli preprov subnet get

Purpose:
	Retrieves a list with all the subnets.

Arguments:

Example:

ecra> preprov subnet get
* {
    "subnet": [
        {
            "name": "preprovclient",
            "vcnocid": "ocid1.vcn.region1.sea.5a7a628e32454c819253bafd3c8dd3b8",
            "ocid": "ocid1.subnet.region1.sea.1a9baddc198a4e6380bbc89ae282f4f2",
            "cidrblock": "10.0.0.0/18",
            "subnettype": "CLIENT",
            "availabilitydomain": "hmAF:SEA-AD-2",
            "domain": "client.preprovvcnmain.oraclevcn.com"
        },
        {
            "name": "preprovbackup",
            "vcnocid": "ocid1.vcn.region1.sea.5a7a628e32454c819253bafd3c8dd3b8",
            "ocid": "ocid1.subnet.region1.sea.90d2edd1a8204dae9d480f930c0e5850",
            "cidrblock": "10.0.64.0/18",
            "subnettype": "BACKUP",
            "availabilitydomain": "hmAF:SEA-AD-2",
            "domain": "client.preprovvcnmain.oraclevcn.com"
        }
    ],
    "status": 200,
    "op": "preprov_subnet_get",
    "status-detail": "success"
}

vnics get:
Usage: ./ecracli preprov vnics get

Purpose:
	Retrieves a list with all the vnics.

Arguments:
rackname: rack where the operation is to be performed

Example:

ecra> preprov vnics get
* {
    "vnics": [
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.ODE5Njc0YWUtNDE1Yi00YjIzLWI4MjUtMGQzNDYyNTc2YzA0",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.MzU1YmM2MDktOTRmMC00OTc2LTliMDQtNDNkZDdhNDdhMTA5",
            "hostnamelabel": "c3709n18c1-v-ac"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.Njk2MTk0ZjctNDlmNC00ZTQ5LTg0NmMtMjVkNzg0ZDIwYzhk",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.MzU1YmM2MDktOTRmMC00OTc2LTliMDQtNDNkZDdhNDdhMTA5",
            "hostnamelabel": "c3709n18b1-v-ac"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.MmM3NzViNGQtMTIwYS00M2ViLWJiMWUtNDM0YjAwYjEyZTgz",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.NGYxZGJkMWQtOTQ2MC00MWMyLThlZjAtZTM2Y2RkOWFjMWQx",
            "hostnamelabel": "c3709n18c1-v-sb"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.OTU4MTY3ODctZTIzZS00ZmY4LWEzZmYtZjY2ZTA3OTA5MDBk",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.NGYxZGJkMWQtOTQ2MC00MWMyLThlZjAtZTM2Y2RkOWFjMWQx",
            "hostnamelabel": "c3709n18b1-v-sb"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.NGU2ODFiMWYtNjU3Ni00ZTc3LTlmMDYtYmE1YjdjMzQ3ZWJh",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.ZmEzYWNmYTctYWUwNi00ZjExLTk3ZTctZDRiZDQyMDY2NTJh",
            "hostnamelabel": "c3709n17c1-v-ac"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.ZDJlNjc4ZDMtNDVjNy00MjZmLWIzODQtNGNkYjMwMjdhOGIz",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.ZmEzYWNmYTctYWUwNi00ZjExLTk3ZTctZDRiZDQyMDY2NTJh",
            "hostnamelabel": "c3709n17b1-v-ac"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.MzNjMDZkYjAtNWE3My00MDM2LThmYzEtNmQyY2I2ZWM4Nzg4",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.YzNlOWM1ZGYtYjExMC00MzJiLTk4NTgtODc1YmVjYzU2YWRl",
            "hostnamelabel": "c3709n17c1-v-sb"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.YjBhMzI3YmEtNWFlZi00MzI4LTgxMDUtMjNkNDA1ZTQ2OTE4",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.YzNlOWM1ZGYtYjExMC00MzJiLTk4NTgtODc1YmVjYzU2YWRl",
            "hostnamelabel": "c3709n17b1-v-sb"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.MTA5M2EyYTktMTAyNC00ZWVkLWE2MGUtMzFmNDUwOWNkY2Jl",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.YjAxNmMyYTEtOWI4Ni00ZDAxLTkxZDMtYTY3YzJkOThjMzFl",
            "hostnamelabel": "c3709n16c1-v-ac"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.OWRhNGU1ZTgtZTk5ZC00Mjk5LTk0ZjctNTNkYWM3YTdjMzhh",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.YjAxNmMyYTEtOWI4Ni00ZDAxLTkxZDMtYTY3YzJkOThjMzFl",
            "hostnamelabel": "c3709n16b1-v-ac"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.NGZjYzg4Y2UtZWIxMS00NjFiLWJmODAtOGNkZmZkY2ViMDQ5",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.NjI1OTQyZjItNmUxNi00MzM2LThlYTUtYzIxMmJlYmI5NDBh",
            "hostnamelabel": "c3709n16c1-v-sb"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.M2IwYjg1YzUtNGUxYy00MTIxLWI3NzAtN2E4MmI0MjQ3MzIz",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.NjI1OTQyZjItNmUxNi00MzM2LThlYTUtYzIxMmJlYmI5NDBh",
            "hostnamelabel": "c3709n16b1-v-sb"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.NTUyY2FiZjAtNzdkYi00NjhlLWFmY2MtNDQ2MjVmMjdkNTc4",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.ZjA2MzA3MjEtZDFjZC00OWZlLTg3NjctMWFkNGYxOWI5OTc4",
            "hostnamelabel": "c3709n15c1-v-ac"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.NWY3ZGE3YzctMGVlOC00ZDc5LThiYjktNDFkODczNWUyN2I0",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.ZjA2MzA3MjEtZDFjZC00OWZlLTg3NjctMWFkNGYxOWI5OTc4",
            "hostnamelabel": "c3709n15b1-v-ac"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.ZmU2YTE4ZWYtNzFiYi00MzNhLTlmOWEtZjY5NzQ5MTliYWM4",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.YzdhN2M1ZTItYzg3Yy00ZWJiLWE3ZjEtOWQwNzdhY2JhMDUz",
            "hostnamelabel": "c3709n15c1-v-sb"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-ee8c776b-9c91-40cf-94ff-c943e1dbcde0-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.Mjk4MjVmNzUtZDFjZS00ZDA5LWJmNTUtMGI5ZDUwMGU4MzZl",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.YzdhN2M1ZTItYzg3Yy00ZWJiLWE3ZjEtOWQwNzdhY2JhMDUz",
            "hostnamelabel": "c3709n15b1-v-sb"
        }
    ],
    "status": 200,
    "op": "preprov_vnic_get",
    "status-detail": "success"
}

ecra> preprov vnics get rackname=iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01
* {
    "vnics": [
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.ODE5Njc0YWUtNDE1Yi00YjIzLWI4MjUtMGQzNDYyNTc2YzA0",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.MzU1YmM2MDktOTRmMC00OTc2LTliMDQtNDNkZDdhNDdhMTA5",
            "hostnamelabel": "c3709n18c1-v-ac"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.Njk2MTk0ZjctNDlmNC00ZTQ5LTg0NmMtMjVkNzg0ZDIwYzhk",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.MzU1YmM2MDktOTRmMC00OTc2LTliMDQtNDNkZDdhNDdhMTA5",
            "hostnamelabel": "c3709n18b1-v-ac"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.MmM3NzViNGQtMTIwYS00M2ViLWJiMWUtNDM0YjAwYjEyZTgz",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.NGYxZGJkMWQtOTQ2MC00MWMyLThlZjAtZTM2Y2RkOWFjMWQx",
            "hostnamelabel": "c3709n18c1-v-sb"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.OTU4MTY3ODctZTIzZS00ZmY4LWEzZmYtZjY2ZTA3OTA5MDBk",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.NGYxZGJkMWQtOTQ2MC00MWMyLThlZjAtZTM2Y2RkOWFjMWQx",
            "hostnamelabel": "c3709n18b1-v-sb"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.NGU2ODFiMWYtNjU3Ni00ZTc3LTlmMDYtYmE1YjdjMzQ3ZWJh",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.ZmEzYWNmYTctYWUwNi00ZjExLTk3ZTctZDRiZDQyMDY2NTJh",
            "hostnamelabel": "c3709n17c1-v-ac"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.ZDJlNjc4ZDMtNDVjNy00MjZmLWIzODQtNGNkYjMwMjdhOGIz",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.ZmEzYWNmYTctYWUwNi00ZjExLTk3ZTctZDRiZDQyMDY2NTJh",
            "hostnamelabel": "c3709n17b1-v-ac"
        },
        {
            "vlantag": "500",
            "subnetocid": "ocid1.subnet.region1.sea.e2150b55196a418998560097b9cf1c0d",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.MzNjMDZkYjAtNWE3My00MDM2LThmYzEtNmQyY2I2ZWM4Nzg4",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 1,
            "instanceocid": "ocid1.instance.oc1.phx.YzNlOWM1ZGYtYjExMC00MzJiLTk4NTgtODc1YmVjYzU2YWRl",
            "hostnamelabel": "c3709n17c1-v-sb"
        },
        {
            "vlantag": "501",
            "subnetocid": "ocid1.subnet.region1.sea.9052e92e0f21402f8c60d63a2b5c4547",
            "rackname": "iad1-d2-cl3-0c191e75-ad14-48e2-a5cc-0d41096bfca3-clu01",
            "primaryip": "192.168.173.22",
            "ocid": "ocid1.vnic.oc1.phx.YjBhMzI3YmEtNWFlZi00MzI4LTgxMDUtMjNkNDA1ZTQ2OTE4",
            "macaddress": "02:00:17:17:6A:AE",
            "isprimary": 0,
            "instanceocid": "ocid1.instance.oc1.phx.YzNlOWM1ZGYtYjExMC00MzJiLTk4NTgtODc1YmVjYzU2YWRl",
            "hostnamelabel": "c3709n17b1-v-sb"
        }
    ],
    "status": 200,
    "op": "preprov_vnic_get",
    "status-detail": "success"
}



Status pull
ecra> status 02db312f-a0ba-496d-8654-029d3958c46c
* {"start_time": "2023-02-24T13:21:40+0000", "end_time":
"2023-02-24T13:21:45+0000", "resource_id":
"iad1-d4-cl4-07bb6908-d078-4b8a-a989-190f6aa9b6f5-clu01", "ecra_server":
"EcraServer1", "last_heartbeat_update": "2023-02-24T13:21:40+0000", "status":
200, "message": "Done", "op":
"oracle.exadata.ecra.operations.DeletePreprovResourcesOperation", "atp_enabled":
"Y", "status_uri":
"http://phoenix94112.dev3sub2phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/02db312f-a0ba-496d-8654-029d3958c46c",
"status-detail": "success"}

capacitymove:
Usage ./ecracli preprov capacitymove exadatainfrastructureid=<ExaInfraId>
Purpose:
	Performs a exaInfra cleaning for preprov resources, it will delete all clusters & oci resources & finally delete the exaInfra

Arguments:
	exadatainfrastructureid: ExadataInfrastructureId that is going to be cleared

Example:
ecra> preprov capacitymove exadatainfrastructureid=flowtesterInfra
* {
    "status": 200,
    "status_uri":
"http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f42a9999-f413-4ef2-96fe-9b3d957b4be7",
    "op": "preprov_scheduler_get",
    "op_start_time": "2023-06-30T20:30:39+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}

Status pull
ecra> status f42a9999-f413-4ef2-96fe-9b3d957b4be7
* {"remote_user": "ops", "start_time": "2023-06-30T20:30:39+0000", "progress_percent": 0, "end_time": "2023-06-30T22:41:04+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-06-30T20:30:39+0000", "wf_uuid": "82fb9f2f-afca-4855-838d-610de200880d", "status": 200, "message": "Done", "op": "preprov-capacity-move-op", "completion_percentage": 0, "atp_enabled": "N", "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/f42a9999-f413-4ef2-96fe-9b3d957b4be7", "status-detail": "success"}

ecra> workflows describe workflowId=82fb9f2f-afca-4855-838d-610de200880d
* {
    "workflowName": "preprov-capacity-move",
    "workflowId": "82fb9f2f-afca-4855-838d-610de200880d",
    "workflowStatus": "Completed",
    "workflowStartTime": "30 Jun 2023 20:30:39 UTC",
    "workflowEndTime": "30 Jun 2023 20:34:02 UTC",
    "wfRollbackMode": false,
    "wfErrorMessage": "",
    "tasks": [
        {
            "taskName": "DeletePreprovClusters",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Fri Jun 30 20:30:39 UTC 2023",
            "taskEndTime": "Fri Jun 30 20:33:21 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:02:42"
        },
        {
            "taskName": "UpdateHwNodesClusterTag",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Fri Jun 30 20:33:21 UTC 2023",
            "taskEndTime": "Fri Jun 30 20:33:21 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "taskName": "DeleteInfraEC",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Fri Jun 30 20:33:21 UTC 2023",
            "taskEndTime": "Fri Jun 30 20:34:02 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:41"
        },
        {
            "taskName": "DeleteInfraMetadata",
            "taskStatus": "COMPLETE",
            "taskStartTime": "Fri Jun 30 20:34:02 UTC 2023",
            "taskEndTime": "Fri Jun 30 20:34:02 UTC 2023",
            "taskErrorMessage": "",
            "taskElapsed": "00:00:00"
        },
        {
            "lastTaskName": "DeleteInfraMetadata",
            "lastOperationDetails": {
                "lastTaskLastOperationId":
"e915f52c-8d22-4081-a5de-e3a28782a1b0",
                "lastTaskLastOperationName": "EXECUTE",
                "lastTaskLastOperationStatus": "SUCCESS",
                "lastTaskLastOperationStartTime": "30 Jun 2023 20:34:02 UTC",
                "lastTaskLastOperationEndTime": "30 Jun 2023 20:34:02 UTC"
            }
        }
    ],
    "exaOCID": "",
    "requestId": "f42a9999-f413-4ef2-96fe-9b3d957b4be7",
    "isWorkflowsPaused": false,
    "WFServerOwner": "EcraServer1",
    "status": 200,
    "op": "wf_describe",
    "status-detail": "success"
}


ecra> exadatainfrastructure get
* {
    "infras": []
}



_______________________________________________________________________________
#############
# Ingestion #
#############
Purpose: Ingestion related tasks

1) Import Cabinet
  Usage:
    ingestion import action=<IMPORT_ACTION> cabinetname=<CABINET_NAME> cabinetjson=<CABINET_JSON>
  Values:
    <IMPORT_ACTION>: Import actions such as updatecabinet. Actions that will be supported in the future are import, delete etc.
    <CABINET_NAME>: Name of the cabinet being imported.
    <CABINET_JSON>: Cabinet details in a json format.
  Purpose:
    Import a cabinet into ECRA as part of ingestion.
  Examples:
    ecra> ingestion import action=updatecabinet cabinetname=sea201605 cabinetjson=/path/to/payloads/sea201605.json
    * TODO
________________________________________________________________________________
#########
# VMConsole #
#########
This command will allow you to perform vmconsole operations in the domOs.
vmconsole:
1)deployment
  Usage:
    vmconsole deployment action=<install|uninstall|status> dom0=<DOM0> exaunitId=<exaunitId> exaOcid=<EXA)CID>
      Values:
        <ACTION> : The action that exacloud is going to do in the dom0 (install|uninstall|status)
        <DOM0> Name of the dom0
        <EXAUNITID> Exaunit Id from the cluster
        <EXAOCID> OCID of the infraestructure
      You must specify one of the above parameter, is only exaunit or exaocid is specified the vmconsole operation will be executed in all the dom0s in the cluster xml.
      Purpose:
        Perform vmconsole operation in the dom0s
      Examples:
        ecra> vmconsole deployment action=install dom0=scaqan03adm04.us.oracle.com
        ecra> vmconsole deployment action=unintall exaunitId=1001

2)enable
  Usage:
    vmconsole enable exaOcid=<EXA)CID>
      Values:
        <EXAOCID> OCID of the infraestructure
      Purpose:
        Enable vmconsole operation in the dom0s in the infra
      Examples:
        ecra> vmconsole enable exaOcid=ocid1.cloudexadatainfrastructure.region1.sea.anzwkljsinjoekaa7kx4rm4rxfkwjuzfz22ocink6yfvyjs4mgk744jzi24q


________________________________________________________________________________

########
# SOP #
########
Purpose: Call SOP scripts from Ecra on Hardware
https://confluence.oci.oraclecorp.com/pages/viewpage.action?pageId=2690581561

1) Sop List

List all the available scripts along with their versions

ecra> sop list
* {
    "script2.py": {
        "support_parallel_execution": true,
        "version": "1",
        "sha256sum": "0f14e5fd7387c8737766605cbbea2e88f88a426a2a35633b7b3ec88d2f5ea64d",
        "script_exec": "python",
        "return_json_support": true,
        "script_name": "script2.py",
        "script_path": "/u01/ecra_preprov/oracle/ecra_installs/ecramain/mw_home/user_projects/domains/sopscripts/script2.py"
    },
    "script1.sh": {
        "support_parallel_execution": false,
        "version": "1",
        "sha256sum": "deb416f63eff01d23d078844f0b867c440acbb5e16f3de63103a9d9c2bf695a5",
        "script_exec": "/bin/sh",
        "return_json_support": true,
        "script_name": "script1.sh",
        "script_path": "/u01/ecra_preprov/oracle/ecra_installs/ecramain/mw_home/user_projects/domains/sopscripts/script1.sh"
    },
    "status": 200,
    "op": "sop_scripts",
    "status-detail": "success"
}
ecra>
 
Can also use exaocid for ExaCC 

[oracle@seaexaccecra6 inst6b]$ ./ecracli/ecracli
Enter 'username': ops
Enter 'password':
* Ecracli -24.165
* host              :
http://seaexaccecra6.ecramgmt.adminsea.oraclevcn.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
*  <id> : <rackname>                           : <exaname>                      
     : <rackstate> : <ongoing op> : <workflowId> : <dbSIDs>
*  1    : sea186089exd-dbaas-scaqau02XXX-clu01 :
sea186089exd-dbaas-scaqau02XXX-clu01 : PROVISIONED :              :             
:
* Connecting to endpoint and getting version info...
* oci_sdk_version : 3.23.0
* comment : soptest9
* label : ECS_23.3.1.0.0_LINUX.X64_240613.1314
* workflow_api_version : 0.1_mainline_2024-05-20T12:05:50Z
* dborch_version : ECS_23.3.1.0.0_LINUX.X64_240613.1314
ecra> sop list
exaocid=ocid1.exadatainfrastructure.region1.sea.anzwkljsjajnm5iat3uyeejm34vnzwkfgukafk3ghrluspxmhr3a2k7y7kxq
* {
    "scripts": [
        {
            "comments": "Script for command execution in dom0 and cell",
            "support_parallel_execution": true,
            "version": "2",
            "sha256sum":
"37b2be0e4b33aa07e315fab258e976d1e7d79ec3aa870fc8793847b3af0a82ee",
            "script_exec": "python3",
            "return_json_support": true,
            "script_name": "sop_cmd_executor.py",
            "script_path": "/u01/oadt/sop_re_scripts/sop_cmd_executor.py"
        }
    ],
    "status": 200,
    "op": "sop_scripts",
    "status-detail": "success"
}
ecra>


2) sop request
Executes new command from given parameters on payload

ecra> sop request jsonpayload=/u01/ecra_preprov/oracle/ecra_installs/ecramain/mw_12214/user_projects/domains/sop_payload.json
{'cmd': 'start', 'nodes': ['sea200120exdd001.sea200120exd.adminsea2.oraclevcn.com', 'sea200120exdd002.sea200120exd.adminsea2.oraclevcn.com'], 'scriptname': 'script1.sh', 'version': '1', 'scriptparams': '', 'script_payload': {}}
* {
    "status": 202,
    "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/0ad3f1c6-f39c-4061-bef0-0a61621d038b",
    "op": "sop_request",
    "op_start_time": "2023-02-07T10:49:03+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}
ecra>


[oracle@ecratst u01]$ cat /u01/ecra_preprov/oracle/ecra_installs/ecramain/mw_12214/user_projects/domains/sop_payload.json
{"cmd": "start", "nodes": ["sea200120exdd001.sea200120exd.adminsea2.oraclevcn.com", "sea200120exdd002.sea200120exd.adminsea2.oraclevcn.com"], "scriptname": "script1.sh", "version": "1", "scriptparams": "", "script_payload": {} }
[oracle@ecratst u01]$


can also use exaocid for exacc 

[oracle@seaexaccecra6 inst6b]$ ./ecracli/ecracli
Enter 'username': ops
Enter 'password':
* Ecracli -24.165
* host              :
http://seaexaccecra6.ecramgmt.adminsea.oraclevcn.com:9001/ecra/endpoint
* username          : ops
* password          : ****
* created exaunits
*  <id> : <rackname>                           : <exaname>                      
     : <rackstate> : <ongoing op> : <workflowId> : <dbSIDs>
*  1    : sea186089exd-dbaas-scaqau02XXX-clu01 :
sea186089exd-dbaas-scaqau02XXX-clu01 : PROVISIONED :              :             
:
* Connecting to endpoint and getting version info...
* oci_sdk_version : 3.23.0
* comment : soptest9
* label : ECS_23.3.1.0.0_LINUX.X64_240613.1314
* workflow_api_version : 0.1_mainline_2024-05-20T12:05:50Z
* dborch_version : ECS_23.3.1.0.0_LINUX.X64_240613.1314
ecra> sop list
exaocid=ocid1.exadatainfrastructure.region1.sea.anzwkljsjajnm5iat3uyeejm34vnzwkfgukafk3ghrluspxmhr3a2k7y7kxq
* {
    "scripts": [
        {
            "comments": "Script for command execution in dom0 and cell",
            "support_parallel_execution": true,
            "version": "2",
            "sha256sum":
"37b2be0e4b33aa07e315fab258e976d1e7d79ec3aa870fc8793847b3af0a82ee",
            "script_exec": "python3",
            "return_json_support": true,
            "script_name": "sop_cmd_executor.py",
            "script_path": "/u01/oadt/sop_re_scripts/sop_cmd_executor.py"
        }
    ],
    "status": 200,
    "op": "sop_scripts",
    "status-detail": "success"
}
ecra>

3) sop cancel

Cancel given Sop request

ecra>  sop cancel  jsonpayload=/u01/ecra_preprov/oracle/ecra_installs/ecramain/mw_12214/user_projects/domains/sop_payload_cancel.json
* {
    "status": 202,
    "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/13057a68-e752-44c2-9a55-74dd4050b09d",
    "op": "sop_cancel",
    "op_start_time": "2023-02-07T11:33:09+0000",
    "est_op_end_time": "",
    "message": "processing",
    "status-detail": "processing"
}
ecra> status 13057a68-e752-44c2-9a55-74dd4050b09d
* {"start_time": "2023-02-07T11:33:09+0000", "end_time": "2023-02-07T11:33:14+0000", "ecra_server": "EcraServer1", "last_heartbeat_update": "2023-02-07T11:33:09+0000", "status": 200, "message": "Done", "op": "sop-call", "atp_enabled": "Y", "status_uri": "http://ecratst.ecramgmt.adminsea2.oraclevcn.com:9053/ecra/endpoint/statuses/13057a68-e752-44c2-9a55-74dd4050b09d", "status-detail": "success"}
ecra>

[oracle@ecratst u01]$ cat /u01/ecra_preprov/oracle/ecra_installs/ecramain/mw_12214/user_projects/domains/sop_payload_cancel.json
{"uuid":"09e8e666-a6d5-11ed-9270-00001701c4ba", "cmd": "delete", "nodes": ["sea200120exdd001.sea200120exd.adminsea2.oraclevcn.com", "sea200120exdd002.sea200120exd.adminsea2.oraclevcn.com"], "scriptname": "script1.sh", "version": "1", "scriptparams": "", "script_payload": {} }
[oracle@ecratst u01]$
________________________________________________________________________________

#######
# OCI #
#######
This command checks if there is access to oci apis
connectivity:
1)check
  Usage:
    oci connectivity check [compartmentid=COMPARTMENTID]
      Values:
        <COMPARTMENTID> : Used to limit the connectivity check internal results
      Purpose:
        Check if the current ECRA stack has successful access to OCI APIs
      Examples:
        ecra> oci connectivity check
        ecra> oci connectivity check compartmentid=ocid1.tenancy.id.1234

#################
# PATCHMETADATA #
#################
This command is used to update infrapatch metadata which is used for various infrapatch
operation

1)registerlaunchnodes
   Usage:
   patchmetadata registerlaunchnodes infraName=<Name of the infra> 
                 infraType=<Type of infra CLUSTER|CABINET|QFAB|SINGLE_VM_CLUSTER>
                 launchNodes=<comma seperated list of launch nodes>
                 launchNodes=<MANAGEMENT_HOST|COMPUTE>
   Description: Register launchnodes for an infra to perform infra patching
   Arguments:
     infraName(Optional): Name of the infra
     infraType(Mandatory): Type of infra CLUSTER|CABINET|QFAB|SINGLE_VM_CLUSTER
     launchNodes(Mandatory): comma separated list of launch nodes
     launchNodeType(Optional): Valid values are MANAGEMENT_HOST and COMPUTE. This attribute is optional in case of SINGLE_VM_CLUSTER and it will be defaulted to MANAGEMENT_HOST. For clusterless cabinets it will be defaulted to COMPUTE
   Example:
     patchmetadata registerlaunchnodes infraName=slcs27 infraType=CLUSTER 
                  launchNodes=slcs27adm03,slcs27adm04
     patchmetadata registerlaunchnodes infraType=SINGLE_VM_CLUSTER
                  launchNodes=slcs27adm03
     patchmetadata registerlaunchnodes infraName=cabinet_name infraType=CABINET launchNodes=FQDN_of_Launchnode 
                      launchNodeType=COMPUTE
     patchmetadata registerlaunchnodes infraName=qfab_name infraType=QFAB launchNodes=FQDN_of_Management_Host 
	              launchNodeType=MANAGEMENT_HOST
     patchmetadata registerlaunchnodes infraName=cabinet_name infraType=CABINET  launchNodes=FQDN_of_Management_Host 
	              launchNodeType=MANAGEMENT_HOST

2)deregisterlaunchnodes
  Usage:
  patchmetadata deregisterlaunchnodes infraName=<Name of the infra>
  Description: Deregister all the launchnodes of an infra for infra patching
  Arguments:
    infraName(Optional): Name of the infra
    infraType(Mandatory): Name of the infra type(CLUSTER|CABINET|QFAB|SINGLE_VM_CLUSTER)
    launchNodes(Optional): Comma seperated list of launch node names
  Example:
    patchmetadata deregisterlaunchnodes infraType=SINGLE_VM_CLUSTER
    patchmetadata deregisterlaunchnodes infraName=slcs27 infraType=SINGLE_VM_CLUSTER
    patchmetadata deregisterlaunchnodes infraName=slcs27 infraType=SINGLE_VM_CLUSTER launchNodes=slcs27adm03,slcs27adm04
    patchmetadata deregisterlaunchnodes infraName=slcs27 infraType=SINGLE_VM_CLUSTER launchNodes=slcs27adm03
    patchmetadata deregisterlaunchnodes infraType=SINGLE_VM_CLUSTER launchNodes=slcs27adm03,slcs27adm04
    patchmetadata deregisterlaunchnodes infraType=SINGLE_VM_CLUSTER launchNodes=slcs27adm03

3)getlaunchnodes
  Usage:
  patchmetadata getlaunchnodes [infraName=<Name of the infra>] [infraType=<Type of infra CLUSTER|CABINET|QFAB|SINGLE_VM_CLUSTER>]
  Description:Get the registered launch node for an infra
  Arguments:
    infraName: Name of the infra
    infraType: Type of infra CLUSTER|CABINET|QFAB|SINGLE_VM_CLUSTER
  Example:
    patchmetadata getlaunchnodes infraName=slcs27 infraType=CLUSTER
    patchmetadata getlaunchnodes infraName=slcs27
    patchmetadata getlaunchnodes

4)registerpluginscript
  Usage:
  patchmetadata registerpluginscript [PluginTarget=<Name of the PluginTarget dom0|cell>] [PluginType=<PluginType exacloud|oneff>] [ScriptAlias=<Alias name for the script to be executed>]  [ScriptName=<Script Name>] [ScriptBundleHash=<ScriptBundle Checksum>] [ChangeRequestId=<ChangeRequestId>] [Description-<Brief description about the script>] [IsEnabled = < Script is enabled to run or not Yes|No>] [FailOnError= Fail the execution flow or not upon error Yes|No] [Phase=<Stage Pre|Post>]
  Description: Register a plugin script for a particular PluginTarget with a specific PluginType with all other metadata about the script
  Arguments:
    PluginTarget: PluginTarget determines where the plugins are going to be executed, it can be dom0 or cell
    PluginType: Execution context of the script. It can be exacloud or oneoff
	ScriptAlias: Represents simplified or alternative form of the script name. This alias name is used for modifying or deleting etc.
	ScriptName: Name of the script to be executed which include relative path from standard exacloud plugin scipts location
        ScriptBundleHash: The SHA256 hash of the tarball that contains the script, associated artifacts, and a checksum file
	ChangeRequestId: The ChangeRequestID created for the process of registering the script
	Description: This is to provide comprehensive details about the script, including a brief description of its functionality. Additionally, include Ownership details to capture information about the scripts owner details such as component owner or team distribution list(DL)
	IsEnabled: This is to determine whether the script still required to be executed in the environment, with this attribute we can temporarily disable a script to be executed. Default value is Yes
	FailOnError: This is to determine whether to stop infra patching flow in case of script execution failure. Default value is Yes
	Phase: Refers to the phase during which the script is executed. It can be pre, post or empty. This is applicable only for exacloud PluginType script
	
  Example:
    patchmetadata registerpluginscript ScriptName=syslens.sh ScriptAlias=syslens_upgrade_script ScriptBundleHash=f2a4a38333e66e369c4089a70a29ab371431e68dc05a2b598c732e9bf91e38fc ChangeRequestId=CRID-1234 Description="syslens.sh upgrades syslens rpm on the dom0 node.This script is owned DB Cloud Frameworks team which develops Syslens/Applin." PluginType=oneoff PluginTarget=dom0

5)listpluginscripts
  Usage:
  patchmetadata listpluginscripts [PluginTarget=<Name of the infra>] [PluginType=<PluginType exacloud|oneff>] [ScriptAlias=<Alias name for the script to be executed>]
  Description: Get the registered plugin scripts
  Arguments:
    PluginTarget: PluginTarget determines where the plugins are going to be executed, it can be dom0 or cell
    PluginType: Execution context of the script. It can be exacloud or oneoff
	ScriptAlias: Represents simplified or alternative form of the script name. This alias name is used for modifying or deleting etc.
	
  Example:
	ecra> patchmetadata listpluginscripts
	* {"InfraPatchPluginMetaData": [{"ScriptName": "syslens_deployer.sh", "ScriptBundleHash": "f2a4a38333e66e369c4089a70a29ab371431e68dc05a2b598c732e9bf91e38fc", "ScriptAlias": "syslens_deployer", "ChangeRequestID": "CRID-123456", "Description": "This upgrades the syslens rpm on the dom0. DBCF syslens team owns this script", "PluginType": "exacloud", "PluginTarget": "dom0", "ScriptOrder": "1000", "IsEnabled": "Yes", "Phase": "Post", "RebootNode": "No", "FailOnError": "No"}], "status": 200, "op": "infrapatchpluginscripts_register_get", "status-detail": "success"}
        ecra>

	ecra>  patchmetadata listpluginscripts PluginTarget=dom0 PluginType=exacloud
	* {"InfraPatchPluginMetaData": [{"ScriptName": "syslens_deployer.sh", "ScriptBundleHash": "f2a4a38333e66e369c4089a70a29ab371431e68dc05a2b598c732e9bf91e38fc", "ScriptAlias": "syslens_deployer", "ChangeRequestID": "CRID-123456", "Description": "This upgrades the syslens rpm on the dom0. DBCF syslens team owns this script", "PluginType": "exacloud", "PluginTarget": "dom0", "ScriptOrder": "1000", "IsEnabled": "Yes", "Phase": "Post", "RebootNode": "No", "FailOnError": "No"}], "status": 200, "op": "infrapatchpluginscripts_register_get", "status-detail": "success"}
	ecra>

	ecra>  patchmetadata listpluginscripts PluginTarget=dom0 PluginType=exacloud ScriptAlias=syslens_deployer
	* {"InfraPatchPluginMetaData": [{"ScriptName": "syslens_deployer.sh", "ScriptBundleHash": "f2a4a38333e66e369c4089a70a29ab371431e68dc05a2b598c732e9bf91e38fc", "ScriptAlias": "syslens_deployer", "ChangeRequestID": "CRID-123456", "Description": "This upgrades the syslens rpm on the dom0. DBCF syslens team owns this script", "PluginType": "exacloud", "PluginTarget": "dom0", "ScriptOrder": "1000", "IsEnabled": "Yes", "Phase": "Post", "RebootNode": "No", "FailOnError": "No"}], "status": 200, "op": "infrapatchpluginscripts_register_get", "status-detail": "success"}
	ecra>

6)updatepluginscript
  Usage:
  patchmetadata updatepluginscript [PluginTarget=<Name of the infra>] [PluginType=<PluginType exacloud|oneff>] [ScriptAlias=<Alias name for the script to be executed>] [ScriptName=<Script Name>] [ScriptBundleHash=<ScriptBundle Checksum>] [ChangeRequestId=<ChangeRequestId>] [Description = <Brief description about the script>] [IsEnabled = < Script is enabled to run or not Yes|No>] [FailOnError= Fail the execution flow or not upon error Yes|No] [Phase=<Stage Pre|Post>]
  Description: Update metadata of a registered plugin script for a particular PluginTarget with a specific PluginType having a specific ScriptAlias
  Arguments:
    PluginTarget: PluginTarget determines where the plugins are going to be executed, it can be dom0 or cell.This is mandatory parameter
    PluginType: Execution context of the script. It can be exacloud or oneoff. This is mandatory parameter
	ScriptAlias: Represents simplified or alternative form of the script name. This alias name is used for modifying or deleting etc. This is mandatory parameter
	ScriptName: Name of the script to be executed which include relative path from standard exacloud plugin scipts location
        ScriptBundleHash: The SHA256 hash of the tarball that contains the script, associated artifacts, and a checksum file
	ChangeRequestId: The ChangeRequestID created for the process of registering the script
	Description: This is to provide comprehensive details about the script, including a brief description of its functionality. Additionally, include Ownership details to capture information about the scripts owner details such as component owner or team distribution list(DL)
	IsEnabled: This is to determine whether the script still required to be executed in the environment, with this attribute we can temporarily disable a script to be executed. Default value is Yes
	FailOnError: This is to determine whether to stop infra patching flow in case of script execution failure. Default value is Yes
	Phase: Refers to the phase during which the script is executed. It can be pre, post or empty. This is applicable only for exacloud PluginType script
	
  Example:
    patchmetadata updatepluginscript ScriptAlias=syslens_upgrade_script PluginType=oneoff PluginTarget=dom0 IsEnabled=No FailOnError=Yes

7)deregisterpluginscript
  Usage:
  patchmetadata deregisterpluginscript [PluginTarget=<Name of the infra>] [PluginType=<PluginType exacloud|oneff>] [ScriptAlias=<Alias name for the script to be executed>]
  Description: Deregister metadata of a registered plugin script
  Arguments:
    PluginTarget: PluginTarget determines where the plugins are going to be executed, it can be dom0 or cell
    PluginType: Execution context of the script. It can be exacloud or oneoff
	ScriptAlias: Represents simplified or alternative form of the script name. This alias name is used for modifying or deleting etc.
	
  Example:
    patchmetadata deregisterpluginscript PluginTarget=dom0 PluginType=oneoff ScriptAlias=syslens_upgrade_script

8)syncvmstate
  Usage:
  patchmetadata syncvmstate rackName=<Name of rack> vmCustomerHostName=<Customer Hostname of VM>  [vmState=<State of the VM like stopped/running. optional parameter>]
  Description:Updates VM state metadata(stopped/running) in ECRA. If vmState is specified, will only update ECRA metadata. If vmState is not specified, will sync vmState between ECRA and Exacloud
  Arguments:
    rackName: Name of the Rack
    vmCustomerHostName: Customer Hostname of the VM for which VM state (stopped/running) needs to be synchronized
    vmState: Optional parameter specifying vm state like running/stopped
  Example:
    patchmetadata syncvmstate rackName=slcs27 vmCustomerHostName=auto-hbzvr1.client.infrapatchdev.oraclevcn.com
    patchmetadata syncvmstate rackName=slcs27 vmCustomerHostName=auto-hbzvr1.client.infrapatchdev.oraclevcn.com vmState=stopped

9)syncinfraimages
  Usage:
  patchmetadata syncinfraimages rackName=<Name of rack> targetType=<targetType like dom0 or cell - optional parameter>
  Description: Sync node images version for infra components (dom0,cell) between Exacloud and ECRA
  Arguments:
    rackName: Name of the Rack
    targetType: Optional parameter specifying targetType like dom0 or cell
  Example:
    patchmetadata syncinfraimages rackName=slcs27
    patchmetadata syncinfraimages rackName=slcs27 targetType=cell
    patchmetadata syncinfraimages rackName=slcs27 targetType=dom0
10)deletelaunchnodemetadata
  Usage:
  patchmetadata deletelaunchnodemetadata LaunchNode=<Name of the launchNode> RequestId=<ECRA request ID>
  Description: Delete launchNode metadata about running patch operations
  Arguments:
    LaunchNode: Name of the launchNode
    RequestId: ECRA request ID
  Example:
    patchmetadata deletelaunchnodemetadata LaunchNode=slcs27adm0304.us.oracle.com
    patchmetadata deletelaunchnodemetadata RequestId=e1443b1c-4113-11f0-b643-00001701ee8d
    patchmetadata deletelaunchnodemetadata RequestId=e1443b1c-4113-11f0-b643-00001701ee8c LaunchNode=slcs27adm0304.us.oracle.com

network
1) configuredns
Usage:
oci network configuredns subnetid=<SUBNETID> fqdn=<FQDN> ips=<IP1,IP2>
Values:
<SUBNETID>: Subnet to use for this DNS Record
<FQDN>: Hostname with the Subnet domain
<IP1,IP2>: List of ips comma separeted
Purpose:
Create a new DNS record
Examples:
oci network configuredns
subnetid=ocid1.subnet.region1.sea.aaaaaaaaksskxfuoepbn77r7y3gmkb7kxocvd2dqmsah5omwzbfzt4ahqzia
fqdn=aztest-scan.client.ecrapreprov.oraclevcn.com
ips=10.0.49.73,10.0.24.251,10.0.50.250
* {
  "opc-request-id":
"/6DAD55C570C242740B5EBFB907FF09BC/B017453D9FCD6A89B62D60BD86D932BD",
  "etag":
"\"50ocid1.dns-zone.region1.sea.aaaaaaaav5npmvplhkx3ujafkduke2y4uvueirow53fqywa5prbyh744mr3qf3b7b458c11e3adf33c912ee8dbe7d18#application/json\"",
  "httpcode": 200,
  "response": {
    "items": [
      {
        "domain": "aztest-scan.client.ecrapreprov.oraclevcn.com",
        "rdata": "10.0.49.73",
        "rrsetVersion": "50",
        "rtype": "A",
        "ttl": 3600,
        "recordHash": "fc6f52e172effff9045d8c0088396006",
        "isProtected": true
      },
      {
        "domain": "aztest-scan.client.ecrapreprov.oraclevcn.com",
        "rdata": "10.0.24.251",
        "rrsetVersion": "50",
        "rtype": "A",
        "ttl": 3600,
        "recordHash": "01c343875aae609e991e8546b5cb6651",
        "isProtected": true
      },
      {
        "domain": "aztest-scan.client.ecrapreprov.oraclevcn.com",
        "rdata": "10.0.50.250",
        "rrsetVersion": "50",
        "rtype": "A",
        "ttl": 3600,
        "recordHash": "56daaa8e7c8db350fed3a3fb9ca89637",
        "isProtected": true
      }
    ]
  },
  "status": 200
}

2) getdns
Usage:
oci network getdns subnetid=<SUBNETID> fqdn=<FQDN> ips=<IP1,IP2>
Values:
<SUBNETID>: Subnet to use for this DNS Record
<FQDN>: Hostname with the Subnet domain
Purpose:
Get a single DNS record
Examples:
ecra> oci network getdns
subnetid=ocid1.subnet.region1.sea.aaaaaaaaksskxfuoepbn77r7y3gmkb7kxocvd2dqmsah5omwzbfzt4ahqzia
fqdn=aztest-scan.client.ecrapreprov.oraclevcn.com
* {
  "opc-request-id":
"/AC87069B254EF0D8F927DC434D6BD106/DEB0101D596535E7E2D0A78F25DBBA37",
  "etag":
"\"50ocid1.dns-zone.region1.sea.aaaaaaaav5npmvplhkx3ujafkduke2y4uvueirow53fqywa5prbyh744mr3qdbdfa4c458c0f84af56ced3dd58accbd#application/json\"",
  "httpcode": 200,
  "response": {
    "items": [
      {
        "domain": "aztest-scan.client.ecrapreprov.oraclevcn.com",
        "rdata": "10.0.24.251",
        "rrsetVersion": "50",
        "rtype": "A",
        "ttl": 3600,
        "recordHash": "01c343875aae609e991e8546b5cb6651",
        "isProtected": true
      },
      {
        "domain": "aztest-scan.client.ecrapreprov.oraclevcn.com",
        "rdata": "10.0.50.250",
        "rrsetVersion": "50",
        "rtype": "A",
        "ttl": 3600,
        "recordHash": "56daaa8e7c8db350fed3a3fb9ca89637",
        "isProtected": true
      },
      {
        "domain": "aztest-scan.client.ecrapreprov.oraclevcn.com",
        "rdata": "10.0.49.73",
        "rrsetVersion": "50",
        "rtype": "A",
        "ttl": 3600,
        "recordHash": "fc6f52e172effff9045d8c0088396006",
        "isProtected": true
      }
    ]
  },
  "status": 200
}
3) deletedns
Usage:
oci network deletedns subnetid=<SUBNETID> fqdn=<FQDN> ips=<IP1,IP2>
Values:
<SUBNETID>: Subnet to use for this DNS Record
<FQDN>: Hostname with the Subnet domain
Purpose:
Delete a single DNS Record
Examples:
ecra> oci network deletedns
subnetid=ocid1.subnet.region1.sea.aaaaaaaaksskxfuoepbn77r7y3gmkb7kxocvd2dqmsah5omwzbfzt4ahqzia
fqdn=aztest-scan.client.ecrapreprov.oraclevcn.com
* {
  "opc-request-id":
"/E56923ED211F59A2924D65535155F312/5CB55BC69781146040AD22E8E49903EE",
  "httpcode": 204,
  "status": 200
}

########
# ECRA #
########

Description
Deletes Files from ecra_files table

Usages
`ecra deletepayloads olderthan=<DATE|INTERVAL> [onlycheck=<true|false>]`

Values
`  olderthan: Interval expected to be 1D-30D or 1M-12M or 1Y-9Y, Date is expected to be in the format YYYY-MM-DD HH24:MI:SS`
`  onlycheck: The define the service type of this entry`

Examples
```
        ecra> ecra deletapayloads oltherthan=1M onlycheck=false
        ecra> ecra deletepayloads olderthan=1M
        * {
            "recordsFound": 871,
            "status": 200,
            "op": "ecra_file_get",
            "status-detail": "success"
        }
        ecra> ecra deletepayloads olderthan=2M onlycheck=false
        * {
            "recordsFound": 595,
            "recordsDeleted": 595,
            "status": 200,
            "op": "ecra_file_get",
            "status-detail": "success"
        }
```
________________________________________________________________________________
#######
# TOPOLOGY #
#######
Purpose: to get the Topology info of clusters

1) Get topology for rack
  Usage:
    topology get_topology_for_ad [ad=<AD>] [service=<SERVICE>] [rackname=<RACKNAME>] [switchname=<SWITCHNAME>] [clustername=<CLUSTERNAME>] [vmclusterocid=<VMCLUSTER_OCID>]
  Values:
    <AD>: Availability Domain (e.g phx1)
    <SERVICE>: Service name (e.g EXACS)
    <RACKNAME>: Rack name (e.g PHX106516)
    <SWITCHNAME>: Switch name (e.g phx8-q1-b15-t0-r1)
    <CLUSTERNAME>: Cluster name (e.g phx106507exd-d0-01-02-cl-01-03-clu01)
    <VMCLUSTER_OCID>: Vm cluster ocid (e.g ocid1.cloudvmcluster.region1.sea.anz...)
  Purpose:
    Get the Topology info for an AD for specified rack or switch or cluster. If vmclusterocid is provided, result will be from ECRA db. 
  Examples:
   ecra> topology get_topology_for_ad ad=yny1 service=exacs rackname=YNY102320
http://iad2pprdedcsecra3.ecramgmt.adminiad2.oraclevcn.com:9022/ecra/endpoint/topology/v1/availabilityDomains/yny1?serviceType=exacs&rackNumber=YNY102320
* {
  "numResult": "1",
  "pageIndex": "1",
  "rackList": [
    {
      "rackName": "YNY102320",
      "physicalRackNumber": "2320",
      "location": {
        "region": "yny",
        "availabilityDomain": "yny.ad1",
        "building": "yny1",
        "room": "yny1.2",
        "qFabId": "placeholder",
        "block": "placeholder"
      },
      "platform": "Exadata_X9M_DB_E4_Rack.01",
      "model": "X9M-2",
      "rackSerialNumber": "2214XC807M",
      "rackSkId": "sk-8d9b33d9-d5ad-489d-ba45-5c941258b797",
      "qfabt0": [
        "yny1-q1-b7-t0-r4",
        "yny1-q1-b7-t0-r5"
      ],
      "cfabt0": [
        "yny1-c1-b7-t0-r4",
        "yny1-c1-b7-t0-r5"
      ],
      "utility": [
        "yny1-c1-b7-t0-r4-u1",
        "yny1-c1-b7-t0-r5-u1"
      ],
      "examgmt": [],
      "uniqueCustomer": [
        {
          "customerName": "atpdpreview1",
          "customerId": "ocid1.tenancy.oc1..aaaaaaaazvf7emjicjm7456wdt3ioch7zj62x6i4vdzatzbheopf6xdtxzpa"
        },
        {
          "customerName": "poscosteel",
          "customerId": "ocid1.tenancy.oc1..aaaaaaaaqrc6pwdtcweha3zoxth3gkbdgdr4lxdyp4odcxe7pehljuakrqnq"
        },
        {
          "customerName": "ssecdw",
          "customerId": "ocid1.tenancy.oc1..aaaaaaaabzn6qqvqrwksddrwiczxnx66j42vxgsqkx24pyco5w7t6gwqjwva"
        },
        {
          "customerName": "",
          "customerId": ""
        }
      ],
      "dbServer": [
        {
          "hostName": "yny102320exdd014.yny1xx2xx0071qf.adminyny1.oraclevcn.com",
          "clusterName": "",
          "ceiId": "",
          "tenancyName": "",
          "tenancyId": "",
          "compartmentId": "",
          "nodeSerialNumber": "2213XCR0DH",
          "exadataOsVersion": "22.1.16.0.0.231012",
          "vlanIds": [
            "placeholder1",
            "placeholder2"
          ],
          "mlioServers": [
            "placeholder1",
            "placeholder2"
          ],
          "guestVMs": [
            {
              "vmName": "placeholder",
              "customerName": "placeholder",
              "customerId": "placeholder"
            }
          ]
        },
        ...
  ],
  "status": 200,
  "op": "topology_ad_get",
  "status-detail": "success"
}

2) Get topology network switch data for physical rack number
  Usage:
    topology get_network_switch_for_ad [ad=<AD>] [physicalRackNumber=<PHYSICALRACKNUMBER>]
  Values:
    <AD>: Availability Domain (e.g phx1)
    <PHYSICALRACKNUMBER>: The physical rack number (e.g. 3023)
  Purpose:
    Get the network switch data for a given list of physical rack number
  Examples:
ecra>  topology get_network_switch_for_ad ad=yny1 physicalRackNumber=3023
http://iad2pprdedcsecra3.ecramgmt.adminiad2.oraclevcn.com:9022/ecra/endpoint/topology/v1/networkSwitches/yny1?physicalRackNumber=3023
* {
  "networkSwitchList": [
    {
      "name": "yny1-c1-b9-t1-r10",
      "uid": "bldg1-block9-rack2-cfabt12",
      "ad": "ad1",
      "building": "yny1",
      "physicalRackNumber": "3023",
      "block": "bldg1-block9",
      "elevation": "11",
      "phys": "yny1:3023:11",
      "role": "cfabt1",
      "model": "Juniper QFX5200-32C-AFI",
      "address": "198.18.64.121",
      "asn": "64818",
      "osFamily": "junos",
      "os": "JUNOS 20.2R3-S3.7",
      "serialNumber": "WH3622360216",
      "isImported": "false"
    },
    ......

  ],
  "nextPage": 0,
  "status": 200,
  "op": "topology_networkSwitch_get",
  "status-detail": "success"
}

```

#################
# SITEGROUP ADD #
#################

Description
Add information about site group
if you include the parameter backfill equals to Y the information about the site group into the table ecs_hw_cabinet will be updated

Usages
ecra sitegroup add name=<name_id> building=<building_id> restricted=[Y|N] ad=<ad_id> [region=<region_name>] cloudvendor=<OCI/Indigo/Oasis> cloudproviderregion=<value> cloudprovideraz=AZ1  cloudproviderbuilding=building1 [mtu=<value>] [farchildsite=<[N]/Y>] [overlaybridgeused=<[N]/Y>]
Note: to the backfill It is necessary that all the nodes that make up the cabinet are in FREE or in case of a QR that the rack is in a ready status.

Values
    "region": "IAD1",
    "name": "iad13.c1",
    "building": "iad13",
    "cloudvendor": "OCI",
    "cloudproviderregion":"OCI",
    "restricted": "y",
    "ad": "ad1",
    "cloudprovideraz": "AZ1",
    "cloudproviderbuilding": "building1"

Examples
ecra sitegroup add name=iad13.c1 building=iad13 restricted=N ad=ad1 cloudvendor=OCI cloudproviderregion=OCI cloudprovideraz=AZ1  cloudproviderbuilding=building1
{
    "region": "IAD1",
    "name": "iad13.c1",
    "cloudvendor": "OCI",
    "cloudproviderregion":"OCI",
    "building": "iad13", 
    "restricted": "y",
    "ad": "ad1",
    "cloudprovideraz": "AZ1",
    "cloudproviderbuilding": "building1",
    "status": 200,
    "op": "backfillsitegrouppost",
    "status-detail": "success"
}


ecra> sitegroup add building=iad1 name=TEST.iad1 restricted=Y ad=IAD1 region=iad1.region backfill=Y cloudvendor=Indigo cloudprovideraz=AZ1  cloudproviderbuilding=building1
* {
    "ad": "IAD1",
    "backfill": "Y",
    "building": "iad1",
    "cloudvendor": "Indigo",
    "name": "TEST.iad1",
    "region": "iad1.region",
    "restricted": "Y",
    "cloudprovideraz": "AZ1",
    "cloudproviderbuilding": "building1",
    "status": 200,
    "op": "sitegroupaddpost",
    "status-detail": "success"
}


```

##################
# SITEGROUP LIST #
##################

Description
list information about site group
ecra>sitegroup list

Usages
`ecra sitegroup list [building=<value>] [cloudvendor=<cloud vendor name>] [cloudproviderregion=<value>] cloudprovideraz=<value>  cloudproviderbuilding=<value> `

Values
`  building: specify the building used to filter the information

Examples

ecra>sitegroup list
```
> sitegroup list
* {
    "sitegroup": [
        {
            "region": "IAD12",
            "name": "iad13.c1",
            "ad": "ad1",
            "building": "iad13",
            "restricted": "Y"
        },
        {
            "region": "iad13.c2",
            "ad": "ad1",
            "building": "iad14",
            "restricted": "N"
        },
        {
            "region": "iad1.region12",
            "name": "tstName.ind",
            "ad": "IAD1",
            "building": "iadct3.id1",
            "restricted": "N"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}

ecra> sitegroup list building=iad13 
* {
    "sitegroup": [
        {
            "region": "iad1.region16",
            "name": "NAME.iad3",
            "ad": "IAD3",
            "building": "tstry",
            "restricted": "Y"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}

ecra> sitegroup list cloudvendor=Azure
* {
    "sitegroup": [
        {
            "region": "region",
            "name": "name4",
            "ad": "ad",
            "building": "building2",
            "restricted": "Y",
            "cloud_vendor": "Azure",
            "cloud_provider_region": "region-01"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}
ecra> 



ecra> sitegroup list cloudproviderregion=region-01
* {
    "sitegroup": [
        {
            "region": "region",
            "name": "name4",
            "ad": "ad",
            "building": "building2",
            "restricted": "Y",
            "cloud_vendor": "Azure",
            "cloud_provider_region": "region-01"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}


## update two or more params at same time

ecra> sitegroup update name=ad16.c1  cloudproviderbuilding=building16b region=R2
* {
    "status": 200,
    "op": "cabinet_update_put",
    "status-detail": "success"
}
ecra> sitegroup list  name=ad16.c1  cloudproviderbuilding=building16b region=R2
* {
    "sitegroup": [
        {
            "region": "R2",
            "name": "ad16.c1",
            "ad": "AD1",
            "building": "ad16",
            "restricted": "Y",
            "cloud_vendor": "Azure",
            "cloud_provider_region": "regionAZ1",
            "cloud_provider_az": "AZ2",
            "cloud_provider_building": "building16b"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}


##################
# SITEGROUP UPDATE #
##################

Description
Updates information about site group
ecra>sitegroup update

Usages
`ecra sitegroup update <name> [key=value]*`

Values
`  sitegroupname: specify the name of the sitegroup to update

Examples

ecra>sitegroup update
```
ecra> sitegroup update tstName.ind cloudvendor=newvendor
* {
    "status": 200,
    "op": "cabinet_update_put",
    "status-detail": "success"
}

ecra> sitegroup update tstName.ind cloudvendor=newvendor cloudproviderregion=newcloudproviderregion
* {
    "status": 200,
    "op": "cabinet_update_put",
    "status-detail": "success"
}

## update two or more params at same time

ecra> sitegroup update name=ad16.c1  cloudproviderbuilding=building16b region=R2
* {
    "status": 200,
    "op": "cabinet_update_put",
    "status-detail": "success"
}
ecra> sitegroup list  sitegroupname=ad16.c1  cloudproviderbuilding=building16b region=R2
* {
    "sitegroup": [
        {
            "region": "R2",
            "name": "ad16.c1",
            "ad": "AD1",
            "building": "ad16",
            "restricted": "Y",
            "cloud_vendor": "Azure",
            "cloud_provider_region": "regionAZ1",
            "cloud_provider_az": "AZ2",
            "cloud_provider_building": "building16b"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}

##################
# SITEGROUP UPDATERPM #
##################

Description
Updates information about site group rpm for the entire Cloud vendor
ecra>sitegroup update

Usages
`ecra sitegroup updaterpm  cloudvendor=<value> dbaastoolsrpm=<name> dbaastoolsrpmchecksum=<sha256 checksum>`

Values
`  cloudvendor: specify the name of the cloudvendor to update`
`  dbaastoolsrpm: specify the dbaas tools rpm that will be used for the specific cloud vendor`
`  dbaastoolsrpmchecksum: Specify the dbaas tools rpm checksum for the given rpm`

Examples 


ecra> help sitegroup updaterpm
sitegroup updaterpm cloudvendor=<value> dbaastoolsrpm=<name>
dbaastoolsrpmchecksum=<SHA256 value>
 Update default RPM used into cloud vendor in case is not the default one


ecra> sitegroup updaterpm cloudvendor=Azure dbaastoolsrpm=Azure.rpm
dbaastoolsrpmchecksum=d1ae43a9922c2698186a16e396ab26ac36d9a18d3ecf5c4de03f76f8f4535850
* {
    "status": 200,
    "op": "cabinet_update_put",
    "status-detail": "success"
}
ecra> sitegroup list
* {
    "sitegroup": [
        {
            "region": "iad1.region1",
            "name": "tstName4.ind",
            "ad": "IAD1",
            "building": "iadct4.id1",
            "restricted": "Y",
            "cloud_vendor": "Azure",
            "cloud_provider_region": "test2",
            "cloud_provider_az": "AZ1",
            "cloud_provider_building": "building1",
            "mtu": 9000,
            "far_child_site": "N",
            "overlay_bridge_used": "N",
            "dbaastoolsrpm": "Azure.rpm",
            "dbaastoolsrpm_checksum":
"d1ae43a9922c2698186a16e396ab26ac36d9a18d3ecf5c4de03f76f8f4535850"
        },
        {
            "region": "iad1.region1",
            "name": "tstName.ind",
            "ad": "IAD1",
            "building": "iadct3.id1",
            "restricted": "N",
            "cloud_vendor": "OCI",
            "cloud_provider_region": "AZ1",
            "cloud_provider_az": "AZ1",
            "cloud_provider_building": "building1",
            "mtu": 9000,
            "far_child_site": "N",
            "overlay_bridge_used": "N",
            "dbaastoolsrpm": "dbaastools_exa_main.rpm",
            "dbaastoolsrpm_checksum": "testchecksum"
        },
        {
            "region": "iad1.region1",
            "name": "tstName2.ind",
            "ad": "IAD1",
            "building": "iadct3.id1",
            "restricted": "Y",
            "cloud_vendor": "Azure",
            "cloud_provider_region": "test2",
            "cloud_provider_az": "AZ1",
            "cloud_provider_building": "building1",
            "mtu": 9000,
            "far_child_site": "N",
            "overlay_bridge_used": "N",
            "dbaastoolsrpm": "Azure.rpm",
            "dbaastoolsrpm_checksum":
"d1ae43a9922c2698186a16e396ab26ac36d9a18d3ecf5c4de03f76f8f4535850"
        },
configurefeature:
Description
Update configured features

Usages
`ecra> sitegroup configurefeature name=tstNameindu8Ju57gVUj feature=vmboss value=enabled`

Values
* name: specify the name of the sitegroup to update
* feature: name of the feature to update
* value: enabled or disabled

Examples
ecra> sitegroup configurefeature name=tstNameindu8Ju57gVUj feature=vmboss value=enabled
* {
      "status": 200,
      "op": "sitegroup_vmboss_put",
      "status-detail": "success"
}

ecra> sitegroup list name=tstNameindu8Ju57gVUj
* {
    "sitegroup": [
        {
            "region": "iad1.region1",
            "name": "tstNameindu8Ju57gVUj",
            "ad": "IAD1",
            "building": "building",
            "restricted": "N",
            "cloud_vendor": "testvendor",
            "cloud_provider_region": "testproviderregion",
            "cloud_provider_az": "testcloudprovideraz",
            "cloud_provider_building": "testcloudproviderbuilding",
            "mtu": 9000,
            "far_child_site": "N",
            "overlay_bridge_used": "N",
            "configured_features": "ALL,-VMBOSS"
        }
    ],
    "status": 200,
    "op": "sitegrouplistget",
    "status-detail": "success"
}

##################
#    ARTIFACTS   #
##################


deliver :

Description
* Send a compressed file with instructions on how to install the binaries on the dom0, deliver rpm or other installables *

Arguments:
`artifact: Artifact name`
`source: Full path location of the artifact`
`target: Type of the target (infra, rack, node)`
`state: State of the target (FREE, PROVISIONED)`

Usages
`./ecracli artifact deliver artifact=<> source=<> target=<> state=<>`

Examples
```json
ecra> artifact deliver artifactname=sample01 source=/scratch/jzandate/artifacts/sample01.zip target=node state=FREE
* {
  "est_op_end_time": "",
  "message": "processing",
  "op": "artifact_deliver_post",
  "op_start_time": "2024-05-14T01:17:54+0000",
  "status": 202,
  "status-detail": "processing",
  "status_uri": "http://phoenix284828.dev3sub3phx.databasede3phx.oraclevcn.com:9001/ecra/endpoint/statuses/c9c98e20-8ef3-4a55-9bec-d2c8ea99a1c2"
}
```

deliver_status

Description
* Gets the status of the deliver process *

Arguments:
`statusid: status uuid`

Usages
`./ecracli artifact deliver_status statusid=<> `

Examples
```json
ecra> artifact deliver_status statusid=c9c98e20-8ef3-4a55-9bec-d2c8ea99a1c2
* {
  "op": "requests_get",
  "result": {
    "component_response": {
      "dom0": [
        {
          "error_code": "0x02030007",
          "error_details": "ls: cannot access 'dom0monitor.rpm': No such file or directory",
          "hostname": "iad103714exdd005.iad103714exd.adminiad1.oraclevcn.com",
          "status": "fail"
        },
        {
          "error_code": "0x00000000",
          "error_details": "",
          "hostname": "iad103714exdd006.iad103714exd.adminiad1.oraclevcn.com",
          "status": "success"
        }
      ]
    },
    "end_time": "2024-05-14T01:17:55+0000",
    "id": "c9c98e20-8ef3-4a55-9bec-d2c8ea99a1c2",
    "start_time": "2024-05-14T01:17:54+0000",
    "status": "200",
    "wf_uuid": "7352c4a3-c2be-48a8-802e-5f6db09751f6"
  },
  "status": 200,
  "status-detail": "success"
}
```

________________________________________________________________________________
##################
#  SECURE ERASE  #
##################


secureerase:

Description
* On demand executes secure erase of cells provided or all existing in an infra *

Arguments:
`exadataInfrastructureId: Infra ID (CEIOCID)`
`idemtoken: required for concurrency`
`cellnodes: comma separated values of cell hostnames to target secure erase`

Usages
`./ecracli exadatainfrstructure secureerase exadataInfrastructureId=<> cellnodes<> idemtoken=<>`

Examples
```json
ecra>  exadatainfrastructure secureerase exadataInfrastructureId=testdbsystem idemtoken=0c73d6d0-1992-4bcf-b86b-91fe853a574c
* {"status": 202, "status_uri": "http://iad1devecra1.ecramgmt.adminiad1.oraclevcn.com:9001/ecra/endpoint/statuses/b0ee2e9d-19ff-4da0-b10d-14151de81812", "op": "cei_secure_erase_post", "op_start_time": "2024-08-16T21:38:50+0000", "est_op_end_time": "", "message": "processing", "status-detail": "processing"}
```

getsecureerasecert

Description
* This command will download the generated certificates for the secure erase operation that happend on delete infra, delete storage or on demand secure erase *

Arguments:
`exadataInfrastructureId: CEIOCID`
`path: path to save the generated certs`
`operationtype: used to filter to a single operation type (INFRA_DELETE, STORAGE_DELETE, SECURE_ERASE)`
`cellnode: used to filter a single or multiple cell nodes (works only with delete storage and secure erase using specific nodes)`
`downloadtype: this defines the type of the response use FILE to save response in a file using "path" or DIRECT to download the file to user request, use OSSFile or OSSDirect to download certificates from OSS, GENERATE_URL will generate a PAR URL`

Usages
`./ecracli exadatainfrastructure getsecureerasecert exadataInfrastructureId=<> [path=<> operationtype=<> cellnode=<> downloadtype=<>]`

Examples
```json
ecra> exadatainfrastructure getsecureerasecert exadataInfrastructureId=testdbsystem path=/u01/ecra_preprov/oracle/ecra_installs/ecra2341/certs2.zip operationtype=INFRA_DELETE
*
* Using path: /u01/ecra_preprov/oracle/ecra_installs/ecra2341/certs2.zip
* {"file": "/u01/ecra_preprov/oracle/ecra_installs/ecra2341/certs2.zip", "status": 200, "op": "exainfra_secureerase_get", "status-detail": "success"}
```

________________________________________________________________________________
######################
# PasswordManagement #
######################

1) validatepassword
    Usages:
        passwordmanagement validatepassword [username=<username>]
    Values:
        <username> : The username of user to be validated. If not provided, validation is run for all users
    Purpose:
        Validate password stored in SIV with that in ECRA DB for all/given user
    Example:
        ecra> passwordmanagement validatepassword
        * {
            "validationResult": [
                {
                    "user": "admin",
                    "result": "success"
                },
                {
                    "user": "sdi",
                    "result": "success"
                },
                {
                    "user": "dod",
                    "result": "success"
                },
                {
                    "user": "ops",
                    "result": "success"
                },
                {
                    "user": "mdbcs",
                    "result": "success"
                },
                {
                    "user": "srguser",
                    "result": "success"
                }
            ],
            "status": 200,
            "op": "passwordmanagement_validate_all_get",
            "status-detail": "success"
        }
        
        ecra> passwordmanagement validatepassword username=admin
        * {
            "validationResult": "success",
            "status": 200,
            "op": "passwordmanagement_validate_get",
            "status-detail": "success"
        }

________________________________________________________________________________
######################
# Exascale vaults #
######################

1) vault
    Usages:     
        Get vaault details for a given exadata Infrastructyre
    Example:
        ecra> vault details
        exaOcid=ocid1.exadatainfrastructure.region1.sea.***
        * Get Vault details with parameters:
        * exaOcid :
        ocid1.exadatainfrastructure.region1.sea.**
        * GET
        http://ecra-vm6.ecra.ociexacc.oraclevcn.com:9026/ecra/endpoint/exadata/ocid1.exadatainfrastructure.region1.sea.anzwkljs3vfwx6qavdpfcjjxyipcg26mvntbfoqprbzv3zprlgwk4mhxrreq/vaults
        * {
            "message": "Operation to get details of all vaults in the fleet is
        successful",
            "op": "ExascaleVaultsCC_GET",
            "status": 200,
            "status-detail": "success",
            "vaults": [
                {
                    "clusterNames": [
                        "iad137686exd-atpmg-scaqar01XXX-clu07"
                    ],
                    "vaultEcraId": "vault1clu07",
                    "vaultName": "vault1clu07",
                    "vaultOcid":
        "ocid1.exascaledbstoragevault.region1.sea.anzwkljs3vfwx6qa3tfyb5g7svqwqffsk6av4gqmvex66chi7itcg3vef7ja",
                    "vaultReferenceId": "vault1clu07",
                    "vaultSizeGB": "8000",
                    "vaultType": "DB",
                    "vaultUsedSizeGB": "865"
                },
                {
                    "clusterNames": [
                        "iad137686exd-atpmg-scaqar01XXX-clu06"
                    ],
                    "vaultEcraId": "vault1clu06",
                    "vaultName": "vault1clu06",
                    "vaultOcid":
        "ocid1.exascaledbstoragevault.region1.sea.anzwkljs3vfwx6qaqeximqsosk7ds72qekjw53eyiimszej6czjwp4m57waq",
                    "vaultReferenceId": "vault1clu06",
                    "vaultSizeGB": "10000",
                    "vaultType": "DB",
                    "vaultUsedSizeGB": "2"
                }
            ]
        }

________________________________________________________________________________
############################
# Operations Compatibility #
############################

1) Add
    Usages:
        compatibility add operationname=<operation name> secondoperation=<operation name>.
    Values:
        <operationname> : The name of the first operation in the compatibility
        <secondoperation> : The name of the second operation in the compatibility
    Purpose:
        Add compatibility between the specified operations
    Example:
        ecra> compatibility add operationname=reshape-cores secondoperation=exaunit-delete-cell
        * {
            "message": "Compatibility has been added successfully",
            "op": "compatibility_add_put",
            "status": 200,
            "status-detail": "success"
        }

2) Check
    Usages:
        compatibility check operationname=<operation name> secondoperation=<operation name>.
    Values:
        <operationname> : The name of the first operation in the compatibility
        <secondoperation> : The name of the second operation in the compatibility
    Purpose:
        Verify if the two specified operations are compatible
    Example:
        ecra> compatibility check operationname=reshape-cores secondoperation=reshape-storage
        * {
            "compatibility": "true",
            "message": "The operations are compatible",
            "op": "compatibility_check_post",
            "status": 200,
            "status-detail": "success"
        }

3) List
    Usages:
        compatibility list [operationname=<operation name>].
    Values:
        <operationname> : The name of the operation to list
    Purpose:
        List the compatibility between operations
    Example:
        ecra> compatibility list
        * {
            "op": "compatibility_list_get",
            "result": [
                {
                    "compatibility": [
                        "reshape-cores"
                    ],
                    "operationname": "reshape-storage"
                },
                {
                    "compatibility": [
                        "reshape-cores"
                    ],
                    "operationname": "exaunit-attach-cell"
                },
                {
                    "compatibility": [
                        "reshape-storage",
                        "exaunit-attach-cell",
                        "exaunit-delete-cell",
                        "oci-attach-cell"
                    ],
                    "operationname": "reshape-cores"
                },
                {
                    "compatibility": [
                        "reshape-cores"
                    ],
                    "operationname": "exaunit-delete-cell"
                },
                {
                    "compatibility": [
                        "reshape-cores"
                    ],
                    "operationname": "oci-attach-cell"
                }
            ],
            "status": 200,
            "status-detail": "success"
        }

        ecra> compatibility list operationname=reshape-cores
        * {
            "op": "compatibility_get",
            "result": [
                {
                    "compatibility": [
                        "reshape-storage",
                        "exaunit-attach-cell",
                        "exaunit-delete-cell",
                        "oci-attach-cell"
                    ],
                    "operationname": "reshape-cores"
                }
            ],
            "status": 200,
            "status-detail": "success"
        }

4) Remove
    Usages:
        compatibility remove operationname=<operation name> secondoperation=<operation name>.
    Values:
        <operationname> : The name of the first operation in the compatibility
        <secondoperation> : The name of the second operation in the compatibility
    Purpose:
        Removes the compatibility between the specified operations
    Example:
        ecra> compatibility remove operationname=reshape-cores secondoperation=exaunit-delete-cell
        * {
            "message": "Compatibility has been removed successfully",
            "op": "compatibility_remove_post",
            "status": 200,
            "status-detail": "success"
        }

4) Valid Operations
    Usages:
        compatibility validoperations
    Values:
    Purpose:
        List the valid operations that can be used in compatibility
    Example:
        ecra> compatibility validoperations
        * {
            "op": "compatibility_valid_operations_get",
            "status": 200,
            "status-detail": "success",
            "validoperations": [
                "PATCHING",
                "capacity_tenant_attcells",
                "create-addi-db",
                "create-data-diskgroup",
                "create-service",
                "create-sparse-diskgroup",
                "create-starter-db",
                "createATPDbSystem",
                "createDatabase",
                "db_backup",
                "db_listbackups",
                "dbaas_patch",
                "dbpatch",
                "delete-addi-db",
                "delete-exaservice",
                "delete-pod",
                "delete-starter-db",
                "dg_configure",
                "dg_deleteconn",
                "dg_failover",
                "dg_fresh_setup",
                "dg_reinstate",
                "dg_repeat_setup",
                "dg_state",
                "dg_switchover",
                "dg_verifyconn",
                "drop-diskgroup",
                "exaunit-attach-cell",
                "exaunit-delete-cell",
                "exaunit_resume",
                "exaunit_suspend",
                "exaunit_vmcmd_put",
                "fetch-info-diskgroup",
                "healthcheck_rackexachk",
                "oci-attach-cell",
                "rebalance-diskgroup",
                "reconfigure-connectivity",
                "recreate-create",
                "recreate-delete",
                "recreate-grid-create-db",
                "recreate-service",
                "reshape-cores",
                "reshape-service",
                "reshape-storage",
                "resize-data-diskgroup",
                "resize-sparse-diskgroup",
                "resume-updatecores",
                "reverify-connectivity",
                "snap-create",
                "snap-delete",
                "tm-create",
                "tm-delete",
                "update-cores",
                "update-service",
                "vm_command",
                "vm_sshcommand"
            ]
        }

________________________________________________________________________________
##################
# FAULTINJECTION #
##################
Purpose: to control the fault injection APIs for testing

1) Add infra
  Usage:
    faultinjection addinfra infraoci=<OCID>
  Values:
    <OCID>: Exadata infra OCID (e.g. ocid1.cloudexadatainfrastructure.....)
  Purpose:
    Add an Exa infra to the whitelist for fault injection testing
  Examples:
  ecra> faultinjection addinfra infraocid=ocid1.cloudexadatainfrastructure.oc1.phx.aaaaaa
* {
  "status": 200,
  "op": "fault_injection_infra_post",
  "status-detail": "success"
}

2) Delete infra
  Usage:
    faultinjection deleteinfra infraoci=<OCID>
  Values:
    <OCID>: Exadata infra OCID (e.g. ocid1.cloudexadatainfrastructure.....)
  Purpose:
    Delete an Exa infra from the whitelist for fault injection testing
  Examples:
  ecra> faultinjection addinfra infraocid=ocid1.cloudexadatainfrastructure.oc1.phx.aaaaaa
* {
  "status": 200,
  "op": "fault_injection_infra_post",
  "status-detail": "success"
}

3) List infra
  Usage:
    faultinjection listinfra
  Purpose:
    Get the list of the Exa infra in the whitelist for fault injection testing
  Examples:
  ecra> faultinjection listinfra
* {
  "whitelistedInfra": [
    "ocid1.cloudexadatainfrastructure.oc1.phx.aaaaaa",
    "ocid1.cloudexadatainfrastructure.oc1.phx.bbbbbb"
  ],
  "whitelistedInfraCount": 2,
  "status": 200,
  "op": "fault_injection_infra_list_get",
  "status-detail": "success"
}

______________________________________________________________________________________
####################
# RESOURCEBLACKOUT #
####################
Purpose: to control resource blackout APIs

1) Get latest
  Usage:
    resourceblackout getlatest resourcename=<resourceName>
  Purpose:
    Get latest entry from blackouts table with given resourcename
  Examples:
  ecra> resourceblackout getlatest resourcename=testresource4
* {
    "blackout": {
        "resourceName": "testresource4",
        "resourceType": "typeC",
        "creationTime": "2025-03-18 12:32:30.40326",
        "startTime": "2025-03-18T12:32:30+0000",
        "endTime": "2025-03-18T13:32:30+0000",
        "blackoutType": "typeX",
        "status": "ENABLED",
        "source": "abc",
        "comments": "abc",
        "alert": "abc",
        "operationAllowed": "abc",
        "id": 13
    },
    "status": 200,
    "op": "blackout_resource_get",
    "status-detail": "success"
}

2) Get History
  Usage:
    resourceblackout gethistory resourcename=<resourceName>
  Purpose:
    Get list of history of blackouts with given resourcename
  Examples:
ecra> resourceblackout gethistory resourcename=testresource4
* {
    "blackouts": [
        {
            "resourceName": "testresource4",
            "resourceType": "typeC",
            "creationTime": "2025-03-18 12:32:30.40326",
            "startTime": "2025-03-18T12:32:30+0000",
            "endTime": "2025-03-18T13:32:30+0000",
            "blackoutType": "typeX",
            "status": "ENABLED",
            "source": "abc",
            "comments": "abc",
            "alert": "abc",
            "operationAllowed": "abc",
            "id": 13
        }
    ],
    "status": 200,
    "op": "blackout_history_get",
    "status-detail": "success"
}

3) Get Enabled
  Usage:
    resourceblackout getenabled
  Purpose:
    Get list of all enabled blackouts
  Examples:
ecra> resourceblackout getenabled
* {
    "blackouts": [
        {
            "resourceName": "testresource4",
            "resourceType": "typeC",
            "creationTime": "2025-03-18 12:32:30.40326",
            "startTime": "2025-03-18T12:32:30+0000",
            "endTime": "2025-03-18T13:32:30+0000",
            "blackoutType": "typeX",
            "status": "ENABLED",
            "source": "abc",
            "comments": "abc",
            "alert": "abc",
            "operationAllowed": "abc",
            "id": 13
        }
    ],
    "status": 200,
    "op": "blackout_enabled_get",
    "status-detail": "success"
}

4) Create
  Usage:
    resourceblackout create payload=<path to payload>
  Purpose:
    Create entry in ecs_resource_blackout table
  Examples:
ecra> resourceblackout create payload=/tmp/resourceblackout.json
* {
    "status": 200,
    "op": "blackout_create_post",
    "status-detail": "success"
}

5) Update
  Usage:
    resourceblackout update resourcename=<resourceName> payload=<path to payload>
  Purpose:
    Update latest enabled/pending blackout entry of given resourcename
  Examples:
ecra> resourceblackout update resourcename=testresource4 payload=/tmp/updateblackout.json
* {
    "status": 200,
    "op": "blackout_update_put",
    "status-detail": "success"
}

6) Refresh
  Usage:
    resourceblackout refresh resourcename=<resourceName>
  Purpose:
    Refresh the status of latest enabled/pending blackout entry according to start time and end time
  Examples:
ecra> resourceblackout refresh resourcename=testresource4
* {
    "status": 200,
    "op": "blackout_refresh_put",
    "status-detail": "success"
}

7) Disable
  Usage:
    resourceblackout disable resourcename=<resourceName>
  Purpose:
    Disable status of latest blackout entry given resourceName
Examples:
ecra> resourceblackout disable resourcename=testresource4
* {
    "status": 200,
    "op": "blackout_update_put",
    "status-detail": "success"
}

